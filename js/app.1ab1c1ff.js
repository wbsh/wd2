(function(t){function e(e){for(var n,r,i=e[0],c=e[1],l=e[2],u=0,m=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&m.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var c=a[r];0!==o[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},s=[];function r(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-2d21b8a6":"f947f312"}[t]+".js"}function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=o[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=n);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=r(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",l.name="ChunkLoadError",l.type=n,l.request=s,a[1](l)}o[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0d68":function(t,e,a){},4123:function(t,e,a){},"4a60":function(t,e,a){"use strict";a("4123")},"54c6":function(module,__webpack_exports__,__webpack_require__){"use strict";function compareDays(t,e){return compareMonths(t,e)&&t.getDate()===e.getDate()}function compareMonths(t,e){return compareYears(t,e)&&t.getMonth()===e.getMonth()}function compareYears(t,e){return t.getFullYear()===e.getFullYear()}function searchStringInString(t,e){return t.toLowerCase().indexOf(e.toLowerCase())>-1}function matchExactString(t,e){return t===e}__webpack_exports__["a"]={number:function(t,e){return+t===+e},modifNumber:function modifNumber(numA,numB,mod){return eval("+numA"+mod+"+numB")},rangeNumber:function(t,e,a){return e<=t&&t<=a},string:function(t,e){return t&&searchStringInString(t,e)},exactString:function(t,e){return t&&matchExactString(t,e)},numAsString:function(t,e){return null!==t&&searchStringInString(""+t,e)},day:function(t,e){return compareDays(t,e)},month:function(t,e){return compareMonths(t,e)},year:function(t,e){return compareYears(t,e)}}},"56d7":function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"apiToCountry",(function(){return dm})),a.d(n,"apiToCurrency",(function(){return mm}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=(a("f921"),a("1dce")),r=a.n(s),i=a("5f5b"),c=(a("4de4"),a("d3b7"),a("25f0"),6e4);function l(t){return new Date(t.getTime()-t.getTimezoneOffset()*c)}function u(t){if(!t)return"";var e=t.getUTCFullYear(),a=m(t.getUTCMonth()+1),n=m(t.getUTCDate());return e+"-"+a+"-"+n}function d(t){if(!t)return"";var e=u(t),a=m(t.getUTCHours()),n=m(t.getUTCMinutes()),o=m(t.getUTCSeconds());return e+", "+a+":"+n+":"+o}function m(t){return t<10?"0"+t:t}var p=["Jan","Feb","March","April","May","June","July","Aug","Sep","Oct","Nov","Dec"];function f(t){return 1===t.getDate()}function h(t){return 1===new Date(t.getTime()+864e5).getDate()}function v(t){return"`"+t.toString().substr(-2)}function g(t,e){var a=t.getMonth(),n=t.getFullYear(),o=e.getMonth(),s=e.getFullYear(),r="",i=p[o]+" "+v(s),c=n===s;return f(t)&&h(e)?a===o&&c||(r=p[a]):(r=t.getDate()+" "+p[a],i=e.getDate()+" "+i),r=c?r:r+" "+v(n),r=r?r+" - ":r,r+i}function y(t){return t.getDate()+" "+p[t.getMonth()]+" "+v(t.getFullYear())}function b(t,e){return 1===arguments.length?y(t):t?e?g(t,e):y(t):y(e)}var C={beautifyDates:b,prepareForUTCString:l,formatDate:u,formatDateTime:d},_=function(t){return C.formatDate(t)},D=function(t){return C.formatDateTime(t)};function $(t,e){var a={minimumFractionDigits:e,maximumFractionDigits:e};return(+t).toLocaleString("en-US",a)}var x=function(t){return $(t,2)};o["default"].filter("bsDate",_),o["default"].filter("bsDateTime",D),o["default"].filter("numToDec2",x);var w=a("a925"),S=a("e088"),R=a("86e2"),I={en:S,bg:R};o["default"].use(w["a"]);var P=new w["a"]({locale:"en",messages:I,fallbackLocale:"en"}),k=a("2f62"),F=a("5530"),M=a("bc3a"),N=a.n(M),A=a("e762");function T(t){var e=Math.floor(10001*Math.random());return{email:t.email,firstName:t.firstName,lastName:t.lastName,fullName:t.fullName,phone:t.phone,profileImageUrl:""!==t.profileImageUrl?t.profileImageUrl+"?rand="+e:"",settings:{language:t.settings.language?t.settings.language:"en"}}}function O(t){return{email:t.email,password:A["a"].encode(t.password),firstName:t.firstName,lastName:t.lastName,phone:t.phone}}var E="/Account/",j={getUser:function(){return N.a.get(E).then(T)},updateUser:function(t){return N.a.patch(E,t)},updateUserSettings:function(t){return N.a.post(E+"Settings",t).then()},register:function(t){var e=O(t);return N.a.post(E,e).then(T)},login:function(t){var e=t.email,a=t.password,n={headers:{Authorization:"Basic "+A["a"].encode(e+":"+a)}};return N.a.post(E+"Login",null,n).then(T)},logout:function(){return N.a.get(E+"Logout")},requestPassReset:function(t){return N.a.post(E+"Recover",{email:t})},resetPass:function(t,e){return N.a.post(E+"Recover/"+t,{password:A["a"].encode(e)})},changePass:function(t,e){var a={oldPassword:A["a"].encode(t),newPassword:A["a"].encode(e)};return N.a.post(E+"Password",a)},uploadAvatar:function(t){var e={headers:{"Content-Type":"multipart/form-data"}};return N.a.post(E+"ProfileImage",t,e)},deleteAvatar:function(){return N.a.delete(E+"ProfileImage")},confirmAccount:function(t){return N.a.get("/account/confirmation/"+t)}},U=a("2909"),L=(a("99af"),a("8c4f"));function q(t,e,a){oy.getters.token?a({path:"/"}):a()}function K(t,e,a){oy.getters.token?"/login"===e.path&&e.query.redirect&&e.query.redirect!==t.path?a({path:e.query.redirect}):a():a({path:"/login",query:{redirect:t.fullPath}})}var z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("registerPageTitle")))]),a("div",{staticClass:"card-body"},[a("register-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v(" | "),a("router-link",{attrs:{to:"/forgot"}},[t._v(t._s(t.$t("Forgot password?")))])],1)]),t.isActionSuccessful?a("div",[a("p",[t._v(t._s(t.$t("We have received your registration and have sent a mail to your email address.")))]),a("p",[t._v(t._s(t.$t("Please, check your email and confirm the registration by clicking on the link in it.")))])]):t._e()])])])},V=[],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"register-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("First Name"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.firstName,expression:"formData.firstName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.firstName.required&&t.$v.formData.firstName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.firstName},on:{blur:function(e){return t.$v.formData.firstName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"firstName",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your first name.")))])])]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Last Name"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.lastName,expression:"formData.lastName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.lastName.required&&t.$v.formData.lastName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.lastName},on:{blur:function(e){return t.$v.formData.lastName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"lastName",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your last name.")))])])]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Phone"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.phone.required&&t.$v.formData.phone.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.phone},on:{blur:function(e){return t.$v.formData.phone.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your phone number.")))])])]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){return t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.minLength&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){return t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$v.formData.password.minLength?"":t.$t("Password must me 8 chars"))+" ")])])]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.repPassword.sameAsPass||!t.$v.formData.repPassword.minLength)&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){return t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$v.formData.repPassword.sameAsPass?t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"):t.$t("Please, repeat the password"))+" ")])])]),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("regFormSubmit")))])]),a("loading",{attrs:{loading:t.loading}})],1)},H=[],Y=a("b5ae"),X={validations:{formData:{firstName:{required:Y["required"]},lastName:{required:Y["required"]},phone:{required:Y["required"]},password:{required:Y["required"],minLength:Object(Y["minLength"])(8)},repPassword:{required:Y["required"],minLength:Object(Y["minLength"])(8),sameAsPass:Object(Y["sameAs"])("password")},email:{required:Y["required"],email:Y["email"]}}},data:function(){return{formData:{firstName:null,lastName:null,phone:null,password:null,repPassword:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("register",this.formData).then((function(){t.$emit("success")})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1})))}}},J=X,W=a("2877"),G=Object(W["a"])(J,B,H,!1,null,null,null),Q=G.exports,Z={components:{RegisterForm:Q},data:function(){return{isActionSuccessful:!1}}},tt=Z,et=Object(W["a"])(tt,z,V,!1,null,null,null),at=et.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("loginPageTitle")))]),a("div",{staticClass:"card-body"},[a("login-form",{on:{success:t.onLogin}})],1),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))]),t._v(" | "),a("router-link",{attrs:{to:"/forgot"}},[t._v(t._s(t.$t("Forgot password?")))])],1)])])])])},ot=[],st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"login-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){return t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.required&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){return t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter the password")))])])]),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("loginFormSubmit")))])]),a("loading",{attrs:{loading:t.loading}})],1)},rt=[],it={validations:{formData:{password:{required:Y["required"]},email:{required:Y["required"],email:Y["email"]}}},data:function(){return{formData:{password:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("login",this.formData).then((function(){t.$emit("success"),t.$customMsg.showSuccessMessage(t.$t("Login successful"))})).catch((function(e){t.errMsg=e.messageDetail})).finally((function(){t.loading=!1})))}}},ct=it,lt=Object(W["a"])(ct,st,rt,!1,null,null,null),ut=lt.exports,dt={components:{LoginForm:ut},methods:{onLogin:function(){var t=this.$store.getters.user;this.$i18n.locale=t.settings.language,this.$router.push("/")}}},mt=dt,pt=Object(W["a"])(mt,nt,ot,!1,null,null,null),ft=pt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("forgotPageTitle")))]),a("div",{staticClass:"card-body"},[a("forgot-pass-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v(" | "),a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))])],1)]),t.isActionSuccessful?a("div",[a("p",[t._v(t._s(t.$t("We have received your request for recovery and have sent a mail to your email address.")))]),a("p",[t._v(t._s(t.$t("Please, check your email, click on the link and reset your password.")))])]):t._e()])])])},vt=[],gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"forgot-pass-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),a("div",{staticClass:"form-group inline-form-group"},[t._v(" "+t._s(t.$t("forgotPasswordText"))+" ")]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){return t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("resetFormSubmit")))])]),a("loading",{attrs:{loading:t.loading}})],1)},yt=[],bt={validations:{formData:{email:{required:Y["required"],email:Y["email"]}}},data:function(){return{formData:{email:null},errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,j.requestPassReset(this.formData.email).then((function(){t.$emit("success")})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1})))}}},Ct=bt,_t=Object(W["a"])(Ct,gt,yt,!1,null,null,null),Dt=_t.exports,$t={components:{ForgotPassForm:Dt},data:function(){return{isActionSuccessful:!1}}},xt=$t,wt=Object(W["a"])(xt,ht,vt,!1,null,null,null),St=wt.exports,Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("resetPageTitle")))]),a("div",{staticClass:"card-body"},[a("reset-pass-form",{attrs:{token:t.token},on:{success:function(e){t.isActionSuccessful=!0}}})],1),a("div",{staticClass:"card-footer text-center"})]),t.isActionSuccessful?a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Password reset was successfull"))+".")]),a("b-button",{attrs:{size:"lg",variant:"success",to:"/login"}},[t._v(t._s(t.$t("Login")))])],1):t._e()])])])},It=[],Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"reset-pass-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.password.required||!t.$v.formData.password.minLength)&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){return t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"))+" ")])])]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.repPassword.sameAsPass||!t.$v.formData.repPassword.minLength)&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){return t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$v.formData.repPassword.sameAsPass?t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"):t.$t("Please, repeat the password"))+" ")])])]),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("resetFormSubmit")))])]),a("loading",{attrs:{loading:t.loading}})],1)},kt=[],Ft={props:["token"],validations:{formData:{password:{required:Y["required"],minLength:Object(Y["minLength"])(8)},repPassword:{required:Y["required"],minLength:Object(Y["minLength"])(8),sameAsPass:Object(Y["sameAs"])("password")}}},data:function(){return{formData:{password:null,repPassword:null},errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,j.resetPass(this.token,this.formData.password).then((function(e){t.$emit("success")})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1})))}}},Mt=Ft,Nt=Object(W["a"])(Mt,Pt,kt,!1,null,null,null),At=Nt.exports,Tt={components:{ResetPassForm:At},props:["token"],data:function(){return{isActionSuccessful:!1}}},Ot=Tt,Et=Object(W["a"])(Ot,Rt,It,!1,null,null,null),jt=Et.exports,Ut=[{path:"/register",name:"Register",component:at,meta:{pageId:"register-page",pageClass:""},beforeEnter:q},{path:"/login",name:"Login",component:ft,meta:{pageId:"login-page",pageClass:""},beforeEnter:q},{path:"/forgot",name:"Forgot",component:St,meta:{pageId:"forgot-page",pageClass:""},beforeEnter:q},{path:"/reset/:token",name:"Reset",component:jt,props:!0,meta:{pageId:"reset-page",pageClass:""},beforeEnter:q}],Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fx-rates"},[a("h2",[t._v(t._s(t.$t("Fx Rates")))]),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:this.$t("Daily Rates"),active:""}},[0===t.activeTab?a("FxRates",{attrs:{selectedDate:t.selectedDate},on:{onDateChange:t.onDateChange}}):t._e()],1),a("b-tab",{attrs:{title:this.$t("Average Rates")}},[1===t.activeTab?a("FxRates",{attrs:{selectedDate:t.selectedDate,averageFxRates:"true"},on:{onDateChange:t.onDateChange}}):t._e()],1),a("b-tab",{attrs:{title:this.$t("Settings")}},[2===t.activeTab?a("AutoFxSettings"):t._e()],1)],1)],1)},qt=[],Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("AutoFxSwitchModal",{ref:"questionModal",on:{confirm:t.modalConfirm,cancel:t.modalCancel}}),a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("b-input-group",{attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("Label")))]),a("th",[t._v(t._s(t.$t("Code")))]),a("th",[t._v(t._s(t.$t("Date")))]),a("th",[t._v(t._s(t.$t("on/off")))])]),t.showFilters?a("tr",[a("th"),a("th"),a("th"),a("th")]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.currency?e.currency.name:""))]),a("td",[t._v(t._s(e.currency?e.currency.isoCode:""))]),a("td",[t._v(t._s(t._f("bsDate")(e.date)))]),a("td",[a("b-form-select",{staticClass:"mb-3",attrs:{size:"sm"},on:{change:function(a){return t.changeCurrent(e)}},model:{value:e.sourceID,callback:function(a){t.$set(e,"sourceID",a)},expression:"current.sourceID"}},[a("option",{domProps:{value:null}},[t._v("none")]),t._l(e.sources,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.description))])}))],2)],1)])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)},zt=[],Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"modal"},[t._v(" "+t._s(t.question)+" "),t.advanced?a("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e(),a("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("Confirm")))]),a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"warning"},on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))])],1)],1)},Bt=[],Ht=a("fa33"),Yt=a("2430"),Xt={components:{Datepicker:Ht["a"]},data:function(){return{locales:{en:Yt["en"],bg:Yt["bg"]},question:"Are you sure ?",advanced:!1,date:Date.now()}},methods:{openModal:function(t){this.question=null!==t?t:this.$t("Are you sure ?"),this.$refs.modal.show()},openQuestion:function(t){this.advanced=!1,this.openModal(t)},openDateQuestion:function(t,e){this.options=e,this.advanced=!0,this.openModal(t)},confirm:function(){this.$emit("confirm",this.date),this.$refs.modal.hide()},cancel:function(){this.$emit("cancel"),this.$refs.modal.hide()}}},Jt=Xt,Wt=Object(W["a"])(Jt,Vt,Bt,!1,null,null,null),Gt=Wt.exports,Qt=(a("13d5"),a("b64b"),a("fb6a"),a("a434"),a("159b"),a("da81")),Zt=a.n(Qt),te="__selected__",ee={items:[],filteredItems:[],sorter:{id:null,comparator:null,onKeyChangeCallback:function(){}},filters:{},page:1};function ae(t){var e=Object.keys(t.filters).reduce((function(e,a){return e.filter((function(e){return t.filters[a](e)}))}),t.items.slice(0));t.page=1,t.filteredItems=t.sorter.comparator?e.sort(t.sorter.comparator):e}function ne(t){return t[te]||!1}function oe(t,e){t.items=e,t.filteredItems=t.items,t.sorter=Zt()({},ee.sorter),t.filters=Zt()({},ee.filters),t.page=ee.page}function se(t){var e=o["default"].observable(Zt()({name:t},ee)),a={items:function(){return e.items},pageItems:function(t){if(t){var a=(e.page-1)*t,n=e.page*t;return e.filteredItems.slice(a,n)}return e.filteredItems},totalRows:function(){return e.filteredItems.length},totalPages:function(t){return Math.ceil(e.filteredItems.length/t)},selectedItems:function(){return e.items.filter(ne)},isItemSelected:function(){return ne},page:function(){return e.page}},n={removeItem:function(t){var a=e.items.indexOf(t);-1!==a&&e.items.splice(a,1)},setInitialState:function(t){e.items!==t&&oe(t)},setItems:function(t){t?(e.items=t,e.filteredItems={},ae(e)):(e.sorter.onKeyChangeCallback(),oe(e,[]))},resetState:function(){e.sorter.onKeyChangeCallback(),oe(e,[])},addFilter:function(t){e.filters[t.key]=t.comparator,ae(e)},removeFilter:function(t){e.filters[t]&&(delete e.filters[t],ae(e))},removeAllFilters:function(){Object.keys(e.filters).length>0&&(e.filters={},ae(e))},setSorter:function(t){var a=e.sorter;a.id!==t.sortId&&(a.onKeyChangeCallback(t.sortId),a.id=t.sortId,a.comparator=t.comparator,a.onKeyChangeCallback=t.onKeyChangeCallback,e.filteredItems.sort(a.comparator))},toggleItemSelection:function(t){o["default"].set(t,te,!t[te])},setItemsSelection:function(t){t.items.forEach((function(e){o["default"].set(e,te,t.areSelected)}))},setPage:function(t){e.page=t}};return{getters:a,mutations:n}}var re=se,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{staticClass:"form-control form-control-sm",attrs:{type:"text"},on:{input:t.setFilter}})},ce=[];function le(t,e,a){var n;return function(){var o=this,s=arguments,r=function(){n=null,a||t.apply(o,s)},i=a&&!n;clearTimeout(n),n=setTimeout(r,e),i&&t.apply(o,s)}}function ue(t,e,a){return a[e]||(a[e]=Function("obj","return obj."+e)),a[e](t)}var de={},me=function(t){return de.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},de.methods={setFilter:le((function(e){var a=this,n=e.target.value;if(null!==n&&""!==n){var o=function(t){var e={};return function(n){return a.compare(ue(n,a.filterKey,e),t)}}(n),s={key:a.filterKey,comparator:o};t.mutations.addFilter(s)}else t.mutations.removeFilter(a.filterKey)}),300)},de};me.options=de;var pe=me,fe=pe,he=Object(W["a"])(fe,ie,ce,!1,null,null,null),ve=he.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control form-control-sm",on:{change:t.setFilter}},[a("option",{attrs:{value:""}}),t._l(t.options,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)},ye=[];function be(t,e){var a=[],n={};return t.forEach((function(t){var o=ue(t,e,n);null!==o&&""!==o&&-1===a.indexOf(o)&&a.push(o)})),a}var Ce={},_e=function(t){return Ce.props={items:{required:!0},filterKey:{required:!0},compare:{type:Function,required:!0}},Ce.computed={options:function(){return be(this.items,this.filterKey)}},Ce.methods={setFilter:function(e){var a=this,n=e.target.value;if(""!==n){var o=function(t){var e={};return function(n){return a.compare(ue(n,a.filterKey,e),t)}}(n),s={key:a.filterKey,comparator:o};t.mutations.addFilter(s)}else t.mutations.removeFilter(a.filterKey)}},Ce};_e.options=Ce;var De=_e,$e=De,xe=Object(W["a"])($e,ge,ye,!1,null,null,null),we=xe.exports,Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{ref:"dropdown"},[a("btn",{staticClass:"dropdown-toggle calendar-btn"},[t._v(t._s(t.date)+" "),a("i",{staticClass:"fa fa-calendar"})]),a("template",{slot:"dropdown"},[a("li",[a("date-picker",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])],2)},Re=[],Ie={},Pe=function(t){return Ie.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},Ie.data=function(){return{date:null}},Ie.watch={date:function(e){var a=this,n=new Date(e);if(null!==e&&""!==e){var o=function(t){var e={};return function(n){return a.compare(ue(n,a.filterKey,e),t)}}(n),s={key:a.filterKey,comparator:o};t.mutations.addFilter(s)}else t.mutations.removeFilter(a.filterKey)}},Ie};Pe.options=Ie;var ke=Pe,Fe=ke,Me=Object(W["a"])(Fe,Se,Re,!1,null,null,null),Ne=Me.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-dropdown",{ref:"dropdown",staticClass:"m-2",attrs:{size:"sm",text:t.selection}},t._l(t.options,(function(e){return a("b-dropdown-item",{key:e.label},[a("a",{attrs:{role:"button"},on:{click:function(a){return t.select(e)}}},[t._v(t._s(e.label))])])})),1)},Te=[],Oe="marked"+Date.now(),Ee={},je=function(t){return Ee.data=function(){var t=this,e=[{label:"All",fn:function(){t.removeFilter()}},{label:"Selected",fn:function(){t.filter(!0)}},{label:"Not selected",fn:function(){t.filter(!1)}}];return{selection:e[0].label,options:e}},Ee.methods={select:function(t){t.fn(),this.selection=t.label},filter:function(e){var a=function(e){return function(a){return t.getters.isItemSelected(a)===e}}(e),n={key:Oe,comparator:a};t.mutations.addFilter(n)},removeFilter:function(){t.mutations.removeFilter(Oe)}},Ee};je.options=Ee;var Ue=je,Le=Ue,qe=Object(W["a"])(Le,Ae,Te,!1,null,null,null),Ke=qe.exports,ze=(a("2ca0"),a("498a"),{strings:function(t,e,a){var n=t?t.toUpperCase().trim():"",o=e?e.toUpperCase().trim():"";return n<o?-1*a:n>o?1*a:0},numbers:function(t,e,a){return a*(t-e)},dates:function(t,e,a){var n=t?t.getTime():0,o=e?e.getTime():0;return a*(n-o)},bool:function(t,e,a){var n=t?1:0,o=e?1:0;return a*(n-o)}}),Ve=function(t,e,a){var n={};return function(o,s){return ze[t](ue(o,e,n),ue(s,e,n),a)}},Be="sort",He="sort-asc",Ye="sort-desc",Xe=function(t){return{bind:function(e,a,n){var o=a.value,s=o.sortKey,r=o.compare,i=o.initOrder,c=null;function l(){null===c||-1===c?(c=1,e.classList.add(He),e.classList.remove(Ye)):(c=-1,e.classList.add(Ye),e.classList.remove(He));var a={sortId:s+c,comparator:Ve(r,s,c),onKeyChangeCallback:u};t.mutations.setSorter(a)}function u(t){void 0!==t&&t.startsWith(s)||(e.classList.remove(Ye),e.classList.remove(He),c=null)}e.classList.add(Be),e.addEventListener("click",l),i&&(c="DESC"===i?1:-1,l())}}},Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isSelected,expression:"isSelected"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isSelected)?t._i(t.isSelected,null)>-1:t.isSelected},on:{change:[function(e){var a=t.isSelected,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=null,r=t._i(a,s);n.checked?r<0&&(t.isSelected=a.concat([s])):r>-1&&(t.isSelected=a.slice(0,r).concat(a.slice(r+1)))}else t.isSelected=o},t.changeHandler]}})])},We=[],Ge={},Qe=function(t){return Ge.props={item:{required:!0},disable:{type:Boolean}},Ge.methods={changeHandler:function(e){t.mutations.toggleItemSelection(this.item)}},Ge.computed={isSelected:{get:function(){return t.getters.isItemSelected(this.item)},set:function(){}}},Ge.watch={disable:function(e){e&&this.isSelected&&t.mutations.toggleItemSelection(this.item)}},Ge};Qe.options=Ge;var Ze=Qe,ta=Ze,ea=Object(W["a"])(ta,Je,We,!1,null,null,null),aa=ea.exports,na=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-group btn-group-sm bulk-selector",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("input",{ref:"checkbox",attrs:{type:"checkbox"},domProps:{checked:t.areSelected},on:{change:t.toggleAll}})]),t.totalSelectedCount?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("span",[t._v(t._s(t.totalSelectedCount)+" "+t._s(t.totalSelectedCount>1?"Records":"Record")+" selected")])]):t._e(),t.totalSelectedCount&&t.$slots.default?a("b-dropdown",{attrs:{text:"Bulk actions"}},[t._t("default")],2):t._e()],1)},oa=[],sa={},ra=function(t){return sa.props={items:{type:Array,required:!0}},sa.computed={itemsCount:function(){return this.items.length},totalSelectedCount:function(){return t.getters.selectedItems.length},pageSelectedCount:function(){return this.items.reduce((function(e,a){return t.getters.isItemSelected(a)&&e++,e}),0)},areSelected:function(){return this.itemsCount-this.pageSelectedCount===0?(this.checkHalf(!1),!0):0===this.totalSelectedCount?(this.checkHalf(!1),!1):(this.checkHalf(!0),!1)}},sa.methods={checkHalf:function(t){this.$refs.checkbox&&(this.$refs.checkbox.indeterminate=t)},toggleAll:function(e){var a={items:this.items,areSelected:e.target.checked};t.mutations.setItemsSelection(a)}},sa};ra.options=sa;var ia=ra,ca=ia,la=Object(W["a"])(ca,na,oa,!1,null,null,null),ua=la.exports,da=a("f7fe"),ma=a.n(da),pa=function(t){return{computed:{pageItems:function(){return t.getters.pageItems(this.itemsPerPage)},totalRows:function(){return t.getters.totalRows()},pages:function(){return t.getters.totalPages(this.itemsPerPage)},page:{get:function(){return t.getters.page()},set:function(e){t.mutations.setPage(e)}}},methods:{setItemsPerPage:ma()((function(e){var a=+e.target.value;t.mutations.setPage(1),!isNaN(a)&&a>0?this.itemsPerPage=a:10===this.itemsPerPage&&0===a?(this.itemsPerPage=1,this.itemsPerPage=10):this.itemsPerPage=10}),300)}}},fa={TableStore:re,InputFilter:ve,SelectFilter:we,DateFilter:Ne,MarkedFilter:Ke,SortDirective:Xe,CheckboxSelect:aa,BulkSelector:ua,tableStoreMixin:pa},ha=a("54c6"),va={methods:{runAfterSCisSet:function(t){this.$store.getters.selectedCompany?t():this.$store.watch((function(t,e){return e.selectedCompany}),(function(e){e&&t()}))}}},ga={},ya=function(t){return ga.name="AutoFxSettings",ga.mixins=[fa.tableStoreMixin(t),va],ga.directives={Sort:fa.SortDirective(t)},ga.components={AutoFxSwitchModal:Gt},ga.data=function(){return{pauseChange:!1,currentData:null,loading:!1,itemsPerPage:20,showFilters:!1,compare:{string:ha["a"].string}}},ga.created=function(){this.runAfterSCisSet(this.loadCSAutoFxRates)},ga.computed={selectedItems:function(){return t.getters.selectedItems()},allItems:function(){return t.getters.items()}},ga.methods={loadCSAutoFxRates:function(){var e=this;this.loading=!0,this.$store.dispatch("loadCSAutoFxRates").then((function(){t.mutations.setItems(e.$store.getters.getAutoFxRates)})).finally((function(){e.loading=!1}))},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.mutations.removeAllFilters()},disable:function(t){this.currentData=t,this.multipleActive=!1,this.$refs.questionModal.openQuestion(this.$t("Are you sure you want to STOP auto Fx Rate ?"))},multiple:function(t){this.multipleActive=!0,this.$refs.questionModal.openQuestion(this.$t("Are you sure you want to STOP auto for selected Fx Rates ?"))},enable:function(t){this.currentData=t,this.multipleActive=!1,this.$refs.questionModal.openDateQuestion(this.$t("You are going to start auto Fx Rate for ")+t.currency.isoCode)},change:function(t){this.currentData=t,this.multipleActive=!1,this.$refs.questionModal.openDateQuestion(this.$t("You are going to change auto Fx Rate for ")+t.currency.isoCode)},modalConfirm:function(t){var e=this;if(this.multipleActive)this.$store.dispatch("massDeactivateAutoFxRate",this.selectedItems).then((function(){e.loadCSAutoFxRates()}));else{var a=this.allItems.filter((function(t){return t.currency.id===e.currentData.currency.id}))[0];null!==this.currentData.sourceID?(a.date=new Date(t),null===this.currentData.oldSourceID?this.$store.dispatch("activateAutoFxRate",a).then((function(){e.loadCSAutoFxRates()})):this.$store.dispatch("switchAutoFxRate",a).then((function(){e.loadCSAutoFxRates()}))):(a.date="",this.$store.dispatch("deactivateAutoFxRate",a).then((function(){e.loadCSAutoFxRates()}))),a.oldSourceID=a.sourceID}},modalCancel:function(){var t=this,e=this.allItems.filter((function(e){return e.currency.id===t.currentData.currency.id}))[0];e.sourceID=e.oldSourceID},turnSelected:function(t){this.multiple(this.selectedItems)},changeCurrent:function(t){var e=this;setTimeout((function(){e.pauseChange||(null===t.oldSourceID?e.enable(t):null===t.sourceID?e.disable(t):e.change(t))}),25)}},ga};ya.options=ga;var ba=fa.TableStore("AutoFxSettings"),Ca=ya(ba),_a=Ca,Da=Object(W["a"])(_a,Kt,zt,!1,null,null,null),$a=Da.exports,xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fx-rates-content"},[a("b-modal",{attrs:{title:t.averageFxRates?t.$t("Add Average FX Rate"):t.$t("Add Daily FX Rate")},on:{ok:t.onModalOk,cancel:t.onModalCancel},model:{value:t.showInvModal,callback:function(e){t.showInvModal=e},expression:"showInvModal"}},[a("button",{staticClass:"close-btn",attrs:{slot:"modal-header-close"},on:{click:t.onModalCancel},slot:"modal-header-close"},[a("i",{staticClass:"far fa-times-circle"})]),a("FxRatesForm",{ref:"fxRatesForm",attrs:{averageFxRates:t.averageFxRates},on:{updateFormData:t.updateFormData}})],1),a("FxRatesTable",{attrs:{fxRates:t.currentFxRates,averageFxRates:t.averageFxRates,errors:t.errors,selectedDateProp:t.selectedDate},on:{deleteFxRate:t.deleteFxRate,changeSelectedDate:t.changeSelectedDate,reValidateOnChange:t.reValidateOnChange,showInvModal:function(e){t.showInvModal=!0}}}),a("loading",{attrs:{loading:t.loading}})],1)},wa=[],Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive fx-rates-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"left-side-toolbar"},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("b-btn",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])],1),a("b-input-group",{staticClass:"items-counter-width mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp",maxlength:"3"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})]),a("datepicker",{class:{"is-invalid":t.errors.has("toDate")},attrs:{"bootstrap-styling":!0,id:"month",name:"month",language:t.locales[t.$i18n.locale],"minimum-view":"month",format:"MMMM yyyy","full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1),a("div",{staticClass:"right-side-toolbar"},[a("b-btn",{staticClass:"btn btn-success btn-sm",on:{click:t.showInvModal}},[t._v(t._s(t.averageFxRates?t.$t("Add Average FX Rate"):t.$t("Add Daily FX Rate")))])],1)]),a("table",{staticClass:"table table-striped text-center"},[a("thead",[a("tr",[t.averageFxRates?t._e():a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"date",compare:"dates"},expression:"{sortKey: 'date', compare: 'dates'}"}]},[t._v(t._s(t.$t("Date")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"toCurrency.code",compare:"strings"},expression:"{sortKey: 'toCurrency.code', compare: 'strings'}"}]},[t._v(t._s(t.$t("Units")))]),a("th"),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"rate",compare:"numbers"},expression:"{sortKey: 'rate', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Rate")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"toCurrency.code",compare:"strings"},expression:"{sortKey: 'toCurrency.code', compare: 'strings'}"}]},[t._v(t._s(t.$t("Auto Units")))]),a("th"),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"rate",compare:"numbers"},expression:"{sortKey: 'rate', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Auto Rate")))]),a("th")]),t.showFilters?a("tr",[t.averageFxRates?t._e():a("th"),a("th",[a("SelectFilter",{attrs:{filterKey:"toCurrency.code",compare:t.compare.string,items:t.allItems}})],1),a("th"),a("th"),a("th"),a("th"),a("th"),a("th")]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",[t.averageFxRates?t._e():a("td",[t._v(t._s(t._f("bsDate")(e.date)))]),t.haveManual(e)?[a("td",[t._v(t._s(e.manual?e.manual.units:"")+" "+t._s(e.toCurrency?e.toCurrency.code:""))]),a("td",[t._v("=")]),t.editActiveForId===e.id?a("td",[a("b-form-input",{attrs:{type:"number"},model:{value:t.internalEditRate,callback:function(e){t.internalEditRate=e},expression:"internalEditRate"}}),t._v(" "+t._s(t.selectedCompany.currency?t.selectedCompany.currency.code:"")+" ")],1):t._e(),t.editActiveForId!==e.id?a("td",[t._v(" "+t._s(e.manual?e.manual.rate:"")+" "+t._s(t.selectedCompany.currency?t.selectedCompany.currency.code:"")+" ")]):t._e()]:t._e(),t.haveManual(e)?t._e():[a("td"),a("td"),a("td")],t.haveAuto(e)?[a("td",[t._v(t._s(e.auto?e.auto.units:"")+" "+t._s(e.toCurrency?e.toCurrency.code:""))]),a("td",[t._v("=")]),a("td",[t._v(" "+t._s(e.auto?e.auto.rate:"")+" "+t._s(t.selectedCompany.currency?t.selectedCompany.currency.code:"")+" ")])]:t._e(),t.haveAuto(e)?t._e():[a("td"),a("td"),a("td")],t.haveManual(e)?[t.editActiveForId!==e.id?a("td",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(a){return t.editFxRate(e)}}},[t._v(t._s(t.$t("Edit")))]),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.deleteFxRate(e)}}},[t._v(t._s(t.$t("Remove")))])]):t._e(),t.editActiveForId===e.id?a("td",[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:t.saveEdit}},[t._v(t._s(t.$t("Save")))]),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v(t._s(t.$t("Cancel")))])]):t._e()]:t._e(),t.haveManual(e)?t._e():a("td",[t._v(t._s(t.$t("No manual Rate")))])],2)})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)},Ra=[],Ia="FxRatesTable",Pa={},ka=function(t){return Pa.name=Ia,Pa.mixins=[fa.tableStoreMixin(t)],Pa.directives={Sort:fa.SortDirective(t)},Pa.components={Datepicker:Ht["a"],InputFilter:fa.InputFilter(t),SelectFilter:fa.SelectFilter(t),DateFilter:fa.DateFilter(t),BulkSelector:fa.BulkSelector(t),CheckboxSelect:fa.CheckboxSelect(t),MarkedFilter:fa.MarkedFilter(t)},Pa.props={fxRates:{},averageFxRates:{},selectedDateProp:{}},Pa.data=function(){return{editActiveForId:null,loading:!1,internalRate:0,itemsPerPage:5,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day},locales:{en:Yt["en"],bg:Yt["bg"]}}},Pa.computed={allItems:function(){return t.getters.items()},selectedCompany:function(){return this.$store.getters.selectedCompany},selectedDate:{get:function(){return this.selectedDateProp},set:function(t){this.$emit("changeSelectedDate",t)}}},Pa.methods={haveManual:function(t){return null!==t.manual},showInvModal:function(){this.$emit("showInvModal")},haveAuto:function(t){return null!==t.auto},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.mutations.removeAllFilters()},deleteFxRate:function(t){var e=this;this.$store.dispatch("removeFxRate",t).then((function(){e.$emit("deleteFxRate",t)})).catch((function(t){e.$customMsg.showErrorMessage(e.$t(t.messageDetail))}))},editFxRate:function(t){this.internalEditRate=t.manual.rate,this.editActiveForId=t.id},cancelEdit:function(){this.editActiveForId=null},saveEdit:function(){var t=this;if(this.internalEditRate<=0)window.alert("The rate can be NOT less than 0.");else{var e=this.pageItems.filter((function(e){return e.id===t.editActiveForId}))[0];e.manual.rate=this.internalEditRate,this.$store.dispatch("editFxRate",e).then((function(){t.$emit("reload")})),this.editActiveForId=null}}},Pa.watch={fxRates:function(e){t.mutations.setItems(e)}},Pa.beforeDestroy=function(){t.mutations.removeAllFilters()},Pa};ka.options=Pa;var Fa=fa.TableStore(Ia),Ma=ka(Fa),Na=Ma,Aa=Object(W["a"])(Na,Sa,Ra,!1,null,null,null),Ta=Aa.exports,Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-group",{attrs:{label:t.$t("Currency")+":"}},[a("ModelSelect",{attrs:{options:t.convertedCurrencies,placeholder:t.$t("Select currency ...")},on:{input:t.updateParent,select:t.onSelect},model:{value:t.formData.currencyId,callback:function(e){t.$set(t.formData,"currencyId",e)},expression:"formData.currencyId"}})],1),a("b-form-group",{attrs:{label:t.$t("Select ")+(t.averageFxRates?t.$t("Month"):t.$t("Date"))+":"}},[t.averageFxRates?a("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"minimum-view":"month",format:"MMMM yyyy","calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.recordDate,callback:function(e){t.$set(t.formData,"recordDate",e)},expression:"formData.recordDate"}}):a("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.recordDate,callback:function(e){t.$set(t.formData,"recordDate",e)},expression:"formData.recordDate"}})],1),a("b-form-group",{attrs:{label:t.$t("Rate")+t.selectedCurrency+":"}},[a("b-input",{attrs:{type:"number"},model:{value:t.formData.recordRate,callback:function(e){t.$set(t.formData,"recordRate",e)},expression:"formData.recordRate"}})],1),t.formHasError?a("div",{staticClass:"text-danger"},[t._v(t._s(t.formError))]):t._e()],1)},Ea=[],ja=(a("7db0"),a("d81d"),{DAILY:{id:1,label:"Daily"},AVERAGE:{id:2,label:"Avarage"}}),Ua=[{id:1,label:"Balance Sheet",code:"BS",context:{IN:"Receivables",OUT:"Payables",FX_TYPES:[ja.DAILY]}},{id:2,label:"Income Statement",code:"IS",context:{IN:"Income",OUT:"Expense",FX_TYPES:[ja.DAILY,ja.AVERAGE]}},{id:3,label:"Cash Flow Statement",code:"CFS",context:{IN:"Cash Receipts",OUT:"Cash Paid",FX_TYPES:[ja.DAILY,ja.AVERAGE]}}],La={misc:0,tax:1,software:2,responsibility:3},qa=[{id:1,label:"SuperUser"},{id:2,label:"Master"},{id:3,label:"User"},{id:4,label:"Guest"}],Ka={VAT_REPORTING_DATE:{id:1,label:"vatReportingDate"},CORPTAX_FILLING_DATE:{id:2,label:"corpTaxFillingDate"},CORPTAX_DUE_DATE:{id:3,label:"corpTaxDueDate"},CORPTAX_ADVANCED_PAYMENTS_DATE:{id:4,label:"corpTaxAdvancedPaymentsDate"},AUDIT_DDL:{id:5,label:"auditDDL"}},za=[{name:"1st",value:1},{name:"2nd",value:2},{name:"3rd",value:3},{name:"4th",value:4},{name:"5th",value:5},{name:"6th",value:6},{name:"7th",value:7},{name:"8th",value:8},{name:"9th",value:9},{name:"10th",value:10},{name:"11th",value:11},{name:"12th",value:12},{name:"13th",value:13},{name:"14th",value:14},{name:"15th",value:15},{name:"16th",value:16},{name:"17th",value:17},{name:"18th",value:18},{name:"19th",value:19},{name:"20th",value:20},{name:"21th",value:21},{name:"22th",value:22},{name:"23th",value:23},{name:"24th",value:24},{name:"25th",value:25},{name:"26th",value:26},{name:"27th",value:27},{name:"28th",value:28},{name:"29th",value:29},{name:"30th",value:30},{name:"31th",value:31},{name:"Last day",value:0}],Va=[{name:"January",days:31},{name:"February",days:28},{name:"March",days:31},{name:"April",days:30},{name:"May",days:31},{name:"June",days:30},{name:"July",days:31},{name:"August",days:31},{name:"September",days:30},{name:"October",days:31},{name:"November",days:30},{name:"December",days:31}],Ba=15,Ha=a("b410"),Ya={components:{ModelSelect:Ha["ModelSelect"],Datepicker:Ht["a"]},props:{averageFxRates:{}},data:function(){return{locales:{en:Yt["en"],bg:Yt["bg"]},formError:"",formData:{currencyId:null,recordType:this.averageFxRates?2:1},convertedCurrencies:[]}},mounted:function(){var t=this;this.$store.dispatch("loadCurrencies").then((function(e){e.forEach((function(e,a){t.companyCurrency.id!==e.id&&t.convertedCurrencies.push({value:e.id,text:e.code})}))}))},computed:{companyCurrency:function(){var t=this.$store.getters.selectedCompany||{};return t.currency},selectedCurrency:function(){var t=this;return this.formData.currencyId?" for 1 "+this.convertedCurrencies.find((function(e){return e.value===t.formData.currencyId})).text:""},formRecordTypeDaily:function(){return 1===this.formData.recordType},fxRecordsTypes:function(){var t=[];return Object.keys(ja).map((function(e){t.push(ja[e])})),t},formHasError:function(){return!!this.formError.length}},methods:{onSelect:function(){alert("Hello : )")},resetForm:function(){this.formError="",this.formData={currencyId:null,recordType:1},this.updateParent()},showError:function(t){this.formError=t.messageDetail},updateParent:function(){this.$emit("updateFormData",this.formData)}}},Xa=Ya,Ja=Object(W["a"])(Xa,Oa,Ea,!1,null,null,null),Wa=Ja.exports,Ga={name:"FxRates",components:{FxRatesTable:Ta,FxRatesForm:Wa},mixins:[va],created:function(){this.runAfterSCisSet(this.loadCurrentFxRates)},props:{averageFxRates:{default:!1},selectedDate:{}},data:function(){return{formData:{},showInvModal:!1,loading:!1}},computed:{selectedCompany:function(){return this.$store.getters.selectedCompany},currentFxRates:function(){return this.$store.getters.getCurrentFxRates||[]}},methods:{deleteFxRate:function(t){if(null===t.auto)this.currentFxRates=this.currentFxRates.filter((function(e){return e.id!==t.id}));else{var e=this.currentFxRates.filter((function(e){return null!==e.auto&&e.auto.id===t.auto.id}))[0];e.manual=null}},changeSelectedDate:function(t){this.$emit("onDateChange",t),this.loadCurrentFxRates(t)},reValidateOnChange:function(){this.loadCurrentFxRates(this.selectedDate)},onModalOk:function(t){var e=this;t.preventDefault(),this.formData.recordDate&&this.formData.currencyId&&this.formData.recordRate?this.formData.recordRate<=0?this.$refs.fxRatesForm.showError({messageDetail:this.$t("Rate must be greater than 0.")}):this.$store.dispatch("addFxRate",this.formData).then((function(t){e.$customMsg.showSuccessMessage(e.$t("Successfully created ")+t.typeName+e.$t(" for ")+t.refCurrencyIsoCode),e.$refs.fxRatesForm.resetForm(),e.showInvModal=!1,e.loadCurrentFxRates()})).catch((function(t){e.$customMsg.showErrorMessage(e.$t("Error in creating FxRate :")+t.messageDetail),e.$refs.fxRatesForm.showError(t)})):this.$refs.fxRatesForm.showError({messageDetail:this.$t("Please fill all info!")})},onModalCancel:function(t){t.preventDefault(),this.$refs.fxRatesForm.resetForm(),this.showInvModal=!1},loadCurrentFxRates:function(t){var e=this;this.loading=!0;var a={data:t||this.selectedDate,average:this.averageFxRates};this.$store.dispatch("loadCurrentFxRates",a).finally((function(){e.loading=!1}))},updateFormData:function(t){this.formData=t}}},Qa=Ga,Za=Object(W["a"])(Qa,xa,wa,!1,null,null,null),tn=Za.exports,en={name:"FxPage",components:{FxRates:tn,AutoFxSettings:$a},data:function(){return{activeTab:0,selectedDate:new Date(Date.now())}},methods:{onTabChange:function(t){this.activeTab=t},onDateChange:function(t){this.selectedDate=t}}},an=en,nn=Object(W["a"])(an,Lt,qt,!1,null,null,null),on=nn.exports,sn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-page"},[a("h2",[t._v(t._s(t.$t("Upload")))]),t.summary?t._e():a("upload-form",{attrs:{uploadData:t.uploadData},on:{success:t.onUpload}}),t.summary&&t.summary.recordsCount.validRecognizedCompany?a("div",[a("h3",[t._v(t._s(t.$t("Pending valid transactions with recognized companies")))]),a("p",[t._v(t._s(t.$t("You can save these transactions.")))]),a("rc-table"),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.saveRecognisedRecords}},[t._v(t._s(t.$t("Save")))])],1):t._e(),t.summary&&t.summary.recordsCount.validUnrecognizedCompany?a("div",[a("h3",[t._v(t._s(t.$t("Valid transactions with unrecognized companies")))]),a("p",[t._v(t._s(t.$t("uploadPageValidUnrecognizedText")))]),a("uc-table")],1):t._e(),t.summary?a("div",[a("h3",[t._v(t._s(t.$t("Summary")))]),a("summary-table"),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))])],1):t._e(),a("loading",{attrs:{loading:t.loading}})],1)},rn=[],cn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"upload-form",on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"statementType"}},[t._v(t._s(t.$t("Statement type"))+":")]),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("statementTypeId")},attrs:{id:"statementType",name:"statementType",options:t.statementTypes,"value-field":"id","text-field":"label"},on:{input:t.reValidateOnChange},model:{value:t.formData.statementTypeId,callback:function(e){t.$set(t.formData,"statementTypeId",e)},expression:"formData.statementTypeId"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("statementTypeId"),expression:"errors.has('statementTypeId')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a statement type"))+".")])],1),!t.formData.statementTypeId||t.formData.statementTypeId>1?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"from"}},[t._v(t._s(t.$t("From date"))+":")]),a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("from")},attrs:{"bootstrap-styling":!0,id:"from",name:"from",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{selected:t.reValidateOnChange},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("from"),expression:"errors.has('from')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1):t._e(),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"to"}},[t._v(t._s(t.$t("To date"))+":")]),a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("to")},attrs:{"bootstrap-styling":!0,id:"to",name:"to",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{selected:t.reValidateOnChange},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("to"),expression:"errors.has('to')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"excelFile"}},[t._v(t._s(t.$t("Excel file"))+":")]),a("b-form-file",{attrs:{placeholder:"Choose a file...",name:"excelFile",id:"excelFile",state:t.isFileCorrect},on:{change:t.reValidateOnChange},model:{value:t.formData.file,callback:function(e){t.$set(t.formData,"file",e)},expression:"formData.file"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("excelFile"),expression:"errors.has('excelFile')"}],staticClass:"text-danger"},[t._v(t._s(t.errors.first("excelFile"))+".")])],1),a("div",{staticClass:"py-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(t._s(t.$t("Upload")))])]),a("loading",{attrs:{loading:t.loading}})],1)},ln=[],un=(a("b0c0"),{components:{Datepicker:Ht["a"]},data:function(){return{locales:{en:Yt["en"],bg:Yt["bg"]},formData:{},statementTypes:Ua,isFileCorrect:null,formSubmitted:!1,errMsg:null,loading:!1}},props:{uploadData:{}},created:function(){var t=this;null!==this.uploadData&&setTimeout((function(){t.formData={fromDate:t.uploadData.startDate,toDate:t.uploadData.endDate},t.statementTypes.forEach((function(e){e.id===t.uploadData.statementID&&(t.formData.statementTypeId=e.id)}))}),500)},methods:{checkFile:function(){if(this.isFileCorrect=!1,this.$validator.errors.remove("excelFile"),"undefined"===typeof this.formData.file)this.$validator.errors.add({field:"excelFile",msg:this.$t("No file selected")});else{var t=this.formData.file.name.substr(this.formData.file.name.lastIndexOf(".")+1);"xls"===t||"xlsx"===t?this.isFileCorrect=!0:this.$validator.errors.add({field:"excelFile",msg:this.$t("Please, select an Excel file")})}},reValidateOnChange:function(){var t=this;this.formSubmitted&&setTimeout((function(){t.checkFile(),t.$validator.validateAll()}),100)},validateBeforeSubmit:function(){var t=this;setTimeout((function(){t.checkFile(),t.formSubmitted=!0,t.$validator.validateAll().then((function(e){e&&t.isFileCorrect&&(t.loading=!0,t.$store.dispatch("uploadExcel",t.formData).then((function(){t.$emit("success")})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1})))}))}),100)}}}),dn=un,mn=Object(W["a"])(dn,cn,ln,!1,null,null,null),pn=mn.exports,fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{colspan:"2"}}),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.IN))]),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.OUT))]),a("th",{attrs:{colspan:"2"}})]),a("tr",[a("th",[t._v(t._s(t.$t("Company")))]),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Records")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Records")))]),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Actions")))])])]),a("tbody",t._l(t.sets,(function(e){return a("tr",{key:e.company.name+e.currency.code},[a("td",[t._v(t._s(e.company.name))]),a("td",[t._v(t._s(e.currency.code))]),a("td",[t._v(t._s(e.receivables.amount))]),a("td",[t._v(t._s(e.receivables.count))]),a("td",[t._v(t._s(e.payables.amount))]),a("td",[t._v(t._s(e.payables.count))]),a("td",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{title:"View details"},on:{click:function(a){return t.show(e)}}},[t._v(t._s(t.$t("View Details")))])]),a("td",[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{title:"Remove the valid transactions"},on:{click:function(a){return t.remove(e)}}},[t._v(t._s(t.$t("Remove")))])])])})),0)]),a("rcRecordsModal",{on:{dataChanged:t.reloadData},model:{value:t.selectedSet,callback:function(e){t.selectedSet=e},expression:"selectedSet"}})],1)},hn=[],vn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("template",{slot:"head"},[t._v(" "+t._s(t.myCompany.name)+" - "+t._s(t.contractorName)+", "+t._s(t.statementType.label)+", "+t._s(t.dates)+" ")]),a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-light",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th"),a("th",[t._v(t._s(t.$t("Line")))]),a("th",[t._v(t._s(t.$t("Acc. Type")))]),a("th",[t._v(t._s(t.$t("Ref #")))]),a("th",[t._v(t._s(t.$t("Payer")))]),a("th",[t._v(t._s(t.$t("Receiver")))]),a("th",[t._v(t._s(t.$t("Doc. Date")))]),a("th",[t._v(t._s(t.$t("Due Date")))]),a("th",[t._v(t._s(t.$t("Posting Date")))]),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Description")))])]),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),a("th"),a("th"),a("th"),a("th"),a("th"),a("th"),a("th"),a("th"),a("th"),a("th"),a("th")]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.line},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),a("td",[t._v(t._s(e.line))]),a("td",[t._v(t._s(e.account))]),a("td",[t._v(t._s(e.ref))]),a("td",[t._v(t._s(e.payer))]),a("td",[t._v(t._s(e.receiver))]),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),a("td",[t._v(t._s(e.currency?e.currency.code:""))]),a("td",[t._v(t._s(e.docAmount))]),a("td",[t._v(t._s(e.desc))]),a("td",[a("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(a){return t.deleteCurrent(e)}}},[t._v(t._s(t.$t("Delete")))])])])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)],2)},gn=[],yn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-page-modal",class:{"fpm-open":t.toggle}},[a("div",{staticClass:"fpm-head",attrs:{id:"fpm-head"}},[t._t("head"),a("a",{staticClass:"close-btn",attrs:{title:"Close"},on:{click:t.close}},[a("i",{staticClass:"far fa-times-circle"})])],2),a("div",{staticClass:"fpm-body"},[t._t("default")],2)])},bn=[],Cn={data:function(){return{toggle:!1,loading:!1}},methods:{open:function(){this.toggle=!0,document.body.classList.add("fpm-open-body")},close:function(){this.toggle=!1,document.body.classList.remove("fpm-open-body"),this.$emit("close")}}},_n=Cn,Dn=Object(W["a"])(_n,yn,bn,!1,null,null,null),$n=Dn.exports,xn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"heading-text"},[t._v(" "+t._s(t.companiesStr)+", "+t._s(t.statementType.label)+", "+t._s(t.dates)+" ")])},wn=[],Sn={props:["contractor"],computed:{statementType:function(){return this.$store.getters.statementType},dates:function(){var t=this.$store.getters.importReceipt,e=C.formatDate(t.toDate);return+t.statementType.id>1&&(e=C.formatDate(t.fromDate)+" - "+e),e},companiesStr:function(){var t=this.$store.getters.selectedCompany.name;return this.contractor&&(t=t+" - "+this.contractor),t}}},Rn=Sn,In=Object(W["a"])(Rn,xn,wn,!1,null,null,null),Pn=In.exports,kn={props:["value"],components:{FullPageModal:$n,ModalHead:Pn},data:function(){return{contractorName:"",loading:!1}},watch:{value:function(t){var e=this;t&&(this.$refs.modal.open(),this.loading=!0,this.load(t).finally((function(){e.loading=!1})))}},methods:{close:function(){this.showFilters&&(this.showFilters=!1),this.$emit("input",null)}}};o["default"].use(k["a"]);var Fn="__selected__",Mn={items:[],filteredItems:[],sorter:{id:null,comparator:null,onKeyChangeCallback:function(){}},filters:{},page:1};function Nn(t){var e=Object.keys(t.filters).reduce((function(e,a){return e.filter((function(e){return t.filters[a](e)}))}),t.items.slice(0));t.page=1,t.filteredItems=t.sorter.comparator?e.sort(t.sorter.comparator):e}function An(t){return t[Fn]||!1}function Tn(t,e){t.items=e,t.filteredItems=t.items,t.sorter=Zt()({},Mn.sorter),t.filters=Zt()({},Mn.filters),t.page=Mn.page}function On(t){var e=Zt()({name:t},Mn),a={getItems:function(t){return t.items},pageItems:function(t){return function(e){if(e){var a=(t.page-1)*e,n=t.page*e;return t.filteredItems.slice(a,n)}return t.filteredItems}},totalRows:function(t){return t.filteredItems.length},totalPages:function(t){return function(e){return Math.ceil(t.filteredItems.length/e)}},selectedItems:function(t){return t.items.filter(An)},isItemSelected:function(t){return An},page:function(t){return t.page}},n={removeItem:function(t,e){var a=t.items.indexOf(e);-1!==a&&t.items.splice(a,1)},setInitialState:function(t,e){t.items!==e&&Tn(t,e)},setItems:function(t,e){e?(t.items=e,t.filteredItems={},Nn(t)):(t.sorter.onKeyChangeCallback(),Tn(t,[]))},resetState:function(t){t.sorter.onKeyChangeCallback(),Tn(t,[])},addFilter:function(t,e){t.filters[e.key]=e.comparator,Nn(t)},removeFilter:function(t,e){t.filters[e]&&(delete t.filters[e],Nn(t))},removeAllFilters:function(t){Object.keys(t.filters).length>0&&(t.filters={},Nn(t))},setSorter:function(t,e){var a=t.sorter;a.id!==e.sortId&&(a.onKeyChangeCallback(e.sortId),a.id=e.sortId,a.comparator=e.comparator,a.onKeyChangeCallback=e.onKeyChangeCallback,t.filteredItems.sort(a.comparator))},toggleItemSelection:function(t,e){o["default"].set(e,Fn,!e[Fn])},setItemsSelection:function(t,e){e.items.forEach((function(t){o["default"].set(t,Fn,e.areSelected)}))},setPage:function(t,e){t.page=e}};return new k["a"].Store({state:e,getters:a,mutations:n})}var En=On,jn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("input",{staticClass:"form-control form-control-sm",attrs:{type:"text"},on:{input:t.setFilter}})},Un=[],Ln={},qn=function(t){return Ln.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},Ln.methods={setFilter:le((function(e){var a=this,n=e.target.value;if(null!==n&&""!==n){var o=function(t){var e={};return function(n){return a.compare(ue(n,a.filterKey,e),t)}}(n),s={key:a.filterKey,comparator:o};t.commit("addFilter",s)}else t.commit("removeFilter",a.filterKey)}),300)},Ln};qn.options=Ln;var Kn=qn,zn=Kn,Vn=Object(W["a"])(zn,jn,Un,!1,null,null,null),Bn=Vn.exports,Hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control form-control-sm",on:{change:t.setFilter}},[a("option",{attrs:{value:""}}),t._l(t.options,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}))],2)},Yn=[];function Xn(t,e){var a=[],n={};return t.forEach((function(t){var o=ue(t,e,n);null!==o&&""!==o&&-1===a.indexOf(o)&&a.push(o)})),a}var Jn={},Wn=function(t){return Jn.props={items:{required:!0},filterKey:{required:!0},compare:{type:Function,required:!0}},Jn.computed={options:function(){return Xn(this.items,this.filterKey)}},Jn.methods={setFilter:function(e){var a=this,n=e.target.value;if(""!==n){var o=function(t){var e={};return function(n){return a.compare(ue(n,a.filterKey,e),t)}}(n),s={key:a.filterKey,comparator:o};t.commit("addFilter",s)}else t.commit("removeFilter",a.filterKey)}},Jn};Wn.options=Jn;var Gn=Wn,Qn=Gn,Zn=Object(W["a"])(Qn,Hn,Yn,!1,null,null,null),to=Zn.exports,eo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{ref:"dropdown"},[a("btn",{staticClass:"dropdown-toggle calendar-btn"},[t._v(t._s(t.date)+" "),a("i",{staticClass:"fa fa-calendar"})]),a("template",{slot:"dropdown"},[a("li",[a("date-picker",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])],2)},ao=[],no={},oo=function(t){return no.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},no.data=function(){return{date:null}},no.watch={date:function(e){var a=this,n=new Date(e);if(null!==e&&""!==e){var o=function(t){var e={};return function(n){return a.compare(ue(n,a.filterKey,e),t)}}(n),s={key:a.filterKey,comparator:o};t.commit("addFilter",s)}else t.commit("removeFilter",a.filterKey)}},no};oo.options=no;var so=oo,ro=so,io=Object(W["a"])(ro,eo,ao,!1,null,null,null),co=io.exports,lo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-dropdown",{ref:"dropdown",staticClass:"m-2",attrs:{size:"sm",text:t.selection}},t._l(t.options,(function(e){return a("b-dropdown-item",{key:e.label},[a("a",{attrs:{role:"button"},on:{click:function(a){return t.select(e)}}},[t._v(t._s(e.label))])])})),1)},uo=[],mo="marked"+Date.now(),po={},fo=function(t){return po.data=function(){var t=this,e=[{label:"All",fn:function(){t.removeFilter()}},{label:"Selected",fn:function(){t.filter(!0)}},{label:"Not selected",fn:function(){t.filter(!1)}}];return{selection:e[0].label,options:e}},po.methods={select:function(t){t.fn(),this.selection=t.label},filter:function(e){var a=function(e){return function(a){return t.getters.isItemSelected(a)===e}}(e),n={key:mo,comparator:a};t.commit("addFilter",n)},removeFilter:function(){t.commit("removeFilter",mo)}},po};fo.options=po;var ho=fo,vo=ho,go=Object(W["a"])(vo,lo,uo,!1,null,null,null),yo=go.exports,bo="sort",Co="sort-asc",_o="sort-desc",Do=function(t){return{bind:function(e,a,n){var o=a.value,s=o.sortKey,r=o.compare,i=o.initOrder,c=null;function l(){null===c||-1===c?(c=1,e.classList.add(Co),e.classList.remove(_o)):(c=-1,e.classList.add(_o),e.classList.remove(Co));var a={sortId:s+c,comparator:Ve(r,s,c),onKeyChangeCallback:u};t.commit("setSorter",a)}function u(t){void 0!==t&&t.startsWith(s)||(e.classList.remove(_o),e.classList.remove(Co),c=null)}e.classList.add(bo),e.addEventListener("click",l),i&&(c="DESC"===i?1:-1,l())}}},$o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isSelected,expression:"isSelected"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isSelected)?t._i(t.isSelected,null)>-1:t.isSelected},on:{change:[function(e){var a=t.isSelected,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=null,r=t._i(a,s);n.checked?r<0&&(t.isSelected=a.concat([s])):r>-1&&(t.isSelected=a.slice(0,r).concat(a.slice(r+1)))}else t.isSelected=o},t.changeHandler]}})])},xo=[],wo={},So=function(t){return wo.props={item:{required:!0},disable:{type:Boolean}},wo.methods={changeHandler:function(e){t.commit("toggleItemSelection",this.item)}},wo.computed={isSelected:{get:function(){return t.getters.isItemSelected(this.item)},set:function(){}}},wo.watch={disable:function(e){e&&this.isSelected&&t.commit("toggleItemSelection",this.item)}},wo};So.options=wo;var Ro=So,Io=Ro,Po=Object(W["a"])(Io,$o,xo,!1,null,null,null),ko=Po.exports,Fo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-group btn-group-sm bulk-selector",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("input",{ref:"checkbox",attrs:{type:"checkbox"},domProps:{checked:t.areSelected},on:{change:t.toggleAll}})]),t.totalSelectedCount?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("span",[t._v(t._s(t.totalSelectedCount)+" "+t._s(t.totalSelectedCount>1?"Records":"Record")+" selected")])]):t._e(),t.totalSelectedCount&&t.$slots.default?a("b-dropdown",{attrs:{text:"Bulk actions"}},[t._t("default")],2):t._e()],1)},Mo=[],No={},Ao=function(t){return No.props={items:{type:Array,required:!0}},No.computed={itemsCount:function(){return this.items.length},totalSelectedCount:function(){return t.getters.selectedItems.length},pageSelectedCount:function(){return this.items.reduce((function(e,a){return t.getters.isItemSelected(a)&&e++,e}),0)},areSelected:function(){return this.itemsCount-this.pageSelectedCount===0?(this.checkHalf(!1),!0):0===this.totalSelectedCount?(this.checkHalf(!1),!1):(this.checkHalf(!0),!1)}},No.methods={checkHalf:function(t){this.$refs.checkbox&&(this.$refs.checkbox.indeterminate=t)},toggleAll:function(e){var a={items:this.items,areSelected:e.target.checked};t.commit("setItemsSelection",a)}},No};Ao.options=No;var To=Ao,Oo=To,Eo=Object(W["a"])(Oo,Fo,Mo,!1,null,null,null),jo=Eo.exports,Uo={TableStore:En,InputFilter:Bn,SelectFilter:to,DateFilter:co,MarkedFilter:yo,SortDirective:Do,CheckboxSelect:ko,BulkSelector:jo},Lo=function(t){return{computed:{pageItems:function(){return t.getters.pageItems(this.itemsPerPage)},totalRows:function(){return t.getters.totalRows},pages:function(){return t.getters.totalPages(this.itemsPerPage)},page:{get:function(){return t.getters.page},set:function(e){t.commit("setPage",e)}}},methods:{setItemsPerPage:ma()((function(e){var a=+e.target.value;t.commit("setPage",1),!isNaN(a)&&a>0?this.itemsPerPage=a:10===this.itemsPerPage&&0===a?(this.itemsPerPage=1,this.itemsPerPage=10):this.itemsPerPage=10}),300)}}},qo={},Ko=function(t){return qo.name="rcRecordsModal",qo.mixins=[kn,Lo(t)],qo.directives={Sort:Uo.SortDirective(t)},qo.components={InputFilter:Uo.InputFilter(t),SelectFilter:Uo.SelectFilter(t),DateFilter:Uo.DateFilter(t),BulkSelector:Uo.BulkSelector(t),CheckboxSelect:Uo.CheckboxSelect(t),MarkedFilter:Uo.MarkedFilter(t)},qo.data=function(){return{dataChanged:!1,itemsPerPage:5,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day}}},qo.computed={records:function(){return this.$store.getters.recognizedCompanyRecords(this.value)},statementType:function(){return this.$store.getters.statementType},dates:function(){var t=this.$store.getters.importReceipt,e=C.formatDate(t.toDate);return t.fromDate&&(e=C.formatDate(t.fromDate)+" - "+e),e},myCompany:function(){return this.$store.getters.selectedCompany}},qo.methods={load:function(t){return this.dataChanged=!1,this.contractorName=t.company.name,this.$store.dispatch("loadRecognizedCompanyRecords",t)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},deleteSelected:function(){var e=this;t.getters.selectedItems.forEach((function(t){return e.deleteCurrent(t)}))},deleteCurrent:function(e){var a=this;this.$store.dispatch("removeValidRecord",e).then((function(){a.dataChanged=!0,t.commit("removeItem",e)}))},close:function(){this.dataChanged&&this.$emit("dataChanged")}},qo.watch={records:function(e){t.commit("setItems",e)}},qo};Ko.options=qo;var zo=Uo.TableStore("rcRecordsModal"),Vo=Ko(zo),Bo=Vo,Ho=Object(W["a"])(Bo,vn,gn,!1,null,null,null),Yo=Ho.exports,Xo={components:{rcRecordsModal:Yo},data:function(){return{selectedSet:null}},computed:{sets:function(){return this.$store.getters.recognizedCompaniesSets},context:function(){return this.$store.getters.statementTypeContext}},methods:{show:function(t){this.selectedSet=t},remove:function(t){this.$store.dispatch("removeValidSet",t).then(this.reloadData)},reloadData:function(){this.$store.dispatch("loadSummary")}}},Jo=Xo,Wo=Object(W["a"])(Jo,fn,hn,!1,null,null,null),Go=Wo.exports,Qo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th"),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.IN))]),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.OUT))]),a("th",{attrs:{colspan:"2"}})]),a("tr",[a("th",[t._v(t._s(t.$t("Company")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Records")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Records")))]),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Actions")))])])]),a("tbody",t._l(t.sets,(function(e){return a("tr",{key:e.company.name},[a("td",[t._v(t._s(e.company.name))]),a("td",[t._v(t._s(e.receivables.amount))]),a("td",[t._v(t._s(e.receivables.count))]),a("td",[t._v(t._s(e.payables.amount))]),a("td",[t._v(t._s(e.payables.count))]),a("td",[a("b-container",[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-form-select",{staticClass:"mb-3",attrs:{options:t.selectContactsOptions},model:{value:t.selectedContact[e.company.name],callback:function(a){t.$set(t.selectedContact,e.company.name,a)},expression:"selectedContact[set.company.name]"}})],1),a("b-col",{attrs:{cols:"4"}},[a("button",{staticClass:"btn btn-info btn-sm",attrs:{title:t.$t("View details")},on:{click:function(a){return t.recognize(e,t.selectedContact[e.company.name])}}},[t._v(t._s(t.$t("Recognize")))])])],1)],1)],1),a("td",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{title:t.$t("View details")},on:{click:function(a){return t.show(e)}}},[t._v(t._s(t.$t("View details")))])])])})),0)]),a("ucRecordsModal",{model:{value:t.selectedSet,callback:function(e){t.selectedSet=e},expression:"selectedSet"}})],1)},Zo=[],ts=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("modal-head",{attrs:{slot:"head",contractor:t.contractorName},slot:"head"}),a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"line",compare:"numbers"},expression:"{sortKey: 'line', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Line")))]),a("th",[t._v(t._s(t.$t("Acc. Type")))]),a("th",[t._v(t._s(t.$t("Ref #")))]),a("th",[t._v(t._s(t.$t("Payer")))]),a("th",[t._v(t._s(t.$t("Receiver")))]),a("th",[t._v(t._s(t.$t("Doc. Date")))]),a("th",[t._v(t._s(t.$t("Due Date")))]),a("th",[t._v(t._s(t.$t("Posting Date")))]),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docAmount",compare:"numbers"},expression:"{sortKey: 'docAmount', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Description")))])]),t.showFilters?a("tr",[a("td",[a("InputFilter",{attrs:{filterKey:"line",compare:t.compare.numAsString}})],1),a("td"),a("td"),a("td"),a("td"),a("td"),a("td"),a("td"),a("td",[a("SelectFilter",{attrs:{filterKey:"currency.code",items:t.records,compare:t.compare.numAsString}})],1),a("td"),a("td")]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.line},[a("td",{staticClass:"line-cell"},[t._v(t._s(e.line))]),a("td",[t._v(t._s(e.account))]),a("td",[t._v(t._s(e.ref))]),a("td",[t._v(t._s(e.payer))]),a("td",[t._v(t._s(e.receiver))]),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),a("td",[t._v(t._s(e.currency?e.currency.code:""))]),a("td",[t._v(t._s(e.docAmount))]),a("td",[t._v(t._s(e.desc))])])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)],1)},es=[],as={},ns=function(t){return as.name="ucRecordsModal",as.mixins=[kn,Lo(t)],as.directives={Sort:Uo.SortDirective(t)},as.components={InputFilter:Uo.InputFilter(t),SelectFilter:Uo.SelectFilter(t),DateFilter:Uo.DateFilter(t),BulkSelector:Uo.BulkSelector(t),CheckboxSelect:Uo.CheckboxSelect(t),MarkedFilter:Uo.MarkedFilter(t)},as.data=function(){return{itemsPerPage:10,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day}}},as.computed={records:function(){return this.$store.getters.unrecognizedCompanyRecords(this.value)}},as.methods={load:function(t){return this.contractorName=t.company.name,this.$store.dispatch("loadUnrecognizedCompanyRecords",t)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},as.watch={records:function(e){t.commit("setItems",e)}},as};ns.options=as;var os=Uo.TableStore("ucRecordsModal"),ss=ns(os),rs=ss,is=Object(W["a"])(rs,ts,es,!1,null,null,null),cs=is.exports,ls={components:{ucRecordsModal:cs},mixins:[va],created:function(){this.runAfterSCisSet(this.loadContacts)},data:function(){return{selectedSet:null,selectedContact:{}}},computed:{selectContactsOptions:function(){return this.contacts.map((function(t){return{text:t.name,value:t}}))},contacts:function(){return this.$store.getters.contacts},sets:function(){return this.$store.getters.unrecognizedCompaniesSets},context:function(){return this.$store.getters.statementTypeContext}},methods:{recognize:function(t,e){var a=e,n=t.company.name;this.$store.dispatch("createAlias",{refCompany:a,aname:n}).then(this.$store.dispatch("loadSummary"))},show:function(t){this.selectedSet=t},loadContacts:function(){this.loadStore("loadSCContacts")},loadStore:function(t){var e=this;this.loading=!0,this.$store.dispatch(t).finally((function(){e.loading=!1}))}}},us=ls,ds=Object(W["a"])(us,Qo,Zo,!1,null,null,null),ms=ds.exports,ps=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive upload-summary"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("Transactions Type")))]),a("th",[t._v(t._s(t.$t("Number")))]),a("th")])]),a("tbody",[a("tr",[a("th",[t._v(t._s(t.$t("Valid with recognized companies"))+":")]),a("td",[t._v(t._s(t.recordsCount.validRecognizedCompany))]),a("td")]),a("tr",[a("th",[t._v(t._s(t.$t("Valid with unrecognized companies"))+":")]),a("td",[t._v(t._s(t.recordsCount.validUnrecognizedCompany))]),a("td")]),a("tr",[a("th",[t._v(t._s(t.$t("Invalid"))+":")]),a("td",[t._v(t._s(t.recordsCount.invalid))]),a("td",[t.recordsCount.invalid?a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(e){t.showInvalidDetails=!0}}},[t._v(t._s(t.$t("View Details")))]):t._e()])]),a("tr",[a("th",[t._v(t._s(t.$t("Out of Period"))+":")]),a("td",[t._v(t._s(t.recordsCount.outOfScope))]),a("td",[t.recordsCount.outOfScope?a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(e){t.showOutOfPeriodDetails=!0}}},[t._v(t._s(t.$t("View Details")))]):t._e()])]),a("tr",[a("th",[t._v(t._s(t.$t("Removed"))+":")]),a("td",[t._v(t._s(t.recordsCount.removed))]),a("td")])]),a("tfoot",[a("tr",[a("th",[t._v(t._s(t.$t("TOTAL"))+":")]),a("td",[t._v(t._s(t.total))]),a("td")])])]),a("invalidRecordsModal",{model:{value:t.showInvalidDetails,callback:function(e){t.showInvalidDetails=e},expression:"showInvalidDetails"}}),a("outOfScopeRecordsModal",{model:{value:t.showOutOfPeriodDetails,callback:function(e){t.showOutOfPeriodDetails=e},expression:"showOutOfPeriodDetails"}})],1)},fs=[],hs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",staticClass:"invalid-records-modal",on:{close:t.close}},[a("modal-head",{attrs:{slot:"head",contractor:t.contractorName},slot:"head"}),a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th"),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"line",compare:"numbers"},expression:"{sortKey: 'line', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Line")))]),a("th",[t._v(t._s(t.$t("Errors")))]),a("th",[t._v(t._s(t.$t("Acc. Type")))]),a("th",[t._v(t._s(t.$t("Ref #")))]),a("th",[t._v(t._s(t.$t("Payer")))]),a("th",[t._v(t._s(t.$t("Receiver")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docDate",compare:"dates"},expression:"{sortKey: 'docDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Doc. Date")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"dueDate",compare:"dates"},expression:"{sortKey: 'dueDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Due Date")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"postingDate",compare:"dates"},expression:"{sortKey: 'postingDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Posting Date")))]),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Description")))])]),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),a("th",[a("InputFilter",{attrs:{filterKey:"line",compare:t.compare.numAsString}})],1),a("th",[t._v(t._s(t.$t("Errors")))]),a("th",[t._v(t._s(t.$t("Acc. Type")))]),a("th",[a("SelectFilter",{attrs:{filterKey:"ref",items:t.records,compare:t.compare.numAsString}})],1),a("th",[t._v(t._s(t.$t("Payer")))]),a("th",[t._v(t._s(t.$t("Receiver")))]),a("th",[t._v(t._s(t.$t("Doc. Date")))]),a("th",[t._v(t._s(t.$t("Due Date")))]),a("th",[t._v(t._s(t.$t("Posting Date")))]),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Description")))])]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.line},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e,disable:e.needFxRate}})],1),a("td",{staticClass:"line-cell"},[t._v(t._s(e.line))]),a("td",{staticClass:"error-cell"},[a("ul",t._l(e.errors,(function(e){return a("li",[a("strong",[t._v(t._s(e.type.label)+":")]),t._v(" "+t._s(e.desc)+" ")])})),0)]),a("td",[t._v(t._s(e.account))]),a("td",[t._v(t._s(e.ref))]),a("td",[t._v(t._s(e.payer))]),a("td",[t._v(t._s(e.receiver))]),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),a("td",[t._v(t._s(e.docCurrency))]),a("td",[t._v(t._s(e.docAmount))]),a("td",[t._v(t._s(e.desc))])])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)],1)},vs=[],gs=Uo.TableStore("InvalidRecordsModal"),ys={},bs=function(t){return ys.name="InvalidRecordsModal",ys.mixins=[kn,Lo(t)],ys.directives={Sort:Uo.SortDirective(t)},ys.components={InputFilter:Uo.InputFilter(t),SelectFilter:Uo.SelectFilter(t),DateFilter:Uo.DateFilter(t),BulkSelector:Uo.BulkSelector(t),CheckboxSelect:Uo.CheckboxSelect(t),MarkedFilter:Uo.MarkedFilter(t)},ys.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day}}},ys.computed={records:function(){return this.$store.getters.invalidRecords}},ys.methods={load:function(){return this.$store.dispatch("loadInvalidRecords")},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},ys.watch={records:function(e){t.commit("setItems",e)}},ys};bs.options=ys;var Cs=bs(gs),_s=Cs,Ds=Object(W["a"])(_s,hs,vs,!1,null,null,null),$s=Ds.exports,xs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("modal-head",{attrs:{slot:"head",contractor:t.contractorName},slot:"head"}),a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),a("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group"}},[a("label",{attrs:{for:"ipp"}},[t._v(t._s(t.$t("Items per page"))+":")]),a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])]),a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"line",compare:"numbers"},expression:"{sortKey: 'line', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Line")))]),a("th",[t._v(t._s(t.$t("Acc. Type")))]),a("th",[t._v(t._s(t.$t("Ref #")))]),a("th",[t._v(t._s(t.$t("Payer")))]),a("th",[t._v(t._s(t.$t("Receiver")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docDate",compare:"dates"},expression:"{sortKey: 'docDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Doc. Date")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"dueDate",compare:"dates"},expression:"{sortKey: 'dueDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Due Date")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"postingDate",compare:"dates"},expression:"{sortKey: 'postingDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Posting Date")))]),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Description")))])]),t.showFilters?a("tr",[a("th",[a("InputFilter",{attrs:{filterKey:"line",compare:t.compare.numAsString}})],1),a("th",[t._v(t._s(t.$t("Acc. Type")))]),a("th",[a("SelectFilter",{attrs:{filterKey:"ref",items:t.records,compare:t.compare.numAsString}})],1),a("th",[t._v(t._s(t.$t("Payer")))]),a("th",[t._v(t._s(t.$t("Receiver")))]),a("th",[t._v(t._s(t.$t("Doc. Date")))]),a("th",[t._v(t._s(t.$t("Due Date")))]),a("th",[t._v(t._s(t.$t("Posting Date")))]),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),a("th",[t._v(t._s(t.$t("Amount")))]),a("th",[t._v(t._s(t.$t("Description")))])]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.line},[a("td",{staticClass:"line-cell"},[t._v(t._s(e.line))]),a("td",[t._v(t._s(e.account))]),a("td",[t._v(t._s(e.ref))]),a("td",[t._v(t._s(e.payer))]),a("td",[t._v(t._s(e.receiver))]),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),a("td",[t._v(t._s(e.docCurrency))]),a("td",[t._v(t._s(e.docAmount))]),a("td",[t._v(t._s(e.desc))])])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)],1)},ws=[],Ss=Uo.TableStore("OutOfScopeRecordsModal"),Rs={},Is=function(t){return Rs.name="outOfScopeRecordsModal",Rs.mixins=[kn,Lo(t)],Rs.directives={Sort:Uo.SortDirective(t)},Rs.components={InputFilter:Uo.InputFilter(t),SelectFilter:Uo.SelectFilter(t),DateFilter:Uo.DateFilter(t)},Rs.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day}}},Rs.computed={records:function(){return this.$store.getters.outOfScopeRecords}},Rs.methods={load:function(){return this.$store.dispatch("loadOutOfScopeRecords")},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},Rs.watch={records:function(e){t.commit("setItems",e)}},Rs};Is.options=Rs;var Ps=Is(Ss),ks=Ps,Fs=Object(W["a"])(ks,xs,ws,!1,null,null,null),Ms=Fs.exports,Ns={components:{InvalidRecordsModal:$s,OutOfScopeRecordsModal:Ms},data:function(){return{showInvalidDetails:!1,showOutOfPeriodDetails:!1}},computed:{recordsCount:function(){return this.$store.getters.recordsCount},total:function(){var t=this;return Object.keys(this.recordsCount).reduce((function(e,a){return e+t.recordsCount[a]}),0)}}},As=Ns,Ts=Object(W["a"])(As,ps,fs,!1,null,null,null),Os=Ts.exports,Es={name:"UploadPage",components:{UploadForm:pn,RcTable:Go,UcTable:ms,SummaryTable:Os},data:function(){return{loading:!1,uploadData:null,historyComponent:this.$route.params.historyComponent?this.$route.params.historyComponent:null}},computed:{summary:function(){return this.$store.getters.importSummary}},created:function(){this.$route.params.uploadData&&(this.uploadData=this.$route.params.uploadData)},methods:{saveRecognisedRecords:function(){var t=this;this.$store.dispatch("saveValid").then((function(){t.$customMsg.showSuccessMessage(t.$t("Saved records successfully")),t.$store.commit("clearImport")})).catch((function(e){t.$customMsg.showErrorMessage(t.$t(e.messageDetail))})).finally((function(){t.loading=!1,null!==t.historyComponent&&t.$router.push(t.historyComponent)}))},onUpload:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSummary").then((function(){t.loading=!1}))},cancel:function(){this.$store.commit("clearImport")}}},js=Es,Us=Object(W["a"])(js,sn,rn,!1,null,null,null),Ls=Us.exports,qs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contact-page"},[a("h2",[t._v(t._s(t.$t("Contacts")))]),a("b-modal",{attrs:{title:t.$t("Company Invitation")},on:{ok:t.onInvModalOk},model:{value:t.showInvModal,callback:function(e){t.showInvModal=e},expression:"showInvModal"}},[a("invitation-form",{ref:"invitationForm",on:{success:t.onSentInvitation}})],1),a("b-modal",{attrs:{title:t.$t("Add from my companies")},on:{ok:t.onInvMyCompanyModal},model:{value:t.showInvMyCompanyModal,callback:function(e){t.showInvMyCompanyModal=e},expression:"showInvMyCompanyModal"}},[a("invitation-my-companies-form",{ref:"invitationMyCompaniesForm",on:{success:t.onSentMyCompaniesInvitation}})],1),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:"Contacts",active:""}},[t.hasContacts&&0===t.activeTabId?a("contacts-table",{on:{openInvModal:t.openInvModal,openInvMyCompanyModal:t.openInvMyCompanyModal}}):t._e(),t.hasContacts||t.loading?t._e():a("div",[a("p",{staticClass:"py-3"},[t._v(t._s(t.$t("There aren't any contacts added yet.")))]),a("p",[a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:t.openInvMyCompanyModal}},[t._v(t._s(t.$t("Invite from my companies")))]),a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:t.openInvModal}},[t._v(t._s(t.$t("Invite Company")))])],1)])],1),a("b-tab",{attrs:{title:"Holding"}},[1===t.activeTabId?a("holding-tab"):t._e()],1),a("b-tab",{staticClass:"related-parties",attrs:{title:"Related parties"}},[2===t.activeTabId?a("related-parties-table",{ref:"relatedPartiesTable"}):t._e()],1),a("b-tab",{attrs:{title:"Sent Invitations"}},[t.hasInvitations?a("invitations-table"):t._e(),t.hasInvitations||t.loading?t._e():a("div",[t._v(t._s(t.$t("There aren't any invitations.")))])],1)],1),a("loading",{attrs:{loading:t.loading}})],1)},Ks=[],zs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table contacts-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("b-btn",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])],1),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})]),a("div",{staticClass:"absolute-right"},[a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:function(e){return t.emitEvent("openInvMyCompanyModal")}}},[t._v(t._s(t.$t("Invite from my companies")))]),a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:function(e){return t.emitEvent("openInvModal")}}},[t._v(t._s(t.$t("Invite Company")))])],1)],1),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th"),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"name",compare:"strings",initOrder:"ASC"},expression:"{sortKey: 'name', compare: 'strings', initOrder: 'ASC'}"}]},[t._v(t._s(t.$t("Name")))]),a("th",[t._v(t._s(t.$t("Aliases")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"regNum",compare:"strings"},expression:"{sortKey: 'regNum', compare: 'strings'}"}]},[t._v(t._s(t.$t("Reg Number")))]),a("th")]),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),a("th",[a("InputFilter",{attrs:{filterKey:"name",compare:t.compare.string}})],1),a("th"),a("th",[a("InputFilter",{attrs:{filterKey:"regNum",compare:t.compare.numAsString}})],1),a("th")]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),a("th",[e.logo&&e.name?a("company-card",{attrs:{company:e,size:"m"}}):t._e()],1),a("td",t._l(e.aliases,(function(e){return a("b-form-tag",{key:e.id,staticClass:"mr-1 mb-1",staticStyle:{"font-size":"1em"},attrs:{title:e.aname,variant:"info"},on:{remove:function(a){return t.removeAlias(e)}}},[t._v(t._s(e.aname))])})),1),a("td",[t._v(t._s(e.regNum))]),a("td",[a("b-dropdown",{attrs:{text:"...","no-caret":""}},[a("b-dropdown-item",{on:{click:function(a){return t.startReconciliation(e.id)}}},[t._v(t._s(t.$t("Start Reconciliation")))]),a("b-dropdown-item",{on:{click:function(a){return t.showAddAliasModal(e)}}},[t._v(t._s(t.$t("Add alias")))])],1)],1)])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("b-modal",{ref:"addAliasModal",attrs:{id:"add-alias-modal",title:"Add Alias",size:"sm"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[a("form",{ref:"addAliasForm",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.addAlias(e)}}},[a("b-form-group",{attrs:{"label-for":"alias-input","invalid-feedback":"Please, enter an alias",state:t.newAliasState}},[a("b-form-input",{attrs:{id:"alias-input",state:t.newAliasState,required:""},model:{value:t.newAlias,callback:function(e){t.newAlias=e},expression:"newAlias"}})],1)],1)]),a("loading",{attrs:{loading:t.loading}})],1)},Vs=[],Bs=a("d54b"),Hs={},Ys=function(t){return Hs.name="ContactsTable",Hs.mixins=[kn,Lo(t)],Hs.directives={Sort:Uo.SortDirective(t)},Hs.components={CompanyCard:Bs["a"],InputFilter:Uo.InputFilter(t),SelectFilter:Uo.SelectFilter(t),DateFilter:Uo.DateFilter(t),BulkSelector:Uo.BulkSelector(t),CheckboxSelect:Uo.CheckboxSelect(t),MarkedFilter:Uo.MarkedFilter(t),Pagination:Uo.Pagination},Hs.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day},newAlias:"",newAliasState:null,newAliasCompany:null}},Hs.computed={contacts:function(){return this.$store.getters.contacts}},Hs.mounted=function(){t.commit("setItems",this.$store.getters.contacts)},Hs.methods={load:function(t){this.contractorName=t.company.name},emitEvent:function(t){this.$emit(t)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},startReconciliation:function(t){this.$router.push({name:"Reconciliations",params:{startReconciliationFor:t}})},showAddAliasModal:function(t){this.newAliasCompany=t,console.log(this.newAliasCompany),this.$bvModal.show("add-alias-modal")},checkFormValidity:function(){var t=this.$refs.addAliasForm.checkValidity();return this.newAliasState=t,t},resetModal:function(){this.newAlias="",this.newAliasState=null},handleOk:function(t){t.preventDefault(),this.addAlias()},addAlias:function(){var t=this;this.checkFormValidity()&&(this.$nextTick((function(){t.$bvModal.hide("add-alias-modal")})),this.$store.dispatch("createAlias",{refCompany:this.newAliasCompany,aname:this.newAlias}))},removeAlias:function(t){this.$store.dispatch("deleteAlias",t)}},Hs.watch={contacts:function(e){t.commit("setItems",e)}},Hs};Ys.options=Hs;var Xs=Uo.TableStore("ContactsTable"),Js=Ys(Xs),Ws=Js,Gs=Object(W["a"])(Ws,zs,Vs,!1,null,null,null),Qs=Gs.exports,Zs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tree-wrapper"},[a("Tree",{attrs:{nodes:t.nodes},on:{changeSelected:t.changeSelected}}),a("CompanyInfo",{attrs:{selected:t.currentSelectedNode}})],1)},tr=[],er=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tree"},[t.items.length?a("TreeNode",{attrs:{nodes:t.items,state:t._self,preselectedCompany:t.preselectedCompany}}):t._e()],1)},ar=[],nr=a("d487"),or={name:"Tree",components:{TreeNode:nr["default"]},props:{nodes:{required:!0},childrenProp:{default:"children"},idProp:{default:"id"},labelProp:{default:"name"},preselectedCompany:{}},data:function(){return{deselectFunc:null}},methods:{selectNode:function(t,e){this.deselectFunc&&this.deselectFunc(),this.$emit("changeSelected",t),this.deselectFunc=e},expandAll:function(){this.$emit("expandAll")},collapseAll:function(){this.$emit("collapseAll")}},computed:{items:function(){return this.nodes||[]}}},sr=or,rr=Object(W["a"])(sr,er,ar,!1,null,null,null),ir=rr.exports,cr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.selected?a("div",{staticClass:"company-info"},[a("p",[t._v(t._s(t.$t("Company Name"))+": "+t._s(t.selected.name))]),a("p",[t._v(t._s(t.$t("Registration ID"))+": "+t._s(t.selected.regNum))]),a("p",[t._v(t._s(t.$t("Country"))+": "+t._s(t.selected.country.name))]),a("p",[t._v(t._s(t.$t("Reporting Currency"))+": "+t._s(t.selected.currency.code+" - "+t.selected.currency.name))]),a("p",[t._v(t._s(t.$t("Address"))+": "+t._s(t.selected.addressText))]),a("p",[t._v(t._s(t.$t("Parent company"))+": "+t._s(t.selected.parent.name))])]):t._e()},lr=[],ur={props:{selected:{}},data:function(){return{}},methods:{}},dr=ur,mr=Object(W["a"])(dr,cr,lr,!1,null,null,null),pr=mr.exports,fr={components:{Tree:ir,CompanyInfo:pr},data:function(){return{currentSelectedNode:null}},computed:{nodes:function(){return this.$store.getters.holdingTree}},created:function(){this.$store.dispatch("loadHoldingTree").then((function(t){console.log(t)}))},methods:{changeSelected:function(t){this.currentSelectedNode=t}}},hr=fr,vr=Object(W["a"])(hr,Zs,tr,!1,null,null,null),gr=vr.exports,yr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("b-modal",{attrs:{title:t.$t("Add related party"),"ok-disabled":t.noContacts,"cancel-title":t.cancelBtnTitle},on:{ok:t.onRPModalOk},model:{value:t.showRPModal,callback:function(e){t.showRPModal=e},expression:"showRPModal"}},[a("related-parties-modal",{ref:"relatedPartiesModal",on:{success:t.onAddRelatedParties}})],1),a("b-row",[a("b-col",[a("label",[t._v(t._s(t.$t("From date"))+":")]),a("datepicker",{attrs:{"bootstrap-styling":!0,"clear-button":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}})],1),a("b-col",[a("label",[t._v(t._s(t.$t("To date"))+":")]),a("datepicker",{attrs:{"bootstrap-styling":!0,"clear-button":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}})],1),a("b-col",{attrs:{"align-self":"end"}},[a("label",[t._v(t._s(t.$t("Results per page"))+":")]),a("b-form-select",{attrs:{options:t.optionsPerPage},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1),a("b-col",{attrs:{"align-self":"end"}},[a("b-btn",{on:{click:t.sendDates}},[t._v(t._s(t.$t("Filter")))])],1),a("b-btn",{staticClass:"btn btn-success btn-sm mb-3 absolute-right",on:{click:t.openRPModal}},[t._v(t._s(t.$t("Add related party")))])],1),a("br"),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{on:{click:function(e){return t.setSort("name")}}},[t._v(" "+t._s(t.$t("Name"))+" "),a("span",{class:t.getSortClass("name")})]),a("th",[t._v(t._s(t.$t("Aliases")))]),a("th",[t._v(t._s(t.$t("Reg Number")))]),a("th",[t._v(t._s(t.$t("Source")))]),a("th",{on:{click:function(e){return t.setSort("fromDate")}}},[t._v(" "+t._s(t.$t("From date"))+" "),a("span",{class:t.getSortClass("fromDate")})]),a("th",{on:{click:function(e){return t.setSort("toDate")}}},[t._v(" "+t._s(t.$t("To date"))+" "),a("span",{class:t.getSortClass("toDate")})]),a("th",[t._v(t._s(t.$t("Description")))]),a("th",[t._v(t._s(t.$t("Actions")))])])]),a("tbody",t._l(t.companyRelatedParties,(function(e){return a("tr",{key:e.id},[a("th",[e.logo&&e.name?a("company-card",{attrs:{company:e,size:"m"}}):t._e()],1),a("td",[t._v(t._s(e.companyAliases))]),a("td",[t._v(t._s(e.registrationNumber))]),a("td",[t._v(t._s(e.typeName))]),t.editData.id!==e.detailId?[a("td",[t._v(t._s(t._f("bsDate")(e.fromDate)))]),null!==e.toDate?a("td",[t._v(t._s(t._f("bsDate")(e.toDate)))]):a("td",[t._v(" - ")]),a("td",[t._v(t._s(e.description))]),2===e.typeId?a("td",[a("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(a){return t.editRP(e)}}},[t._v("Edit")]),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.deleteRP(e)}}},[t._v("Delete")])],1):a("td"),a("td",[t._v(t._s(e.editActive))])]:[a("td",[a("datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.editData.fromDate,callback:function(e){t.$set(t.editData,"fromDate",e)},expression:"editData.fromDate"}})],1),a("td",[a("datepicker",{attrs:{"bootstrap-styling":!0,"clear-button":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.editData.toDate,callback:function(e){t.$set(t.editData,"toDate",e)},expression:"editData.toDate"}})],1),a("td",[a("b-form-input",{attrs:{type:"text",placeholder:"Description"},model:{value:t.editData.description,callback:function(e){t.$set(t.editData,"description",e)},expression:"editData.description"}})],1),a("td",[a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(a){return t.confirmEdit(e)}}},[t._v(t._s(t.$t("OK")))]),a("b-button",{attrs:{size:"sm",variant:"warning"},on:{click:function(e){return t.cancelEdit()}}},[t._v(t._s(t.$t("Cancel")))])],1)]],2)})),0)]),a("br"),a("b-pagination",{attrs:{size:"md","total-rows":t.count,"per-page":t.itemsPerPage},on:{change:t.loadPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),a("loading",{attrs:{loading:t.loading}})],1)},br=[],Cr=(a("a4d3"),a("e01a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),t.hasContacts?a("div",[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Contact"))+":")]),a("ModelSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"contactName",options:t.SCContactsOptions,placeholder:"select contact ..."},model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),t.errors.has("contactName")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a contact"))+".")]):t._e()],1),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("From date"))+":")]),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"fromDate","bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t.errors.has("fromDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a starting date"))+".")]):t._e()],1),a("div",{staticClass:"form-group"},[a("b-form-checkbox",{model:{value:t.formData.current,callback:function(e){t.$set(t.formData,"current",e)},expression:"formData.current"}},[t._v(" "+t._s(t.$t("It is currently a related party"))+" ")])],1),t.formData.current?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("To date"))+":")]),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"toDate","bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t.errors.has("toDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a end date"))+".")]):t._e()],1),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Description"))+":")]),a("b-form-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"description",placeholder:"Enter description",rows:3,"max-rows":6},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}}),t.errors.has("description")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, enter description"))+".")]):t._e()],1)]):a("div",[t._v(" "+t._s(t.$t("You need to have contact companies in order to mark some of them as related parties."))+" ")]),a("loading",{attrs:{loading:t.loading}})],1)}),_r=[],Dr={components:{ModelSelect:Ha["ModelSelect"],Datepicker:Ht["a"]},mixins:[va],created:function(){this.runAfterSCisSet(this.loadContacts)},data:function(){return{formData:{current:!0},errMsg:null,loading:!1,SCContactsOptions:[],locales:{en:Yt["en"],bg:Yt["bg"]}}},computed:{hasContacts:function(){return!!this.$store.getters.contacts.length},contacts:function(){return this.$store.getters.contacts}},methods:{validate:function(){return this.$validator.validateAll()},save:function(){var t=this;return this.$store.dispatch("addRelatedParty",this.formData).then((function(e){t.$customMsg.showSuccessMessage(t.$t("Added new relation.")),t.$emit("success",e)}))},submit:function(){var t=this;this.errMsg=null,this.loading=!0,this.validate().then((function(e){return e?t.save():Promise.reject(new Error("Please, fill the required fields."))})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1}))},resetForm:function(){var t=this;this.$nextTick().then((function(){t.$validator.reset(),t.errors.clear(),t.formData={current:!0}}))},loadContacts:function(){var t=this;this.$store.dispatch("loadSCContacts").then((function(e){return t.SCContactToOptions(e)}))},SCContactToOptions:function(t){var e=[];t.forEach((function(t){var a="";t.aliases.forEach((function(t){a=t.aname})),e.push({value:t.id,text:t.name+" - "+a})})),this.SCContactsOptions=e}}},$r=Dr,xr=Object(W["a"])($r,Cr,_r,!1,null,null,null),wr=xr.exports,Sr={components:{Datepicker:Ht["a"],CompanyCard:Bs["a"],RelatedPartiesModal:wr},created:function(){},data:function(){return{sort:{sortedBy:"toDate",isSortDescending:!1},loading:!1,itemsPerPage:10,currentPage:1,tableFields:["name","detailId","fromDate","toDate"],locales:{en:Yt["en"],bg:Yt["bg"]},editData:{id:null,fromDate:null,toDate:null,description:""},showRPModal:!1,formData:{fromDate:null,toDate:null},optionsPerPage:[{value:10,text:"10"},{value:25,text:"25"},{value:50,text:"50"},{value:100,text:"100"}]}},computed:{noContacts:function(){return!this.$store.getters.contacts.length},cancelBtnTitle:function(){return this.$store.getters.contacts.length?"Cancel":"Ok"},companyRelatedParties:function(){return this.$store.getters.companyRelatedParties.relatedParties},count:function(){return this.$store.getters.companyRelatedParties.totalCount||0},numberOfPages:function(){return Math.ceil(this.count/this.itemsPerPage)},startIndex:function(){return(this.currentPage-1)*this.itemsPerPage+1},endIndex:function(){return this.currentPage*this.itemsPerPage}},methods:{openRPModal:function(){this.$refs.relatedPartiesModal&&this.$refs.relatedPartiesModal.resetForm(),this.showRPModal=!0},onAddRelatedParties:function(){this.showRPModal=!1,this.loadRelatedParties()},onRPModalOk:function(t){t.preventDefault(),this.$refs.relatedPartiesModal.submit()},getSortClass:function(t){var e="sort ";return t===this.sort.sortedBy&&(e+=this.sort.isSortDescending?"sort-asc":"sort-desc"),e},setSort:function(t){t!==this.sort.sortedBy?(this.sort.sortedBy=t,this.sort.isSortDescending=!1):this.sort.isSortDescending=!this.sort.isSortDescending,this.loadRelatedParties()},editRP:function(t){this.editData.id=t.detailId,this.editData.fromDate=t.fromDate,this.editData.toDate=t.toDate,this.editData.description=t.description},deleteRP:function(t){var e=this;this.$store.dispatch("deleteRelatedParty",t.detailId).then((function(){e.currentPage=1,e.loadRelatedParties()}))},confirmEdit:function(){var t=this;this.$store.dispatch("editRelatedParty",this.editData).then((function(){t.currentPage=1,t.cancelEdit(),t.loadRelatedParties()}))},cancelEdit:function(){this.editData.id=null},loadRelatedParties:function(){var t=this,e={startDate:this.formData.fromDate,endDate:this.formData.toDate,startIndex:this.startIndex,endIndex:this.endIndex};""!==this.sort.sortedBy&&(e.sort=this.sort.sortedBy,e.isSortDescending=this.sort.isSortDescending),this.loading=!0,this.$store.dispatch("loadSCRelatedParties",e).finally((function(){t.loading=!1}))},sendDates:function(){null!==this.formData.fromDate&&null!==this.formData.toDate&&this.formData.fromDate.getTime()>this.formData.toDate.getTime()?this.$customMsg.showErrorMessage(this.$t("End date is before start date")):(this.currentPage=1,this.loadRelatedParties())},loadPage:function(t){this.currentPage=t,this.loadRelatedParties()}}},Rr=Sr,Ir=Object(W["a"])(Rr,yr,br,!1,null,null,null),Pr=Ir.exports,kr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.name",compare:"strings",initOrder:"ASC"},expression:"{sortKey: 'receiver.name', compare: 'strings', initOrder: 'ASC'}"}]},[t._v(t._s(t.$t("Name")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.country.name",compare:"strings"},expression:"{sortKey: 'receiver.country.name', compare: 'strings'}"}]},[t._v(t._s(t.$t("Country")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.regNum",compare:"strings"},expression:"{sortKey: 'receiver.regNum', compare: 'strings'}"}]},[t._v(t._s(t.$t("Reg Number")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.email",compare:"strings"},expression:"{sortKey: 'receiver.email', compare: 'strings'}"}]},[t._v(t._s(t.$t("Receiver Email")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"sender.user.name",compare:"strings"},expression:"{sortKey: 'sender.user.name', compare: 'strings'}"}]},[t._v(t._s(t.$t("Sender")))]),a("th")])]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.id},[a("th",[e.receiver?a("company-card",{attrs:{company:e.receiver,size:"m"}}):t._e()],1),a("td",[a("img",{attrs:{width:"20",src:"/flags/"+(e.receiver?e.receiver.country.code:"")+".svg"}}),t._v(" "+t._s(e.receiver?e.receiver.country.name:"")+" ")]),a("td",[t._v(t._s(e.receiver?e.receiver.regNum:""))]),a("td",[t._v(t._s(e.receiver?e.receiver.email:""))]),a("td",[a("div",[t._v(t._s(e.sender?e.sender.user.name:""))]),a("div",[t._v(t._s(e.sender?e.sender.user.email:""))])]),a("td",[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.cancel(e)}}},[t._v(t._s(t.$t("Cancel")))])])])})),0)]),a("loading",{attrs:{loading:t.loading}})],1)},Fr=[],Mr={},Nr=function(t){return Mr.name="ContactsTable",Mr.mixins=[kn,Lo(t)],Mr.directives={Sort:Uo.SortDirective(t)},Mr.components={CompanyCard:Bs["a"],InputFilter:Uo.InputFilter(t),SelectFilter:Uo.SelectFilter(t),DateFilter:Uo.DateFilter(t),Pagination:Uo.Pagination},Mr.data=function(){return{loading:!1,itemsPerPage:10,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day}}},Mr.computed={invitations:function(){return this.$store.getters.companySentInvitations}},Mr.mounted=function(){t.commit("setItems",this.$store.getters.companySentInvitations)},Mr.methods={cancel:function(t){var e=this;this.loading=!0,this.$store.dispatch("cancelInvitation",t).finally((function(){e.loading=!1}))},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},Mr.watch={invitations:function(e){t.commit("setItems",e)}},Mr};Nr.options=Mr;var Ar=Uo.TableStore("InvitationsTable"),Tr=Nr(Ar),Or=Tr,Er=Object(W["a"])(Or,kr,Fr,!1,null,null,null),jr=Er.exports,Ur=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-name"}},[t._v(t._s(t.$t("Company Name"))+":")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",id:"cf-name",name:"name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid name"))+".")]),a("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.$t("Please enter the complete legal name as per registration"))+".")])]),a("CountrySelect",{ref:"invitationCountrySelect",attrs:{componentClass:"form-group"},model:{value:t.formData.country,callback:function(e){t.$set(t.formData,"country",e)},expression:"formData.country"}}),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-regNum"}},[t._v(t._s(t.$t("Registration number"))+":")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.regNum,expression:"formData.regNum"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("regNum")}],attrs:{type:"text",id:"cf-regNum",name:"regNum"},domProps:{value:t.formData.regNum},on:{input:function(e){e.target.composing||t.$set(t.formData,"regNum",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter company's registration number"))+".")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-email"}},[t._v(t._s(t.$t("Contact Person Email"))+":")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",id:"cf-email",name:"email"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid email"))+".")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-email"}},[t._v(t._s(t.$t("Message"))+":")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.message,expression:"formData.message"}],staticClass:"form-control",attrs:{name:"message",rows:"5"},domProps:{value:t.formData.message},on:{input:function(e){e.target.composing||t.$set(t.formData,"message",e.target.value)}}})]),a("loading",{attrs:{loading:t.loading}})],1)},Lr=[],qr={methods:{runAfterNomenclatureIsSet:function(t,e){if(this.$store.getters[t])e();else var a=this.$store.watch((function(e,a){return a[t]}),(function(t){t&&(e(),a())}))}}},Kr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.componentClass},[a("label",{attrs:{for:"country"}},[t._v("Country:")]),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"multiselect is-invalid":t.errors.has("country")}],attrs:{id:"country",name:"country",disabled:t.disabled,options:t.countries,"show-labels":!0,"track-by":"name","custom-label":t.countryLabel,placeholder:t.$t("Please, select a country")},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[a("span",{},[a("img",{staticClass:"country_flag",attrs:{width:"20",height:"20",src:"/flags/"+e.option.code+".svg",alt:e.option.code}}),t._v(" "),a("span",{},[t._v(t._s(e.option.name))])])]}},{key:"option",fn:function(e){return[a("div",{},[a("img",{staticClass:"country_flag",attrs:{width:"20",height:"20",src:"/flags/"+e.option.code+".svg",alt:e.option.code}}),t._v(" "),a("span",{},[t._v(t._s(e.option.name))])])]}}]),model:{value:t.internalValue,callback:function(e){t.internalValue=e},expression:"internalValue"}}),t.errors.has("country")?a("div",{staticClass:"invalid-feedback show-feedback"},[t._v(t._s(t.$t("Please, select a country"))+".")]):t._e()],1)},zr=[],Vr=a("8e5f"),Br=a.n(Vr),Hr={components:{Multiselect:Br.a},data:function(){return{loading:!1}},props:{disabled:{type:Boolean,default:!1},value:{},componentClass:{type:String}},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadCountries").then((function(){t.loading=!1}))},computed:{internalValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},countries:function(){return this.$store.getters.countries?this.$store.getters.countries:[]}},methods:{validate:function(){return this.$validator.validateAll()},countryLabel:function(t){return"".concat(t.name)}}},Yr=Hr,Xr=Object(W["a"])(Yr,Kr,zr,!1,null,null,null),Jr=Xr.exports,Wr={components:{CountrySelect:Jr},mixins:[qr],created:function(){this.$store.dispatch("loadCountries")},mounted:function(){var t=this;this.loading=!0,this.runAfterNomenclatureIsSet("countries",(function(){t.loading=!1}))},data:function(){return{formData:{},errMsg:null,loading:!1}},computed:{},methods:{validate:function(){return this.$refs.invitationCountrySelect.validate(),this.$validator.validateAll()},save:function(){var t=this;return this.$store.dispatch("inviteContact",this.formData).then((function(e){t.$customMsg.showSuccessMessage(t.$t("Invitation successfully send.")),t.$emit("success",e)}))},submit:function(){var t=this;this.errMsg=null,this.loading=!0,this.validate().then((function(e){return e?t.save():Promise.reject(new Error("Please, fill the required fields."))})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1}))},resetForm:function(){var t=this;this.$nextTick().then((function(){t.$validator.reset(),t.errors.clear(),t.formData={}}))}}},Gr=Wr,Qr=Object(W["a"])(Gr,Ur,Lr,!1,null,null,null),Zr=Qr.exports,ti=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th"),a("th",[t._v(t._s(t.$t("Name")))]),a("th",[t._v(t._s(t.$t("Aliases")))]),a("th",[t._v(t._s(t.$t("Reg Number")))])])]),a("tbody",t._l(t.myNotContactedCompanies,(function(e){return a("tr",{key:e.id},[a("td",[a("b-form-checkbox",{model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"current.checked"}})],1),a("th",[e.logo&&e.name?a("company-card",{attrs:{company:e,size:"s"}}):t._e()],1),a("td",[t._v(t._s(e.aliases?t.calcAliases(e.aliases):""))]),a("td",[t._v(t._s(e.regNum))])])})),0)]),a("loading",{attrs:{loading:t.loading}})],1)},ei=[],ai=(a("caad"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.componentClass},[a("label",{attrs:{for:"companies"}},[t._v(t._s(t.componentLabel))]),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"multiselect is-invalid":t.errors.has("companies")}],attrs:{id:"companies",name:"companies",disabled:t.disabled,options:t.internalCompanies,multiple:t.multiple,"track-by":"name","custom-label":t.companyLabel,"show-labels":!0,placeholder:t.companies.length?t.$t("Please, select a company"):t.$t("No companies found")},on:{select:t.sendChange,remove:t.sendChange},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[a("span",{},[a("logo-flag",{attrs:{company:e.option,size:"s"}}),a("span",{},[t._v(t._s(e.option.name))])],1)]}},{key:"option",fn:function(e){return[a("div",{},[a("logo-flag",{attrs:{company:e.option,size:"s"}}),a("span",[t._v(t._s(-1===e.option.id?t.$t("No parent"):e.option.name))])],1)]}}]),model:{value:t.internalValue,callback:function(e){t.internalValue=e},expression:"internalValue"}}),t.errors.has("companies")?a("div",{staticClass:"invalid-feedback show-feedback"},[t._v(t._s(t.$t("Please, select a company"))+".")]):t._e()],1)}),ni=[],oi=a("6fea"),si={components:{Multiselect:Br.a,LogoFlag:oi["a"]},data:function(){return{loading:!1}},props:{currentCompanyId:{},allowNone:{type:Boolean,default:!1},noneLabel:{type:String},companies:{},disabled:{type:Boolean,default:!1},value:{},multiple:{type:Boolean,default:!1},componentClass:{},componentLabel:{}},computed:{internalCompanies:function(){var t=this,e=[];return void 0!==this.currentCompanyId&&null!==this.currentCompanyId||this.allowNone?(this.allowNone&&e.push({id:-1,name:""}),this.companies.forEach((function(a){t.currentCompanyId!==a.id&&e.push(a)})),e):this.companies},internalValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{companyLabel:function(t){var e="";return t.aliases?0===t.aliases.length?"".concat(t.name):(t.aliases.forEach((function(t){e+=t.aname+", "})),e=e.slice(0,-2),"".concat(t.name,"( ").concat(e," )")):"".concat(t.name)},validate:function(){return this.$validator.validateAll()},sendChange:function(){this.$emit("change")}},watch:{companies:{handler:function(t){t&&!t.length&&(this.internalValue=this.multiple?{}:[])},deep:!0}}},ri=si,ii=Object(W["a"])(ri,ai,ni,!1,null,null,null),ci=ii.exports,li={components:{CompanySelect:ci,CompanyCard:Bs["a"]},created:function(){this.$store.dispatch("loadMyCompanies")},data:function(){return{loading:!1}},computed:{myCompanies:function(){return this.$store.getters.myCompanies},contacts:function(){return this.$store.getters.contacts},company:function(){return this.$store.getters.selectedCompany||{}},myNotContactedCompanies:function(){var t=this,e=[];return this.contacts.forEach((function(t){e.push(t.id)})),this.myCompanies.filter((function(a){return!e.includes(a.id)&&a.id!==t.company.id}))}},methods:{calcAliases:function(t){var e="";return t.forEach((function(t){e+=t.aname+", "})),e=e.slice(0,-2),""!==e?e:this.$t("no aliases")},submit:function(){var t=this;this.loading=!0;var e=[];this.myCompanies.forEach((function(t){t.checked&&e.push(t.id)})),this.$store.dispatch("inviteMyCompanyContacts",e).then((function(e){t.$customMsg.showSuccessMessage(t.$t("Invitation successfully send.")),t.$emit("success")})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1}))}}},ui=li,di=Object(W["a"])(ui,ti,ei,!1,null,null,null),mi=di.exports,pi={name:"ContactsPage",components:{ContactsTable:Qs,HoldingTab:gr,RelatedPartiesTable:Pr,InvitationsTable:jr,InvitationForm:Zr,InvitationMyCompaniesForm:mi},mixins:[va],data:function(){return{showInvModal:!1,showInvMyCompanyModal:!1,loading:!1,activeTabId:0}},computed:{hasContacts:function(){return!!this.$store.getters.contacts.length},hasInvitations:function(){return!!this.$store.getters.companySentInvitations.length}},methods:{onInvModalOk:function(t){t.preventDefault(),this.$refs.invitationForm.submit()},onInvMyCompanyModal:function(t){t.preventDefault(),this.$refs.invitationMyCompaniesForm.submit()},openInvModal:function(){this.$refs.invitationForm&&this.$refs.invitationForm.resetForm(),this.showInvModal=!0},openInvMyCompanyModal:function(){this.showInvMyCompanyModal=!0},onSentInvitation:function(t){this.showInvModal=!1},onSentMyCompaniesInvitation:function(t){this.showInvMyCompanyModal=!1,this.loadContacts()},onTabChange:function(t){var e=this;switch(this.activeTabId=t,t){case 1:console.log("");break;case 2:this.$nextTick((function(){e.$refs.relatedPartiesTable.loadRelatedParties()}));break;case 3:this.runAfterSCisSet(this.loadInvitations);break;default:this.runAfterSCisSet(this.loadContacts)}},loadContacts:function(){this.loadStore("loadSCContacts")},loadInvitations:function(){this.loadStore("loadSCSentInvitations")},loadStore:function(t){var e=this;this.loading=!0,this.$store.dispatch(t).finally((function(){e.loading=!1}))}}},fi=pi,hi=Object(W["a"])(fi,qs,Ks,!1,null,null,null),vi=hi.exports,gi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collaborator-page"},[a("div",{staticClass:"collaborator-page-heading"},[a("h2",{staticClass:"collaborator-page-title"},[t._v(t._s(t.$t("Collaborators")))]),t.showForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t.showForm?a("collaborator-form",{on:{cancel:function(e){t.showForm=!1},done:t.reloadCollaborators}}):t._e(),a("collaborators-table",{staticClass:"mt-3"}),a("loading",{attrs:{loading:t.loading}})],1)},yi=[],bi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{staticClass:"collaborator-form",attrs:{save:t.save,cancel:t.cancel,validate:t.validate,"edit-mode":t.editMode},on:{edit:t.onEdit}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",[t._v(t._s(t.$t("Collaborator's Email:")))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",name:"email"},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid email"))+".")])]),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"role"}},[t._v(t._s(t.$t("Role"))+":")]),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("role")}],attrs:{id:"role",name:"role",options:t.roles,"value-field":"id","text-field":"label"},model:{value:t.cpModel.roleId,callback:function(e){t.$set(t.cpModel,"roleId",e)},expression:"cpModel.roleId"}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, select a role"))+".")])],1)]),a("loading",{attrs:{loading:t.loading}})],1)},Ci=[],_i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"company-property-row",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"cp-col"},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),t._t("default")],2),t.isEditMode?t._e():a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v(t._s(t.$t("Edit")))]),t.remove?a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.del}},[t._v(t._s(t.$t("Delete")))]):t._e()]),t.isEditMode?a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit"}},[t._v(t._s(t.$t("Save")))]),a("button",{staticClass:"btn btn-light btn-sm",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v(t._s(t.$t("Cancel")))])]):t._e(),a("loading",{attrs:{loading:t.loading}})],1)},Di=[],$i={props:{save:{required:!0,type:Function},remove:{type:Function},cancel:{required:!0,type:Function},validate:{required:!0,type:Function},editMode:{default:!1}},data:function(){return{isEditMode:this.editMode,errMsg:null,loading:!1}},methods:{submit:function(){var t=this,e=this;e.errMsg=null,e.loading=!0,e.validate().then((function(t){return t?e.save():Promise.reject(new Error("Please, fill the required fields."))})).then((function(){t.closeEditMode()})).catch((function(t){e.errMsg=e.$t(t.messageDetail)})).finally((function(){e.loading=!1}))},cancelEdit:function(){this.cancel(),this.closeEditMode()},closeEditMode:function(){this.isEditMode=!1,this.errMsg=null},edit:function(){this.isEditMode=!0},del:function(){var t=this;t.loading=!0,t.remove().then((function(){t.cancelEdit()})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1}))}},watch:{isEditMode:function(t){this.$emit("edit",t)}}},xi=$i,wi=Object(W["a"])(xi,_i,Di,!1,null,null,null),Si=wi.exports,Ri={components:{CpForm:Si},props:{cProp:{required:!0,default:function(){return{}}}},methods:{onEdit:function(t){this.editMode=t},validate:function(){return this.$validator.validateAll()},cancel:function(){this.cpModel=Object.assign({},this.cProp),this.$emit("cancel")}}},Ii={props:{cProp:{required:!1}},data:function(){return{cpModel:Object.assign({},this.cProp),roles:qa,editMode:!0,loading:!1}},methods:{save:function(){var t=this;this.loading=!0,this.$store.dispatch("addSCCollaborator",this.cpModel).then((function(){t.$emit("done"),t.loading=!1}))}}},Pi=Zt()({},Ri,Ii),ki=Pi,Fi=Object(W["a"])(ki,bi,Ci,!1,null,null,null),Mi=Fi.exports,Ni=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"name",compare:"strings"},expression:"{sortKey: 'name', compare: 'strings'}"}]},[t._v(t._s(t.$t("Name")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"email",compare:"strings"},expression:"{sortKey: 'email', compare: 'strings'}"}]},[t._v(t._s(t.$t("Email")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"role.id",compare:"numbers"},expression:"{sortKey: 'role.id', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Role")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"isPending",compare:"bool"},expression:"{sortKey: 'isPending', compare: 'bool'}"}]},[t._v(t._s(t.$t("Status")))]),a("th")])]),a("tbody",t._l(t.collaborators,(function(e){return a("row",{key:e.email,attrs:{collaborator:e},on:{reload:t.reloadCollaborators}})})),1)]),a("loading",{attrs:{loading:t.loading}})],1)},Ai=[],Ti=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[t.loading?t._e():[a("td",[t._v(t._s(t.model.name))]),a("td",[t._v(t._s(t.model.email))]),t.model.isInherited?a("td",[t._v(" "+t._s(t.model.role?t.model.role.label:"")+" ("+t._s(t.$t("Inherited from parent"))+") ")]):a("td",[a("b-form-select",{staticClass:"form-control",attrs:{options:t.roles,disabled:!t.editMode,"value-field":"id","text-field":"label"},model:{value:t.model.roleId,callback:function(e){t.$set(t.model,"roleId",e)},expression:"model.roleId"}})],1),a("td",[t._v(t._s(t.model.isPending?"pending":"-"))]),t.collaborator.currentUser||!t.collaborator.canBeEdited||t.model.isInherited?a("td"):a("td",{staticClass:"actions-col"},[t.editMode?t._e():a("div",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:t.edit}},[t._v(t._s(t.$t("Edit")))]),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.remove}},[t._v(t._s(t.$t("Remove")))])]),t.editMode?a("div",[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:t.save}},[t._v(t._s(t.$t("Save")))]),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))])]):t._e()])],t.loading?a("td",{attrs:{colspan:"4"}},[a("loading",{attrs:{loading:t.loading}})],1):t._e()],2)},Oi=[],Ei={name:"CollaboratorsTableRow",props:{collaborator:{required:!0},pageItems:{}},data:function(){return{model:Object.assign({},this.collaborator),roles:qa,editMode:!1,loading:!1}},methods:{save:function(){var t=this;if(-1!==this.collaborator.permittedRoles.indexOf(this.model.role.id))return this.$store.dispatch("updateCollaborator",this.model).then((function(){t.$emit("reload")})).then((function(){t.editMode=!1}));this.$customMsg.showErrorMessage(this.$t("You do not have enough permissions to change to this role!"))},edit:function(){this.collaborator.isLastSU&&this.$customMsg.showErrorMessage(this.$t("Last SuperUser cannot be edited!")),this.editMode=!this.collaborator.isLastSU},cancel:function(){this.model=Object.assign({},this.collaborator),this.editMode=!1},remove:function(){var t=this;if(this.collaborator.canBeDeleted)return this.$store.dispatch("removeCollaborator",this.model).then((function(){t.$emit("reload")}));this.$customMsg.showErrorMessage(this.$t("This user cannot be deleted!"))}}},ji=Ei,Ui=Object(W["a"])(ji,Ti,Oi,!1,null,null,null),Li=Ui.exports,qi=Uo.TableStore(),Ki={name:"CollaboratorsTable",components:{Row:Li},directives:{Sort:Uo.SortDirective(qi)},data:function(){return{loading:!1,collaborators:[]}},computed:{pageItems:function(){return qi.commit("setItems",this.$store.getters.collaborators),qi.getters.pageItems()}},methods:{reloadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").finally((function(){t.loading=!1}))}},watch:{pageItems:{handler:function(t){var e=this;this.collaborators=[];var a=t.filter((function(t){return t.isCurrent}))[0].role.id;t.forEach((function(t){var n=1===t.role.id&&1===e.pageItems.filter((function(t){return 1===t.role.id})).length,o=1!==t.role.id||1===t.role.id&&e.pageItems.filter((function(t){return 1===t.role.id})).length>1,s=t.isCurrent,r=[];qa.forEach((function(t){a<=t.id&&r.push(t.id)}));var i=-1!==r.indexOf(t.role.id),c={isLastSU:n,canBeDeleted:o,permittedRoles:r,currentUser:s,currentUserRole:a,canBeEdited:i};e.collaborators.push(Object.assign({},t,c))}))},deep:!0}}},zi=Ki,Vi=Object(W["a"])(zi,Ni,Ai,!1,null,null,null),Bi=Vi.exports,Hi={components:{CollaboratorForm:Mi,CollaboratorsTable:Bi},mixins:[va],created:function(){this.runAfterSCisSet(this.loadCollaborators)},data:function(){return{showForm:!1,loading:!1}},methods:{reloadCollaborators:function(){this.loadCollaborators(),this.showForm=!1},loadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").finally((function(){t.loading=!1}))}}},Yi=Hi,Xi=Object(W["a"])(Yi,gi,yi,!1,null,null,null),Ji=Xi.exports,Wi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"company-profile"},[a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"custom-avatar-container"},[a("div",{staticClass:"d-inline-block custom-avatar",on:{click:t.openChangeLogoModal}},[a("Avatar",{attrs:{username:t.company.name?t.company.name:"",initials:t.company.logo&&t.company.logo.initials?t.company.logo.initials:null,src:t.company.logo&&t.company.logo.URL?t.company.logo.URL:"",size:145,rounded:!1}}),t._m(0)],1),a("h2",[t._v(t._s(t.company.name))]),a("AvatarChangeModal",{ref:"logoModal",on:{file:t.uploadNewLogo}})],1),a("my-company-form",{attrs:{company:t.company}}),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Aliases")))]),t.showAliasForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAliasForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._l(t.company.aliases,(function(t){return a("alias",{key:t.id,attrs:{"c-prop":t}})})),t.showAliasForm?a("alias",{attrs:{"c-prop":{companyId:t.company.id,refCompanyId:t.company.id}},on:{success:function(e){t.showAliasForm=!1},cancel:function(e){t.showAliasForm=!1}}}):t._e(),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Corporate Tax")))]),t.hasAnyCorpTaxData||t.showCorpTax?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showCorpTax=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t.hasAnyCorpTaxData||t.showCorpTax?a("corp-tax",{attrs:{"c-prop":t.company.corpTax},on:{cancel:function(e){t.showCorpTax=t.hasAnyCorpTaxData}}}):t._e(),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Audit")))]),t.hasAnyAuditData||t.showAudit?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAudit=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t.hasAnyAuditData||!t.hasAnyAuditData&&t.showAudit?a("audit",{attrs:{"c-prop":t.company.audit},on:{cancel:function(e){t.showAudit=!1}}}):t._e(),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("VAT / Sales Tax ID")))]),t.showVatForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showVatForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._l(t.company.vats,(function(t){return a("vat",{key:t.id,attrs:{"c-prop":t}})})),t.showVatForm?a("vat",{on:{success:function(e){t.showVatForm=!1},cancel:function(e){t.showVatForm=!1}}}):t._e(),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Personnel")))]),t.showPersonnelForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showPersonnelForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._l(t.company.personnel,(function(t){return a("personnel",{key:t.id,attrs:{"c-prop":t}})})),t.showPersonnelForm?a("personnel",{on:{success:function(e){t.showPersonnelForm=!1},cancel:function(e){t.showPersonnelForm=!1}}}):t._e(),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Taxes")))]),t.showTaxForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showTaxForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._l(t.company.taxes,(function(e){return a("cp-pair",{key:e.id,attrs:{"c-prop":e,cat:"tax",loadingProp:t.loading}})})),t.showTaxForm?a("cp-pair",{attrs:{cat:"tax"},on:{success:function(e){t.showTaxForm=!1},cancel:function(e){t.showTaxForm=!1}}}):t._e(),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Software")))]),t.showSoftwareForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showSoftwareForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._l(t.company.software,(function(e){return a("cp-pair",{key:e.id,attrs:{"c-prop":e,cat:"software",loadingProp:t.loading}})})),t.showSoftwareForm?a("cp-pair",{attrs:{cat:"software"},on:{success:function(e){t.showSoftwareForm=!1},cancel:function(e){t.showSoftwareForm=!1}}}):t._e(),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Misc")))]),t.showMiscForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showMiscForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._l(t.company.misc,(function(e){return a("cp-pair",{key:e.id,attrs:{"c-prop":e,cat:"misc",loadingProp:t.loading}})})),t.showMiscForm?a("cp-pair",{attrs:{cat:"misc"},on:{success:function(e){t.showMiscForm=!1},cancel:function(e){t.showMiscForm=!1}}}):t._e(),t.company.userRole&&1===t.company.userRole.id?a("div",[a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Admin")))]),a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.delete-modal",modifiers:{"delete-modal":!0}}],attrs:{size:"sm",variant:"danger"}},[t._v(t._s(t.$t("Delete Company")))])],1),a("b-modal",{attrs:{id:"delete-modal",size:"sm",title:t.$t("Delete Company")},on:{ok:t.deleteCompany}},[t._v(" "+t._s(t.$t("Are you really sure you want to delete this company ?"))+" ")])],1):t._e()],2)])},Gi=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-avatar-overlay"},[a("i",{staticClass:"fa fa-edit fa-lg"})])}];function Qi(t){var e=Object.assign({},t);return Object.keys(e).forEach((function(t){if(e[t]){if(e[t].constructor===Object){var a=Qi(e[t]);Object.keys(a).length?e[t]=a:delete e[t]}}else delete e[t]})),Object.keys(e).length?e:null}function Zi(t){return!!Object.keys(t).find((function(e){return t[e]}))}function tc(t){return!!t&&t.constructor===Object}function ec(t){return!!t&&t.constructor===Array}var ac={removeNulls:Qi,hasAnyData:Zi,isObject:tc,isArray:ec},nc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"my-company-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),t.logo.image&&t.logo.image.length>0?a("div",{staticClass:"image-preview"},[a("img",{staticClass:"preview",attrs:{src:t.logo.image,width:"200"}})]):t._e(),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v(t._s(t.$t("Company Name"))+":")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",id:"name",name:"name",disabled:!t.editMode},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"regId"}},[t._v(t._s(t.$t("Registration ID"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.regNum,expression:"formData.regNum"}],staticClass:"form-control",attrs:{type:"text",id:"regId",disabled:!t.editMode},domProps:{value:t.formData.regNum},on:{input:function(e){e.target.composing||t.$set(t.formData,"regNum",e.target.value)}}})]),a("CountrySelect",{ref:"myCompanyCountrySelect",attrs:{disabled:!t.editMode,componentClass:"form-group"},model:{value:t.formData.country,callback:function(e){t.$set(t.formData,"country",e)},expression:"formData.country"}}),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"currency"}},[t._v(t._s(t.$t("Reporting Currency"))+":")]),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("currency")}],attrs:{id:"currency",name:"currency",plain:!0,disabled:!t.editMode,options:t.currencies,"custom-label":t.currenciesLabel},model:{value:t.formData.currency,callback:function(e){t.$set(t.formData,"currency",e)},expression:"formData.currency"}})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[t._v(t._s(t.$t("Address"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],staticClass:"form-control",attrs:{type:"text",id:"address",disabled:!t.editMode},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}})]),a("CompanySelect",{attrs:{companies:t.myCompanies,disabled:!t.editMode,componentClass:"form-group",componentLabel:t.$t("Parent company")+":",currentCompanyId:t.currentCompanyId,allowNone:!0,noneLabel:t.$t("No parent")},model:{value:t.formData.parent,callback:function(e){t.$set(t.formData,"parent",e)},expression:"formData.parent"}}),t.formData.parent&&t.formData.parent.id>-1?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("From date"))+":")]),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:t.formData.parent?"required":"",expression:"formData.parent ? 'required' : '' "}],attrs:{name:"parentFromDate","bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",disabled:!t.editMode,placeholder:"Select date"},model:{value:t.formData.parentFromDate,callback:function(e){t.$set(t.formData,"parentFromDate",e)},expression:"formData.parentFromDate"}}),t.errors.has("parentFromDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a starting date"))+".")]):t._e()],1):t._e(),t.editMode?a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(t._s(t.$t("Save")))]),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v(t._s(t.$t("Cancel")))])]):t._e(),t.editMode?t._e():a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v(t._s(t.$t("Edit")))])]),a("loading",{attrs:{loading:t.loading}})],1)},oc=[],sc=(a("3ca3"),a("ddb0"),{name:null,regNum:null,country:null,currency:null,address:null,parent:null,parentFromDate:null,logo:null}),rc={components:{CompanySelect:ci,Multiselect:Br.a,CountrySelect:Jr,Datepicker:Ht["a"]},created:function(){var t=this;this.loading=!0;var e=this.$store.dispatch("loadCurrencies"),a=this.$store.dispatch("loadMyCompanies");Promise.all([e,a]).finally((function(){t.loading=!1}))},props:{company:{default:function(){return sc}},logo:{default:function(){return{file:null,formData:null}}}},data:function(){return{formData:Object.assign({},this.company),editMode:!this.company.name,errMsg:null,loading:!1,locales:{en:Yt["en"],bg:Yt["bg"]}}},computed:{currentCompanyId:function(){return this.company.id?this.company.id:null},currencies:function(){return this.$store.getters.currencies?this.$store.getters.currencies:[]},myCompanies:function(){return this.$store.getters.myCompanies?this.$store.getters.myCompanies:[]}},methods:{currenciesLabel:function(t){return"".concat(t.code," - ").concat(t.name)},validate:function(){return this.$refs.myCompanyCountrySelect.validate(),this.$validator.validateAll()},submit:function(){var t=this,e="";t.loading=!0,t.validate().then((function(a){if(a){var n=t.company.name?"updateSelCompany":"createCompany";return e=t.company.name?"updated":"created",t.company.name||(t.formData.logoData=t.logo.formData),t.$store.dispatch(n,t.formData)}return Promise.reject(new Error("Please, fill the required fields."))})).then((function(a){t.$customMsg.showSuccessMessage("Successfully "+e+" "+a.name+" company."),t.$emit("success",a)})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1}))},cancelEdit:function(){this.formData=Object.assign({},this.company),this.$emit("cancel"),this.editMode=!1,this.errMsg=null},edit:function(){this.editMode=!0}},watch:{company:function(t){this.editMode=!t.name,this.formData=Object.assign({},t),this.errMsg=null}}},ic=rc,cc=Object(W["a"])(ic,nc,oc,!1,null,null,null),lc=cc.exports,uc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.aname},on:{edit:t.onEdit}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.cpModel.aname,expression:"cpModel.aname"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("aname")}],attrs:{type:"text",name:"aname",disabled:!t.editMode},domProps:{value:t.cpModel.aname},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"aname",e.target.value)}}})])},dc=[],mc={data:function(){return{cpModel:Object.assign({},this.cProp),editMode:!this.cProp.aname}},methods:{save:function(){var t,e=this;return t=this.cProp.aname?this.$store.dispatch("updateSCAlias",{alias:this.cProp,updatedAname:this.cpModel.aname}):this.$store.dispatch("createSCAlias",this.cpModel.aname),t.then((function(){e.$emit("success")}))},remove:function(){var t=this;return this.$store.dispatch("deleteSCAlias",this.cProp).then((function(){t.$emit("remove")}))}}},pc=Zt()({},Ri,mc),fc=pc,hc=Object(W["a"])(fc,uc,dc,!1,null,null,null),vc=hc.exports,gc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":t.editMode},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxId"}},[t._v(t._s(t.$t("Corporate Tax ID"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.taxNumber,expression:"cpModel.taxNumber"}],staticClass:"form-control",attrs:{id:"corpTaxId",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.taxNumber},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"taxNumber",e.target.value)}}})]),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxFillingDate"}},[t._v(t._s(t.$t("Filling Deadline"))+":")]),a("RecurringDateSelect",{class:[{"form-control":!0,"is-invalid":t.errors.has("corpTaxFillingDate"),inactive:!t.editMode}],attrs:{id:"corpTaxFillingDate",name:"corpTaxFillingDate",disabled:!t.editMode},model:{value:t.cpModel.fillingDate,callback:function(e){t.$set(t.cpModel,"fillingDate",e)},expression:"cpModel.fillingDate"}})],1),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxDueDate"}},[t._v(t._s(t.$t("Due Date"))+":")]),a("RecurringDateSelect",{class:[{"form-control":!0,"is-invalid":t.errors.has("corpTaxDueDate"),inactive:!t.editMode}],attrs:{id:"corpTaxDueDate",name:"corpTaxDueDate",disabled:!t.editMode},model:{value:t.cpModel.dueDate,callback:function(e){t.$set(t.cpModel,"dueDate",e)},expression:"cpModel.dueDate"}})],1),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxAdvancedPayments"}},[t._v("Advanced Payments:")]),a("RecurringDateSelect",{class:[{"form-control":!0,"is-invalid":t.errors.has("corpTaxAdvancedPayments"),inactive:!t.editMode}],attrs:{id:"corpTaxAdvancedPayments",name:"corpTaxAdvancedPayments",disabled:!t.editMode},model:{value:t.cpModel.advancedPayments,callback:function(e){t.$set(t.cpModel,"advancedPayments",e)},expression:"cpModel.advancedPayments"}})],1)])},yc=[],bc=function(t){var e={data:function(){return{cpModel:Object.assign({},this.cProp),editMode:!ac.hasAnyData(this.cProp),locales:{en:Yt["en"],bg:Yt["bg"]}}},methods:{validate:function(){return ac.hasAnyData(this.cpModel)?Promise.resolve(!0):Promise.reject(new Error("Please, enter some data."))},save:function(){var e=this,a={};return a[t]=this.cpModel,this.$store.dispatch("updateSelCompany",a).then((function(t){return e.$emit("success"),t}))},remove:function(){var e=this,a={};return a[t]=Object.keys(this.cProp).reduce((function(t,e){return t[e]=null,t}),{}),this.$store.dispatch("updateSelCompany",a).then((function(){e.$emit("remove")}))}}};return Zt()({},Ri,e)},Cc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recurring-date"},[t._v(t._s(t.recurringDateStr)+" "),t.disabled?t._e():a("b-button",{attrs:{variant:"outline-success",size:"sm"},on:{click:t.open}},[t._v(" Change ")]),a("b-modal",{attrs:{title:"Select recurring date"},on:{ok:t.confirm},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[t._v(" Select Date: "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"deselect-label":"Can't remove this value",name:"date","track-by":"name",label:"name",placeholder:"Select one",options:t.dateOptions,searchable:!1,"allow-empty":!1},on:{input:t.onDateChange},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var a=e.option;return[t._v(t._s(a.name))]}}]),model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("date"),expression:"errors.has('date')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")]),a("br"),t.singleMonth?a("b-form-group",{attrs:{label:"Select a Month"}},[a("b-form-radio-group",{attrs:{stacked:""},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},t._l(t.months,(function(e,n){return a("b-form-radio",{key:n,attrs:{value:e,disabled:e.disabled},on:{change:function(e){return t.onMonthChange2(n)}}},[t._v(" "+t._s(e.name)+" ")])})),1)],1):a("div",[t._v(" Select Months: "),t._l(t.months,(function(e,n){return a("div",{key:n},[a("b-form-checkbox",{attrs:{value:e,disabled:e.disabled},on:{change:function(e){return t.onMonthChange(n)}},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},[t._v(" "+t._s(e.name)+" ")])],1)}))],2)],1)],1)},_c=[];a("cb29"),a("a15b"),a("1276"),a("ac1f");function Dc(t,e){var a,n={};return n.id=t.id,n.companyId=t.companyId,n.dayOfMonth=t.date.value,Array.isArray(e)?a=e.map((function(t){return t.selected?1:0})):(a=new Array(12).fill(0),a[e]=1),n.months=a.join(""),n}function $c(t){if(t.date){var e="Every "+t.date.name+" of ";return t.months&&Array.isArray(t.months)?e+=t.months.map((function(t){return t.name})).join(", "):e+=t.months.name,e}return"Select recurring date"}var xc={components:{Multiselect:Br.a},props:{disabled:{type:Boolean,default:!1},value:{},singleMonth:{type:Boolean,default:!1}},data:function(){return{toggle:!1,errMsg:null,formData:{date:"",months:[],id:null},selectedSingleMonth:null,recurringDateStr:"",dateOptions:za,months:Va}},created:function(){this.formData=this.modelToFormData(this.value),this.recurringDateStr=$c(this.formData)},methods:{onDateChange:function(t){for(var e=this,a=11;a>0;a--){var n=e.months[a];if(n.disabled=!(n.days>=t.value),n.disabled)if(e.singleMonth)e.selectedSingleMonth===a&&(e.selectedSingleMonth=null,e.formData.months=null);else{n.selected=!1;for(var o=e.formData.months.length;o--;)if(e.formData.months[o].disabled){e.formData.months.splice(o,1);break}}}},onMonthChange:function(t){var e=this;if(e.singleMonth)e.selectedSingleMonth=t;else{var a=this.months[t];a.selected=!a.selected}},confirm:function(t){var e=this,a=this;t.preventDefault(),a.$validator.validateAll().then((function(t){return t?Promise.resolve():Promise.reject(new Error("Please, fill the required fields."))})).then((function(){a.toggle=!1;var t=a.singleMonth?a.selectedSingleMonth:e.months;a.$emit("input",Dc(a.formData,t))})).catch((function(){})).finally((function(){a.recurringDateStr=$c(a.formData)}))},open:function(){this.toggle=!0},close:function(){this.toggle=!1,this.$emit("close")},modelToFormData:function(t){var e=this,a={months:[]};return t&&(a.id=t.id,a.companyId=t.companyId,a.date=0===t.dayOfMonth?e.dateOptions[31]:e.dateOptions[t.dayOfMonth-1],t.months.split("").forEach((function(t,n){+t&&(e.singleMonth?a.months=e.months[n]:a.months.push(e.months[n]))}))),a}},watch:{value:{handler:function(t){t&&t.companyId!==this.formData.companyId&&(this.formData=this.modelToFormData(t),this.recurringDateStr=$c(this.formData))},deep:!0}}},wc=xc,Sc=Object(W["a"])(wc,Cc,_c,!1,null,null,null),Rc=Sc.exports,Ic="corpTax",Pc={components:{RecurringDateSelect:Rc},mixins:[bc(Ic)],methods:{remove:function(){var t=this;return this.$store.dispatch("deleteSCCorpTax").then((function(){t.$emit("remove")}))}}},kc=Pc,Fc=Object(W["a"])(kc,gc,yc,!1,null,null,null),Mc=Fc.exports,Nc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":t.editMode},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorName"}},[t._v(t._s(t.$t("Name"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"}],staticClass:"form-control",attrs:{id:"auditorName",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorEmail"}},[t._v(t._s(t.$t("Email"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",attrs:{id:"auditorEmail",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorPhone"}},[t._v(t._s(t.$t("Phone"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"}],staticClass:"form-control",attrs:{id:"auditorPhone",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})]),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorDdl"}},[t._v(t._s(t.$t("Deadline"))+":")]),a("RecurringDateModal",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("auditorDdl"),inactive:!t.editMode}],attrs:{id:"auditorDdl",name:"auditorDdl",disabled:!t.editMode},model:{value:t.cpModel.auditDeadlineDate,callback:function(e){t.$set(t.cpModel,"auditDeadlineDate",e)},expression:"cpModel.auditDeadlineDate"}})],1)])},Ac=[],Tc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recurring-date"},[t._v(t._s(t.output)+" "),t.disabled?t._e():a("b-button",{attrs:{variant:"outline-success",size:"sm"},on:{click:t.open}},[t._v(" Change ")]),a("b-modal",{attrs:{title:"Select recurring date"},on:{ok:t.confirm},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[t._v(" Select Date: "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"deselect-label":"Can't remove this value",name:"date","track-by":"name",label:"name",placeholder:"Select one",options:t.dateOptions,searchable:!1,"allow-empty":!1},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var a=e.option;return[t._v(t._s(a.name))]}}]),model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("date"),expression:"errors.has('date')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")]),a("br"),t.singleMonth?a("b-form-group",{attrs:{label:"Select Month"}},[a("b-form-radio-group",{attrs:{stacked:""},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},t._l(t.months,(function(e,n){return a("b-form-radio",{key:n,attrs:{value:e,disabled:e.disabled}},[t._v(" "+t._s(e.name)+" ")])})),1)],1):a("div",[t._v(" Select Months: "),t._l(t.months,(function(e,n){return a("div",{key:n},[a("b-form-checkbox",{attrs:{value:e,disabled:e.disabled},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},[t._v(" "+t._s(e.name)+" ")])],1)}))],2)],1)],1)},Oc=[],Ec=(a("a9e3"),{components:{Multiselect:Br.a},data:function(){return{toggle:!1,errMsg:null,formData:{date:"",months:[],output:"",id:null},dateOptions:za,months:[{name:"January",value:"Jan"},{name:"February",value:"Feb",mark:!0},{name:"March",value:"Mar"},{name:"April",value:"Apr",mark:!0},{name:"May",value:"May"},{name:"June",value:"Jun",mark:!0},{name:"July",value:"Jul"},{name:"August",value:"Aug"},{name:"September",value:"Sep",mark:!0},{name:"October",value:"Oct"},{name:"November",value:"Nov",mark:!0},{name:"December",value:"Dec"}]}},props:{disabled:{type:Boolean,default:!1},value:{},singleMonth:{type:Boolean,default:!1}},created:function(){this.formData=this.objectToForm(this.value)},computed:{output:function(){var t=this.formData.date?"Every "+this.formData.date.name+" of ":"Select recurring date";return this.formData.date&&this.formData.months&&this.formData.months.length?(this.formData.months.forEach((function(e){t+=e.name+", "})),t=t.slice(0,-2)):this.singleMonth&&this.formData.date&&(t+=this.formData.months.name),t}},methods:{confirm:function(t){var e=this;t.preventDefault(),e.$validator.validateAll().then((function(t){return t?Promise.resolve():Promise.reject(new Error("Please, fill the required fields."))})).then((function(){e.toggle=!1,e.$emit("input",e.formToObject(e.formData))})).catch((function(){}))},objectToForm:function(t){var e=this,a={months:[]};return t&&(e.singleMonth?t.months.split("").forEach((function(t,n){Number(t)&&(a.months=e.months[n])})):t.months.split("").forEach((function(t,n){Number(t)&&a.months.push(e.months[n])})),a.date=0===t.dayOfMonth?e.dateOptions[31]:e.dateOptions[t.dayOfMonth-1],a.id=t.id,a.companyId=t.companyId),a},formToObject:function(t){var e=this,a={};return a.id=t.id,a.companyId=t.companyId,a.dayOfMonth=t.date.value,a.months="",this.months.forEach((function(n){e.singleMonth?a.months+=t.months.name===n.name?"1":"0":a.months+=t.months.filter((function(t){return t.name===n.name})).length?"1":"0"})),a},open:function(){this.toggle=!0},close:function(){this.toggle=!1,this.$emit("close")}},watch:{formData:{handler:function(t){var e=!1;t.date&&31===t.date.value&&(e=!0),this.months.forEach((function(t){t.disabled=t.mark&&e})),!t.date||30!==t.date.value&&29!==t.date.value||(e=!0,this.months[1].disabled=!0),e&&(this.singleMonth?t.months=t.months.disabled?this.months[0]:t.months:t.months.forEach((function(e,a){e.disabled&&t.months.splice(a,1)})))},deep:!0},value:{handler:function(t){this.formData=this.objectToForm(t)},deep:!0}}}),jc=Ec,Uc=Object(W["a"])(jc,Tc,Oc,!1,null,null,null),Lc=Uc.exports,qc={components:{RecurringDateModal:Lc},mixins:[bc("audit")]},Kc=qc,zc=Object(W["a"])(Kc,Nc,Ac,!1,null,null,null),Vc=zc.exports,Bc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.num},on:{edit:t.onEdit}},[a("CountrySelect",{attrs:{disabled:!t.editMode,componentClass:"cp-row"},model:{value:t.cpModel.country,callback:function(e){t.$set(t.cpModel,"country",e)},expression:"cpModel.country"}}),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(1===t.cpModel.countryId?t.$t("VAT ID"):t.$t("Sales Tax ID"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.num,expression:"cpModel.num"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("num")}],attrs:{type:"text",name:"num",disabled:!t.editMode},domProps:{value:t.cpModel.num},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"num",e.target.value)}}})]),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Reporting Regularity"))+":")]),a("RecurringDateSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("repReg"),inactive:!t.editMode}],attrs:{name:"repReg",disabled:!t.editMode},model:{value:t.cpModel.reportingRecurringDate,callback:function(e){t.$set(t.cpModel,"reportingRecurringDate",e)},expression:"cpModel.reportingRecurringDate"}})],1)],1)},Hc=[],Yc={components:{Multiselect:Br.a,RecurringDateSelect:Rc,CountrySelect:Jr},props:{cProp:{required:!1,default:function(){return{}}}},data:function(){return{cpModel:Object.assign({},this.cProp),editMode:!this.cProp.num}},methods:{save:function(){var t=this,e=t.cProp.num?"updateSCVat":"createSCVat";return t.loading=!0,t.$store.dispatch(e,t.cpModel).then((function(){t.$emit("success"),"createSCVat"===e&&(t.cpModel={})}))},remove:function(){var t=this;return this.$store.dispatch("deleteSCVat",this.cProp).then((function(){t.$emit("remove")}))}},watch:{cProp:{handler:function(t){this.cpModel=Object.assign({},t),this.loading=!1},deep:!0}}},Xc=Zt()({},Ri,Yc),Jc=Xc,Wc=Object(W["a"])(Jc,Bc,Hc,!1,null,null,null),Gc=Wc.exports,Qc=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.name},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Responsibility"))+":")]),a("VueCustomSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("responsibility")},"w-100"],attrs:{options:t.responsibilityKeys,value:t.cpModel,name:"customSelect",disabled:!t.editMode,loading:t.loading,hasError:t.fields.customSelect&&!t.fields.customSelect.valid&&t.fields.customSelect.touched},on:{input:t.onInput}})],1),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Name"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",name:"name",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Email"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",name:"email",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Phone"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("phone")}],attrs:{type:"text",name:"phone",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})])])},Zc=[],tl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-relative"},[a("select",{directives:[{name:"show",rawName:"v-show",value:!t.showInput,expression:"!showInput"},{name:"model",rawName:"v-model",value:t.innerValue.value,expression:"innerValue.value"}],ref:"select",class:[t.hasError?t.errorClass:"","form-control"],attrs:{disabled:t.disabled},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.innerValue,"value",e.target.multiple?a:a[0])},function(e){return t.onSelect(e)}],blur:function(e){return t.onBlur(!t.showInput)},focus:function(e){return t.$emit("focus")}}},[a("option",{attrs:{value:"",disabled:""}},[t._v(t._s(t.selectPlaceholderText))]),t._l(t.options,(function(e){return a("option",{key:e[t.valueKey],domProps:{value:e[t.valueKey]}},[t._v(" "+t._s(e[t.labelKey])+" ")])})),a("option",{attrs:{value:"input"}},[t._v(t._s(t.inputLabel))])],2),a("input",{directives:[{name:"show",rawName:"v-show",value:t.showInput,expression:"showInput"}],ref:"input",class:[t.hasError?t.errorClass:"","form-control"],attrs:{disabled:t.disabled,type:"text",placeholder:t.inputPlaceholderText},domProps:{value:t.innerValue.customValue},on:{input:function(e){return t.onInput(e)},blur:function(e){return t.onBlur(t.showInput)},focus:function(e){return t.$emit("focus")}}}),t.showInput&&!t.disabled?a("button",{staticClass:"btn btn-default close-custom-input-btn",attrs:{type:"button"},on:{click:function(e){return t.onTriggerClick()}}},[t._v("")]):t._e()])},el=[],al="input",nl={$_veeValidate:{name:function(){return this.name},value:function(){return this.innerValue.value}},data:function(){return{innerValue:{value:null===this.value.key.id?"input":this.value.key.id,customValue:this.value.customKey},showInput:null===this.value.key.id}},props:{options:{default:function(){return[]}},name:{default:"customSelect"},value:{default:function(){return{}}},selectPlaceholderText:{default:"Please, choose..."},inputPlaceholderText:{default:"Enter value..."},valueKey:{default:"id"},labelKey:{default:"label"},inputLabel:{default:"Custom option"},hasError:{default:!1},errorClass:{default:"is-invalid"},disabled:{default:!1}},methods:{emitValue:function(){var t=this,e=this.options?this.options.filter((function(e){return e[t.valueKey]===Number(t.innerValue.value)})):[];e=0!==e.length?e[0][this.labelKey]:null,this.$emit("input",{key:{id:""===this.innerValue.value?null:this.innerValue.value,label:e},customKey:this.innerValue.customValue})},onSelect:function(t){var e=this;t.target.value===al&&(this.showInput=!0,this.$nextTick((function(){return e.$refs.input.focus()}))),this.emitValue()},onInput:function(t){this.innerValue.customValue=t.target.value,this.emitValue()},onTriggerClick:function(){var t=this;this.innerValue.value="",this.showInput=!1,this.$nextTick((function(){return t.$refs.select.focus()}))},onBlur:function(t){t&&this.$emit("blur")},onSelectBlur:function(){this.showInput||this.$emit("blur")}},watch:{value:{handler:function(t){this.innerValue={value:null===t.key.id?"input":t.key.id,customValue:this.value.customKey},this.showInput=null===t.key.id},deep:!0}}},ol=nl,sl=(a("4a60"),Object(W["a"])(ol,tl,el,!1,null,null,null)),rl=sl.exports,il={components:{VueCustomSelect:rl},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadResponsibilityKeys").finally((function(){t.loading=!1}))},props:{cProp:{required:!1,default:function(){return{key:{id:""}}}}},data:function(){return{cpModel:Object.assign({},this.cProp),editMode:!this.cProp.name}},computed:{responsibilityKeys:function(){return this.$store.getters.responsibilityKeys}},methods:{save:function(){var t=this,e=this.cProp.id?"updateSCPersonnel":"createSCPersonnel";return this.$store.dispatch(e,this.cpModel).then((function(){t.$emit("success")}))},remove:function(){var t=this;return this.$store.dispatch("deleteSCPersonnel",this.cProp).then((function(){t.$emit("remove")}))},onInput:function(t){this.cpModel.key=t.key,t.key.id="input"===t.key.id?null:t.key.id,this.cpModel.customKey=t.customKey}},watch:{cProp:{handler:function(){this.cpModel=Object.assign({},this.cProp)},deep:!0}}},cl=Zt()({},Ri,il),ll=cl,ul=Object(W["a"])(ll,Qc,Zc,!1,null,null,null),dl=ul.exports,ml=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.value},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row cp-pair"},[a("VueCustomSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("key")}],attrs:{options:t.keys,value:t.cpModel,name:"customSelect",disabled:!t.editMode,loading:t.loading,hasError:t.fields.customSelect&&!t.fields.customSelect.valid&&t.fields.customSelect.touched},on:{input:t.onInput}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.value,expression:"cpModel.value"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("value")}],attrs:{name:"value",disabled:!t.editMode,rows:"3"},domProps:{value:t.cpModel.value},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"value",e.target.value)}}})],1)])},pl=[];function fl(t){return t.slice(0,1)}function hl(t){return t.charAt(0).toUpperCase()+t.slice(1)}var vl={getFirstLetter:fl,capitalizeFirstLetter:hl},gl={components:{VueCustomSelect:rl},created:function(){var t=this;this.cProp.category||(this.cpModel.category={id:La[this.cat]}),this.loading=!0;var e="load"+vl.capitalizeFirstLetter(this.storeKeysName);this.$store.dispatch(e).finally((function(){t.loading=!1}))},props:{cProp:{required:!1,default:function(){return{key:{}}}},cat:{required:!0},loadingProp:{default:!1}},data:function(){return{cpModel:Object.assign({},this.cProp),storeKeysName:this.cat+"Keys",editMode:!this.cProp.value,loading:!1}},computed:{keys:function(){return this.$store.getters[this.storeKeysName]}},methods:{save:function(){var t=this,e=this.cProp.value?"updateSCCPPair":"createSCCPPair";return this.$store.dispatch(e,this.cpModel).then((function(){t.$emit("success"),t.loading=!0,"createSCCPPair"===e&&(self.cpModel={key:{}})}))},remove:function(){var t=this;return this.$store.dispatch("deleteSCCPPair",this.cProp).then((function(){t.$emit("remove")}))},onInput:function(t){this.cpModel.key=t.key,t.key.id="input"===t.key.id?null:t.key.id,this.cpModel.customKey=t.customKey}},watch:{cProp:{handler:function(){this.cpModel=Object.assign({},this.cProp),this.loading=!1},deep:!0},loadingProp:function(t){this.loading=t}}},yl=Zt()({},Ri,gl),bl=yl,Cl=Object(W["a"])(bl,ml,pl,!1,null,null,null),_l=Cl.exports,Dl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{on:{ok:t.confirm},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("New picture"))+":")]),a("b-form-file",{staticClass:"mt-3",attrs:{accept:"image/*",plain:""},on:{change:t.previewImage},model:{value:t.avatarFile,callback:function(e){t.avatarFile=e},expression:"avatarFile"}})],1),t.imageData.length>0?a("div",{staticClass:"image-preview"},[a("img",{staticClass:"preview",attrs:{src:t.imageData,width:"200"}})]):t._e()])},$l=[],xl={data:function(){return{toggle:!1,avatarFile:null,imageData:""}},methods:{previewImage:function(t){var e=this,a=t.target;if(a.files&&a.files[0]){var n=new FileReader;n.onload=function(t){e.imageData=t.target.result},n.readAsDataURL(a.files[0])}},confirm:function(){if(this.toggle=!1,""!==this.imageData){var t=new FormData;t.append("file",this.avatarFile),this.$emit("file",t),this.$emit("image",{image:this.imageData,formData:t})}},open:function(){this.toggle=!0},close:function(){this.toggle=!1,this.$emit("close")}}},wl=xl,Sl=Object(W["a"])(wl,Dl,$l,!1,null,null,null),Rl=Sl.exports,Il=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vue-avatar--wrapper",style:[t.style,t.customStyle]},[a("span",{directives:[{name:"show",rawName:"v-show",value:!this.isImage,expression:"!this.isImage"}]},[t._v(t._s(t.userInitial))])])},Pl=[],kl=(a("841c"),a("5319"),{name:"avatar",props:{username:{type:String},initials:{type:String},backgroundColor:{type:String},color:{type:String},customStyle:{type:Object},inline:{type:Boolean},size:{type:Number,default:50},src:{type:String},rounded:{type:Boolean,default:!0},lighten:{type:Number,default:80}},data:function(){return{backgroundColors:["#F44336","#FF4081","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"]}},mounted:function(){this.isImage||this.$emit("avatar-initials",this.username,this.userInitial)},computed:{background:function(){return this.isImage?"#DDD":this.backgroundColor||this.randomBackgroundColor(this.username.length,this.backgroundColors)},fontColor:function(){return this.isImage?"#333":this.color||this.lightenColor(this.background,this.lighten)},isImage:function(){return Boolean(this.src)},style:function(){var t={display:this.inline?"inline-flex":"flex",width:"".concat(this.size,"px"),height:"".concat(this.size,"px"),borderRadius:this.rounded?"50%":0,lineHeight:"".concat(this.size+Math.floor(this.size/20),"px"),fontWeight:"bold",alignItems:"center",justifyContent:"center"},e={background:"transparent url('".concat(this.src,"') no-repeat scroll center center / cover content-box border-box")},a={backgroundColor:this.background,font:Math.floor(this.size/2.5)+"px/100px Helvetica, Arial, sans-serif",color:this.fontColor},n=this.isImage?e:a;return Object.assign(t,n),t},userInitial:function(){if(!this.isImage){var t=this.initials||this.initial(this.username);return t}return""}},methods:{initial:function(t){for(var e=t.split(/[ -]/),a="",n=0;n<e.length;n++)a+=e[n].charAt(0);return a.length>3&&-1!==a.search(/[A-Z]/)&&(a=a.replace(/[a-z]+/g,"")),a=a.substr(0,3).toUpperCase(),a},randomBackgroundColor:function(t,e){return e[t%e.length]},lightenColor:function(t,e){var a=!1;"#"===t[0]&&(t=t.slice(1),a=!0);var n=parseInt(t,16),o=(n>>16)+e;o>255?o=255:o<0&&(o=0);var s=(n>>8&255)+e;s>255?s=255:s<0&&(s=0);var r=(255&n)+e;return r>255?r=255:r<0&&(r=0),(a?"#":"")+(r|s<<8|o<<16).toString(16)}}}),Fl=kl,Ml=Object(W["a"])(Fl,Il,Pl,!1,null,null,null),Nl=Ml.exports,Al={components:{MyCompanyForm:lc,Alias:vc,CorpTax:Mc,Audit:Vc,Vat:Gc,Personnel:dl,CpPair:_l,AvatarChangeModal:Rl,Avatar:Nl},data:function(){return{showAliasForm:!1,showCorpTax:!1,showAudit:!1,showVatForm:!1,showPersonnelForm:!1,showTaxForm:!1,showSoftwareForm:!1,showMiscForm:!1,loading:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}},hasAnyCorpTaxData:function(){var t=!!this.company.corpTax&&ac.hasAnyData(this.company.corpTax);return t},hasAnyAuditData:function(){return!!this.company.audit&&ac.hasAnyData(this.company.audit)}},methods:{reloadSelCompany:function(){var t=this;this.loading=!0,this.$store.dispatch("reloadSelCompany",this.company.id).then((function(){t.loading=!1}))},deleteCompany:function(){var t=this;this.loading=!0,this.$store.dispatch("deleteSelCompany",this.company.id).then((function(){t.loading=!1,t.$router.push("Home")}))},openChangeLogoModal:function(){this.$refs.logoModal.open()},uploadNewLogo:function(t){var e=this;this.loading=!0,this.$store.dispatch("uploadSCLogo",t).then((function(){e.$customMsg.showSuccessMessage(e.$t("Successfully changed company logo"))})).catch((function(t){e.$customMsg.showErrorMessage(e.$t(t.messageDetail))})).finally((function(){e.$store.dispatch("reloadSelCompany",e.company.id).then((function(){e.loading=!1}))}))},deleteLogo:function(){var t=this;this.loading=!0,this.$store.dispatch("deleteCSLogo").then((function(){t.$customMsg.showSuccessMessage(t.$t("Successfully deleted company logo"))})).catch((function(e){t.$customMsg.showErrorMessage(t.$t(e.messageDetail))})).finally((function(){t.$store.dispatch("reloadSelCompany",t.company.id).then((function(){t.loading=!1}))}))}}},Tl=Al,Ol=Object(W["a"])(Tl,Wi,Gi,!1,null,null,null),El=Ol.exports,jl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v(t._s(t.$t("Records")))]),a("RecordsForm",{on:{success:t.formSubmitted}}),t.showTable?a("RecordsTable",{attrs:{inputData:t.formData}}):t._e(),a("loading",{attrs:{loading:t.loading}})],1)},Ul=[],Ll=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-row record-form"},[a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("Statement type")+":","label-for":"statementType"}},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("statementType")},attrs:{id:"statementType",name:"statementType"},on:{input:t.reValidateOnChange},model:{value:t.formData.statementType,callback:function(e){t.$set(t.formData,"statementType",e)},expression:"formData.statementType"}},t._l(t.statementTypes,(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.label))])})),0),t.errors.has("statementType")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a statement type"))+".")]):t._e()],1),!t.formData.statementType||t.formData.statementType.id>1?a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("From")+":","label-for":"fromDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("fromDate")},attrs:{"bootstrap-styling":!0,id:"fromDate",name:"fromDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{input:t.reValidateOnChange},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t.errors.has("fromDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")]):t._e()],1):t._e(),a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("To")+":","label-for":"toDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("toDate")},attrs:{"bootstrap-styling":!0,id:"toDate",name:"toDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{input:t.reValidateOnChange},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t.errors.has("toDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("toDate"))+".")]):t._e()],1),a("CompanySelect",{ref:"recordsCompanySelect",staticClass:"mr-4 record-select",attrs:{companies:t.CompanyList,componentClass:"form-group",componentLabel:t.$t("Company:")},model:{value:t.formData.selectedContact,callback:function(e){t.$set(t.formData,"selectedContact",e)},expression:"formData.selectedContact"}}),a("b-form-group",{attrs:{label:"","label-for":"submitButton"}},[a("b-button",{attrs:{id:"submitButton",variant:"primary"},on:{click:t.validateBeforeSubmit}},[t._v(" "+t._s(t.$t("Submit"))+" ")])],1)],1)},ql=[],Kl={components:{Datepicker:Ht["a"],CompanySelect:ci},data:function(){return{locales:{en:Yt["en"],bg:Yt["bg"]},initialDataFilled:!1,formData:{},statementTypes:Ua}},computed:{CompanyList:function(){return this.$store.getters.getRecordCompanyList},CompanyListLength:function(){return this.CompanyList.length}},methods:{loadCompanyList:function(){this.$store.dispatch("loadRecordCompanyList",this.formData)},reValidateOnChange:function(){var t=this;this.initialDataFilled=this.formData.statementType&&this.formData.toDate&&(1===this.formData.statementType.id||this.formData.fromDate),this.initialDataFilled&&(this.checkToDate(),setTimeout((function(){t.$validator.validateAll().then((function(e){e&&t.loadCompanyList()}))}),100))},checkToDate:function(){if(this.formData.statementType&&1===this.formData.statementType.id)return!0;this.$validator.errors.remove("toDate"),Date.parse(this.formData.fromDate)>Date.parse(this.formData.toDate)&&this.$validator.errors.add({field:"toDate",msg:this.$t("To(date) must be greater than From(date)")}),this.$validator.validate("toDate")||this.$validator.errors.add({field:"toDate",msg:this.$t("Please, select a date")})},validateBeforeSubmit:function(){var t=this;this.checkToDate(),this.initialDataFilled=!0,this.$refs.recordsCompanySelect.validate(),this.$validator.validateAll().then((function(e){t.$refs.recordsCompanySelect.validate().then((function(a){e&&a&&(t.loading=!0,t.$emit("success",t.formData))}))}))}}},zl=Zt()({},Kl),Vl=zl,Bl=Object(W["a"])(Vl,Ll,ql,!1,null,null,null),Hl=Bl.exports,Yl=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("table",{staticClass:"table table-striped table-condensed table-bordered"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"accType",compare:"strings"},expression:"{sortKey: 'accType', compare: 'strings'}"}]},[t._v(t._s(t.$t("Acc. Type")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"ref",compare:"strings"},expression:"{sortKey: 'ref', compare: 'strings'}"}]},[t._v(t._s(t.$t("Ref #")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"viewDocDate",compare:"dates"},expression:"{sortKey: 'viewDocDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Doc. Date")))]),a("th",[t._v(t._s(t.$t("Posting Date")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docCurrency",compare:"strings"},expression:"{sortKey: 'docCurrency', compare: 'strings'}"}]},[t._v(t._s(t.$t("Doc. Currency")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docAmountStr",compare:"numbers"},expression:"{sortKey: 'docAmountStr', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Amount in doc. currency")))]),a("th",[t._v(t._s(t.$t("FX Rate")))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"amountInRepCurrencyStr",compare:"numbers"},expression:"{sortKey: 'amountInRepCurrencyStr', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Amount in"))+" "+t._s(t.selectedCompany.currency.code))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"description",compare:"strings"},expression:"{sortKey: 'description', compare: 'strings'}"}]},[t._v(t._s(t.$t("Description")))]),a("th",[t._v(t._s(t.$t("Creator")))])]),t.showFilters?a("tr",[a("th",[a("input-filter",{attrs:{filterKey:"accType",compare:t.compare.numAsString}})],1),a("th",[a("input-filter",{attrs:{filterKey:"ref",compare:t.compare.numAsString}})],1),a("th"),a("th"),a("th",[a("select-filter",{attrs:{filterKey:"docCurrency",compare:t.compare.string,items:t.currentRecords}})],1),a("th",[a("input-filter",{attrs:{filterKey:"docAmountStr",compare:t.compare.number}})],1),a("th"),a("th",[a("input-filter",{attrs:{filterKey:"amountInRepCurrencyStr",compare:t.compare.number}})],1),a("th",[a("input-filter",{attrs:{filterKey:"description",compare:t.compare.numAsString}})],1),a("th")]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.accType))]),a("td",[t._v(t._s(e.ref))]),a("td",[t._v(t._s(t._f("bsDate")(e.viewDocDate)))]),a("td",[t._v(t._s(t._f("bsDate")(e.viewPostingDate)))]),a("td",[t._v(t._s(e.docCurrency))]),a("td",[t._v(t._s(e.docAmountStr))]),a("td",[t._v(t._s(e.fxRate||"-"))]),a("td",[t._v(t._s(e.amountInRepCurrencyStr||t.$t("require FX rate")))]),a("td",[t._v(t._s(e.description))]),a("td",[t._v(t._s(e.isOwn?t.$t("Own"):t.$t("Opposite")))])])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)},Xl=[],Jl={},Wl=function(t){return Jl.name="RecordsTable",Jl.mixins=[Lo(t)],Jl.directives={Sort:Uo.SortDirective(t)},Jl.props={inputData:{}},Jl.components={InputFilter:Uo.InputFilter(t),SelectFilter:Uo.SelectFilter(t),DateFilter:Uo.DateFilter(t)},Jl.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day}}},Jl.computed={currentRecords:function(){return this.$store.getters.getCurrentRecords},selectedCompany:function(){return this.$store.getters.selectedCompany}},Jl.methods={loadCurrentRecords:function(){this.$store.dispatch("loadCurrentRecords",this.inputData)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},Jl.mounted=function(){this.loadCurrentRecords()},Jl.watch={currentRecords:function(e){t.commit("setItems",e)},inputData:{handler:function(){this.loadCurrentRecords()},deep:!0}},Jl};Wl.options=Jl;var Gl=Uo.TableStore("RecordsTable"),Ql=Wl(Gl),Zl=Ql,tu=Object(W["a"])(Zl,Yl,Xl,!1,null,null,null),eu=tu.exports,au={components:{RecordsForm:Hl,RecordsTable:eu},data:function(){return{formData:{},showTable:!1,loading:!1}},methods:{formSubmitted:function(t){this.showTable=!0,this.formData=Zt()({},t)}}},nu=au,ou=Object(W["a"])(nu,jl,Ul,!1,null,null,null),su=ou.exports,ru=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reconciliations-page"},[a("div",{staticClass:"reconciliations-page-heading"},[a("h2",{staticClass:"reconciliations-page-title"},[t._v(t._s(t.$t("Reconciliations")))]),a("b-button",{staticClass:"btn btn-success btn-sm mb-3",attrs:{variant:"primary",size:"sm"},on:{click:function(e){t.createModalOpened=!0}}},[t._v(" "+t._s(t.$t("Create Reconciliation"))+" ")])],1),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:t.$t("Open"),active:""}},[0!==t.activeTabId||t.createModalOpened?t._e():a("ReconciliationsTable",{attrs:{recType:"Open"}})],1),a("b-tab",{attrs:{title:t.$t("Finished")}},[1!==t.activeTabId||t.createModalOpened?t._e():a("ReconciliationsTable",{attrs:{recType:"Finished"}})],1),a("b-tab",{attrs:{title:t.$t("Rejected")}},[2!==t.activeTabId||t.createModalOpened?t._e():a("ReconciliationsTable",{attrs:{recType:"Rejected"}})],1)],1),a("CreateReconciliationModal",{attrs:{startRCForId:t.startRCForId},model:{value:t.createModalOpened,callback:function(e){t.createModalOpened=e},expression:"createModalOpened"}}),a("loading",{attrs:{loading:t.loading}})],1)},iu=[],cu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelectedReconciliations(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("b-btn",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])],1),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("table",{staticClass:"table text-center table-striped"},[a("thead",[a("tr",[a("th"),a("th",[t._v(t._s(t.$t("Company")))]),a("th",[t._v(t._s(t.$t("Type")))]),a("th",[t._v(t._s(t.$t("Dates")))]),a("th",[t._v(t._s(t.$t("Matched")))]),a("th",[t._v(t._s(t.$t("Unmatched")))]),a("th")]),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),a("th"),a("th"),a("th"),a("th"),a("th"),a("th")]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),a("td",[a("router-link",{attrs:{to:"reconciliation/"+e.id}},[e.refCompany?a("CompanyCard",{attrs:{company:e.refCompany,size:"s"}}):t._e()],1)],1),a("td",[t._v(t._s(e.statement?e.statement.code:""))]),a("td",[e.statement&&e.statement.id>1?a("span",[t._v(t._s(t._f("bsDate")(e.startDate))+" - ")]):t._e(),t._v(t._s(t._f("bsDate")(e.endDate)))]),a("td",[t._v("Amount: "+t._s(e.matchedAmount)+" | Count: "+t._s(e.matchedCount))]),a("td",[t._v("Amount: "+t._s(e.unMatchedAmount)+" | Count: "+t._s(e.unMatchedCount))]),a("td",[a("b-dropdown",{attrs:{text:"...","no-caret":""}},[a("b-dropdown-item",{on:{click:function(a){return t.startUpload(e)}}},[t._v(t._s(t.$t("Upload")))]),a("b-dropdown-item",{on:{click:function(a){return t.deleteReconciliation(e)}}},[t._v(t._s(t.$t("Delete")))])],1)],1)])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)},lu=[],uu=Uo.TableStore(),du={name:"OpenReconciliationsTable",mixins:[va,Lo(uu)],directives:{Sort:Uo.SortDirective(uu)},components:{CompanyCard:Bs["a"],InputFilter:Uo.InputFilter(uu),SelectFilter:Uo.SelectFilter(uu),DateFilter:Uo.DateFilter(uu),BulkSelector:Uo.BulkSelector(uu),CheckboxSelect:Uo.CheckboxSelect(uu),MarkedFilter:Uo.MarkedFilter(uu)},props:{recType:{}},created:function(){this.runAfterSCisSet(this.loadOpenReconciliations)},computed:{allItems:function(){return uu.getters.getItems},selectedReconciliations:function(){return uu.getters.selectedItems}},data:function(){return{reconciliations:null,editActiveForId:null,loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day}}},methods:{startUpload:function(t){var e={statementID:t.statement.id,startDate:t.startDate,endDate:t.endDate},a=this.$route.path;this.$router.push({name:"Upload",params:{uploadData:e,historyComponent:a}})},loadOpenReconciliations:function(){var t=this;this.loading=!0,this.$store.dispatch("load"+this.recType+"Reconciliations").then((function(){t.reconciliations=t.$store.getters[t.recType+"Reconciliations"],t.loading=!1}))},deleteReconciliation:function(t){var e=this;this.loading=!0,this.$store.dispatch("deleteReconciliation",t).then((function(){e.$customMsg.showSuccessMessage(e.$t("Successfully deleted reconciliation."))})).catch((function(t){e.$customMsg.showErrorMessage(e.$t("Error")+" : "+t.messageDetail)})).finally((function(){e.loadOpenReconciliations()}))},deleteSelectedReconciliations:function(){var t=this;this.loading=!0,this.$store.dispatch("deleteMultipleReconciliation",this.selectedReconciliations).then((function(){t.$customMsg.showSuccessMessage(t.$t("Successfully deleted reconciliation."))})).catch((function(e){t.$customMsg.showErrorMessage(t.$t("Error")+" : "+e.messageDetail)})).finally((function(){t.loadOpenReconciliations()}))},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||uu.commit("removeAllFilters")}},watch:{reconciliations:function(t){uu.commit("setItems",t)}}},mu=du,pu=Object(W["a"])(mu,cu,lu,!1,null,null,null),fu=pu.exports,hu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("CreateReconciliationForm",{directives:[{name:"show",rawName:"v-show",value:t.formActive,expression:"formActive"}],ref:"CrRecForm",attrs:{startRCForId:t.startRCForId},on:{formSubmitted:t.formSubmitted}}),t.formActive?t._e():a("CreateReconciliationTable",{attrs:{formData:t.formData},on:{back:t.backToForm,close:t.closeModal}})],1)},vu=[],gu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[t.haveContacts?a("div",[a("CompanySelect",{ref:"reconciliationCompanySelect",attrs:{companies:t.contacts,componentLabel:"Companies:",componentClass:"b-form-group form-group",multiple:""},on:{change:t.reValidateOnChange},model:{value:t.formData.selectedCompanies,callback:function(e){t.$set(t.formData,"selectedCompanies",e)},expression:"formData.selectedCompanies"}}),a("b-form-group",{attrs:{label:t.$t("Statement types"),"label-for":"statements"}},[a("b-form-checkbox-group",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"statements",id:"statements"},model:{value:t.formData.selectedStatements,callback:function(e){t.$set(t.formData,"selectedStatements",e)},expression:"formData.selectedStatements"}},t._l(t.statementTypes,(function(e){return a("b-form-checkbox",{key:e.id,attrs:{value:e},on:{change:t.reValidateOnChange}},[t._v(" "+t._s(e.code)+" ")])})),1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("statements"),expression:"errors.has('statements')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select at least one statement"))+".")])],1),t.hideFromDate?t._e():a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("From")+":","label-for":"fromDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"bootstrap-styling":!0,id:"fromDate",name:"fromDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},on:{selected:t.reValidateOnChange},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("fromDate"),expression:"errors.has('fromDate')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1),a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("To")+":","label-for":"toDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"bootstrap-styling":!0,id:"toDate",name:"toDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},on:{selected:t.reValidateOnChange},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("toDate"),expression:"errors.has('toDate')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.$t("Next")))]),a("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v(t._s(t.$t("Reset")))])],1):a("div",[t._v(" "+t._s(t.$t("You need to have contact companies in order to reconcile with them. You can invite companies in "))+" "),a("router-link",{attrs:{to:"contacts"}},[t._v(t._s(t.$t("Contacts page.")))])],1),a("loading",{attrs:{loading:t.loading}})],1):t._e()},yu=[],bu=a("7bb1"),Cu={validate:function(t){return!!t.length}};bu["a"].extend("checkSelect",Cu);var _u={selectedCompanies:[],selectedStatements:[],fromDate:"",toDate:""},Du={name:"CreateReconciliationForm",components:{Datepicker:Ht["a"],CompanySelect:ci},mixins:[va],props:{startRCForId:{}},created:function(){this.runAfterSCisSet(this.loadContacts),this.resetForm()},data:function(){return{locales:{en:Yt["en"],bg:Yt["bg"]},loading:!0,statementTypes:Ua,formData:{},lastSelectItem:{},show:!0,formSubmittedOnce:!1}},computed:{hideFromDate:function(){return 1===this.formData.selectedStatements.length&&1===this.formData.selectedStatements[0].id},contacts:function(){return this.$store.getters.contacts},haveContacts:function(){return!!this.contacts.length}},methods:{selectCompany:function(){var t=this;this.startRCForId&&this.contacts.forEach((function(e){e.id===t.startRCForId&&t.formData.selectedCompanies.push(e)}))},resetForm:function(){this.formData=Zt()({},_u)},onSubmit:function(t){var e=this;this.formSubmittedOnce=!0,t.preventDefault(),this.$refs.reconciliationCompanySelect.validate().then((function(t){e.$validator.validateAll().then((function(a){a&&t&&e.$emit("formSubmitted",e.formData)}))}))},reValidateOnChange:function(){var t=this;this.formSubmittedOnce&&setTimeout((function(){t.$refs.reconciliationCompanySelect.validate(),t.$validator.validateAll()}),50)},onReset:function(t){var e=this;t.preventDefault(),this.resetForm(),this.show=!1,this.$nextTick((function(){e.show=!0}))},loadContacts:function(){this.loadStore("loadSCContacts")},loadStore:function(t){var e=this;this.loading=!0,this.$store.dispatch(t).finally((function(){e.loading=!1,e.selectCompany()}))}}},$u=Du,xu=Object(W["a"])($u,gu,yu,!1,null,null,null),wu=xu.exports,Su=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("Name")))]),a("th",[t._v(t._s(t.$t("Statement Type")))]),a("th",[t._v(t._s(t.$t("Dates")))]),a("th",[t._v(t._s(t.$t("Assignee")))]),a("th",[t._v(t._s(t.$t("Disclose")))]),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("DDL")))])])]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.id},[a("td",[a("company-card",{attrs:{company:e.company,size:"m"}})],1),a("td",[t._v(t._s(e.statement.code))]),a("td",[1===e.statement.id?a("span",[t._v(t._s(t._f("bsDate")(e.toDate)))]):a("span",[t._v(t._s(t._f("bsDate")(e.fromDate))+" - "+t._s(t._f("bsDate")(e.toDate)))])]),a("td",[a("b-form-select",{staticClass:"mb-3",attrs:{options:t.selectAssigneeOptions,size:"sm"},model:{value:t.exportData.assignee[e.id],callback:function(a){t.$set(t.exportData.assignee,e.id,a)},expression:"exportData.assignee[item.id]"}})],1),a("td",[a("b-form-checkbox",{model:{value:t.exportData.disclosed[e.id],callback:function(a){t.$set(t.exportData.disclosed,e.id,a)},expression:"exportData.disclosed[item.id]"}})],1),a("td",[a("datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},model:{value:t.exportData.ddl[e.id],callback:function(a){t.$set(t.exportData.ddl,e.id,a)},expression:"exportData.ddl[item.id]"}})],1),a("td",[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[t._v("X")])],1)])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("b-button",{attrs:{variant:"secondary"},on:{click:t.goStepBack}},[t._v(t._s(t.$t("Back")))]),a("b-button",{attrs:{variant:"primary"},on:{click:t.CreateReconciliations}},[t._v(t._s(t.$t("Create")))]),a("loading",{attrs:{loading:t.loading}})],1)},Ru=[],Iu=Uo.TableStore(),Pu={name:"CreateReconciliationTable",components:{CompanyCard:Bs["a"],Datepicker:Ht["a"],InputFilter:Uo.InputFilter(Iu),SelectFilter:Uo.SelectFilter(Iu),DateFilter:Uo.DateFilter(Iu),BulkSelector:Uo.BulkSelector(Iu),CheckboxSelect:Uo.CheckboxSelect(Iu),MarkedFilter:Uo.MarkedFilter(Iu)},mixins:[va,Lo(Iu)],created:function(){this.runAfterSCisSet(this.loadCollaborators),this.setTableItems(),Iu.commit("setItems",this.tableItems)},props:{formData:{}},data:function(){return{locales:{en:Yt["en"],bg:Yt["bg"]},loading:!1,itemsPerPage:20,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day},tableItems:[],exportData:{disclosed:{},assignee:{},ddl:{}}}},computed:{collaborators:function(){return this.$store.getters.collaborators},selectAssigneeOptions:function(){return this.collaborators.map((function(t){return{text:t.name,value:t}}))}},methods:{setTableItems:function(){var t=this,e=[],a=0;this.formData.selectedCompanies.forEach((function(n){t.formData.selectedStatements.forEach((function(o){e.push({id:a,company:n,statement:o,fromDate:t.formData.fromDate,toDate:t.formData.toDate}),a++}))})),this.tableItems=e},loadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").then((function(){t.loading=!1}))},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||Iu.commit("removeAllFilters")},deleteItem:function(t){this.tableItems=this.tableItems.filter((function(e){return e.id!==t})),Iu.commit("setItems",this.tableItems)},goStepBack:function(){this.$emit("back")},CreateReconciliations:function(){var t=this,e=[];this.tableItems.forEach((function(a){e.push({id:a.id,company:a.company,statement:a.statement,fromDate:a.fromDate,toDate:a.toDate,disclosed:t.exportData.disclosed[a.id]||!1,assignee:t.exportData.assignee[a.id]||null,ddl:t.exportData.ddl[a.id]||null})})),this.$store.dispatch("createReconciliation",e).then((function(e){t.$customMsg.showSuccessMessage(t.$t("Successfully created ")+e.length+" "+t.$t(1===e.length?"reconciliation":"reconciliations"))})).catch((function(e){t.$customMsg.showErrorMessage(t.$t("Error")+" : "+e.messageDetail)})).finally((function(){t.$emit("close")}))}}},ku=Pu,Fu=Object(W["a"])(ku,Su,Ru,!1,null,null,null),Mu=Fu.exports,Nu={name:"CreateReconciliationModal",components:{CreateReconciliationForm:wu,CreateReconciliationTable:Mu},props:{startRCForId:{}},mixins:[kn],data:function(){return{formActive:!0,formData:{}}},methods:{load:function(){return Promise.resolve()},close:function(){this.formActive=!0,this.$refs.CrRecForm.resetForm(),this.$emit("input",null)},closeModal:function(){this.formActive=!1,this.$emit("input",null),this.$refs.modal.close()},backToForm:function(){this.formActive=!0},formSubmitted:function(t){this.formData=t,this.formActive=!1}}},Au=Nu,Tu=Object(W["a"])(Au,hu,vu,!1,null,null,null),Ou=Tu.exports,Eu={name:"ReconciliationsPage",components:{ReconciliationsTable:fu,CreateReconciliationModal:Ou},data:function(){return{loading:!1,activeTabId:0,createModalOpened:!1,startRCForId:null}},created:function(){var t=this;this.$route.params.startReconciliationFor&&(this.startRCForId=this.$route.params.startReconciliationFor,setTimeout((function(){t.createModalOpened=!0}),500))},methods:{onTabChange:function(t){this.activeTabId=t}}},ju=Eu,Uu=Object(W["a"])(ju,ru,iu,!1,null,null,null),Lu=Uu.exports,qu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reconciliation-page"},[a("h2",[t._v("Reconciliation")]),a("div",{staticClass:"modal-top-info-wrapper"},[t.selectedReconciliation?a("span",[t._v(" "+t._s(t.$t("With"))+": "+t._s(t.selectedReconciliation.refCompany?t.selectedReconciliation.refCompany.name:"")),a("br"),t._v(" "+t._s(t.$t("Type"))+": "+t._s(t.selectedReconciliation.statement?t.selectedReconciliation.statement.label:"")),a("br"),t._v(" "+t._s(t.$t("For period"))+": "+t._s(t.dates)+" ")]):t._e(),a("div",[a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:t.goToUpload}},[t._v(t._s(t.$t("Upload")))]),a("b-button",{attrs:{variant:"warning",size:"sm"},on:{click:t.goBack}},[t._v(t._s(t.$t("Back")))])],1)]),a("b-form-select",{staticClass:"w-25 mt-3 mb-3",attrs:{options:t.options},on:{change:t.changeRecStatus},model:{value:t.selectedReconciliation.statusId,callback:function(e){t.$set(t.selectedReconciliation,"statusId",e)},expression:"selectedReconciliation.statusId"}}),a("br"),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:"Summary",active:""}},[t.loading||0!==t.activeTabId?t._e():a("ReconciliationSummaryTable",{attrs:{recId:t.recId}})],1),a("b-tab",{attrs:{title:"Messages"}},[1===t.activeTabId?a("ReconciliationMessages",{attrs:{recId:t.recId}}):t._e()],1)],1),a("loading",{attrs:{loading:t.loading}})],1)},Ku=[],zu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pt-3"},[t.summary.in?a("table",{staticClass:"table table-bordered text-center records-summary-table"},[a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v(t._s(t.statementContext.IN))]),a("th",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v(t._s(t.statementContext.OUT))]),a("th",[t._v("All")])])]),a("tbody",[a("tr",[a("td",[a("strong",[t._v("Exceptions:")]),a("br"),t._v(" Total Amount: "+t._s(t.summary.in.exceptions.me.amount)+" / "+t._s(t.summary.in.exceptions.they.amount)),a("br"),t._v(" Total Count: "+t._s(t.summary.in.exceptions.me.count)+" / "+t._s(t.summary.in.exceptions.they.count)+" "),t.summary.in.exceptions.me.count||t.summary.in.exceptions.they.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.autoMatch(1,0)}}},[t._v("Auto Match")]),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showExceptions(1,0)}}},[t._v("Show Records")])]):t._e()]),a("td",[a("strong",[t._v("Matched:")]),a("br"),t._v(" Total Amount: "+t._s(t.summary.in.matched.me.amount)),a("br"),t._v(" Total Count: "+t._s(t.summary.in.matched.me.count)+" "),t.summary.in.matched.me.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showMatched(!0)}}},[t._v("Show Records")])]):t._e()]),a("td",[a("strong",[t._v("Exceptions:")]),a("br"),t._v(" Total Amount: "+t._s(t.summary.out.exceptions.me.amount)+" / "+t._s(t.summary.out.exceptions.they.amount)),a("br"),t._v(" Total Count: "+t._s(t.summary.out.exceptions.me.count)+" / "+t._s(t.summary.out.exceptions.they.count)+" "),t.summary.out.exceptions.me.count||t.summary.out.exceptions.they.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.autoMatch(0,1)}}},[t._v("Auto Match")]),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showExceptions(0,1)}}},[t._v("Show Records")])]):t._e()]),a("td",[a("strong",[t._v("Matched:")]),a("br"),t._v(" Total Amount: "+t._s(t.summary.out.matched.me.amount)),a("br"),t._v(" Total Count: "+t._s(t.summary.out.matched.me.count)+" "),t.summary.out.matched.me.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showMatched(!1)}}},[t._v("Show Records")])]):t._e()]),a("td",[a("strong",[t._v("Exceptions:")]),a("br"),t._v(" Total Amount: "+t._s(t.summary.in.exceptions.me.amount+t.summary.out.exceptions.me.amount)+"/"+t._s(t.summary.in.exceptions.they.amount+t.summary.out.exceptions.they.amount)),a("br"),t._v(" Total Count: "+t._s(t.summary.in.exceptions.me.count+t.summary.out.exceptions.me.count)+"/"+t._s(t.summary.in.exceptions.they.count+t.summary.out.exceptions.they.count)+" "),t.summary.in.exceptions.me.count||t.summary.out.exceptions.me.count||t.summary.in.exceptions.they.count||t.summary.out.exceptions.they.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.autoMatch(1,1)}}},[t._v("Auto Match")]),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showExceptions(1,1)}}},[t._v("Show Records")])]):t._e()])])])]):t._e(),t._v(" All amounts are in "+t._s(t.company.currency?t.company.currency.code:"")+". "),a("ExceptionsModal",{attrs:{open:t.openExceptionsModal,IN:!!t.isIN,OUT:!!t.isOUT},on:{close:t.onClose}}),a("MatchedModal",{attrs:{open:t.openMatchedModal,IN:!!t.isIN},on:{close:t.onClose}}),a("loading",{attrs:{loading:t.loading}})],1)},Vu=[],Bu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FullPageModal",{ref:"modal",on:{close:t.close}},[t.hasExceptions?a("div",[a("h1",[t._v("Exceptions - "+t._s(t.title))]),a("div",{staticClass:"modal-top-info-wrapper"},[a("p",{staticClass:"info-text"},[t._v(" "+t._s(t.selectedCompany.name)+" - "+t._s(t.selectedReconciliation.refCompany.name)),a("br"),t._v(" "+t._s(t.selectedReconciliation.statement.label)+", "+t._s(t.dates)+" ")]),t.hasExceptions?a("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar"}},[a("b-button",{staticClass:"mr-2",attrs:{variant:"success",size:"sm"},on:{click:t.exportFile}},[t._v("Export")]),a("b-button",{staticClass:"mr-2",attrs:{variant:"warning",size:"sm"},on:{click:t.autoMatch}},[t._v("Auto Match")]),a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:t.loadExceptions}},[t._v("Refresh")])],1):t._e()])]):t._e(),t.hasExceptions?a("ExceptionsCalcTable",{attrs:{exceptions:t.selectedExceptions,"own-company":t.selectedCompany,"opp-company-name":t.selectedReconciliation.refCompany.name},on:{match:t.onMatch}}):t._e(),t.hasExceptions?a("ExceptionsTable"):t._e(),t.hasExceptions||t.loading?t._e():a("div",[a("p",[t._v("There are no any records for these parameters.")])]),a("loading",{attrs:{loading:t.loading}})],1)},Hu=[],Yu=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive exceptions-cmp"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("table",{staticClass:"table table-striped table-condensed table-bordered"},[a("thead",[a("tr",[a("th"),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"accType",compare:"strings"},expression:"{sortKey: 'accType', compare: 'strings'}"}]},[t._v("Acc. Type")]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"ref",compare:"strings"},expression:"{sortKey: 'ref', compare: 'strings'}"}]},[t._v("Ref #")]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docDate",compare:"dates"},expression:"{sortKey: 'docDate', compare: 'dates'}"}]},[t._v("Doc. Date")]),t.isBalanceSheet?t._e():a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"postingDate",compare:"dates"},expression:"{sortKey: 'postingDate', compare: 'dates'}"}]},[t._v("Posting Date")]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docCurrency",compare:"strings"},expression:"{sortKey: 'docCurrency', compare: 'strings'}"}]},[t._v("Doc. Currency")]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docAmount",compare:"numbers"},expression:"{sortKey: 'docAmount', compare: 'numbers'}"}]},[t._v("Amount in doc. currency")]),a("th",[t._v("FX Rate")]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"amountInRepCurrency",compare:"numbers"},expression:"{sortKey: 'amountInRepCurrency', compare: 'numbers'}"}]},[t._v("Amount in "+t._s(t.selectedCompany.currency.code))]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"description",compare:"strings"},expression:"{sortKey: 'description', compare: 'strings'}"}]},[t._v("Description")]),a("th",[t._v("Creator")])]),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),a("th",[a("InputFilter",{attrs:{filterKey:"accType",compare:t.compare.numAsString}})],1),a("th",[a("InputFilter",{attrs:{filterKey:"ref",compare:t.compare.numAsString}})],1),a("th"),t.isBalanceSheet?t._e():a("th"),a("th"),a("th",[a("InputFilter",{attrs:{filterKey:"docAmount",compare:t.compare.number}})],1),a("th"),a("th",[a("InputFilter",{attrs:{filterKey:"amountInRepCurrency",compare:t.compare.number}})],1),a("th",[a("InputFilter",{attrs:{filterKey:"description",compare:t.compare.numAsString}})],1),a("th")]):t._e()]),a("tbody",t._l(t.pageItems,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e,disable:!e.amountInRepCurrencyStr}})],1),a("td",[t._v(t._s(e.accType))]),a("td",[t._v(t._s(e.ref))]),a("td",[t._v(t._s(t._f("bsDate")(e.viewDocDate)))]),t.isBalanceSheet?t._e():a("td",[t._v(t._s(t._f("bsDate")(e.viewPostingDate)))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.docCurrency))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.docAmountStr))]),a("td",{staticClass:"fx-cell",class:{"text-danger":e.docCurrency!==t.selectedCompany.currency.code&&!e.fxRate.value}},[e.docCurrency!==t.selectedCompany.currency.code?a("edit-input",{attrs:{"input-value":e.fxRate.value||"0.00",placeholder:0,"on-submit":t.setFxRate,record:e}}):t._e(),e.docCurrency===t.selectedCompany.currency.code?a("span",{staticClass:"text-center"},[t._v("-")]):t._e()],1),a("td",{staticClass:"text-right"},[t._v(t._s(e.amountInRepCurrencyStr||"require FX rate"))]),a("td",[t._v(t._s(e.description))]),a("td",[t._v(t._s(e.isOwn?"Own":"Opposite"))])])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)},Xu=[],Ju=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.edit?t._e():a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit=!0}}},[t._v(t._s(t.showValue))]),t.edit?a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("input",{staticClass:"form-control",attrs:{type:"type",name:"eInput",placeholder:t.placeholder},domProps:{value:t.inputValue}}),a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit"}},[t._v("Ok")]),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancel}},[t._v("Cancel")])]):t._e()])},Wu=[],Gu={props:{inputValue:{required:!0,type:[String,Number]},placeholder:{},onSubmit:{required:!0,type:Function},formatter:{type:Function,default:function(t){return t}},editMode:{default:!1},record:{}},data:function(){return{edit:this.editMode}},computed:{showValue:function(){return this.formatter(this.inputValue)}},methods:{submit:function(t){var e=this,a=t.target.elements.eInput.value;if(this.inputValue!==a){var n=e.onSubmit(t,a,e.record);Promise.resolve(n).then((function(){return e.edit=!1,!0})).catch((function(t){return e.edit=!0,t}))}else e.edit=!1},cancel:function(){this.edit=!1}}},Qu=Gu,Zu=Object(W["a"])(Qu,Ju,Wu,!1,null,null,null),td=Zu.exports,ed={},ad=function(t){return ed.name="ExceptionsTable",ed.mixins=[Lo(t)],ed.directives={Sort:Uo.SortDirective(t)},ed.components={InputFilter:Uo.InputFilter(t),SelectFilter:Uo.SelectFilter(t),DateFilter:Uo.DateFilter(t),BulkSelector:Uo.BulkSelector(t),CheckboxSelect:Uo.CheckboxSelect(t),MarkedFilter:Uo.MarkedFilter(t),EditInput:td},ed.data=function(){return{itemsPerPage:10,showFilters:!1,loading:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day}}},ed.created=function(){var t=this;t.loading=!0,t.$store.dispatch("loadCurrencies").finally((function(){t.loading=!1}))},ed.computed={allItems:function(){return this.$store.getters.exceptions},selectedCompany:function(){return this.$store.getters.selectedCompany},isBalanceSheet:function(){return 1===this.$store.getters.selectedReconciliation.statement.id}},ed.methods={deleteSelected:function(){var e=this;if(!0===confirm("Are you shure?")){var a=t.getters.selectedItems;e.loading=!0,e.$store.dispatch("deleteExceptions",a).then((function(){e.showSuccess()})).catch((function(){e.showError()})).finally((function(){e.loading=!1}))}},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},setFxRate:function(e,a,n){var o=this,s=this;s.loading=!0;var r={rate:a,record:n};s.$store.dispatch("setFxRate",r).then((function(){return o.$customMsg.showSuccessMessage("The FX rate was saved successfully"),s.$store.dispatch("reloadExceptionsRecords")})).then((function(e){t.commit("setItems",e)})).catch((function(t){return o.$customMsg.showErrorMessage(t.messageDetail),t})).finally((function(){s.loading=!1}))}},ed};ad.options=ed;var nd=ad,od=nd,sd=Object(W["a"])(od,Yu,Xu,!1,null,null,null),rd=sd.exports,id=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-striped table-condensed table-bordered"},[a("thead",[a("tr",[a("th"),a("th",[t._v("Selected Records")]),a("th",[t._v("Amount ("+t._s(t.ownCompany.currency.code)+")")])])]),a("tbody",[a("tr",[a("th",[t._v(t._s(t.ownCompany.name))]),a("td",{staticClass:"text-center"},[t._v(t._s(t.stats.own.count))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.stats.own.amountStr))])]),a("tr",[a("th",[t._v(t._s(t.oppCompanyName))]),a("td",{staticClass:"text-center"},[t._v(t._s(t.stats.opp.count))]),a("td",{staticClass:"text-right"},[t._v(t._s(t.stats.opp.amountStr))])])]),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[a("button",{staticClass:"btn btn-success",attrs:{disabled:t.disableMatch},on:{click:t.match}},[t._v("Match")])]),a("td",{staticClass:"text-right"},[a("strong",[t._v(t._s(t._f("numToDec2")(t.balance)))])])])])])},cd=[],ld={},ud=function(t){return ld.name="ExceptionsCalcTable",ld.mixins=[Lo(t)],ld.props={exceptions:{required:!0,default:[]},ownCompany:{required:!0},oppCompanyName:{required:!0}},ld.computed={stats:function(){var t={own:{count:0,amount:0},opp:{count:0,amount:0}};return this.exceptions.reduce((function(e,a){var n=t[a.isOwn?"own":"opp"];return n.count++,n.amount+=+a.amountInRepCurrency,n.amountStr=n.amount.toLocaleString("en-US",{minimumFractionDigits:2}),t}),t)},balance:function(){return this.stats.own.amount-this.stats.opp.amount},disableMatch:function(){return this.balance||!this.exceptions||!this.exceptions.length}},ld.methods={match:function(){this.disableMatch||this.$emit("match")}},ld};ud.options=ld;var dd=ud,md=dd,pd=Object(W["a"])(md,id,cd,!1,null,null,null),fd=pd.exports,hd=Uo.TableStore(),vd={name:"ExceptionsModal",components:{FullPageModal:$n,ExceptionsTable:rd(hd),ExceptionsCalcTable:fd(hd)},props:{IN:{type:Boolean,required:!0},OUT:{type:Boolean,required:!0},open:{type:Boolean,required:!0}},data:function(){return{hasExceptions:!1,loading:!1}},computed:{selectedCompany:function(){return this.$store.getters.selectedCompany},exceptionsRecords:function(){return this.$store.getters.exceptionsRecords},dates:function(){var t=this.$store.getters.selectedReconciliation;if(t){var e=C.formatDate(t.endDate);return t.statement.id>1&&(e=C.formatDate(t.startDate)+" - "+e),e}},selectedReconciliation:function(){return this.$store.getters.selectedReconciliation},selectedExceptions:function(){return hd.getters.selectedItems},title:function(){var t=[];return this.IN&&t.push("Receivables"),this.OUT&&t.push("Payables"),t.join(", ")}},methods:{close:function(){this.$emit("close")},onMatch:function(){var t=this;t.loading=!0;var e={selectedExceptions:t.selectedExceptions,selectedReconciliation:t.selectedReconciliation};t.$store.dispatch("manualMatch",e).then((function(){t.loadExceptions()})).finally((function(){t.loading=!1}))},autoMatch:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,selectedReconciliation:this.selectedReconciliation};t.$store.dispatch("matchAuto",e).then((function(){t.loadExceptions()})).finally((function(){t.loading=!1}))},exportFile:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,matched:!1,exceptions:!0};t.$store.dispatch("exportRecords",e).finally((function(){t.loading=!1}))},loadExceptions:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,selectedReconciliation:this.selectedReconciliation};t.$store.dispatch("loadExceptionsRecords",e).then((function(e){hd.commit("setItems",e),t.hasExceptions=!!e.length})).finally((function(){t.loading=!1}))}},watch:{open:function(t){t?(this.$refs.modal.open(),this.loadExceptions()):(this.$refs.modal.close(),this.hasExceptions=!1)}}},gd=vd,yd=Object(W["a"])(gd,Bu,Hu,!1,null,null,null),bd=yd.exports,Cd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FullPageModal",{ref:"modal",on:{close:t.close}},[t.hasSets?a("div",[a("h1",[t._v("Matched - "+t._s(this.IN?"Receivables":"Payables"))]),a("div",{staticClass:"modal-top-info-wrapper"},[a("p",{staticClass:"info-text"},[t._v(" "+t._s(t.selectedCompany.name)+" - "+t._s(t.selectedReconciliation.refCompany.name)),a("br"),t._v(" "+t._s(t.selectedReconciliation.statement.label)+", "+t._s(t.dates)+" ")]),t.hasSets?a("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar"}},[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:t.exportFile}},[t._v("Export")]),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.loadSets}},[t._v("Refresh")])],1):t._e()])]):t._e(),t.hasSets?a("MatchedTable",{on:{unmatch:t.onUnmatch}}):t._e(),t.hasSets||t.loading?t._e():a("div",[a("p",[t._v("There are no any records for these parameters.")])]),a("loading",{attrs:{loading:t.loading}})],1)},_d=[],Dd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive matched-cmp"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("table",{staticClass:"table table-condensed table-bordered"},[a("thead",[a("tr",[a("th",[t._v("Acc. Type")]),a("th",[t._v("Ref #")]),a("th",[t._v("Doc. Date")]),a("th",[t._v("Posting Date")]),a("th",[t._v("Doc. Currency")]),a("th",[t._v("Amount in doc. currency")]),a("th",[t._v("FX Rate")]),a("th",[t._v("Amount in "+t._s(t.selectedCompany.currency.code))]),a("th",[t._v("Description")]),a("th",[t._v("Creator")])]),t.showFilters?a("tr",[a("th",[a("InputFilter",{attrs:{filterKey:"accType",compare:t.compare.numAsString}})],1),a("th",[a("InputFilter",{attrs:{filterKey:"ref",compare:t.compare.numAsString}})],1),a("th"),a("th"),a("th"),a("th",[a("InputFilter",{attrs:{filterKey:"docAmount",compare:t.compare.number}})],1),a("th"),a("th",[a("InputFilter",{attrs:{filterKey:"description",compare:t.compare.numAsString}})],1),a("th"),a("th")]):t._e()]),t._l(t.pageItems,(function(e){return a("tbody",{key:e.id},[a("tr",[a("th",[t._v("#"+t._s(e.id))]),a("th",{attrs:{colspan:"2"}},[t._v(t._s(e.matchingType.label))]),a("th",{attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(a){return t.unmatch(e)}}},[t._v("Unmatch")])])]),t._l(e.transactions,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.accType))]),a("td",[t._v(t._s(e.ref))]),a("td",[t._v(t._s(e.viewDocDate))]),a("td",[t._v(t._s(e.viewPostingDate))]),a("td",{staticClass:"text-center"},[t._v(t._s(e.docCurrency))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.docAmountStr))]),a("td",{staticClass:"text-right fx-cell"},[e.needFxRate?a("span",[t._v(t._s(e.fxRate.value||"0.00"))]):t._e(),e.needFxRate?t._e():a("span",[t._v("-")])]),a("td",{staticClass:"text-right"},[t._v(t._s(e.amountInRepCurrencyStr))]),a("td",[t._v(t._s(e.description))]),a("td",[t._v(t._s(e.isOwn?"Own":"Opposite"))])])}))],2)}))],2),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)},$d=[],xd={},wd=function(t){return xd.name="MatchedTable",xd.mixins=[Lo(t)],xd.data=function(){return{itemsPerPage:10,showFilters:!1,loading:!1}},xd.computed={allItems:function(){return this.$store.getters.matchedSets},selectedCompany:function(){return this.$store.getters.selectedCompany}},xd.methods={toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},unmatch:function(t){this.$emit("unmatch",t.id)}},xd.watch={records:function(e){t.commit("setItems",e)}},xd};wd.options=xd;var Sd=wd,Rd=Sd,Id=Object(W["a"])(Rd,Dd,$d,!1,null,null,null),Pd=Id.exports,kd=Uo.TableStore(),Fd={name:"matchedModal",components:{FullPageModal:$n,MatchedTable:Pd(kd)},props:{IN:{type:Boolean,required:!0},open:{type:Boolean,required:!0}},data:function(){return{hasSets:!1,loading:!1}},computed:{selectedCompany:function(){return this.$store.getters.selectedCompany},selectedReconciliation:function(){return this.$store.getters.selectedReconciliation},dates:function(){var t=this.$store.getters.selectedReconciliation;if(t){var e=C.formatDate(t.endDate);return t.statement.id>1&&(e=C.formatDate(t.startDate)+" - "+e),e}}},methods:{close:function(){this.$emit("close")},exportFile:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,matched:!0,exceptions:!1};t.$store.dispatch("exportRecords",e).then((function(){})).catch((function(){})).finally((function(){t.loading=!1}))},onUnmatch:function(t){var e=this;this.loading=!0,this.$store.dispatch("unmatchSet",t).then((function(){e.loadSets()})).finally((function(){e.loading=!1}))},loadSets:function(){var t=this;t.loading=!0;var e={areIN:t.IN,selectedReconciliation:this.selectedReconciliation};t.$store.dispatch("loadMatchedSets",e).then((function(e){t.hasSets=!!e.length,t.hasSets&&kd.commit("setItems",e)})).finally((function(){t.loading=!1}))}},watch:{open:function(t){t?(this.$refs.modal.open(),this.loadSets()):(this.$refs.modal.close(),this.hasSets=!1)}}},Md=Fd,Nd=Object(W["a"])(Md,Cd,_d,!1,null,null,null),Ad=Nd.exports,Td={name:"ReconciliationSummaryTable",components:{ExceptionsModal:bd,MatchedModal:Ad},data:function(){return{openExceptionsModal:!1,openMatchedModal:!1,isIN:!1,isOUT:!1,loading:!1}},props:["recId"],computed:{selectedReconciliation:function(){return this.$store.getters.selectedReconciliation},company:function(){return this.$store.getters.selectedCompany||{}},summary:function(){return this.$store.getters.selectedReconciliationSummary},statementContext:function(){return{IN:this.selectedReconciliation.context?this.selectedReconciliation.context.IN:"",OUT:this.selectedReconciliation.context?this.selectedReconciliation.context.OUT:""}}},methods:{autoMatch:function(t,e){var a=this,n=this;n.loading=!0;var o={areIN:t,areOUT:e,selectedReconciliation:this.selectedReconciliation};n.$store.dispatch("matchAuto",o).then((function(){a.loadReconciliation()})).finally((function(){n.loading=!1}))},showExceptions:function(t,e){this.isIN=!!t,this.isOUT=!!e,this.openExceptionsModal=!0},showMatched:function(t){this.isIN=!!t,this.openMatchedModal=!0},onClose:function(){this.loading||(this.loadReconciliation(),this.openExceptionsModal=!1,this.openMatchedModal=!1)},loadReconciliation:function(){var t=this;return this.loading=!0,Promise.all([this.$store.dispatch("loadSelReconciliation",this.recId),this.$store.dispatch("loadSelReconciliationSummary",this.recId)]).finally((function(){t.loading=!1}))}}},Od=Td,Ed=Object(W["a"])(Od,zu,Vu,!1,null,null,null),jd=Ed.exports,Ud=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("b-input-group",{staticClass:"w-25 mx-1 mt-3 mb-3",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})]),t._l(t.pageItems,(function(e){return a("MessageRow",{key:e.id,attrs:{message:e},on:{reload:t.loadSRMessages}})})),a("MessageForm",{attrs:{recId:t.recId},on:{reload:t.loadSRMessages}}),a("br"),a("div",[a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),a("loading",{attrs:{loading:t.loading}})],2)},Ld=[],qd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message"},[a("Avatar",{attrs:{size:70,username:t.message.from?t.message.from.fullName:"",src:t.message.from&&t.message.from.profileImageUrl?t.message.from.profileImageUrl:""}}),a("div",{staticClass:"message-content"},[a("div",{staticClass:"message-heading"},[a("div",{staticClass:"full-name"},[t._v(" "+t._s(t.message.from?t.message.from.fullName:"")+t._s(t.selfLiveMessage?"(me)":"")+" ")]),a("div",{staticClass:"message-date"},[t._v(" "+t._s(t._f("bsDateTime")(t.message.date))+" ")]),a("div",{staticClass:"message-buttons"})]),a("div",{staticClass:"message-text"},[t.editActive?t._e():a("div",[t._v(" "+t._s(t.message.body)+" ")]),t.editActive?a("div",{staticClass:"message-edit"},[a("b-form-textarea",{attrs:{placeholder:"Enter message","no-resize":!0,rows:3,"max-rows":6},model:{value:t.internalMessage,callback:function(e){t.internalMessage=e},expression:"internalMessage"}})],1):t._e()])])],1)},Kd=[],zd={name:"ReconciliationMessageRow",components:{Avatar:Nl},data:function(){return{editActive:!1,internalMessage:this.message.body}},props:{message:{}},computed:{user:function(){return this.$store.getters.user},selfLiveMessage:function(){if(!this.message.from||!this.message.date)return!1;var t=Date.parse(this.message.date),e=Date.now(),a=6e4*Ba;return this.message.from.email===this.user.email&&t>e-a}},methods:{deleteMessage:function(){var t=this;this.$store.dispatch("deleteMessage",this.message).then((function(){t.$emit("reload")}))},switchEditMessage:function(){this.editActive=!this.editActive},saveMessage:function(){var t=this;this.editActive=!1;var e=Object.assign({},this.message);e.body=this.internalMessage,this.$store.dispatch("editMessage",e).then((function(){t.$emit("reload")}))}}},Vd=zd,Bd=Object(W["a"])(Vd,qd,Kd,!1,null,null,null),Hd=Bd.exports,Yd=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"message-form"},[a("div",{staticClass:"message-form-content "},[a("b-form-textarea",{staticClass:"message-form-text mt-3 mb-3",attrs:{placeholder:"Enter message","no-resize":!0,rows:3,"max-rows":6},model:{value:t.messageText,callback:function(e){t.messageText=e},expression:"messageText"}})],1),a("b-button",{attrs:{size:"small",variant:"primary"},on:{click:t.submit}},[t._v(" SEND ")])],1)},Xd=[],Jd={name:"ReconciliationMessageRow",components:{Avatar:Nl},data:function(){return{messageText:""}},props:{recId:{}},computed:{user:function(){return this.$store.getters.user}},methods:{submit:function(){var t=this,e={recId:this.recId,message:this.messageText};this.$store.dispatch("sendReconciliationMessage",e).then((function(){t.messageText="",t.$emit("reload")}))}}},Wd=Jd,Gd=Object(W["a"])(Wd,Yd,Xd,!1,null,null,null),Qd=Gd.exports,Zd=Uo.TableStore(),tm={name:"ReconciliationMessages",components:{MessageRow:Hd,MessageForm:Qd},mixins:[va,Lo(Zd)],created:function(){this.runAfterSCisSet(this.loadSRMessages)},computed:{thread:function(){return this.$store.getters.SRMessages},messages:function(){return this.thread.messages?this.thread.messages:[]}},props:["recId"],data:function(){return{itemsPerPage:5,loading:!0}},methods:{loadSRMessages:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSRMessages",this.recId).then((function(){t.loading=!1}))}},watch:{messages:function(t){Zd.commit("setItems",t)}}},em=tm,am=Object(W["a"])(em,Ud,Ld,!1,null,null,null),nm=am.exports,om={name:"ReconciliationsPage",components:{ReconciliationSummaryTable:jd,ReconciliationMessages:nm},mixins:[va],props:["recId"],data:function(){return{loading:!1,activeTabId:0,options:[{text:"Open",value:1},{text:"Finished",value:2},{text:"Rejected",value:3}]}},computed:{selectedReconciliation:function(){return this.$store.getters.selectedReconciliation||{}},dates:function(){var t=this.$store.getters.selectedReconciliation;if(t){var e=C.formatDate(t.endDate);return t.statement.id>1&&(e=C.formatDate(t.startDate)+" - "+e),e}}},created:function(){this.runAfterSCisSet(this.loadReconciliation)},methods:{loadReconciliation:function(){var t=this;this.loading=!0,Promise.all([this.$store.dispatch("loadSelReconciliation",this.recId),this.$store.dispatch("loadSelReconciliationSummary",this.recId)]).finally((function(){t.loading=!1}))},goToUpload:function(){var t={statementID:this.selectedReconciliation.statement.id,startDate:this.selectedReconciliation.startDate,endDate:this.selectedReconciliation.endDate},e=this.$route.path;this.$router.push({name:"Upload",params:{uploadData:t,historyComponent:e}})},goBack:function(){this.$router.go(-1)},changeRecStatus:function(t){this.selectedReconciliation.statusId=t,this.$store.dispatch("editSelReconciliationStatus",this.selectedReconciliation)},onTabChange:function(t){this.activeTabId=t}}},sm=om,rm=Object(W["a"])(sm,qu,Ku,!1,null,null,null),im=rm.exports,cm=[{path:"reconciliations",name:"Reconciliations",component:Lu,meta:{pageId:"reconciliations-page",pageClass:""},beforeEnter:K},{path:"reconciliation/:recId",name:"Reconciliation",component:im,props:!0,meta:{pageId:"reconciliation-page",pageClass:""},beforeEnter:K},{path:"upload",name:"Upload",component:Ls,meta:{pageId:"upload-page",pageClass:""},beforeEnter:K},{path:"contacts",name:"Contacts",component:vi,meta:{pageId:"contacts-page",pageClass:""},beforeEnter:K},{path:"fx",name:"FX",component:on,meta:{pageId:"fx-page",pageClass:""},beforeEnter:K},{path:"profile",name:"CompanyProfile",component:El,meta:{pageId:"profile-page",pageClass:""},beforeEnter:K},{path:"collaborators",name:"Collaborators",component:Ji,meta:{pageId:"collaborators-page",pageClass:""},beforeEnter:K},{path:"records",name:"Records",component:su,meta:{pageId:"records-page",pageClass:""},beforeEnter:K}],lm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[t._l(t.nomenclatures,(function(e){return a("div",{key:e.name,staticClass:"m-4"},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.name,expression:"nomenclature.name"}],staticClass:"mb-2"},[t._v(t._s(e.name)+" ("+t._s(t.count(e.items))+")")]),a("b-collapse",{attrs:{id:e.name}},[a("b-card",[a("pre",[t._v(t._s(e.items))])])],1)],1)})),a("loading",{attrs:{loading:t.loading}})],2)},um=[];function dm(t){return{id:t.id,name:t.name,code:t.code,order:t.sortOrder}}function mm(t){return{id:t.id,name:t.name,code:t.isoCode,order:t.sortOrder}}var pm={},fm=[{name:"countries",converter:"apiToCountry"},{name:"currencies",converter:"apiToCurrency"}];function hm(t){return N.a.get("/CompanyPropertyTypes/"+t+"/keys")}fm.reduce((function(t,e){return t[e.name]=function(){var t=e.endpoint||e.name,a=N.a.get("/"+t);return e.converter?a.then((function(t){return t.map(n[e.converter])})):a},t}),pm),Object.keys(La).reduce((function(t,e){var a=e+"Keys";return t[a]=function(){return hm(La[e])},t}),pm);var vm=pm,gm={},ym={},bm={},Cm={};function _m(t,e){gm[t]=null,ym[t]=function(e){return e[t]},bm[t]=function(e,a){e[t]=a},Cm["load"+vl.capitalizeFirstLetter(t)]=function(a){var n=a.commit,o=a.state;return o[t]?Promise.resolve(o[t]):e().then((function(e){return n(t,e),e}))}}Object.keys(vm).forEach((function(t){_m(t,vm[t])}));var Dm={state:gm,getters:ym,mutations:bm,actions:Cm},$m={created:function(){var t=this;this.loading=!0;var e=Object.keys(Dm.state).map((function(e){var a=Dm.state[e];a?t.nomenclatures.push({name:e,items:a}):t.$store.dispatch("load"+vl.capitalizeFirstLetter(e)).then((function(a){t.nomenclatures.push({name:e,items:a})}))}));Promise.all(e).finally((function(){t.loading=!1}))},data:function(){return{nomenclatures:[],loading:!1}},methods:{count:function(t){return ac.isObject(t)?Object.keys(t).length:t.length}}},xm=$m,wm=Object(W["a"])(xm,lm,um,!1,null,null,null),Sm=wm.exports,Rm=[{path:"nomenclatures",name:"Nomenclatures",component:Sm,meta:{pageId:"nomenclatures-page",pageClass:""},beforeEnter:K}],Im=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h1",[t._v(t._s(t.$t("Companies")))]),t.myCompanies.length?a("div",{staticClass:"companies-list"},[a("router-link",{staticClass:"btn btn-success btn-sm absolute-right",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))]),a("companies-table",{attrs:{companies:t.myCompanies}})],1):t._e(),t.myCompanies.length||t.loading?t._e():a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Add your first company :")))]),a("router-link",{staticClass:"btn btn-success btn-lg",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))])],1),a("loading",{attrs:{loading:t.loading}})],1)])])},Pm=[],km=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Name")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Aliases")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Reg Number")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Reporting Currency")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Direct Parent")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Top Parent")))]),t._m(0),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Actions")))])])]),a("tbody",t._l(t.companies,(function(e){return a("tr",[a("th",[a("router-link",{attrs:{to:"/companies/"+e.id}},[a("company-card",{attrs:{company:e,size:"m"}})],1)],1),a("td",[t._v(t._s(e.aliases.map((function(t){return t.aname})).join(", ")))]),a("td",[t._v(t._s(e.regNum))]),a("td",[t._v(t._s(e.currency.code))]),a("td",[t._v(t._s(e.parent?e.parent.name:""))]),a("td",[t._v(t._s(e.topParent?e.topParent.name:""))]),a("td",[a("a",{on:{click:function(a){return t.showCompanyNotifications(e)}}},[t._v(t._s(e.notificationsCount))])]),a("td",[a("b-dropdown",{staticClass:"companies-list-actions",attrs:{text:"...",right:"","no-caret":""}},[a("b-dropdown-item",{on:{click:function(a){return t.goToUploads(e.id)}}},[t._v(t._s(t.$t("Upload")))]),a("b-dropdown-item",{on:{click:function(a){return t.goToReconciliations(e.id)}}},[t._v(t._s(t.$t("Start Reconciliation")))])],1)],1)])})),0)]),a("NotificationModal",{ref:"NotificationModal"})],1)},Fm=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{attrs:{scope:"col"}},[a("i",{staticClass:"fa fa-bell"})])}],Mm=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"NotificationModalRef",staticClass:"company-notifications",attrs:{"hide-footer":"",title:"Company Notifications"},on:{hide:t.reloadCompanies}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(" ID: "+t._s(t.company.name))])]),a("NotificationPanel",{attrs:{notifications:t.notifications,loading:t.loading,panel_style:t.panel_style,handleScroll:t.handleScroll,finalResult:t.finalResult,goToFunc:t.goToCompanyNotifications,markAllFunc:t.markCompanyNotificationsRead,toggleFunc:t.toggleCompanyNotification}})],1)},Nm=[],Am=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notification-panel",style:[t.panel_style]},[a("loading",{attrs:{loading:t.loading}}),t.notifications.length>=1?a("div",{staticClass:"notification-heading"},[a("h6",{staticClass:"notification-heading-title"},[t._v(t._s(t.$t("Notifications")))]),a("a",{staticClass:"notification-link",on:{click:t.markAllFunc}},[t._v(t._s(t.$t("Mark all as read")))]),a("a",{staticClass:"notification-link",on:{click:t.goToFunc}},[t._v(t._s(t.$t("See all")))])]):t._e(),a("div",{staticClass:"notification-panel-body",on:{scroll:t.handleScroll}},[t._l(t.notifications,(function(e){return a("NotificationBlock",{key:e.id,attrs:{current:e,toggleFunc:t.toggleFunc}})})),t.finalResult?a("div",{staticClass:"text-center"},[a("p",[t._v(" No more results.")])]):t._e()],2)],1)},Tm=[],Om=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"notification-panel-body-wrapper":!0,"notification-not-read":!t.current.isRead}},[a("Avatar",{attrs:{username:t.current.userFullName?t.current.userFullName:"",src:t.current.profileImageUrl?t.current.profileImageUrl:"",size:50,customStyle:{border:"1px solid lightgray","flex-shrink":"0"}}}),a("div",{staticClass:"notifications-text"},[a("h3",[t._v(t._s(t.current.userFullName))]),a("p",[t._v(t._s(t.current.description))])]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.isRead,expression:"current.isRead"}],class:{"notification-checkbox":!0," checked":t.current.isRead},attrs:{type:"checkbox",title:t.current.isRead?"Mark as unread":"Mark as read"},domProps:{checked:Array.isArray(t.current.isRead)?t._i(t.current.isRead,null)>-1:t.current.isRead},on:{click:function(e){return t.toggleFunc(t.current)},change:function(e){var a=t.current.isRead,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=null,r=t._i(a,s);n.checked?r<0&&t.$set(t.current,"isRead",a.concat([s])):r>-1&&t.$set(t.current,"isRead",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.current,"isRead",o)}}})])],1)},Em=[],jm={components:{Avatar:Nl},props:{toggleFunc:{},current:{}}},Um=jm,Lm=Object(W["a"])(Um,Om,Em,!1,null,null,null),qm=Lm.exports,Km={components:{NotificationBlock:qm},props:{notifications:{},panel_style:{},loading:{},handleScroll:{},finalResult:{},goToFunc:{},markAllFunc:{},toggleFunc:{}}},zm=Km,Vm=Object(W["a"])(zm,Am,Tm,!1,null,null,null),Bm=Vm.exports,Hm={components:{NotificationPanel:Bm},data:function(){return{loading:!1,company:{},currentTime:null,currentNotification:1,notificationsPerLoad:10}},computed:{notifications:function(){return this.$store.getters.companyNotifications},nextCompanyNotifications:function(){return this.$store.getters.nextCompanyNotifications},finalResult:function(){return 0===this.nextCompanyNotifications.length},payload:function(){var t=new Date(this.currentTime);return{company:this.company,currentTime:t.toISOString(),startIndex:this.currentNotification,endIndex:this.currentNotification+this.notificationsPerLoad-1}},panel_style:function(){return{height:this.windowHeight/2+"px"}}},methods:{showModal:function(t){this.currentNotification=1,this.company=t,this.currentTime=Date.now(),this.loadCompanyNotification(),this.$refs.NotificationModalRef.show()},reloadCompanies:function(){this.$store.dispatch("loadMyCompanies"),this.$store.dispatch("loadUserNotificationsCount")},loadMore:function(){var t=this;this.currentNotification+=this.notificationsPerLoad,this.$store.dispatch("loadNextCompanyNotifications",this.payload).then((function(){t.loading=!1}))},loadCompanyNotification:function(){var t=this;this.loading=!0,this.$store.dispatch("loadCompanyNotifications",this.payload).then((function(){t.$store.dispatch("markCompanyNotificationsOld",t.payload),t.loadMore()}))},markCompanyNotificationsRead:function(){var t=this;this.loading=!0,this.$store.dispatch("markCompanyNotificationsRead",this.payload).then((function(){t.loading=!1}))},loadNextCompanyNotification:function(){var t=this;this.loading=!0,this.finalResult||this.$store.dispatch("addCompanyNotifications",this.nextCompanyNotifications).then((function(){t.loadMore()}))},handleScroll:function(t){t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<100&&!this.loading&&!this.finalResult&&this.loadNextCompanyNotification()},goToCompanyNotifications:function(){this.showPanel=!this.showPanel,this.currentNotification=1,this.$router.push({name:"Notifications",params:{type:this.company.id}})},toggleCompanyNotification:function(t){this.$store.dispatch("switchCompanyNotificationReadStatus",t.company.id)}}},Ym=Hm,Xm=Object(W["a"])(Ym,Mm,Nm,!1,null,null,null),Jm=Xm.exports,Wm={components:{CompanyCard:Bs["a"],NotificationModal:Jm},props:["companies"],methods:{showCompanyNotifications:function(t){this.$refs.NotificationModal.showModal(t)},goToUploads:function(t){this.$router.push({path:"/companies/".concat(t,"/upload")})},goToReconciliations:function(t){this.$router.push({path:"/companies/".concat(t,"/reconciliations")})}}},Gm=Wm,Qm=Object(W["a"])(Gm,km,Fm,!1,null,null,null),Zm=Qm.exports,tp={components:{CompaniesTable:Zm},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadMyCompanies").finally((function(){t.loading=!1}))},data:function(){return{loading:!1}},computed:{myCompanies:function(){return this.$store.getters.myCompanies}}},ep=tp,ap=Object(W["a"])(ep,Im,Pm,!1,null,null,null),np=ap.exports,op=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mx-auto pt-5"},[a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("Add Company")))]),a("div",{staticClass:"card-body"},[a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.$refs.logoModal.open()}}},[t._v(t._s(t.$t("Select Logo")))]),null!==t.companyLogo.image?a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.deleteLogo}},[t._v("X")]):t._e(),a("AvatarChangeModal",{ref:"logoModal",on:{image:t.setLogo}}),a("my-company-form",{attrs:{logo:t.companyLogo},on:{success:t.onAddedCompany,cancel:t.cancel}})],1)])])])])},sp=[],rp={name:"AddCompany",components:{MyCompanyForm:lc,AvatarChangeModal:Rl},data:function(){return{companyLogo:{image:null,formData:null}}},methods:{onAddedCompany:function(t){this.$router.push({name:"CompanyProfile",params:{id:t.id}})},cancel:function(){this.$router.go(-1)},setLogo:function(t){this.companyLogo=t},deleteLogo:function(){this.companyLogo={image:null,formData:null}}}},ip=rp,cp=Object(W["a"])(ip,op,sp,!1,null,null,null),lp=cp.exports,up=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pl-4 pr-4"},[a("h2",{staticClass:"text-center mt-5"},[t._v("Received Invitations")]),t.receivedInvitations.length?a("ReceivedInvitationsTable",{attrs:{invitations:t.receivedInvitations},on:{reload:t.loadData}}):t._e(),t.receivedInvitations.length||t.loading?t._e():a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Currently there are no invitations.")))]),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:t.goToHome}},[t._v(" "+t._s(t.$t("Go to my companies"))+" ")])],1),a("loading",{attrs:{loading:t.loading}})],1)},dp=[],mp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar  mb-4",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setItemsPerPage(e)}}})])],1),a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"sender.company.name",compare:"strings"},expression:"{sortKey: 'sender.company.name', compare: 'strings'}"}]},[t._v("From Company")]),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.name",compare:"strings"},expression:"{sortKey: 'receiver.name', compare: 'strings'}"}]},[t._v("To Company")]),a("th",[t._v("Actions")])]),t.showFilters?a("tr",[a("th",[a("SelectFilter",{attrs:{filterKey:"sender.company.country.name",items:t.invitations,compare:t.compare.string}})],1),a("th",[a("SelectFilter",{attrs:{filterKey:"receiver.name",items:t.invitations,compare:t.compare.string}})],1),a("th",[t._v("Actions")])]):t._e()]),a("tbody",t._l(t.pageItems,(function(e,n){return a("tr",{key:e.id},[a("td",[a("company-card",{attrs:{company:e.sender.company,size:"m"}}),a("div",[a("strong",[t._v("Country: ")]),t._v(t._s(e.sender.company.country.name))]),a("div",[a("strong",[t._v("Reg #: ")]),t._v(t._s(e.sender.company.regNum))])],1),a("td",[a("company-card",{attrs:{company:e.receiver,size:"m"}}),a("div",[a("strong",[t._v("Country: ")]),t._v(t._s(e.receiver.country.name))]),a("div",[a("strong",[t._v("Reg #: ")]),t._v(t._s(e.receiver.regNum))])],1),a("td",[a("form",{on:{submit:function(e){return e.preventDefault(),t.accept(n)}}},[a("div",{staticClass:"form-group"},[a("CompanySelect",{attrs:{ID:"myCompany",name:"myCompany",companies:t.myCompanies,componentClass:"form-group",componentLabel:t.$t("Company")+":",allowNone:!1},model:{value:t.companiesModels[n],callback:function(e){t.$set(t.companiesModels,n,e)},expression:"companiesModels[index]"}})],1),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.accept(n)}}},[t._v("Accept")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.reject(n)}}},[t._v("Reject")])])])])})),0)]),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),a("loading",{attrs:{loading:t.loading}})],1)},pp=[],fp={},hp=function(t){return fp.name="ReceivedInvitationsTable",fp.mixins=[Lo(t)],fp.props=["invitations"],fp.directives={Sort:Uo.SortDirective(t)},fp.components={CompanyCard:Bs["a"],CompanySelect:ci,InputFilter:Uo.InputFilter(t),SelectFilter:Uo.SelectFilter(t),DateFilter:Uo.DateFilter(t)},fp.data=function(){return{companiesModels:[],loading:!1,itemsPerPage:10,showFilters:!1,compare:{string:ha["a"].string,numAsString:ha["a"].numAsString,number:ha["a"].number,day:ha["a"].day}}},fp.mounted=function(){this.setStore()},fp.computed={myCompanies:function(){return this.$store.getters.myCompanies}},fp.methods={setStore:function(){t.commit("setItems",this.invitations)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},accept:function(t){var e=this.invitations[t],a=this.companiesModels[t];a?(this.loadStore("acceptContactInvitation",{company:a,invitation:e}),this.companiesModels.shift()):this.$customMsg.showErrorMessage("Please select company")},reject:function(t){var e=this.invitations[t];this.loadStore("rejectContactInvitation",e),this.companiesModels.shift()},loadStore:function(t,e){var a=this;this.loading=!0,this.$store.dispatch(t,e).catch((function(t){a.$customMsg.showErrorMessage(t.messageDetail)})).finally((function(){a.loading=!1,a.$emit("reload")}))}},fp.watch={invitations:function(){this.setStore()}},fp};hp.options=fp;var vp=Uo.TableStore("ReceivedInvitationsTable"),gp=hp(vp),yp=gp,bp=Object(W["a"])(yp,mp,pp,!1,null,null,null),Cp=bp.exports,_p={components:{ReceivedInvitationsTable:Cp},created:function(){this.loadData()},data:function(){return{loading:!1}},computed:{receivedInvitations:function(){return this.$store.getters.receivedInvitations}},methods:{goToHome:function(){this.$router.push("Home")},loadData:function(){var t=this;this.loading=!0,this.$store.dispatch("loadReceivedInvitations").then((function(){t.$store.dispatch("loadMyCompanies").finally((function(){t.loading=!1}))}))}}},Dp=_p,$p=Object(W["a"])(Dp,up,dp,!1,null,null,null),xp=$p.exports,wp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h1",[t._v("Matching Tool")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"country"}},[t._v("Statement type:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.statement,expression:"formData.statement"}],staticClass:"form-control",attrs:{id:"country",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.formData,"statement",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1",selected:""}},[t._v("Balance Sheet")]),a("option",{attrs:{value:"2"}},[t._v("Income Statement")]),a("option",{attrs:{value:"3"}},[t._v("Cash Flow Statement")])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"from"}},[t._v("From:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.from,expression:"formData.from"}],staticClass:"form-control",attrs:{type:"text",id:"from",required:""},domProps:{value:t.formData.from},on:{input:function(e){e.target.composing||t.$set(t.formData,"from",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"to"}},[t._v("To:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.to,expression:"formData.to"}],staticClass:"form-control",attrs:{type:"text",id:"to",required:""},domProps:{value:t.formData.to},on:{input:function(e){e.target.composing||t.$set(t.formData,"to",e.target.value)}}})]),t._m(0),t._m(1),t._m(2)])])},Sp=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"file1"}},[t._v("Own Company File:")]),a("div",{staticClass:"custom-file"},[a("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file1"}}),a("label",{staticClass:"custom-file-label",attrs:{for:"file1"}},[t._v("Choose file")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"file2"}},[t._v("Opposite Company File:")]),a("div",{staticClass:"custom-file"},[a("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file2"}}),a("label",{staticClass:"custom-file-label",attrs:{for:"file2"}},[t._v("Choose file")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-4"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")])])}],Rp={data:function(){return{formData:{statement:1}}},methods:{submit:function(){alert("Hello : )")}}},Ip=Rp,Pp=Object(W["a"])(Ip,wp,Sp,!1,null,null,null),kp=Pp.exports,Fp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-section"},[a("div",{staticClass:"left-side"},[a("div",{staticClass:"left-side-company-info"},[a("CompanyCard",{attrs:{company:t.company,size:"m",extend:"true"}})],1),a("nav",{staticClass:"nav flex-column nav-pills"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/upload"}},[a("i",{staticClass:"fas fa-cloud-upload-alt"}),a("span",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Upload")))])]),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/contacts"}},[a("i",{staticClass:"far fa-address-book"}),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Contacts")))])]),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/profile"}},[a("i",{staticClass:"fas fa-user"}),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Profile")))])]),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/collaborators"}},[a("i",{staticClass:"fas fa-users"}),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Collaborators")))])]),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/records"}},[a("i",{staticClass:"fas fa-save"}),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Records")))])]),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/fx"}},[a("i",{staticClass:"fas fa-chart-line"}),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Fx Rates")))])]),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/reconciliations"}},[a("i",{staticClass:"fas fa-exchange-alt fa-rotate-90"}),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Reconciliations")))])])],1)]),a("div",{staticClass:"right-side"},[a("router-view")],1),a("loading",{attrs:{loading:t.loading}})],1)},Mp=[],Np={components:{CompanyCard:Bs["a"]},props:["id"],created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSelCompany",this.id).finally((function(){t.loading=!1}))},data:function(){return{loading:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}}}},Ap=Np,Tp=Object(W["a"])(Ap,Fp,Mp,!1,null,null,null),Op=Tp.exports,Ep=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-tabs",{staticClass:"user-profile",attrs:{pills:"",card:"",vertical:""},on:{input:t.changeRoute},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"Profile"}},[0===t.tabIndex?a("UserProfileForm"):t._e()],1),a("b-tab",{attrs:{title:"Settings"}},[1===t.tabIndex?a("UserSettings",{on:{success:t.reset}}):t._e()],1),a("b-tab",{attrs:{title:"Change Password"}},[2===t.tabIndex?a("PasswordChangeForm",{on:{success:t.reset}}):t._e()],1)],1)},jp=[],Up=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"user-profile-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"custom-avatar-wrapper"},[a("div",{staticClass:"d-inline-block custom-avatar",on:{click:t.openChangeAvatarModal}},[a("Avatar",{attrs:{username:t.internalData.fullName?t.internalData.fullName:"",src:t.internalData.profileImageUrl?t.internalData.profileImageUrl:"",size:145,rounded:!1}}),t._m(0)],1),a("AvatarChangeModal",{ref:"modal",on:{file:t.uploadNewAvatar}})],1),a("div",{staticClass:"form-group inline-form-group email"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "+t._s(t.internalData.email)+" ")]),a("div",[a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("First Name"))+":")]),a("b-form-input",{attrs:{disabled:!t.editActive},model:{value:t.internalData.firstName,callback:function(e){t.$set(t.internalData,"firstName",e)},expression:"internalData.firstName"}})],1),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Last Name"))+":")]),a("b-form-input",{attrs:{disabled:!t.editActive},model:{value:t.internalData.lastName,callback:function(e){t.$set(t.internalData,"lastName",e)},expression:"internalData.lastName"}})],1),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Phone"))+":")]),a("b-form-input",{attrs:{disabled:!t.editActive},model:{value:t.internalData.phone,callback:function(e){t.$set(t.internalData,"phone",e)},expression:"internalData.phone"}})],1)]),t.editActive?a("div",{staticClass:"text-center py-3"},[a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:t.submit}},[t._v(t._s(t.$t("Save")))]),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.switchEdit}},[t._v(t._s(t.$t("Cancel")))])],1):t._e(),t.editActive?t._e():a("div",{staticClass:"text-center py-3"},[a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:t.switchEdit}},[t._v(t._s(t.$t("Edit")))])],1),a("loading",{attrs:{loading:t.loading}})],1)},Lp=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-avatar-overlay"},[a("i",{staticClass:"fa fa-edit fa-lg"})])}],qp={data:function(){return{loading:!1,internalData:{},editActive:!1,uploadedFile:null}},components:{Avatar:Nl,AvatarChangeModal:Rl},computed:{user:function(){return this.$store.getters.user}},mounted:function(){this.resetInternalData()},methods:{reloadUser:function(){var t=this;setTimeout((function(){t.$store.dispatch("reloadUser").then((function(){t.resetInternalData(),t.loading=!1}))}),500)},openChangeAvatarModal:function(){this.$refs.modal.open()},uploadNewAvatar:function(t){var e=this;this.loading=!0,j.uploadAvatar(t).then((function(){e.$customMsg.showSuccessMessage(e.$t("Successfully changed user avatar"))})).catch((function(t){e.$customMsg.showErrorMessage(t.messageDetail)})).finally((function(){e.reloadUser()}))},deleteAvatar:function(t){var e=this;this.loading=!0,j.deleteAvatar().then((function(){e.$customMsg.showSuccessMessage(e.$t("Successfully deleted user avatar"))})).catch((function(t){e.$customMsg.showErrorMessage(t.messageDetail)})).finally((function(){e.reloadUser()}))},resetInternalData:function(){this.internalData=Object.assign({},this.$store.getters.user)},switchEdit:function(){this.editActive&&this.resetInternalData(),this.editActive=!this.editActive},submit:function(){var t=this,e={firstName:this.internalData.firstName,lastName:this.internalData.lastName,phone:this.internalData.phone};this.loading=!0,j.updateUser(e).then((function(e){t.$customMsg.showSuccessMessage(t.$t("Updated account info for")+": "+e.email)})).catch((function(e){t.$customMsg.showErrorMessage(e.messageDetail)})).finally((function(){t.reloadUser(),t.editActive=!t.editActive}))}}},Kp=qp,zp=Object(W["a"])(Kp,Up,Lp,!1,null,null,null),Vp=zp.exports,Bp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"user-settings-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Language"))+":")]),a("div",[a("b-form-select",{staticClass:"mb-3 form-control",attrs:{options:t.options},on:{change:t.languageChange},model:{value:t.userLanguage,callback:function(e){t.userLanguage=e},expression:"userLanguage"}})],1)]),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("Save")))])]),a("loading",{attrs:{loading:t.loading}})],1)},Hp=[],Yp={data:function(){return{loading:!1,userLanguage:this.$t("lang"),options:[{value:null,disabled:!0,text:"Please select language"},{value:"EN",text:"English"},{value:"",text:""}]}},methods:{submit:function(){var t=this;this.loading=!0;var e=[{key:"language",value:this.$i18n.locale}];j.updateUserSettings(e).then((function(e){t.$emit("success")})).catch((function(e){t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1}))},languageChange:function(t){switch(t){case"EN":this.$i18n.locale="en";break;case"":this.$i18n.locale="bg";break;default:this.$i18n.locale="en"}}},watch:{"$i18n.locale":function(){this.userLanguage=this.$t("lang")}}},Xp=Yp,Jp=Object(W["a"])(Xp,Bp,Hp,!1,null,null,null),Wp=Jp.exports,Gp=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"password-change-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v(" "+t._s(t.errMsg)+" ")]):t._e(),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Old Password"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.oldPassword,expression:"formData.oldPassword"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.oldPassword.required&&t.$v.formData.oldPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.oldPassword},on:{blur:function(e){return t.$v.formData.oldPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"oldPassword",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your old password")))])])]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.password.required||!t.$v.formData.password.minLength)&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){return t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"))+" ")])])]),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.repPassword.sameAsPass||!t.$v.formData.repPassword.minLength)&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){return t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),a("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.$v.formData.repPassword.sameAsPass?t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"):t.$t("Please, repeat the password"))+" ")])])]),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("Change Password")))])]),a("loading",{attrs:{loading:t.loading}})],1)},Qp=[],Zp={validations:{formData:{oldPassword:{required:Y["required"]},password:{required:Y["required"],minLength:Object(Y["minLength"])(8)},repPassword:{required:Y["required"],minLength:Object(Y["minLength"])(8),sameAsPass:Object(Y["sameAs"])("password")}}},data:function(){return{formData:{oldPassword:null,password:null,repPassword:null},errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,j.changePass(this.formData.oldPassword,this.formData.password).then((function(e){t.$customMsg.showSuccessMessage("Password succesfuly updated for account: "+e.email),t.formData.oldPassword=null,t.formData.password=null,t.formData.repPassword=null,t.$emit("success")})).catch((function(e){console.log(e),t.errMsg=t.$t(e.messageDetail)})).finally((function(){t.loading=!1})))}}},tf=Zp,ef=Object(W["a"])(tf,Gp,Qp,!1,null,null,null),af=ef.exports,nf={components:{UserProfileForm:Vp,UserSettings:Wp,PasswordChangeForm:af},data:function(){return{tabIndex:0}},created:function(){this.switchTab()},methods:{changeRoute:function(t){switch(t){case 0:this.$router.push({hash:"#profile"});break;case 1:this.$router.push({hash:"#settings"});break;case 2:this.$router.push({hash:"#password"});break}},switchTab:function(){switch(this.$route.hash){case"#profile":this.tabIndex=0;break;case"#settings":this.tabIndex=1;break;case"#password":this.tabIndex=2;break;default:this.tabIndex=0;break}},reset:function(){this.tabIndex=0}},watch:{$route:function(){this.switchTab()}}},of=nf,sf=Object(W["a"])(of,Ep,jp,!1,null,null,null),rf=sf.exports,cf=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},lf=[],uf={name:"Prototype"},df=uf,mf=Object(W["a"])(df,cf,lf,!1,null,null,null),pf=mf.exports,ff=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h2",{staticClass:"text-center mt-5"},[t._v(t._s(t.notificationTypeText)+" :")]),t._l(t.notifications,(function(e){return a("div",{class:{"notification-panel-body-wrapper page":!0,"notification-not-read":!e.isRead}},[a("Avatar",{attrs:{username:e.userFullName?e.userFullName:"",src:e.profileImageUrl?e.profileImageUrl:"",size:50,customStyle:{border:"1px solid lightgray","flex-shrink":"0"}}}),a("div",{staticClass:"notifications-text"},[a("h3",[t._v(t._s(e.userFullName))]),a("p",[t._v(t._s(e.description))])])],1)}))],2)},hf=[],vf={components:{Avatar:Nl},props:{type:{}},data:function(){return{userNotification:!1,companyId:null}},mounted:function(){this.$store.dispatch("loadAllUserNotifications")},computed:{userNotifications:function(){return this.$store.getters.userNotifications},companyNotifications:function(){return this.$store.getters.companyNotifications},notifications:function(){return this.userNotification?this.userNotifications:this.companyNotifications},notificationTypeText:function(){return"user"===this.type?(this.userNotification=!0,"User Notifications"):(this.companyId=this.type,this.userNotification=!1,"Company Notifications (for company id:"+this.type+")")}},methods:{}},gf=vf,yf=Object(W["a"])(gf,ff,hf,!1,null,null,null),bf=yf.exports,Cf=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t._v(" Confirming account .... ")])])])}],Df={beforeMount:function(){this.$route.query&&void 0!==this.$route.query.c&&this.makeApiCall(),this.afterConfirmation()},methods:{makeApiCall:function(){var t=this,e=this.$route.query;this.$store.dispatch("confirmAccount",e).then(this.$customMsg.showSuccessMessage("Success")).catch((function(e){return t.$customMsg.showErrorMessage(e.messageDetail)}))},afterConfirmation:function(){this.$router.push("/")}}},$f=Df,xf=Object(W["a"])($f,Cf,_f,!1,null,null,null),wf=xf.exports;o["default"].use(L["a"]);var Sf=new L["a"]({routes:[{path:"/",name:"Home",component:np,meta:{pageId:"home-page",pageClass:""},beforeEnter:K},{path:"/ConfirmAccount",name:"ConfirmAccount",component:wf,meta:{pageId:"confirm-account-page",pageClass:""}}].concat(Object(U["a"])(Ut),[{path:"/user",name:"UserPage",component:rf,meta:{pageId:"user-page",pageClass:""},beforeEnter:K},{path:"/companies/:id",name:"CompanyPage",component:Op,props:!0,redirect:"/companies/:id/profile",meta:{pageId:"company-page",pageClass:""},beforeEnter:K,children:cm},{path:"/add-company",name:"AddCompany",component:lp,meta:{pageId:"add-company-page",pageClass:""},beforeEnter:K},{path:"/received-invitations",name:"ReceivedInvitations",component:xp,meta:{pageId:"received-invitations-page",pageClass:""},beforeEnter:K},{path:"/notifications/:type",name:"Notifications",props:!0,component:bf,meta:{pageId:"notifications-page",pageClass:""},beforeEnter:K},{path:"/matching-tool",name:"MatchingTool",component:kp,meta:{pageId:"matching-tool-page",pageClass:""},beforeEnter:K},{path:"/prototype",name:"Prototype",component:pf,redirect:"/prototype/company",meta:{pageId:"",pageClass:"prototype-page"},beforeEnter:K,children:Rm},{path:"*",redirect:"/"}]),mode:"history",linkExactActiveClass:"active"}),Rf="ud",If="at",Pf={user:null,token:null},kf={user:function(t){return t.user},token:function(t){return t.token}},Ff={setToken:function(t,e){t.token=e},setUser:function(t,e){t.user=e},clearUser:function(t){t.user=null,t.token=null}},Mf={loadUserCash:function(t){var e=t.commit,a=t.dispatch,n=sessionStorage.getItem(If);n&&e("setToken",n);var o=JSON.parse(sessionStorage.getItem(Rf));o&&(e("setUser",o),a("userNotificationsCountTimer",!0))},register:function(t,e){t.commit;return j.register(e)},login:function(t,e){var a=t.commit,n=t.dispatch;return j.login(e).then((function(t){n("resetCompanyStore"),n("userNotificationsCountTimer",!0),sessionStorage.setItem(Rf,JSON.stringify(t)),a("setUser",t)}))},logout:function(t){var e=t.dispatch;return j.logout().finally((function(){e("clearout"),e("userNotificationsCountTimer",!1)}))},clearout:function(t){var e=t.commit;e("clearUser"),e("clearInvitations"),Sf.push("/login"),sessionStorage.clear()},setToken:function(t,e){var a=t.commit;a("setToken",e),sessionStorage.setItem(If,e)},reloadUser:function(t){var e=t.commit;return j.getUser().then((function(t){e("setUser",t),sessionStorage.setItem(Rf,JSON.stringify(t))}))},confirmAccount:function(t,e){t.commit;var a=e.c||"";return j.confirmAccount(a)}},Nf={state:Pf,getters:kf,mutations:Ff,actions:Mf};function Af(t){return{id:t.id,companyId:t.companyId,typeId:t.typeId,typeName:t.typeName,targetId:t.targetId,dayOfMonth:+t.dayOfMonth,months:t.months,holidayHandlingTypeName:t.holidayHandlingTypeName,holidayHandlingTypeId:t.holidayHandlingTypeId}}function Tf(t){var e={typeId:t.typeId,dayOfMonth:t.dayOfMonth||0,months:t.months?t.months:"000000000000"};return t.id&&(e.id=t.id),t.companyId&&(e.companyId=t.companyId),t.typeName&&(e.typeName=t.typeName),t.targetId&&(e.targetId=t.targetId),t.holidayHandlingTypeName&&(e.holidayHandlingTypeName=t.holidayHandlingTypeName),t.holidayHandlingTypeId&&(e.holidayHandlingTypeId=t.holidayHandlingTypeId),e}function Of(t){var e={id:t.id,name:t.name,country:{id:t.country.id,code:t.country.code,name:t.country.name},regNum:t.registrationNumber,logo:Gf(t.name,t.logoUrl)};return e}function Ef(t){var e=Object(F["a"])(Object(F["a"])({},Of(t)),{},{aliases:t.companyAliases.map(Lf)});return e}function jf(t){var e=Object(F["a"])(Object(F["a"])({},Of(t)),{},{currency:{id:t.currency.id,code:t.currency.code,name:t.currency.name},address:t.addressText,parent:t.parent?t.parent:null,parentFromDate:t.parentFromDate?new Date(t.parentFromDate):null,parentToDate:t.parentToDate?new Date(t.parentToDate):null,aliases:t.ownCompanyAliases?t.ownCompanyAliases.map(Lf):[],userSettings:t.userSettings,userRole:{id:t.userRole.id,label:t.userRole.label},notificationsCount:t.notificationsCount});return t.topMostParent&&(e.topParent={id:t.topMostParent.id,name:t.topMostParent.name}),e}function Uf(t){var e=Object(F["a"])(Object(F["a"])({},jf(t)),{},{corpTax:{taxNumber:t.taxNumber},audit:{name:t.auditorName,email:t.auditorEmail,phone:t.auditorPhone},personnel:t.companyPersonnels.map(Kf),vats:t.companyVatNumbers.map(qf),taxes:[],software:[],misc:[]});return t.companyPropertyValues.reduce((function(t,e){var a=zf(e);switch(a.category.id){case La.tax:t.taxes.push(a);break;case La.software:t.software.push(a);break;default:t.misc.push(a)}return t}),e),t.recurringDates.forEach((function(t){switch(console.log("* TODO: review recDate object",t),t.typeId){case 2:e.corpTax.fillingDate=Af(t);break;case 3:e.corpTax.dueDate=Af(t);break;case 4:e.corpTax.advancedPayments=Af(t);break;case 5:e.audit.auditDeadlineDate=Af(t);break}})),console.log("* api-to-company: ",e),e}function Lf(t){return{id:t.id,companyid:t.companyId,refCompanyid:t.refCompanyId,aname:t.aliasText}}function qf(t){return{id:t.id,num:t.vatNumber,country:{id:t.countryId,name:t.countryName,code:t.countryCode},reportingRecurringDate:t.reportingRecurringDate}}function Kf(t){return{id:t.id,key:{id:t.typeKeyId,label:t.typeKeyText},customKey:t.customKeyValue,name:t.name,email:t.email,phone:t.phone}}function zf(t){return{id:t.id,category:{id:t.typeId,name:t.typeName},key:{id:t.keyId,label:t.keyName},customKey:t.customKey,value:t.value}}function Vf(t,e,a,n){"undefined"!==typeof a[n]&&(t[e]=a[n])}function Bf(t,e,a){e&&(e.typeId=Ka[t].id,a.push(Tf(e)))}function Hf(t){var e={},a=[];Vf(e,"id",t,"id"),Vf(e,"name",t,"name"),Vf(e,"registrationNumber",t,"regNum"),Vf(e,"addressText",t,"address"),t.aliases&&(e.ownCompanyAliases=t.aliases.map(Yf)),t.personnel&&(e.companyPersonnels=t.personnel.map(Xf)),t.vats&&(e.companyVatNumbers=t.vats.map(Jf)),t.taxes&&(e.taxes=t.taxes.map(Wf)),t.software&&(e.software=t.software.map(Wf)),t.misc&&(e.companyPropertyValues=t.misc.map(Wf)),t.country&&(e.countryId=t.country.id),t.currency&&(e.currencyId=t.currency.id),t.parent&&(e.parentId=t.parent.id),"undefined"!==typeof t.parentFromDate&&(e.parentFromDate=C.formatDate(t.parentFromDate)),t.corpTax&&(e.taxNumber=t.corpTax.taxNumber||null,Bf("CORPTAX_FILLING_DATE",t.corpTax.fillingDate,a),Bf("CORPTAX_DUE_DATE",t.corpTax.dueDate,a),Bf("CORPTAX_ADVANCED_PAYMENTS_DATE",t.corpTax.advancedPayments,a)),t.audit&&(e.auditorName=t.audit.name,e.auditorEmail=t.audit.email,e.auditorPhone=t.audit.phone,Bf("AUDIT_DDL",t.audit.auditDeadlineDate,a));var n={company:e};return 0!==a.length&&(n.recurringDates=a),n}function Yf(t){return{id:t.id,companyid:t.companyId,refCompanyid:t.refCompanyId,aliasText:t.aname}}function Xf(t){var e={id:t.id,typeKeyid:t.key.id,customKeyValue:t.customKey,name:t.name,email:t.email,phone:t.phone};return t.company&&(e.companyId=t.company.id),e}function Jf(t){var e={vatNumber:t.num,countryId:t.country.id,reportingRecurringDate:{typeId:Ka.VAT_REPORTING_DATE.id,months:t.reportingRecurringDate.months,dayOfMonth:t.reportingRecurringDate.dayOfMonth}};return t.id&&(e.id=t.id,e.reportingRecurringDate.targetId=t.id),t.company&&(e.companyId=t.company.id,e.reportingRecurringDate.companyId=t.company.id),e}function Wf(t){var e={typeid:t.category.id,value:t.value,customKey:t.customKey,keyId:t.key.id};return t.company&&(e.companyId=t.company.id),t.id&&(e.id=t.id),console.log(e),e}function Gf(t,e){var a=Math.floor(10001*Math.random()),n={};return e?n.URL=e+"?rand="+a:n.initials=t?vl.getFirstLetter(t):"",n}function Qf(t){var e=th(t);return e.sender=ah(t),e.receiver=eh(t),e}function Zf(t){var e=th(t);return e.sender={user:nh(t)},e.receiver=eh(t),e}function th(t){return{id:t.id,ddl:new Date(t.expirationDate)}}function eh(t){return{email:t.invitedUserEmail,name:t.invitedCompanyName,regNum:t.invitedCompanyRegistrationNumber,country:{id:t.invitedCompanyCountry?t.invitedCompanyCountry.id:"",code:t.invitedCompanyCountry?t.invitedCompanyCountry.code:"",name:t.invitedCompanyCountry?t.invitedCompanyCountry.name:""},logo:Gf(t.invitedCompanyName)}}function ah(t){return{company:{id:t.companyId,name:t.companyName,regNum:t.companyRegistrationNumber,country:{id:t.companyCountry.id,code:t.companyCountry.code,name:t.companyCountry.name},logo:Gf(t.companyName,t.companyLogoUrl)},user:nh(t)}}function nh(t){return{name:t.inviterName,email:t.inviterEmail}}function oh(t){return{invitedCompanyName:t.name,invitedCompanyCountryId:t.country.id,invitedCompanyRegistrationNumber:t.regNum,collaboratorEmail:t.email,message:t.message}}function sh(t){return{name:t.name,id:t.id,country:t.country,addressText:t.addressText,currency:t.currency,ownCompanyAliases:t.ownCompanyAliases,regNum:t.registrationNumber,parent:t.parent,children:t.children.map(sh),logo:Gf(t.name,t.logoUrl)}}var rh="/Contacts/",ih={getCompanyContacts:function(t){return N.a.get(rh+"Companies/"+t.id).then((function(t){return t.map(Ef)}))},loadHoldingTree:function(t){return N.a.get("/CompaniesTree/"+t.id).then((function(t){return t.map(sh)}))},getCompanySentInvitations:function(t){return N.a.get(rh+"Companies/"+t.id+"/PendingSentInvitations").then((function(t){return t.map(Zf)}))},invite:function(t,e){var a=oh(e);return N.a.post(rh+"Companies/"+t.id,a).then(Zf)},inviteMyCompany:function(t,e){return N.a.post(rh+"Companies/"+t.id+"/OwnCompanies",e)},cancel:function(t){return N.a.delete(rh+"Invitations/"+t.id)},getUserReceivedInvitations:function(){return N.a.get(rh+"PendingReceivedInvitations").then((function(t){return t.map(Qf)}))},accept:function(t,e){return N.a.post(rh+"Invitations/"+e.id+"/Companies/"+t.id+"/Acceptance")},reject:function(t){return N.a.post(rh+"Invitations/"+t.id+"/Rejection")}};function ch(t,e){return function(a){return t(e,a),a}}var lh=a("07a7"),uh=a.n(lh),dh={invitations:[]},mh={receivedInvitations:function(t){return t.invitations}},ph={setUserReceivedInvitations:function(t,e){t.invitations=e},removeInvitation:function(t,e){var a=uh()(t.invitations,(function(t){return t.id===e.id}));t.invitations.splice(a,1)},clearInvitations:function(t){t.invitations=[]}},fh={loadReceivedInvitations:function(t){var e=t.commit;return ih.getUserReceivedInvitations().then(ch(e,"setUserReceivedInvitations"))},acceptContactInvitation:function(t,e){var a=t.commit,n=e.company,o=e.invitation;return ih.accept(n,o).then(ch(a,"removeInvitation"))},rejectContactInvitation:function(t,e){var a=t.commit;return ih.reject(e).then(ch(a,"removeInvitation"))}},hh={state:dh,getters:mh,mutations:ph,actions:fh},vh=Object(F["a"])(Object(F["a"])({},Nf.state),hh.state),gh=Object(F["a"])(Object(F["a"])({},Nf.getters),hh.getters),yh=Object(F["a"])(Object(F["a"])({},Nf.mutations),hh.mutations),bh=Object(F["a"])(Object(F["a"])({},Nf.actions),hh.actions),Ch={state:vh,getters:gh,mutations:yh,actions:bh};function _h(t,e){return{name:t.userFullName||"",roleId:t.roleId,role:{id:t.roleId,label:t.roleLabel},company:{id:t.companyId},email:t.userEmail,isPending:t.isPending,isInherited:t.isInherited,isCurrent:e&&t.userEmail===e.email}}function Dh(t){var e={roleid:t.roleId,userEmail:t.email};return t.isInherited&&(e.isInherited=t.isInherited),t.name&&(e.userFullName=t.name),t.company&&(e.companyId=t.company.id),e}var $h="/Collaborators/",xh={getCompanyCollaborators:function(t,e){return N.a.get($h+"Companies/"+t.id).then((function(t){return t.map((function(t){return _h(t,e)}))}))},create:function(t,e,a){e.company=t;var n=Dh(e);return N.a.post($h,n).then((function(t){return _h(t,a)}))},update:function(t){var e=Dh(t);return N.a.put($h,e)},remove:function(t){return N.a.delete($h+"Companies/"+t.company.id+"?userEmail="+encodeURIComponent(t.email))}},wh={collaborators:[]},Sh=Object(F["a"])({},wh),Rh={collaborators:function(t){return t.collaborators}},Ih={setCollaborators:function(t,e){t.collaborators=e},addCollaborator:function(t,e){t.collaborators.push(e)},updateCollaborator:function(t,e){var a=uh()(t.collaborators,(function(t){return t.id===e.id}));t.collaborators[a]=e},removeCollaborator:function(t,e){var a=t.collaborators.indexOf(e);t.collaborators.splice(a,1)}},Ph={resetCollaborators:function(t){var e=t.state;Object.assign(e,wh)},loadSCCollaborators:function(t){var e=t.commit,a=t.getters;return xh.getCompanyCollaborators(a.selectedCompany,a.user).then(ch(e,"setCollaborators"))},addSCCollaborator:function(t,e){var a=t.commit,n=t.getters;return xh.create(n.selectedCompany,e,n.user).then(ch(a,"addCollaborator"))},updateCollaborator:function(t,e){var a=t.commit;return xh.update(e).then((function(){return a("updateCollaborator",e),!0}))},removeCollaborator:function(t,e){var a=t.commit;return xh.remove(e).then((function(){a("removeCollaborator",e)}))}},kh={state:Sh,mutations:Ih,actions:Ph,getters:Rh},Fh="/RecurringDates/",Mh={create:function(t){var e=Tf(t);return N.a.post(Fh,e)},get:function(t){return N.a.get(Fh+t).then(Af)},bulkUpdate:function(t){var e=t.map((function(t){N.a.patch(Fh+t.id,t)}));return Promise.all(e)},remove:function(t){return N.a.delete(Fh+t)}},Nh="/Companies/",Ah={getMyCompanies:function(){return N.a.get(Nh).then((function(t){return t.map(jf)}))},create:function(t){var e={name:t.name,addressText:t.address,countryId:t.country.id,parentFromDate:t.parentFromDate,currencyId:t.currency.id};return t.regNum&&(e.registrationNumber=t.regNum),t.parent&&(e.parentId=t.parent.id),N.a.post(Nh,e).then(Uf)},getCompany:function(t){return N.a.get(Nh+t.id).then(Uf)},update:function(t,e){var a=Hf(e),n=[];return a.recurringDates&&n.push(Mh.bulkUpdate(a.recurringDates)),Promise.all(n).then((function(){return N.a.patch(Nh+t.id,a.company)})).then((function(t){return console.log("Kakvo vrusta server-a?",t),Uf(t)}))},delete:function(t){return N.a.delete(Nh+t.id)},uploadLogo:function(t,e){return N.a.post(Nh+t.id+"/Logo",e)},deleteLogo:function(t){return N.a.delete(Nh+t.id+"/Logo")}},Th="/Aliases/",Oh={create:function(t,e,a){var n={companyId:t.id,refCompanyId:e.id,aliasText:a};return N.a.post(Th,n).then(Lf)},update:function(t,e){var a={aliasText:e};return N.a.patch(Th+t.id,a)},delete:function(t){return N.a.delete(Th+t.id)}},Eh="/Personnel/",jh={create:function(t,e){e.company=t;var a=Xf(e);return N.a.post(Eh,a).then(Kf)},update:function(t){var e=Xf(t);return N.a.patch(Eh+e.id,e)},delete:function(t){return N.a.delete(Eh+t.id)}},Uh="/Vats/",Lh={create:function(t,e){e.company=t;var a=Jf(e);return N.a.post(Uh,a).then(qf)},update:function(t){var e=Jf(t);return N.a.patch(Uh+e.id,e)},delete:function(t){return N.a.delete(Uh+t.id)}},qh="/CompanyPropertyValues/",Kh={create:function(t,e){e.company=t;var a=Wf(e);return N.a.post(qh,a).then(zf)},update:function(t){var e=Wf(t);return N.a.patch(qh+e.id,e)},delete:function(t){return N.a.delete(qh+t.id)}},zh={myCompanies:[],selectedCompany:null},Vh=Object(F["a"])({},zh),Bh={};Object.keys(Vh).reduce((function(t,e){return t[e]=function(t){return t[e]},t}),Bh);var Hh={setMyCompanies:function(t,e){t.myCompanies=e},setCompanyNotificationsCount:function(t,e){for(var a=t.myCompanies.length,n=0;n<a;n++){for(var o=e.length,s=0;s<o;s++){var r=t.myCompanies[n];if(r.id===e[s].id){r.notificationsCount=+e[s].count,e.splice(s,1),o--;break}}if(0===o)break}},addCompany:function(t,e){t.myCompanies.push(e)},setSelectedCompany:function(t,e){if(t.selectedCompany=e,t.myCompanies){var a=uh()(t.myCompanies,(function(t){return t.id===e.id}));a>-1&&(t.myCompanies[a]=e)}},deleteSelCompany:function(t){if(t.myCompanies){var e=t.myCompanies.indexOf(t.selectedCompany);e>-1&&t.myCompanies.splice(e,1)}t.selectedCompany=null},setSCLogo:function(t,e){console.log("setSCLogo: ",e),t.selectedCompany.logo.URL=e},addSCAlias:function(t,e){t.selectedCompany.aliases.push(e)},updateSCAlias:function(t,e){var a=e.alias,n=e.updatedAname,o=t.selectedCompany.aliases,s=o.indexOf(a);o[s].aname=n},deleteSCAlias:function(t,e){var a=t.selectedCompany.aliases,n=a.indexOf(e);a.splice(n,1)},addSCVat:function(t,e){t.selectedCompany.vats.push(e)},updateSCVat:function(t,e){var a=t.selectedCompany.vats,n=uh()(a,(function(t){return t.id===e.id}));a[n]=e},deleteSCVat:function(t,e){var a=t.selectedCompany.vats,n=a.indexOf(e);a.splice(n,1)},addSCPersonnel:function(t,e){t.selectedCompany.personnel.push(e)},updateSCPersonnel:function(t,e){var a=t.selectedCompany.personnel,n=uh()(a,(function(t){return t.id===e.id}));a[n]=e},deleteSCPersonnel:function(t,e){var a=t.selectedCompany.personnel,n=a.indexOf(e);a.splice(n,1)},addSCCPPair:function(t,e){var a=Yh(e);t.selectedCompany[a].push(e)},updateSCCPPair:function(t,e){var a=Yh(e),n=t.selectedCompany[a],o=uh()(n,(function(t){return t.id===e.id}));n[o]=e},deleteSCCPPair:function(t,e){var a=Yh(e),n=t.selectedCompany[a],o=n.indexOf(e);n.splice(o,1)}};function Yh(t){var e=Object.keys(La).find((function(e){return La[e]===t.category.id}));return"tax"===e&&(e="taxes"),e}function Xh(t,e){return function(a){return t(e,a),a}}var Jh={resetCompanies:function(t){var e=t.state;Object.assign(e,zh)},loadMyCompanies:function(t){var e=t.commit;t.state;return Ah.getMyCompanies().then(Xh(e,"setMyCompanies"))},createCompany:function(t,e){var a=t.commit;t.state;return Ah.create(e).then(Xh(a,"addCompany")).then((function(t){return null!==e.logoData?Ah.uploadLogo(t,e.logoData).then(Xh(a,"setSCLogo")).then((function(){return t})):t}))},loadSelCompany:function(t,e){var a=t.commit,n=t.state;return n.selectedCompany&&n.selectedCompany.id===e?Promise.resolve(n.selectedCompany):Ah.getCompany({id:e}).then(Xh(a,"setSelectedCompany"))},reloadSelCompany:function(t,e){var a=t.commit;t.state;return Ah.getCompany({id:e}).then(Xh(a,"setSelectedCompany"))},updateSelCompany:function(t,e){var a=t.commit,n=t.state,o=n.selectedCompany.corpTax,s=Zt()({},e),r=[];if(o&&s.corpTax){if(!o.fillingDate&&s.corpTax.fillingDate){var i=s.corpTax.fillingDate;delete s.corpTax.fillingDate,i.companyId=n.selectedCompany.id,i.typeId=Ka.CORPTAX_FILLING_DATE.id,i.holidayHandlingTypeId=0,r.push(Mh.create(i))}if(!o.dueDate&&s.corpTax.dueDate){var c=s.corpTax.dueDate;delete s.corpTax.dueDate,c.companyId=n.selectedCompany.id,c.typeId=Ka.CORPTAX_DUE_DATE.id,c.holidayHandlingTypeId=0,r.push(Mh.create(c))}if(!o.advancedPayments&&s.corpTax.advancedPayments){var l=s.corpTax.advancedPayments;delete s.corpTax.advancedPayments,l.companyId=n.selectedCompany.id,l.typeId=Ka.CORPTAX_ADVANCED_PAYMENTS_DATE.id,l.holidayHandlingTypeId=0,r.push(Mh.create(l))}}return Promise.all(r).then((function(){return Ah.update(n.selectedCompany,s)})).then((function(t){return a("setSelectedCompany",t),console.log("STORE company: ",t),t}))},deleteSelCompany:function(t){var e=t.commit,a=t.state;return Ah.delete(a.selectedCompany).then((function(){e("deleteSelCompany")}))},deleteSCCorpTax:function(t){var e=t.commit,a=t.state,n=a.selectedCompany.corpTax,o=[];return n.fillingDate&&n.fillingDate.id&&o.push(Mh.remove(n.fillingDate.id)),n.dueDate&&n.dueDate.id&&o.push(Mh.remove(n.dueDate.id)),n.advancedPayments&&n.advancedPayments.id&&o.push(Mh.remove(n.advancedPayments.id)),Promise.all(o).then((function(){var t={corpTax:{taxNumber:null}};return Ah.update(a.selectedCompany,t)})).then((function(t){return e("setSelectedCompany",t),t}))},uploadSCLogo:function(t,e){var a=t.commit,n=t.state;return Ah.uploadLogo(n.selectedCompany,e).then(Xh(a,"setSCLogo"))},deleteSCLogo:function(t){var e=t.commit,a=t.state;return Ah.deleteLogo(a.selectedCompany).then(Xh(e,"setSCLogo"))},createSCAlias:function(t,e){var a=t.commit,n=t.state;return Oh.create(n.selectedCompany,n.selectedCompany,e).then(Xh(a,"addSCAlias"))},updateSCAlias:function(t,e){var a=t.commit,n=e.alias,o=e.updatedAname;return Oh.update(n,o).then((function(){return a("updateSCAlias",{alias:n,updatedAname:o}),!0}))},deleteSCAlias:function(t,e){var a=t.commit;return Oh.delete(e).then((function(){a("deleteSCAlias",e)}))}},Wh=[{name:"Vat",service:Lh},{name:"Personnel",service:jh},{name:"CPPair",service:Kh}];Wh.reduce((function(t,e){t["createSC"+e.name]=function(t,a){var n=t.commit,o=t.state;return e.service.create(o.selectedCompany,a).then(Xh(n,"addSC"+e.name))};var a="updateSC"+e.name;t[a]=function(t,n){var o=t.commit;return e.service.update(n).then((function(){return o(a,n),!0}))};var n="deleteSC"+e.name;return t[n]=function(t,a){var o=t.commit;return e.service.delete(a).then((function(){o(n,a)}))},t}),Jh);var Gh={state:Vh,getters:Bh,mutations:Hh,actions:Jh};function Qh(t,e){return{companyId:t.id,refCompanyId:e.contact,fromDate:e.fromDate,toDate:e.toDate,description:e.description}}function Zh(t){return{detailId:t.detailId,typeId:t.typeId,typeName:t.typeName,fromDate:new Date(t.fromDate),toDate:null!==t.toDate?new Date(t.toDate):null,name:t.name,country:t.country,description:t.description,registrationNumber:t.registrationNumber,companyAliases:t.companyAliases.join(", "),logo:Gf(t.name,t.logoUrl)}}function tv(t){var e=null!==t.startDate?"startDate="+C.formatDate(t.startDate)+"&":"";return e+=null!==t.endDate?"endDate="+C.formatDate(t.endDate)+"&":"",e+=null!==t.startIndex?"startIndex="+t.startIndex+"&":"",e+=null!==t.endIndex?"endIndex="+t.endIndex+"&":"",e+=null!==t.sort?"sort="+t.sort+"&":"",e+=null!==t.isSortDescending?"isSortDescending="+t.isSortDescending+"&":"",""!==e?(e=e.slice(0,-1),"?"+e):""}function ev(t){return{fromDate:t.fromDate,toDate:t.toDate?t.toDate:null,description:t.description}}var av="/RelatedParties",nv={getCompanyRelatedParties:function(t,e){return N.a.get(av+"/Companies/"+t.id+tv(e)).then((function(t){return t.relatedParties=t.relatedParties.map(Zh),t}))},addRelatedParty:function(t,e){var a=Qh(t,e);return N.a.post(av,a).then((function(t){return Zh(t)}))},deleteRelatedParty:function(t){return N.a.delete(av+"/"+t)},editRelatedParty:function(t){var e=ev(t);return N.a.patch(av+"/Details/"+t.id,e)}},ov={contacts:[],holdingTree:[],companyRelatedParties:[],companySentInvitations:[]},sv=Object(F["a"])({},ov),rv={},iv={addInvitation:function(t,e){t.companySentInvitations.push(e)},removeInvitation:function(t,e){var a=t.companySentInvitations.indexOf(e);a>-1&&t.companySentInvitations.splice(a,1)},addAlias:function(t,e){var a=t.contacts.find((function(t){return t.id===e.refCompany.id}));a.aliases.push(e.alias)},removeAlias:function(t,e){var a=t.contacts.find((function(t){return t.id===e.refCompanyid})),n=a.aliases.map((function(t){return t.id})).indexOf(e.id);n>-1&&a.aliases.splice(n,1)}};Object.keys(sv).forEach((function(t){rv[t]=function(e){return e[t]},iv["set"+vl.capitalizeFirstLetter(t)]=function(e,a){e[t]=a}}));var cv={resetContacts:function(t){var e=t.state;Object.assign(e,ov)},loadSCContacts:function(t){var e=t.commit,a=t.getters;return ih.getCompanyContacts(a.selectedCompany).then(ch(e,"setContacts"))},loadSCSentInvitations:function(t){var e=t.commit,a=t.getters;return ih.getCompanySentInvitations(a.selectedCompany).then(ch(e,"setCompanySentInvitations"))},inviteContact:function(t,e){var a=t.commit,n=t.getters;return ih.invite(n.selectedCompany,e).then(ch(a,"addInvitation"))},inviteMyCompanyContacts:function(t,e){t.commit;var a=t.getters;return ih.inviteMyCompany(a.selectedCompany,e)},cancelInvitation:function(t,e){var a=t.commit;return ih.cancel(e).then((function(){a("removeInvitation",e)}))},loadSCRelatedParties:function(t,e){var a=t.commit,n=t.getters;return nv.getCompanyRelatedParties(n.selectedCompany,e).then(ch(a,"setCompanyRelatedParties"))},addRelatedParty:function(t,e){t.commit;var a=t.getters;return nv.addRelatedParty(a.selectedCompany,e)},editRelatedParty:function(t,e){t.commit;return nv.editRelatedParty(e)},deleteRelatedParty:function(t,e){t.commit;return nv.deleteRelatedParty(e)},loadHoldingTree:function(t){var e=t.commit,a=t.getters;return ih.loadHoldingTree(a.selectedCompany).then(ch(e,"setHoldingTree"))},createAlias:function(t,e){var a=t.commit,n=t.state,o=e.refCompany,s=e.aname;return Oh.create(n.selectedCompany,o,s).then((function(t){return a("addAlias",{refCompany:o,alias:t}),t}))},deleteAlias:function(t,e){var a=t.commit;return Oh.delete(e).then((function(){return a("removeAlias",e),!0}))}},lv={state:sv,mutations:iv,actions:cv,getters:rv};function uv(t){return{id:t.id,statementType:{id:t.statementTypeId},fromDate:t.startDate?new Date(t.startDate):null,toDate:new Date(t.endDate)}}function dv(t){var e={recordsCount:{}};return e.recognizedCompaniesSets=t.validTransactionsSummary.map(pv),e.recordsCount.validRecognizedCompany=mv(e.recognizedCompaniesSets),e.unrecognizedCompaniesSets=t.unknownRefCompanyTransactionsSummary.map(fv),e.recordsCount.validUnrecognizedCompany=mv(e.unrecognizedCompaniesSets),e.recordsCount.invalid=t.invalidTransactionsCount?t.invalidTransactionsCount:0,e.recordsCount.outOfScope=t.outOfScopeTransactionsCount?t.outOfScopeTransactionsCount:0,e.recordsCount.removed=t.userCanceledTransactionsCount?t.userCanceledTransactionsCount:0,e}function mv(t){return t.reduce((function(t,e){return t+e.payables.count+e.receivables.count}),0)}function pv(t){return Object(F["a"])(Object(F["a"])({},fv(t)),{},{currency:{id:t.docCurrencyId,code:t.docCurrencyISOCode}})}function fv(t){return{company:{id:t.companyId,name:t.companyName},receivables:{amount:+t.receivablesAmount,count:+t.receivablesCount},payables:{amount:+t.payablesAmount,count:+t.payablesCount}}}function hv(t){return Object(F["a"])(Object(F["a"])({},vv(t.errors)),{},{line:t.fileRowIndex,account:t.accountText,ref:t.referenceText,isReceivable:t.isReceivable,payer:t.payerName,receiver:t.receiverName,docDate:new Date(t.documentDate),postingDate:new Date(t.postingDate),dueDate:new Date(t.dueDate),currency:{id:t.currencyId,code:t.currencyCode},docAmount:t.documentAmount,desc:t.description})}function vv(t){var e=0,a=t.map((function(t){return e=t.level>e?t.level:e,{level:{id:t.level,label:t.levelName},type:{id:t.typeId,label:t.typeName},desc:t.description}})).sort((function(t,e){return t.level.id-e.level.id}));return{highestErrorLevel:e,errors:a}}function gv(t){var e={companyid:t.company.id,statementTypeId:t.statementTypeId,startDate:t.fromDate?C.prepareForUTCString(t.fromDate):null,endDate:t.toDate?C.prepareForUTCString(t.toDate):null},a=new FormData;return a.append("data",JSON.stringify(e)),a.append("file",t.file),a}var yv="/Imports/",bv={importExcel:function(t,e){e.company=t;var a=gv(e);return N.a.post(yv+"ExcelTransactions",a).then(uv)},saveValidRecords:function(t){return N.a.post(yv+t.id+"/ValidRecords")},removeValidSet:function(t,e){return N.a.delete(yv+t.id+"/RefCompanies/"+e.company.id+"/Currencies/"+e.currency.id)},removeValidRecord:function(t,e){return N.a.delete(yv+t.id+"/RowIndex/"+e.line)},getSummary:function(t){return N.a.get(yv+t.id+"/Records/Summary").then(dv)},getRecognizedCompanyRecords:function(t,e){return N.a.get(yv+t.id+"/ValidRecords/RefCompanies/"+e.company.id+"/Currencies/"+e.currency.id).then((function(t){return t.map(hv)}))},getUnrecognizedCompanyRecords:function(t,e){return N.a.get(yv+t.id+"/ValidRecords/UnknownRefCompanies/"+e.company.name).then((function(t){return t.map(hv)}))},getInvalidRecords:function(t,e){return N.a.get(yv+t.id+"/InvalidRecords").then((function(t){return t.map(hv)}))},getOutOfScopeRecords:function(t,e){return N.a.get(yv+t.id+"/OutOfScopeRecords").then((function(t){return t.map(hv)}))}},Cv={importReceipt:null,summary:null,rcSetsRecords:{},ucSetsRecords:{},invalidRecords:null,outOfScopeRecords:null},_v=Object(F["a"])({},Cv),Dv={importReceipt:function(t){return t.importReceipt},importSummary:function(t){return t.summary},recognizedCompaniesSets:function(t){if(t.summary)return t.summary.recognizedCompaniesSets},recognizedCompanyRecords:function(t){return function(e){if(t.rcSetsRecords&&e)return t.rcSetsRecords[e.company.name]}},unrecognizedCompaniesSets:function(t){if(t.summary)return t.summary.unrecognizedCompaniesSets},unrecognizedCompanyRecords:function(t){return function(e){if(t.ucSetsRecords&&e)return t.ucSetsRecords[e.company.name]}},recordsCount:function(t){if(t.summary)return t.summary.recordsCount},invalidRecords:function(t){return t.invalidRecords},outOfScopeRecords:function(t){return t.outOfScopeRecords},statementType:function(t){if(t.importReceipt)return Ua[+t.importReceipt.statementType.id-1]},statementTypeContext:function(t){if(t.importReceipt)return Ua[+t.importReceipt.statementType.id-1].context}},$v={setImportReceipt:function(t,e){t.importReceipt=e},setSummary:function(t,e){t.summary=e},setUCRecords:function(t,e){var a=t.summary.unrecognizedCompaniesSets.find((function(t){return t.company.name===e.set.company.name})),n=Object(F["a"])({},t.ucSetsRecords);n[a.company.name]=e.records,t.ucSetsRecords=n},setRCRecords:function(t,e){var a=t.summary.recognizedCompaniesSets.find((function(t){return t.company.name===e.set.company.name})),n=Object(F["a"])({},t.rcSetsRecords);n[a.company.name]=e.records,t.rcSetsRecords=n},setInvalidRecords:function(t,e){t.invalidRecords=e},setOutOfScopeRecords:function(t,e){t.outOfScopeRecords=e},clearImport:function(t){Object.assign(t,Cv)}};function xv(t,e,a,n,o){var s=t.commit,r=t.getters,i=r[e](o);if(i)return Promise.resolve(i);var c=r.importReceipt;return bv[a](c,o).then((function(t){s(n,{set:o,records:t})}))}function wv(t,e,a,n){var o=t.commit,s=t.getters,r=s.importReceipt;return bv[a](r).then(ch(o,n))}var Sv={resetImports:function(t){var e=t.state;Object.assign(e,Cv)},uploadExcel:function(t,e){var a=t.commit,n=t.getters;return bv.importExcel(n.selectedCompany,e).then(ch(a,"setImportReceipt"))},saveValid:function(t){t.commit;var e=t.getters;return bv.saveValidRecords(e.importReceipt)},removeValidSet:function(t,e){t.commit;var a=t.getters;return bv.removeValidSet(a.importReceipt,e)},removeValidRecord:function(t,e){t.commit;var a=t.getters;return bv.removeValidRecord(a.importReceipt,e)},loadSummary:function(t){var e=t.commit,a=t.getters,n=a.importReceipt;return n?bv.getSummary(n).then(ch(e,"setSummary")):Promise.resolve()},loadRecognizedCompanyRecords:function(t,e){return xv(t,"recognizedCompanyRecords","getRecognizedCompanyRecords","setRCRecords",e)},loadUnrecognizedCompanyRecords:function(t,e){return xv(t,"unrecognizedCompanyRecords","getUnrecognizedCompanyRecords","setUCRecords",e)},loadInvalidRecords:function(t){return wv(t,"invalidRecords","getInvalidRecords","setInvalidRecords")},loadOutOfScopeRecords:function(t){return wv(t,"outOfScopeRecords","getOutOfScopeRecords","setOutOfScopeRecords")}},Rv={state:_v,mutations:$v,actions:Sv,getters:Dv};function Iv(t){return{id:t.id,accType:t.accountText,setId:t.setId,ref:t.referenceText,viewDocDate:t.documentDate?new Date(t.documentDate):null,viewPostingDate:t.postingDate?new Date(t.postingDate):null,fxRate:t.currentReportFxRate,docCurrency:t.currencyCode,docAmountStr:t.documentAmount,amountInRepCurrencyStr:t.amountInReportCurrency,description:t.description,isOwn:t.isOwn}}function Pv(t,e){return{companyId:e.id,statementTypeId:t.statementType.id,refCompanyId:t.selectedContact.id,startDate:t.fromDate?C.formatDate(t.fromDate):"1900-01-01",endDate:t.toDate?C.formatDate(t.toDate):null}}function kv(t,e){return{companyId:e.id,statementTypeId:t.statementType.id,startDate:t.fromDate?C.formatDate(t.fromDate):null,endDate:t.toDate?C.formatDate(t.toDate):null}}var Fv={getCurrentRecords:function(t,e){var a=Pv(t,e);return N.a.get("/ReportTransactions/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId+"/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/"+a.endDate+"?payables=true&receivables=true&matched=true&unmatched=true").then((function(t){return t.map(Iv)}))},getRecordCompanyList:function(t,e){var a=kv(t,e);return N.a.get("/ReportingOppositeCompanies/"+a.companyId+"/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/"+a.endDate).then((function(t){return t.map(Ef)}))}},Mv={currentRecords:[],recordCompanyList:[]},Nv=Object(F["a"])({},Mv),Av={getCurrentRecords:function(t){return t.currentRecords},getRecordCompanyList:function(t){return t.recordCompanyList}},Tv={setCurrentRecords:function(t,e){t.currentRecords=e},setRecordCompanyList:function(t,e){t.recordCompanyList=e}};function Ov(t,e){return function(a){return t(e,a),a}}var Ev={resetRecords:function(t){var e=t.state;Object.assign(e,Mv)},loadCurrentRecords:function(t,e){var a=t.commit,n=t.state;return Fv.getCurrentRecords(e,n.selectedCompany).then(Ov(a,"setCurrentRecords"))},loadRecordCompanyList:function(t,e){var a=t.commit,n=t.state;return Fv.getRecordCompanyList(e,n.selectedCompany).then(Ov(a,"setRecordCompanyList"))}},jv={state:Nv,getters:Av,mutations:Tv,actions:Ev};function Uv(t){var e=null===t.manualRate?null:{units:t.manualRate.units,rate:t.manualRate.value},a=null===t.autoRate?null:{units:t.autoRate.units,rate:t.autoRate.value};return{id:null===t.manualRate?null:t.manualRate.id,rateType:t.isAverage?ja.AVERAGE:ja.DAILY,date:new Date(t.date),manual:e,auto:a,toCurrency:{id:t.refCurrencyId,code:t.refCurrencyIsoCode}}}function Lv(t){return t.id}function qv(t){return{id:t.id,value:t.manual.rate}}function Kv(t,e){return{companyId:e.id,refCurrencyId:t.currencyId,typeId:t.recordType,date:t.recordDate,value:t.recordRate,units:1}}function zv(t,e){return{companyId:e.id,periodMonth:C.formatDate(t.data),parameter:"?get"+(t.average?"Average":"Daily")+"=true"}}function Vv(t){return{sourceID:t.usedSourceFxRateSourceId,oldSourceID:t.usedSourceFxRateSourceId,date:t.usedSourceFromDate?new Date(t.usedSourceFromDate):null,usedSourceId:t.usedSourceId,usedSourceFxRateSourceId:t.usedSourceFxRateSourceId,usedSourceFromDate:t.usedSourceFromDate,currency:{id:t.currency.id,isoCode:t.currency.isoCode,name:t.currency.name},sources:t.sources}}function Bv(t,e){return{companyId:e.id,refCurrencyId:t.currency.id,dateFrom:t.date.toISOString(),fxRateSourceId:t.sourceID}}function Hv(t){return t.usedSourceId}function Yv(t){return{id:t.usedSourceId,dateFrom:t.date.toISOString(),fxRateSourceId:t.sourceID}}function Xv(t){var e="";return t.forEach((function(t){null!==t.usedSourceId&&(e+=(0===e.length?"?":"&")+"ids="+t.usedSourceId)})),e}var Jv="/ManualFxRates/",Wv="/AutoFxRates/",Gv="/FxRates/",Qv={getCurrentFxRates:function(t,e){var a=zv(t,e);return N.a.get(Gv+"Companies/"+a.companyId+"/periodMonth/"+a.periodMonth+a.parameter).then((function(t){return t.map(Uv)}))},removeFxRate:function(t){return N.a.delete(Jv+Lv(t))},addFxRate:function(t,e){var a=Kv(t,e);return N.a.post(Jv,a).catch((function(t){return Promise.reject(t)}))},editFxRate:function(t){var e=qv(t);return N.a.patch(Jv+e.id,e).catch((function(t){return Promise.reject(t)}))},getCSAutoFxRates:function(t){return N.a.get(Wv+"CompanyCurrencies/"+t.id).then((function(t){return t.map(Vv)}))},activateAutoFxRate:function(t,e){var a=Bv(t,e);return N.a.post(Wv+"UsedSources/",a)},deactivateAutoFxRate:function(t){var e=Hv(t);return N.a.delete(Wv+"UsedSources/"+e)},switchAutoFxRate:function(t){var e=Yv(t);return N.a.patch(Wv+"UsedSources/"+e.id,e)},massDeactivateAutoFxRate:function(t){var e=Xv(t);return N.a.delete(Wv+"UsedSources"+e)}},Zv={currentFxRates:[],autoFxRates:[]},tg=Object(F["a"])({},Zv),eg={getCurrentFxRates:function(t){return t.currentFxRates},getAutoFxRates:function(t){return t.autoFxRates}},ag={setCurrentFxRates:function(t,e){t.currentFxRates=e},setAutoFxRates:function(t,e){t.autoFxRates=e}};function ng(t,e){return function(a){return t(e,a),a}}var og={resetFxRates:function(t){var e=t.state;Object.assign(e,Zv)},loadCurrentFxRates:function(t,e){var a=t.commit,n=t.state;return Qv.getCurrentFxRates(e,n.selectedCompany).then(ng(a,"setCurrentFxRates"))},removeFxRate:function(t,e){t.commit,t.getters;return Qv.removeFxRate(e)},addFxRate:function(t,e){t.commit;var a=t.state;return Qv.addFxRate(e,a.selectedCompany)},editFxRate:function(t,e){t.commit,t.state;return Qv.editFxRate(e)},setFxRate:function(t,e){t.commit;var a=t.state,n=e.rate,o=e.record.fxRate,s={};return o.value&&o.manualId?(s.id=o.manualId,s.manual={rate:n},Qv.editFxRate(s)):(s={currencyId:e.record.docCurrencyId,recordType:o.typeId,recordDate:o.date,recordRate:n},Qv.addFxRate(s,a.selectedCompany))},loadCSAutoFxRates:function(t){var e=t.commit,a=t.state;return Qv.getCSAutoFxRates(a.selectedCompany).then(ng(e,"setAutoFxRates"))},activateAutoFxRate:function(t,e){t.commit;var a=t.state;return Qv.activateAutoFxRate(e,a.selectedCompany)},deactivateAutoFxRate:function(t,e){t.commit,t.state;return Qv.deactivateAutoFxRate(e)},switchAutoFxRate:function(t,e){t.commit,t.state;return Qv.switchAutoFxRate(e)},massDeactivateAutoFxRate:function(t,e){t.commit,t.state;return Qv.massDeactivateAutoFxRate(e)}},sg={state:tg,getters:eg,mutations:ag,actions:og};function rg(t,e){var a=[];return t.forEach((function(t){a.push({companyId:e.id,refCompanyId:t.company.id,assignedUserEmail:t.assignee?t.assignee.email:"",statementTypeId:t.statement.id,startDate:t.fromDate,endDate:t.toDate,isDisclosed:t.disclosed,deadlineDate:t.ddl})})),a}function ig(t,e){return{companyId:e.id}}function cg(t,e){return{id:t,companyId:e.id}}function lg(t,e,a){return{companyId:e.id,refCompanyId:t.selectedReconciliation.refCompany.id,statementTypeId:t.selectedReconciliation.statement.id,startDate:t.selectedReconciliation.startDate?C.formatDate(t.selectedReconciliation.startDate):"1900-01-01",endDate:t.selectedReconciliation.endDate?C.formatDate(t.selectedReconciliation.endDate):null,queryString:a}}function ug(t,e){var a="?unmatched=true";return t.areOUT&&(a+="&payables=true"),t.areIN&&(a+="&receivables=true"),lg(t,e,a)}function dg(t,e){var a="?matched=true";return a+=t.areIN?"&receivables=true":"&payables=true",lg(t,e,a)}function mg(t,e){var a="?";return t.areOUT&&(a+="payables=true"),t.areIN&&("?"!==a&&(a+="&"),a+="receivables=true"),lg(t,e,a)}function pg(t,e){var a=[];return t.selectedExceptions.forEach((function(t){a.push(t.id)})),{companyId:e.id,statementTypeId:t.selectedReconciliation.statement.id,payload:{ids:a},queryString:1===t.selectedReconciliation.statement.id?"?endDate="+C.formatDate(t.selectedReconciliation.endDate):""}}function fg(t){return{id:t.id,accType:t.accountText,ref:t.referenceText,viewDocDate:new Date(t.documentDate),viewPostingDate:new Date(t.dueDate),docCurrency:t.currencyCode,docCurrencyId:t.currencyId,docAmountStr:t.documentAmount,fxRate:{value:t.currentReportFxRate,date:t.currentReportFxRateDate,typeId:t.currentReportFxRateTypeId,manualId:t.currentReportManualFxRateId},amountInRepCurrency:Number(t.amountInReportCurrency),amountInRepCurrencyStr:t.amountInReportCurrency,description:t.description,isOwn:t.isOwn}}function hg(t){var e=[];return t.forEach((function(t){e[t.setId]?e[t.setId].transactions.push(fg(t)):e[t.setId]={id:t.setId,matchingType:{id:t.statusId,label:t.statusDescription},transactions:[fg(t)]}})),e.filter((function(){return!0}))}function vg(t){return{id:t.id,refCompany:{id:t.refCompanyId,name:t.refCompanyName,logo:Gf(t.refCompanyName,t.oppositeCompanyProfileImageUrl),country:{code:t.oppositeCompanyCountryCode}},statusId:t.statusId,status:{id:t.statusId,description:t.statusDescription},context:Ua.filter((function(e){return e.id===t.statusId}))[0].context,refCompanyStatus:{id:t.refCompanyStatusId,description:t.refCompanyStatusDescription},isInitiatorCompany:t.isInitiatorCompany,startDate:new Date(t.startDate),endDate:new Date(t.endDate),dld:new Date(t.deadlineDate),statement:Ua.filter((function(e){return e.id===t.statementTypeId}))[0],isDisclosed:t.isDisclosed,matchedAmount:t.matchedAmount,matchedCount:t.matchedCount,unMatchedAmount:t.unMatchedAmount,unMatchedCount:t.unMatchedCount}}function gg(t){return{in:{exceptions:{me:{amount:t.receivables.unMatched.amount,count:t.receivables.unMatched.transactionsCount},they:{amount:t.receivables.unMatched.refAmount,count:t.receivables.unMatched.refTransactionsCount}},matched:{me:{amount:t.receivables.matched.amount,count:t.receivables.matched.transactionsCount},they:{amount:t.receivables.matched.refAmount,count:t.receivables.matched.refTransactionsCount}}},out:{exceptions:{me:{amount:t.payables.unMatched.amount,count:t.payables.unMatched.transactionsCount},they:{amount:t.payables.unMatched.refAmount,count:t.payables.unMatched.refTransactionsCount}},matched:{me:{amount:t.payables.matched.amount,count:t.payables.matched.transactionsCount},they:{amount:t.payables.matched.refAmount,count:t.payables.matched.refTransactionsCount}}}}}function yg(t){var e=[];return t.messages&&0!==t.messages.length&&t.messages.forEach((function(t){e.push({id:t.id,date:new Date(t.createdOn),from:{fullName:t.user.fullName,profileImageUrl:t.user.profileImageUrl,email:t.user.email},body:t.body,isRead:t.isRead})})),{thread:{id:t.id,name:t.title},messages:e}}function bg(t){var e="";return t.forEach((function(t){e+=(0===e.length?"?":"&")+"ids="+t.id})),e}function Cg(t,e){var a={data:{statusId:t.statusId},companyId:e.id,id:t.id};return a}var _g="/Reconciliations/",Dg={createReconciliation:function(t,e){var a=rg(t,e);return N.a.post(_g,a)},getReconciliation:function(t,e){var a=cg(t,e);return N.a.get(_g+a.id+"/Companies/"+a.companyId).then(vg)},editSelReconciliationStatus:function(t,e){var a=Cg(t,e);return N.a.patch(_g+a.id+"/Companies/"+a.companyId,a.data)},getReconciliationSummary:function(t,e){var a=cg(t,e);return N.a.get("/ReconciliationSummary/"+a.id+"/Companies/"+a.companyId).then(gg)},getOpenReconciliations:function(t,e){var a=ig(t,e);return N.a.get(_g+"Companies/"+a.companyId+"?statusId=1").then((function(t){return t.map(vg)}))},getFinishedReconciliations:function(t,e){var a=ig(t,e);return N.a.get(_g+"Companies/"+a.companyId+"?statusId=2").then((function(t){return t.map(vg)}))},getRejectedReconciliations:function(t,e){var a=ig(t,e);return N.a.get(_g+"Companies/"+a.companyId+"?statusId=3").then((function(t){return t.map(vg)}))},deleteReconciliation:function(t){return N.a.delete(_g+t.id)},deleteMultipleReconciliation:function(t){var e=bg(t);return N.a.delete(_g+e)}},$g={selectedReconciliation:null,selectedReconciliationSummary:[],OpenReconciliations:[],FinishedReconciliations:[],RejectedReconciliations:[]},xg=Object(F["a"])({},$g),wg={};Object.keys(xg).reduce((function(t,e){return t[e]=function(t){return t[e]},t}),wg);var Sg={setSelectedReconciliation:function(t,e){t.selectedReconciliation=e},setSelectedReconciliationSummary:function(t,e){t.selectedReconciliationSummary=e},setOpenReconciliations:function(t,e){t.OpenReconciliations=e},setFinishedReconciliations:function(t,e){t.FinishedReconciliations=e},setRejectedReconciliations:function(t,e){t.RejectedReconciliations=e}};function Rg(t,e){return function(a){return t(e,a),a}}var Ig={resetReconciliations:function(t){var e=t.state;Object.assign(e,$g)},createReconciliation:function(t,e){t.commit;var a=t.state;return Dg.createReconciliation(e,a.selectedCompany)},loadSelReconciliation:function(t,e){var a=t.commit,n=t.state;return n.selectedReconciliation&&n.selectedReconciliation.id===e?Promise.resolve(n.selectedReconciliation):Dg.getReconciliation(e,n.selectedCompany).then(Rg(a,"setSelectedReconciliation"))},editSelReconciliationStatus:function(t,e){t.commit;var a=t.state;return Dg.editSelReconciliationStatus(e,a.selectedCompany)},loadSelReconciliationSummary:function(t,e){var a=t.commit,n=t.state;return Dg.getReconciliationSummary(e,n.selectedCompany).then(Rg(a,"setSelectedReconciliationSummary"))},loadOpenReconciliations:function(t,e){var a=t.commit,n=t.state;return Dg.getOpenReconciliations(e,n.selectedCompany).then(Rg(a,"setOpenReconciliations"))},loadFinishedReconciliations:function(t,e){var a=t.commit,n=t.state;return Dg.getFinishedReconciliations(e,n.selectedCompany).then(Rg(a,"setFinishedReconciliations"))},loadRejectedReconciliations:function(t,e){var a=t.commit,n=t.state;return Dg.getRejectedReconciliations(e,n.selectedCompany).then(Rg(a,"setRejectedReconciliations"))},deleteReconciliation:function(t,e){t.commit;return Dg.deleteReconciliation(e)},deleteMultipleReconciliation:function(t,e){t.commit;return Dg.deleteMultipleReconciliation(e)}},Pg={state:xg,getters:wg,mutations:Sg,actions:Ig},kg={getExceptionsRecords:function(t,e){var a=ug(t,e),n=["/ReportTransactions/Companies/",a.companyId,"/RefCompanies/",a.refCompanyId,"/StatementTypes/",a.statementTypeId,"/StartDate/",a.startDate,"/EndDate/",a.endDate,a.queryString].join("");return N.a.get(n).then((function(t){return t.map(fg)}))},getMatchedSets:function(t,e){var a=dg(t,e),n=["/ReportTransactions/Companies/",a.companyId,"/RefCompanies/",a.refCompanyId,"/StatementTypes/",a.statementTypeId,"/StartDate/",a.startDate,"/EndDate/",a.endDate,a.queryString].join("");return N.a.get(n).then(hg)},getSRMessages:function(t){return N.a.get("/Conversations/Reconciliations/"+t).then(yg)},sendSRMessage:function(t){var e={body:t.message};return N.a.post("/Conversations/Reconciliations/"+t.recId+"/Messages",e).then()},deleteMessage:function(t){return N.a.delete("/Conversations/Messages/"+t.id).then()},editMessage:function(t){console.log(t);var e={body:t.body};return N.a.patch("/Conversations/Messages/"+t.id,e).then()},matchAuto:function(t,e){var a=mg(t,e),n="/MatchingSets/AutoMatching/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId;return n+="/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/",n+=a.endDate+a.queryString,N.a.post(n).then()},manualMatch:function(t,e){var a=pg(t,e),n="/MatchingSets/ManualMatching/Companies/"+a.companyId+"/StatementTypes/"+a.statementTypeId+a.queryString;return N.a.post(n,a.payload).then()},unmatchSet:function(t){return N.a.delete(/MatchingSets/+t).then()}},Fg=a("21a6"),Mg=a.n(Fg),Ng={downloadRecords:function(t,e){var a=["ExportExcel","Companies",t.selectedCompany.id,"StatementTypes",t.statementTypeId,"StartDate",t.startDate?C.formatDate(t.startDate):"1900-01-01","EndDate",t.endDate?C.formatDate(t.endDate):null].join("/"),n=["oppositeCompanyId="+t.oppCompany.id,"payables="+!!t.areIN,"receivables="+!!t.areOUT,"matched="+!!t.matched,"unmatched="+!!t.exceptions].join("&");return N.a.get(a+"?"+n,{responseType:"arraybuffer"}).then((function(t){var a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Mg.a.saveAs(a,e)}))}},Ag={exceptionsRecordsTypes:{},exceptionsRecords:[],matchedSets:[],SRMessages:[]},Tg=Object(F["a"])({},Ag),Og={};Object.keys(Tg).reduce((function(t,e){return t[e]=function(t){return t[e]},t}),Og);var Eg={setMatchedSets:function(t,e){t.matchedSets=e},setExceptionsRecords:function(t,e){t.exceptionsRecords=e},setExceptionsRecordsTypes:function(t,e){t.exceptionsRecordsTypes=e},setSRMessages:function(t,e){t.SRMessages=e}};function jg(t,e){return function(a){return t(e,a),a}}var Ug={resetReconciliation:function(t){var e=t.state;Object.assign(e,Ag)},loadMatchedSets:function(t,e){var a=t.commit,n=t.state;return kg.getMatchedSets(e,n.selectedCompany).then(jg(a,"setMatchedSets"))},loadSRMessages:function(t,e){var a=t.commit;t.state;return kg.getSRMessages(e).then(jg(a,"setSRMessages"))},sendReconciliationMessage:function(t,e){t.commit,t.state;return kg.sendSRMessage(e).then()},deleteMessage:function(t,e){t.commit,t.state;return kg.deleteMessage(e).then()},editMessage:function(t,e){t.commit,t.state;return kg.editMessage(e).then()},loadExceptionsRecords:function(t,e){var a=t.commit,n=t.state;return a("setExceptionsRecordsTypes",e),kg.getExceptionsRecords(e,n.selectedCompany).then(jg(a,"setExceptionsRecords"))},reloadExceptionsRecords:function(t){var e=t.commit,a=t.state;return kg.getExceptionsRecords(a.exceptionsRecordsTypes,a.selectedCompany).then(jg(e,"setExceptionsRecords"))},matchAuto:function(t,e){t.commit;var a=t.state;return kg.matchAuto(e,a.selectedCompany).then()},manualMatch:function(t,e){t.commit;var a=t.state;return kg.manualMatch(e,a.selectedCompany).then()},unmatchSet:function(t,e){t.commit,t.state;return kg.unmatchSet(e).then()},exportRecords:function(t,e){t.commit;var a=t.state,n=a.selectedReconciliation;e.statementTypeId=n.statement.id,e.startDate=n.startDate?new Date(n.startDate):null,e.endDate=n.endDate?new Date(n.endDate):null;var o=a.selectedCompany;e.selectedCompany=o;var s=n.refCompany;e.oppCompany=s;var r=["BASH",o.name,s.name];return e.matched&&r.push("Matched-Records"),e.exceptions&&r.push("Exceptions"),e.areIN&&r.push(n.context.IN),e.areOUT&&r.push(n.context.OUT),Ng.downloadRecords(e,r.join("-")+".xlsx")}},Lg={state:Tg,getters:Og,mutations:Eg,actions:Ug},qg=Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])({},kh.state),Gh.state),lv.state),Rv.state),jv.state),sg.state),Pg.state),Lg.state),Kg=Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])({},kh.getters),Gh.getters),lv.getters),Rv.getters),jv.getters),sg.getters),Pg.getters),Lg.getters),zg=Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])({},kh.mutations),Gh.mutations),lv.mutations),Rv.mutations),jv.mutations),sg.mutations),Pg.mutations),Lg.mutations),Vg=Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])(Object(F["a"])({},kh.actions),Gh.actions),lv.actions),Rv.actions),jv.actions),sg.actions),Pg.actions),Lg.actions),Bg={state:qg,getters:Kg,mutations:zg,actions:Vg};function Hg(t){return t}function Yg(t){return{id:t.company.id,data:"currentTime="+t.currentTime+"&startIndex="+t.startIndex+"&endIndex="+t.endIndex}}function Xg(t){return"currentTime="+t.currentTime+"&startIndex="+t.startIndex+"&endIndex="+t.endIndex}var Jg={getUserNotifications:function(t){var e=Xg(t);return N.a.get("/Log?"+e).then((function(t){return t.map(Hg)}))},getCompanyNotifications:function(t){var e=Yg(t);return N.a.get("/Log/Companies/"+e.id+"?"+e.data).then((function(t){return t.map(Hg)}))},getAllUserNotifications:function(){return N.a.get("/Log").then((function(t){return t.map(Hg)}))},switchNotificationReadStatus:function(t){return N.a.post("/Log/ReadStatus/"+t)},markUserNotificationsOld:function(){return N.a.post("/Log/MarkAllAsOld")},markUserNotificationsRead:function(){return N.a.post("/Log/MarkAllAsRead")},markCompanyNotificationsRead:function(t){var e=Yg(t);return N.a.post("/Log/Companies/"+e.id+"/MarkAllAsRead")},markCompanyNotificationsOld:function(t){var e=Yg(t);return N.a.post("/Log/Companies/"+e.id+"/MarkAllAsOld")},getUserNotificationsCount:function(){return N.a.get("/Log/Count").then((function(t){var e=function(t,e){return t+e.count};return{companies:t,total:t.reduce(e,0)}}))},markCompanyNotificationsNew:function(t){return N.a.post("/Log/Companies/"+t+"/MarkAllAsNew")}};function Wg(t,e,a){a?t.isRead=!0:t.id===e&&(t.isRead=!t.isRead)}var Gg={userNotifications:[],nextUserNotifications:[],userNotificationsCount:0,userNotificationsCountTimerActive:!1,companyNotifications:[],nextCompanyNotifications:[],notificationTimer:null},Qg={userNotifications:function(t){return t.userNotifications},nextUserNotifications:function(t){return t.nextUserNotifications},userNotificationsCount:function(t){return t.userNotificationsCount},companyNotifications:function(t){return t.companyNotifications},nextCompanyNotifications:function(t){return t.nextCompanyNotifications}},Zg={setUserNotifications:function(t,e){t.userNotifications=e},addUserNotifications:function(t,e){t.userNotifications=t.userNotifications.concat(e)},setNextUserNotifications:function(t,e){t.nextUserNotifications=e},setNextCompanyNotifications:function(t,e){t.nextCompanyNotifications=e},setUserNotificationsCount:function(t,e){t.userNotificationsCount=e},setCompanyNotifications:function(t,e){t.companyNotifications=e},setUserNotificationsCountTimerActive:function(t,e){t.userNotificationsCountTimerActive=e},addCompanyNotifications:function(t,e){t.companyNotifications=t.companyNotifications.concat(e)},switchUserNotificationStatus:function(t,e){t.userNotifications.forEach((function(t){return Wg(t,e[0],e[1])})),t.nextUserNotifications.forEach((function(t){return Wg(t,e[0],e[1])}))},switchCompanyNotificationStatus:function(t,e){t.companyNotifications.forEach((function(t){return Wg(t,e[0],e[1])})),t.nextCompanyNotifications.forEach((function(t){return Wg(t,e[0],e[1])}))}},ty={loadUserNotifications:function(t,e){var a=t.commit;return Jg.getUserNotifications(e).then((function(t){return a("setUserNotifications",t)}))},loadCompanyNotifications:function(t,e){var a=t.commit;return Jg.getCompanyNotifications(e).then((function(t){return a("setCompanyNotifications",t)}))},loadAllUserNotifications:function(t){var e=t.commit;return Jg.getAllUserNotifications().then((function(t){return e("setUserNotifications",t)}))},switchUserNotificationReadStatus:function(t,e){var a=t.commit;return Jg.switchNotificationReadStatus(e).then((function(t){a("switchUserNotificationStatus",[e,!1])}))},switchCompanyNotificationReadStatus:function(t,e){var a=t.commit;return Jg.switchNotificationReadStatus(e).then(a("switchCompanyNotificationStatus",[e,!1]))},markUserNotificationsRead:function(t){var e=t.commit;return Jg.markUserNotificationsRead().then((function(t){e("switchUserNotificationStatus",[0,!0])}))},markUserNotificationsOld:function(){return Jg.markUserNotificationsOld()},markCompanyNotificationsRead:function(t,e){var a=t.commit;return Jg.markCompanyNotificationsRead(e).then(a("switchCompanyNotificationStatus",[0,!0]))},markCompanyNotificationsOld:function(t,e){t.commit;return Jg.markCompanyNotificationsOld(e)},loadNextUserNotifications:function(t,e){var a=t.commit;return Jg.getUserNotifications(e).then((function(t){return a("setNextUserNotifications",t)}))},loadNextCompanyNotifications:function(t,e){var a=t.commit;return Jg.getCompanyNotifications(e).then((function(t){return a("setNextCompanyNotifications",t)}))},addUserNotifications:function(t,e){var a=t.commit;a("addUserNotifications",e)},addCompanyNotifications:function(t,e){var a=t.commit;a("addCompanyNotifications",e)},seeNotifications:function(t){var e=t.commit;return e("setUserNotificationsCount",0)},loadUserNotificationsCount:function(t){var e=t.commit;return Jg.getUserNotificationsCount().then((function(t){e("setUserNotificationsCount",t.total),e("setCompanyNotificationsCount",t.companies)}))},userNotificationsCountTimer:function(t,e){var a=t.commit,n=t.dispatch,o=t.state;a("setUserNotificationsCountTimerActive",e),null===o.notificationTimer&&(o.notificationTimer=setInterval((function(){o.userNotificationsCountTimerActive?n("loadUserNotificationsCount"):clearInterval(o.notificationTimer)}),3e4))}},ey={state:Gg,getters:Qg,mutations:Zg,actions:ty},ay={resetCompanyStore:function(t){var e=t.dispatch;return Promise.all([e("resetRecords"),e("resetReconciliation"),e("resetReconciliations"),e("resetImports"),e("resetFxRates"),e("resetContacts"),e("resetCompanies"),e("resetCollaborators")])}},ny={actions:ay};o["default"].use(k["a"]);var oy=new k["a"].Store({modules:{userStore:Ch,companyStore:Bg,notificationsStore:ey,nomenclatureStore:Dm,resetCompanyStore:ny}});function sy(t){var e=t.headers;return e.token&&oy.dispatch("setToken",e.token),t.data.data?t.data.data:t.data}function ry(t){var e=t.response;if(401===e.status)return oy.dispatch("clearout"),Promise.reject(e.data.errors[0]);if(e.data&&e.data.errors){var a=e.data.errors[0];return Promise.reject(a)}return Promise.reject(t)}N.a.defaults.baseURL="https://balanceshareapidev-v2-001.azurewebsites.net",N.a.interceptors.request.use((function(t){t.headers=t.headers||{};var e=oy.getters.token;return e&&(t.headers.Token=e),t})),N.a.interceptors.response.use(sy,ry);var iy={events:"blur"};o["default"].use(bu["b"],iy);var cy=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loading?a("div",{staticClass:"loading"},[a("img",{attrs:{src:"/images/loading.gif"}})]):t._e()},ly=[],uy={props:["loading"]},dy=uy,my=Object(W["a"])(dy,cy,ly,!1,null,null,null),py=my.exports,fy=a("a65d"),hy=a.n(fy),vy={duration:2500,action:{text:"X",onClick:function(t,e){e.goAway(0)}}},gy=function(t,e){o["default"].toasted.show(t,e)},yy={install:function(t){t.prototype.$customMsg={showErrorMessage:function(t){var e=Object.assign({},vy,{type:"error",duration:5e3});gy(t,e)},showSuccessMessage:function(t){var e=Object.assign({},vy,{type:"success"});gy(t,e)},showInfoMessage:function(t){var e=Object.assign({},vy,{type:"info"});gy(t,e)}}}},by=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("body",{class:{"main-wrapper":!0,debug:t.isDev}},[a("header",[a("b-navbar",{staticClass:"navigation",attrs:{toggleable:"md",id:"top-bar"}},[a("b-navbar-brand",{attrs:{to:"/"}},[a("img",{attrs:{src:"/images/logo.png",alt:"Balance share"}})]),a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[t.user?t._e():a("b-navbar-nav",[a("b-nav-item",{attrs:{to:"/login"}},[t._v("Login")]),a("b-nav-item",{attrs:{to:"/register"}},[t._v("Register")])],1),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item-dropdown",{attrs:{text:"DEV PAGES",right:""}},[a("b-dropdown-item",{attrs:{to:"/prototype/nomenclatures",exact:""}},[t._v("Nomenclatures")]),a("b-dropdown-item",{attrs:{to:"/matching-tool",exact:""}},[t._v("Matching Tool")])],1),a("b-nav-item-dropdown",{attrs:{text:t.i18n.lang,right:""}},[a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="en"}}},[t._v("English")]),a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="bg"}}},[t._v("")])],1),t.user?[a("b-nav-item",{attrs:{to:"/received-invitations"}},[t._v(t._s(t.$t("Invitations")))]),a("b-nav-item-dropdown",{attrs:{text:t.i18n.lang,right:""}},[a("template",{slot:"button-content"},[a("Avatar",{attrs:{username:t.user.fullName?t.user.fullName:"",src:t.user.profileImageUrl?t.user.profileImageUrl:"",size:25,customStyle:{display:"inline-flex",border:"1px solid lightgray",marginRight:"10px"}}}),a("div",{staticClass:"d-inline-block"},[t._v(t._s(t.user.fullName))])],1),a("b-dropdown-item",{attrs:{to:"/user#profile"}},[t._v(t._s(t.$t("Profile")))]),a("b-dropdown-item",{attrs:{to:"/user#settings"}},[t._v(t._s(t.$t("Settings")))]),a("b-dropdown-item",{attrs:{to:"/user#password"}},[t._v(t._s(t.$t("Change Password")))]),a("b-dropdown-divider"),a("b-dropdown-item",{on:{click:t.logout}},[t._v(t._s(t.$t("Logout")))])],2),a("UserNotifications")]:t._e()],2)],1)],1)],1),a("router-view"),t.isDev?a("div",{attrs:{id:"dev-toolbox"}},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseDevToolbox",modifiers:{collapseDevToolbox:!0}}],attrs:{variant:"outline-danger"}},[t._v("* Dev Toolbox")]),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapseDevToolbox"}},[a("b-card",[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.test}},[t._v("Test Action")]),a("button",{staticClass:"btn btn-warning btn-sm",attrs:{type:"button"},on:{click:t.showTestToasted}},[t._v("Test Toast Notification")]),t.myCompanies.length?a("div",{staticClass:"form-group mt-3"},[a("p",[a("button",{staticClass:"btn btn-warning btn-sm",attrs:{type:"button"},on:{click:t.markAllNotifAsNew}},[t._v("Mark All Notification as NEW")])]),a("b-form-select",{attrs:{id:"testCompanySelector",plain:!0},model:{value:t.selectedTestCompany,callback:function(e){t.selectedTestCompany=e},expression:"selectedTestCompany"}},[a("template",{slot:"first"},[a("option",{domProps:{value:null}},[t._v("Select Company")])]),t._l(t.myCompanies,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)],1):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[t._v(t._s(t.buildTimestamp))])])],1)],1):t._e()],1)},Cy=[],_y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-nav-item",[a("div",{staticClass:"tooltip-bell",on:{click:t.switchUserNotification}},[a("i",{staticClass:"far fa-bell"}),t.notificationsCount&&t.notificationsCount>0?a("span",{staticClass:"notifications-count"},[t._v(t._s(t.notificationsCount))]):t._e()]),t.showPanel?a("div",{staticClass:"nav-item-notifications"},[a("div",{staticClass:"background-panel",on:{click:t.switchUserNotification}}),a("NotificationPanel",{attrs:{notifications:t.notifications,panel_style:t.panel_style,loading:t.loading,handleScroll:t.handleScroll,finalResult:t.finalResult,goToFunc:t.goToUserNotifications,markAllFunc:t.markUserNotificationsRead,toggleFunc:t.toggleUserNotification}})],1):t._e()])},Dy=[],$y={components:{NotificationPanel:Bm},data:function(){return{showPanel:!1,loading:!1,currentTime:null,currentNotification:1,notificationsPerLoad:10,windowHeight:0}},computed:{notifications:function(){return this.$store.getters.userNotifications},nextUserNotifications:function(){return this.$store.getters.nextUserNotifications},finalResult:function(){return 0===this.nextUserNotifications.length},notificationsCount:function(){return this.$store.getters.userNotificationsCount},payload:function(){var t=new Date(this.currentTime);return{currentTime:t.toISOString(),startIndex:this.currentNotification,endIndex:this.currentNotification+this.notificationsPerLoad-1}},panel_style:function(){return{height:this.windowHeight/2+"px"}}},created:function(){this.$store.dispatch("loadUserNotificationsCount")},mounted:function(){this.$nextTick((function(){window.addEventListener("resize",this.getWindowHeight),this.getWindowHeight()}))},beforeDestroy:function(){window.removeEventListener("resize",this.getWindowHeight)},methods:{getWindowHeight:function(){this.windowHeight=document.documentElement.clientHeight},switchUserNotification:function(){this.$store.dispatch("seeNotifications"),this.showPanel=!this.showPanel,this.showPanel?(this.currentTime=Date.now(),this.loadUserNotification()):this.currentNotification=1},loadMore:function(){var t=this;this.currentNotification+=this.notificationsPerLoad,this.$store.dispatch("loadNextUserNotifications",this.payload).then((function(){t.loading=!1}))},loadUserNotification:function(){var t=this;this.loading=!0,this.$store.dispatch("loadUserNotifications",this.payload).then((function(){t.$store.dispatch("markUserNotificationsOld"),t.loadMore()}))},markUserNotificationsRead:function(){var t=this;this.loading=!0,this.$store.dispatch("markUserNotificationsRead").then((function(){t.loading=!1}))},loadNextUserNotifications:function(){var t=this;this.loading=!0,this.finalResult||this.$store.dispatch("addUserNotifications",this.nextUserNotifications).then((function(){t.loadMore()}))},goToUserNotifications:function(){this.showPanel=!this.showPanel,this.currentNotification=1,this.$router.push({name:"Notifications",params:{type:"user"}})},handleScroll:function(t){t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<100&&!this.loading&&!this.finalResult&&this.loadNextUserNotifications()},toggleUserNotification:function(t){this.$store.dispatch("switchUserNotificationReadStatus",t.id)}},watch:{showPanel:function(t){t?document.body.classList.add("notification_open"):document.body.classList.remove("notification_open")}}},xy=$y,wy=Object(W["a"])(xy,_y,Dy,!1,null,null,null),Sy=wy.exports;console.log("process.env.VUE_APP_ENV","production");var Ry={components:{Avatar:Nl,UserNotifications:Sy},data:function(){return{i18n:{lang:this.$t("lang")},isDev:!1,selectedTestCompany:null,buildTimestamp:"Tue, 02 Mar 2021 10:31:53 GMT"}},methods:{test:function(){console.log("TEST")},showTestToasted:function(){this.$customMsg.showInfoMessage("Info Message"),this.$customMsg.showErrorMessage("Error Message"),this.$customMsg.showSuccessMessage("Success Message")},markAllNotifAsNew:function(){Jg.markCompanyNotificationsNew(this.selectedTestCompany)},logout:function(){this.$store.dispatch("logout")}},computed:{user:function(){return this.$store.getters.user},myCompanies:function(){return this.$store.getters.myCompanies}},watch:{"$i18n.locale":function(){this.i18n.lang=this.$t("lang")}}},Iy=Ry,Py=Object(W["a"])(Iy,by,Cy,!1,null,null,null),ky=Py.exports;a("0d68");o["default"].config.productionTip=!0,o["default"].use(r.a),o["default"].use(i["a"]),o["default"].use(hy.a),o["default"].use(yy),o["default"].component("loading",py),oy.dispatch("loadUserCash"),new o["default"]({el:"#app",router:Sf,store:oy,i18n:P,render:function(t){return t(ky)}})},"6fea":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.company.logo?a("div",{class:["logo","logo-"+t.size],style:t.logoStyle},[t.company.logo.URL?t._e():a("div",{staticClass:"logo-initials"},[t._v(t._s(t.company.logo.initials))]),a("div",{style:t.flagStyle})]):t._e()},o=[],s={props:{company:{required:!0},size:{required:!0}},computed:{logoStyle:function(){return this.company.logo.URL?{"background-image":"url("+this.company.logo.URL+")"}:{}},flagStyle:function(){return{"background-image":"url(/flags/"+this.company.country.code+".svg)"}}}},r=s,i=a("2877"),c=Object(i["a"])(r,n,o,!1,null,null,null);e["a"]=c.exports},"86e2":function(t){t.exports=JSON.parse('{"lang":"","Name":"","Email":"","Phone":"","Language":""}')},d487:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",t._l(t.items,(function(e){return a("TreeLeaf",{key:e[t.state.idProp],attrs:{node:e,state:t.state,preselectedCompany:t.preselectedCompany}})})),1)},o=[],s=(a("d3b7"),a("3ca3"),a("ddb0"),{name:"TreeNode",components:{TreeLeaf:function(){return a.e("chunk-2d21b8a6").then(a.bind(null,"bfe1"))}},props:["nodes","state","preselectedCompany"],computed:{items:function(){return this.nodes}}}),r=s,i=a("2877"),c=Object(i["a"])(r,n,o,!1,null,null,null);e["default"]=c.exports},d54b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["company-card","company-card-"+t.size]},[a("logo-flag",{attrs:{company:t.company,size:t.size}}),a("div",{staticClass:"company-text"},[a("div",{staticClass:"company-card-name"},[t._v(t._s(t.company.name))]),t.extend?a("div",{staticClass:"company-card-currency"},[t._v(t._s(t.$t("Currency"))+": "+t._s(t.company.currency?t.company.currency.code:""))]):t._e()])],1)},o=[],s=a("6fea"),r={components:{LogoFlag:s["a"]},props:{company:{required:!0},size:{required:!0},extend:{default:!1}}},i=r,c=a("2877"),l=Object(c["a"])(i,n,o,!1,null,null,null);e["a"]=l.exports},e088:function(t){t.exports=JSON.parse('{" for ":" for ","Acc. Type":"Acc. Type","Actions":"Actions","Admin":"Admin","Add Company":"Add Company","Add FX Rate":"Add FX Rate","Add related party":"Add related party","Add your first company :":"Add your first company :","Add":"Add","Address":"Address","Are you really sure you want to delete this company ?":"Are you really sure you want to delete this company ?","Aliases":"Aliases","Invitation successfully send.":"Invitation successfully send.","Invite from my companies":"Invite from my companies","Amount in doc. currency":"Amount in doc. currency","Amount in":"Amount in","Amount":"Amount","Company Invitation":"Company Invitation","Add from my companies":"Add from my companies","no aliases":"no aliases","Add Average FX Rate":"Add Average FX Rate","Add Daily FX Rate":"Add Daily FX Rate","No manual Rate":"No manual Rate","Auto Units":"Auto Units","Auto Rate":"Auto Rate","Daily Rates":"Daily Rates","Average Rates":"Average Rates","Inherited from parent":"Inherited from parent","Notifications":"Notifications","Mark all as read":"Mark all as read","See all":"See all","Go to my companies":"Go to my companies","Currently there are no invitations.":"Currently there are no invitations.","Are you sure ?":"Are you sure ?","Are you sure you want to STOP auto Fx Rate ?":"Are you sure you want to STOP auto Fx Rate ?","Are you sure you want to STOP auto for selected Fx Rates ?":"Are you sure you want to STOP auto for selected Fx Rates ?","Assignee":"Assignee","Audit":"Audit","Company:":"Company:","Back":"Back","With":"With","For period":"For period","Cancel":"Cancel","Change Password":"Change Password","Close/Open":"Close/Open","Code":"Code","Collaborator\'s Email:":"Collaborator\'s Email:","Collaborators":"Collaborators","Companies":"Companies","Company Name":"Company Name","Company":"Company","Confirm":"Confirm","Contact Person Email":"Contact Person Email","Contact":"Contact","Contacts page.":"Contacts page.","Contacts":"Contacts","Corporate Tax ID":"Corporate Tax ID","Corporate Tax":"Corporate Tax","Country":"Country","Create Reconciliation":"Create Reconciliation","Create":"Create","Creator":"Creator","Currency":"Currency","DDL":"DDL","Date":"Date","Dates":"Dates","Deadline":"Deadline","Delete":"Delete","Delete Company":"Delete Company","Description":"Description","Direct Parent":"Direct Parent","Disclose":"Disclose","Doc. Currency":"Doc. Currency","Successfully deleted reconciliation.":"Successfully deleted reconciliation.","Doc. Date":"Doc. Date","Due Date":"Due Date","Edit":"Edit","Email":"Email","End date is before start date":"End date is before start date","Error in creating FxRate :":"Error in creating FxRate :","Error":"Error","Errors":"Errors","Excel file":"Excel file","FX Rate":"FX Rate","Filling Deadline":"Filling Deadline","Filter":"Filter","Finished":"Finished","First Name":"First Name","Forgot password?":"Forgot password?","From date":"From date","From":"From","Fx Rates":"Fx Rates","FxRecord Type":"FxRecord Type","Invalid":"Invalid","Invitations":"Invitations","Invite Company":"Invite Company","It is currently a related party":"It is currently a related party","Items per page":"Items per page","Label":"Label","Language":"Language","Last Name":"Last Name","Last SuperUser cannot be edited!":"Last SuperUser cannot be edited!","Line":"Line","Login successful":"Login successful","Login":"Login","Logout":"Logout","Matched":"Matched","Message":"Message","Misc":"Misc","Month":"Month","Name":"Name","New picture":"New picture","Next":"Next","No companies found":"No companies found","No company found":"No company found","No more results.":"No more results.","No parent":"No parent","Now":"Now","Number":"Number","OK":"OK","Old Password":"Old Password","Open":"Open","Opposite":"Opposite","Out of Period":"Out of Period","Own currency":"Own currency","Own":"Own","Password":"Password","Payer":"Payer","Parent company":"Parent company","Pending valid transactions with recognized companies":"Pending valid transactions with recognized companies","Personnel":"Personnel","Phone":"Phone","Please enter the complete legal name as per registration":"Please enter the complete legal name as per registration","Please fill all info!":"Please fill all info!","Please, check your email and confirm the registration by clicking on the link in it.":"Please, check your email and confirm the registration by clicking on the link in it.","Please, check your email, click on the link and reset your password.":"Please, check your email, click on the link and reset your password.","Please, enter a valid email":"Please, enter a valid email","Please, enter a valid name":"Please, enter a valid name","Please, enter company\'s registration number":"Please, enter company\'s registration number","Please, enter description":"Please, enter description","Please, enter the password":"Please, enter the password","Please, enter your first name.":"Please, enter your first name.","Please, enter your last name.":"Please, enter your last name.","Please, enter your old password":"Please, enter your old password","Please, enter your phone number.":"Please, enter your phone number.","Please, fill the required fields.":"Please, fill the required fields.","Please, repeat the password":"Please, repeat the password","Please, select a company":"Please, select a company","Please, select a contact":"Please, select a contact","Please, select a country":"Please, select a country","Please, select a date":"Please, select a date","Please, select a role":"Please, select a role","Please, select a starting date":"Please, select a starting date","Please, select a statement type":"Please, select a statement type","Please, select an Excel file":"Please, select an Excel file","Please, select at least one statement":"Please, select at least one statement","Posting Date":"Posting Date","Profile":"Profile","Rate":"Rate","Rates":"Rates","Receiver Email":"Receiver Email","Receiver":"Receiver","Recognize":"Recognize","Reconciliations":"Reconciliations","Records":"Records","Ref #":"Ref #","Reg Number":"Reg Number","Register":"Register","Registration ID":"Registration ID","Registration number":"Registration number","Rejected":"Rejected","Remove":"Remove","Removed":"Removed","Repeat Password":"Repeat Password","Repeated password is not the same":"Repeated password is not the same","Reporting Currency":"Reporting Currency","Reporting Regularity":"Reporting Regularity","Reset":"Reset","Responsibility":"Responsibility","Results per page":"Results per page","Role":"Role","Sales Tax ID":"Sales Tax ID","Save":"Save","Saved records successfully":"Saved records successfully","Select ":"Select ","Select Logo":"Select Logo","Select country: ":"Select country: ","Select currency ...":"Select currency ...","Sender":"Sender","Settings":"Settings","Show All":"Show All","Software":"Software","Source":"Source","Start Reconciliation":"Start Reconciliation","Statement Type":"Statement Type","Statement type":"Statement type","Statement types":"Statement types","Status":"Status","Stop Notification":"Stop Notification","Submit":"Submit","Success":"Success","Successfully changed company logo":"Successfully changed company logo","Successfully changed user avatar":"Successfully changed user avatar","Successfully created ":"Successfully created ","Successfully deleted company logo":"Successfully deleted company logo","Successfully deleted user avatar":"Successfully deleted user avatar","Summary":"Summary","TOTAL":"TOTAL","Taxes":"Taxes","There aren\'t any contacts added yet.":"There aren\'t any contacts added yet.","There aren\'t any invitations.":"There aren\'t any invitations.","This user cannot be deleted!":"This user cannot be deleted!","To date":"To date","To":"To","Top Parent":"Top Parent","Transactions Type":"Transactions Type","Turn selected OFF":"Turn selected OFF","Type":"Type","Units":"Units","Unmatched":"Unmatched","Updated account info for":"Updated account info for","Upload":"Upload","VAT / Sales Tax ID":"VAT / Sales Tax ID","VAT ID":"VAT ID","Valid transactions with unrecognized companies":"Valid transactions with unrecognized companies","Valid with recognized companies":"Valid with recognized companies","Valid with unrecognized companies":"Valid with unrecognized companies","View Details":"View Details","View details":"View details","We have received your registration and have sent a mail to your email address.":"We have received your registration and have sent a mail to your email address.","We have received your request for recovery and have sent a mail to your email address.":"We have received your request for recovery and have sent a mail to your email address.","You are going to change auto Fx Rate for ":"You are going to change auto Fx Rate for ","You are going to start auto Fx Rate for ":"You are going to start auto Fx Rate for ","You can save these transactions.":"You can save these transactions.","You do not have enough permissions to change to this role!":"You do not have enough permissions to change to this role!","You need to have contact companies in order to mark some of them as related parties.":"You need to have contact companies in order to mark some of them as related parties.","You need to have contact companies in order to reconcile with them. You can invite companies in ":"You need to have contact companies in order to reconcile with them. You can invite companies in ","[x] Remove Filters":"[x] Remove Filters","click on avatar to change it":"click on avatar to change it","click on logo to change it":"click on logo to change it","forgotPageTitle":"Forgotten Password","forgotPasswordText":"Enter your email, so we can send a message with instruction, on how to reset your password.","lang":"EN","loginFormSubmit":"Login","loginPageTitle":"Login","on/off":"on/off","reconciliation":"reconciliation","reconciliations":"reconciliations","regFormSubmit":"Register","registerPageTitle":"Register account","require FX rate":"require FX rate","resetFormSubmit":"Reset","uploadPageValidUnrecognizedText":"You can link unrecognized name to a company from your contacts and this name will ba saved as a company alias. Then the company will appear in the table with pending valid transactions from recognized companies."}')},f921:function(t,e,a){}});
//# sourceMappingURL=app.1ab1c1ff.js.map