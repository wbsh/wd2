webpackJsonp([2],{"0KbX":function(t,e,a){"use strict";var n={components:{LogoFlag:a("pGLP").a},props:{company:{required:!0},size:{required:!0},extend:{default:!1}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["company-card","company-card-"+t.size]},[a("logo-flag",{attrs:{company:t.company,size:t.size}}),t._v(" "),a("div",{staticClass:"company-text"},[a("div",{staticClass:"company-card-name"},[t._v(t._s(t.company.name))]),t._v(" "),t.extend?a("div",{staticClass:"company-card-currency"},[t._v(t._s(t.$t("Currency"))+": "+t._s(t.company.currency?t.company.currency.code:""))]):t._e()])],1)},staticRenderFns:[]},s=a("VU/8")(n,o,!1,null,null,null);e.a=s.exports},"1IYV":function(t,e){},GNxC:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};a.d(n,"apiToCountry",function(){return Mr}),a.d(n,"apiToCurrency",function(){return kr});a("j1ja"),a("MU8w"),a("+Mt+");var o=a("/5sW"),s=(a("1IYV"),a("ESwS")),r=a.n(s),i=a("e6fC"),c=a.n(i),l=6e4;function u(t){return t?t.getUTCFullYear()+"-"+d(t.getUTCMonth()+1)+"-"+d(t.getUTCDate()):""}function d(t){return t<10?"0"+t:t}var m=["Jan","Feb","March","April","May","June","July","Aug","Sep","Oct","Nov","Dec"];function p(t){return"`"+t.toString().substr(-2)}function v(t,e){var a=t.getMonth(),n=t.getFullYear(),o=e.getMonth(),s=e.getFullYear(),r="",i=m[o]+" "+p(s),c=n===s;return 1===t.getDate()&&function(t){return 1===new Date(t.getTime()+864e5).getDate()}(e)?a===o&&c||(r=m[a]):(r=t.getDate()+" "+m[a],i=e.getDate()+" "+i),(r=(r=c?r:r+" "+p(n))?r+" - ":r)+i}function f(t){return t.getDate()+" "+m[t.getMonth()]+" "+p(t.getFullYear())}var h={beautifyDates:function(t,e){return 1===arguments.length?f(t):t?e?v(t,e):f(t):f(e)},prepareForUTCString:function(t){return new Date(t.getTime()-t.getTimezoneOffset()*l)},formatDate:u,formatDateTime:function(t){return t?u(t)+", "+d(t.getUTCHours())+":"+d(t.getUTCMinutes())+":"+d(t.getUTCSeconds()):""}};o.default.filter("bsDate",function(t){return h.formatDate(t)}),o.default.filter("bsDateTime",function(t){return h.formatDateTime(t)}),o.default.filter("numToDec2",function(t){return function(t,e){return(+t).toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:e})}(t,2)});var g=a("TXmL"),_=a("UpdR"),y=a.n(_),b=a("YFeG"),C=a.n(b),D={en:y.a,bg:C.a};o.default.use(g.a);var $=new g.a({locale:"en",messages:D,fallbackLocale:"en"}),x=a("NYxO"),w=a("Dd8w"),S=a.n(w),R=a("mvHQ"),F=a.n(R),I=a("mtWM"),P=a.n(I),M=a("xrTZ");function k(t){var e=Math.floor(10001*Math.random());return{email:t.email,firstName:t.firstName,lastName:t.lastName,fullName:t.fullName,phone:t.phone,profileImageUrl:""!==t.profileImageUrl?t.profileImageUrl+"?rand="+e:"",settings:{language:t.settings.language?t.settings.language:"en"}}}var T=function(){return P.a.get("/Account/").then(k)},N=function(t){return P.a.patch("/Account/",t)},A=function(t){return P.a.post("/Account/Settings",t).then()},E=function(t){var e,a={email:(e=t).email,password:M.Base64.encode(e.password),firstName:e.firstName,lastName:e.lastName,phone:e.phone};return P.a.post("/Account/",a).then(k)},U=function(t){var e=t.email,a=t.password,n={headers:{Authorization:"Basic "+M.Base64.encode(e+":"+a)}};return P.a.post("/Account/Login",null,n).then(k)},O=function(){return P.a.get("/Account/Logout")},V=function(t){return P.a.post("/Account/Recover",{email:t})},L=function(t,e){return P.a.post("/Account/Recover/"+t,{password:M.Base64.encode(e)})},q=function(t,e){var a={oldPassword:M.Base64.encode(t),newPassword:M.Base64.encode(e)};return P.a.post("/Account/Password",a)},K=function(t){return P.a.post("/Account/ProfileImage",t,{headers:{"Content-Type":"multipart/form-data"}})},z=function(){return P.a.delete("/Account/ProfileImage")},B=function(t){return P.a.get("/account/confirmation/"+t)},j=a("Gu7T"),H=a.n(j),Y=a("/ocq");function X(t,e,a){qu.getters.token?a({path:"/"}):a()}function G(t,e,a){qu.getters.token?"/login"===e.path&&e.query.redirect&&e.query.redirect!==t.path?a({path:e.query.redirect}):a():a({path:"/login",query:{redirect:t.fullPath}})}var W=a("+cKO"),J={validations:{formData:{firstName:{required:W.required},lastName:{required:W.required},phone:{required:W.required},password:{required:W.required,minLength:Object(W.minLength)(8)},repPassword:{required:W.required,minLength:Object(W.minLength)(8),sameAsPass:Object(W.sameAs)("password")},email:{required:W.required,email:W.email}}},data:function(){return{formData:{firstName:null,lastName:null,phone:null,password:null,repPassword:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("register",this.formData).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))}}},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"register-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("First Name"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.firstName,expression:"formData.firstName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.firstName.required&&t.$v.formData.firstName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.firstName},on:{blur:function(e){return t.$v.formData.firstName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"firstName",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your first name.")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Last Name"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.lastName,expression:"formData.lastName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.lastName.required&&t.$v.formData.lastName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.lastName},on:{blur:function(e){return t.$v.formData.lastName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"lastName",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your last name.")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.phone.required&&t.$v.formData.phone.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.phone},on:{blur:function(e){return t.$v.formData.phone.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your phone number.")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){return t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.minLength&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){return t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.password.minLength?"":t.$t("Password must me 8 chars"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.repPassword.sameAsPass||!t.$v.formData.repPassword.minLength)&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){return t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.sameAsPass?t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"):t.$t("Please, repeat the password"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("regFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Z={components:{RegisterForm:a("VU/8")(J,Q,!1,null,null,null).exports},data:function(){return{isActionSuccessful:!1}}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("registerPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("register-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v(t._s(t.$t("Forgot password?")))])],1)]),t._v(" "),t.isActionSuccessful?a("div",[a("p",[t._v(t._s(t.$t("We have received your registration and have sent a mail to your email address.")))]),t._v(" "),a("p",[t._v(t._s(t.$t("Please, check your email and confirm the registration by clicking on the link in it.")))])]):t._e()])])])},staticRenderFns:[]},et=a("VU/8")(Z,tt,!1,null,null,null).exports,at={validations:{formData:{password:{required:W.required},email:{required:W.required,email:W.email}}},data:function(){return{formData:{password:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("login",this.formData).then(function(){t.$emit("success"),t.$customMsg.showSuccessMessage(t.$t("Login successful"))}).catch(function(e){t.errMsg=e.messageDetail}).finally(function(){t.loading=!1}))}}},nt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"login-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){return t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.required&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){return t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter the password")))])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("loginFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},ot={components:{LoginForm:a("VU/8")(at,nt,!1,null,null,null).exports},methods:{onLogin:function(){var t=this.$store.getters.user;this.$i18n.locale=t.settings.language,this.$router.push("/")}}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("loginPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("login-form",{on:{success:t.onLogin}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v(t._s(t.$t("Forgot password?")))])],1)])])])])},staticRenderFns:[]},rt=a("VU/8")(ot,st,!1,null,null,null).exports,it={validations:{formData:{email:{required:W.required,email:W.email}}},data:function(){return{formData:{email:null},errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,V(this.formData.email).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))}}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"forgot-pass-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[t._v("\n    "+t._s(t.$t("forgotPasswordText"))+"\n  ")]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){return t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("resetFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},lt={components:{ForgotPassForm:a("VU/8")(it,ct,!1,null,null,null).exports},data:function(){return{isActionSuccessful:!1}}},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("forgotPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("forgot-pass-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))])],1)]),t._v(" "),t.isActionSuccessful?a("div",[a("p",[t._v(t._s(t.$t("We have received your request for recovery and have sent a mail to your email address.")))]),t._v(" "),a("p",[t._v(t._s(t.$t("Please, check your email, click on the link and reset your password.")))])]):t._e()])])])},staticRenderFns:[]},dt=a("VU/8")(lt,ut,!1,null,null,null).exports,mt={props:["token"],validations:{formData:{password:{required:W.required,minLength:Object(W.minLength)(8)},repPassword:{required:W.required,minLength:Object(W.minLength)(8),sameAsPass:Object(W.sameAs)("password")}}},data:function(){return{formData:{password:null,repPassword:null},errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,L(this.token,this.formData.password).then(function(e){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))}}},pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"reset-pass-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.password.required||!t.$v.formData.password.minLength)&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){return t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.repPassword.sameAsPass||!t.$v.formData.repPassword.minLength)&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){return t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.sameAsPass?t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"):t.$t("Please, repeat the password"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("resetFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},vt={components:{ResetPassForm:a("VU/8")(mt,pt,!1,null,null,null).exports},props:["token"],data:function(){return{isActionSuccessful:!1}}},ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("resetPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("reset-pass-form",{attrs:{token:t.token},on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"})]),t._v(" "),t.isActionSuccessful?a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Password reset was successfull"))+".")]),t._v(" "),a("b-button",{attrs:{size:"lg",variant:"success",to:"/login"}},[t._v(t._s(t.$t("Login")))])],1):t._e()])])])},staticRenderFns:[]},ht=[{path:"/register",name:"Register",component:et,meta:{pageId:"register-page",pageClass:""},beforeEnter:X},{path:"/login",name:"Login",component:rt,meta:{pageId:"login-page",pageClass:""},beforeEnter:X},{path:"/forgot",name:"Forgot",component:dt,meta:{pageId:"forgot-page",pageClass:""},beforeEnter:X},{path:"/reset/:token",name:"Reset",component:a("VU/8")(vt,ft,!1,null,null,null).exports,props:!0,meta:{pageId:"reset-page",pageClass:""},beforeEnter:X}],gt=a("IC97"),_t=a("D52M"),yt={components:{Datepicker:gt.a},data:function(){return{locales:{en:_t.b,bg:_t.a},question:"Are you sure ?",advanced:!1,date:Date.now()}},methods:{openModal:function(t){this.question=null!==t?t:this.$t("Are you sure ?"),this.$refs.modal.show()},openQuestion:function(t){this.advanced=!1,this.openModal(t)},openDateQuestion:function(t,e){this.options=e,this.advanced=!0,this.openModal(t)},confirm:function(){this.$emit("confirm",this.date),this.$refs.modal.hide()},cancel:function(){this.$emit("cancel"),this.$refs.modal.hide()}}},bt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"modal"},[t._v("\n\n  "+t._s(t.question)+"\n\n  "),t.advanced?a("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e(),t._v(" "),a("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("Confirm")))]),t._v(" "),a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"warning"},on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))])],1)],1)},staticRenderFns:[]},Ct=a("VU/8")(yt,bt,!1,null,null,null).exports,Dt=a("fZjL"),$t=a.n(Dt),xt=a("mB6w"),wt=a.n(xt),St="__selected__",Rt={items:[],filteredItems:[],sorter:{id:null,comparator:null,onKeyChangeCallback:function(){}},filters:{},page:1};function Ft(t){var e=$t()(t.filters).reduce(function(e,a){return e.filter(function(e){return t.filters[a](e)})},t.items.slice(0));t.page=1,t.filteredItems=t.sorter.comparator?e.sort(t.sorter.comparator):e}function It(t){return t[St]||!1}function Pt(t,e){t.items=e,t.filteredItems=t.items,t.sorter=wt()({},Rt.sorter),t.filters=wt()({},Rt.filters),t.page=Rt.page}var Mt=function(t){var e=o.default.observable(wt()({name:t},Rt));return{getters:{items:function(){return e.items},pageItems:function(t){if(t){var a=(e.page-1)*t,n=e.page*t;return e.filteredItems.slice(a,n)}return e.filteredItems},totalRows:function(){return e.filteredItems.length},totalPages:function(t){return Math.ceil(e.filteredItems.length/t)},selectedItems:function(){return e.items.filter(It)},isItemSelected:function(){return It},page:function(){return e.page}},mutations:{removeItem:function(t){var a=e.items.indexOf(t);-1!==a&&e.items.splice(a,1)},setInitialState:function(t){e.items!==t&&Pt(t)},setItems:function(t){t?(e.items=t,e.filteredItems={},Ft(e)):(e.sorter.onKeyChangeCallback(),Pt(e,[]))},resetState:function(){e.sorter.onKeyChangeCallback(),Pt(e,[])},addFilter:function(t){e.filters[t.key]=t.comparator,Ft(e)},removeFilter:function(t){e.filters[t]&&(delete e.filters[t],Ft(e))},removeAllFilters:function(){$t()(e.filters).length>0&&(e.filters={},Ft(e))},setSorter:function(t){var a=e.sorter;a.id!==t.sortId&&(a.onKeyChangeCallback(t.sortId),a.id=t.sortId,a.comparator=t.comparator,a.onKeyChangeCallback=t.onKeyChangeCallback,e.filteredItems.sort(a.comparator))},toggleItemSelection:function(t){o.default.set(t,St,!t[St])},setItemsSelection:function(t){t.items.forEach(function(e){o.default.set(e,St,t.areSelected)})},setPage:function(t){e.page=t}}}};function kt(t,e,a){var n;return function(){var o=this,s=arguments,r=a&&!n;clearTimeout(n),n=setTimeout(function(){n=null,a||t.apply(o,s)},e),r&&t.apply(o,s)}}function Tt(t,e,a){return a[e]||(a[e]=Function("obj","return obj."+e)),a[e](t)}var Nt={},At=function(t){return Nt.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},Nt.methods={setFilter:kt(function(e){var a,n,o=this,s=e.target.value;if(null!==s&&""!==s){var r=(a=s,n={},function(t){return o.compare(Tt(t,o.filterKey,n),a)}),i={key:o.filterKey,comparator:r};t.mutations.addFilter(i)}else t.mutations.removeFilter(o.filterKey)},300)},Nt};At.options=Nt;var Et=At,Ut={render:function(){var t=this.$createElement;return(this._self._c||t)("input",{staticClass:"form-control form-control-sm",attrs:{type:"text"},on:{input:this.setFilter}})},staticRenderFns:[]},Ot=a("VU/8")(Et,Ut,!1,null,null,null).exports;var Vt={},Lt=function(t){return Vt.props={items:{required:!0},filterKey:{required:!0},compare:{type:Function,required:!0}},Vt.computed={options:function(){return t=this.items,e=this.filterKey,a=[],n={},t.forEach(function(t){var o=Tt(t,e,n);null!==o&&""!==o&&-1===a.indexOf(o)&&a.push(o)}),a;var t,e,a,n}},Vt.methods={setFilter:function(e){var a,n,o=this,s=e.target.value;if(""!==s){var r=(a=s,n={},function(t){return o.compare(Tt(t,o.filterKey,n),a)}),i={key:o.filterKey,comparator:r};t.mutations.addFilter(i)}else t.mutations.removeFilter(o.filterKey)}},Vt};Lt.options=Vt;var qt=Lt,Kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control form-control-sm",on:{change:t.setFilter}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.options,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)},staticRenderFns:[]},zt=a("VU/8")(qt,Kt,!1,null,null,null).exports,Bt={},jt=function(t){return Bt.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},Bt.data=function(){return{date:null}},Bt.watch={date:function(e){var a,n,o=this,s=new Date(e);if(null!==e&&""!==e){var r=(a=s,n={},function(t){return o.compare(Tt(t,o.filterKey,n),a)}),i={key:o.filterKey,comparator:r};t.mutations.addFilter(i)}else t.mutations.removeFilter(o.filterKey)}},Bt};jt.options=Bt;var Ht=jt,Yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{ref:"dropdown"},[a("btn",{staticClass:"dropdown-toggle calendar-btn"},[t._v(t._s(t.date)+" "),a("i",{staticClass:"fa fa-calendar"})]),t._v(" "),a("template",{slot:"dropdown"},[a("li",[a("date-picker",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])],2)},staticRenderFns:[]},Xt=a("VU/8")(Ht,Yt,!1,null,null,null).exports,Gt="marked"+Date.now(),Wt={},Jt=function(t){return Wt.data=function(){var t=this,e=[{label:"All",fn:function(){t.removeFilter()}},{label:"Selected",fn:function(){t.filter(!0)}},{label:"Not selected",fn:function(){t.filter(!1)}}];return{selection:e[0].label,options:e}},Wt.methods={select:function(t){t.fn(),this.selection=t.label},filter:function(e){var a,n=(a=e,function(e){return t.getters.isItemSelected(e)===a}),o={key:Gt,comparator:n};t.mutations.addFilter(o)},removeFilter:function(){t.mutations.removeFilter(Gt)}},Wt};Jt.options=Wt;var Qt=Jt,Zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-dropdown",{ref:"dropdown",staticClass:"m-2",attrs:{size:"sm",text:t.selection}},t._l(t.options,function(e){return a("b-dropdown-item",{key:e.label},[a("a",{attrs:{role:"button"},on:{click:function(a){return t.select(e)}}},[t._v(t._s(e.label))])])}),1)},staticRenderFns:[]},te=a("VU/8")(Qt,Zt,!1,null,null,null).exports,ee={strings:function(t,e,a){var n=t?t.toUpperCase().trim():"",o=e?e.toUpperCase().trim():"";return n<o?-1*a:n>o?1*a:0},numbers:function(t,e,a){return a*(t-e)},dates:function(t,e,a){return a*((t?t.getTime():0)-(e?e.getTime():0))},bool:function(t,e,a){return a*((t?1:0)-(e?1:0))}},ae=function(t,e,a){var n={};return function(o,s){return ee[t](Tt(o,e,n),Tt(s,e,n),a)}},ne="sort-asc",oe="sort-desc",se={},re=function(t){return se.props={item:{required:!0},disable:{type:Boolean}},se.methods={changeHandler:function(e){t.mutations.toggleItemSelection(this.item)}},se.computed={isSelected:{get:function(){return t.getters.isItemSelected(this.item)},set:function(){}}},se.watch={disable:function(e){e&&this.isSelected&&t.mutations.toggleItemSelection(this.item)}},se};re.options=se;var ie=re,ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isSelected,expression:"isSelected"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isSelected)?t._i(t.isSelected,null)>-1:t.isSelected},on:{change:[function(e){var a=t.isSelected,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.isSelected=a.concat([null])):s>-1&&(t.isSelected=a.slice(0,s).concat(a.slice(s+1)))}else t.isSelected=o},t.changeHandler]}})])},staticRenderFns:[]},le=a("VU/8")(ie,ce,!1,null,null,null).exports,ue={},de=function(t){return ue.props={items:{type:Array,required:!0}},ue.computed={itemsCount:function(){return this.items.length},totalSelectedCount:function(){return t.getters.selectedItems.length},pageSelectedCount:function(){return this.items.reduce(function(e,a){return t.getters.isItemSelected(a)&&e++,e},0)},areSelected:function(){return this.itemsCount-this.pageSelectedCount==0?(this.checkHalf(!1),!0):0===this.totalSelectedCount?(this.checkHalf(!1),!1):(this.checkHalf(!0),!1)}},ue.methods={checkHalf:function(t){this.$refs.checkbox&&(this.$refs.checkbox.indeterminate=t)},toggleAll:function(e){var a={items:this.items,areSelected:e.target.checked};t.mutations.setItemsSelection(a)}},ue};de.options=ue;var me=de,pe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-group btn-group-sm bulk-selector",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("input",{ref:"checkbox",attrs:{type:"checkbox"},domProps:{checked:t.areSelected},on:{change:t.toggleAll}})]),t._v(" "),t.totalSelectedCount?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("span",[t._v(t._s(t.totalSelectedCount)+" "+t._s(t.totalSelectedCount>1?"Records":"Record")+" selected")])]):t._e(),t._v(" "),t.totalSelectedCount&&t.$slots.default?a("b-dropdown",{attrs:{text:"Bulk actions"}},[t._t("default")],2):t._e()],1)},staticRenderFns:[]},ve=a("VU/8")(me,pe,!1,null,null,null).exports,fe=a("y1vT"),he=a.n(fe),ge={TableStore:Mt,InputFilter:Ot,SelectFilter:zt,DateFilter:Xt,MarkedFilter:te,SortDirective:function(t){return{bind:function(e,a,n){var o=a.value,s=o.sortKey,r=o.compare,i=o.initOrder,c=null;function l(){null===c||-1===c?(c=1,e.classList.add(ne),e.classList.remove(oe)):(c=-1,e.classList.add(oe),e.classList.remove(ne));var a={sortId:s+c,comparator:ae(r,s,c),onKeyChangeCallback:u};t.mutations.setSorter(a)}function u(t){void 0!==t&&t.startsWith(s)||(e.classList.remove(oe),e.classList.remove(ne),c=null)}e.classList.add("sort"),e.addEventListener("click",l),i&&(c="DESC"===i?1:-1,l())}}},CheckboxSelect:le,BulkSelector:ve,tableStoreMixin:function(t){return{computed:{pageItems:function(){return t.getters.pageItems(this.itemsPerPage)},totalRows:function(){return t.getters.totalRows()},pages:function(){return t.getters.totalPages(this.itemsPerPage)},page:{get:function(){return t.getters.page()},set:function(e){t.mutations.setPage(e)}}},methods:{setItemsPerPage:he()(function(e){var a=+e.target.value;t.mutations.setPage(1),!isNaN(a)&&a>0?this.itemsPerPage=a:10===this.itemsPerPage&&0===a?(this.itemsPerPage=1,this.itemsPerPage=10):this.itemsPerPage=10},300)}}}},_e=a("sb1D"),ye={methods:{runAfterSCisSet:function(t){this.$store.getters.selectedCompany?t():this.$store.watch(function(t,e){return e.selectedCompany},function(e){e&&t()})}}},be={},Ce=function(t){return be.name="AutoFxSettings",be.mixins=[ge.tableStoreMixin(t),ye],be.directives={Sort:ge.SortDirective(t)},be.components={SelectFilter:ge.SelectFilter(t),AutoFxSwitchModal:Ct},be.data=function(){return{pauseChange:!1,currentData:null,loading:!1,itemsPerPage:20,showFilters:!1,compare:{string:_e.a.string}}},be.created=function(){this.runAfterSCisSet(this.loadCSAutoFxRates)},be.computed={selectedItems:function(){return t.getters.selectedItems()},allItems:function(){return t.getters.items()}},be.methods={loadCSAutoFxRates:function(){var e=this;this.loading=!0,this.$store.dispatch("loadCSAutoFxRates").then(function(){t.mutations.setItems(e.$store.getters.getAutoFxRates)}).finally(function(){e.loading=!1})},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.mutations.removeAllFilters()},disable:function(t){this.currentData=t,this.multipleActive=!1,this.$refs.questionModal.openQuestion(this.$t("Are you sure you want to STOP auto Fx Rate ?"))},multiple:function(t){this.multipleActive=!0,this.$refs.questionModal.openQuestion(this.$t("Are you sure you want to STOP auto for selected Fx Rates ?"))},enable:function(t){this.currentData=t,this.multipleActive=!1,this.$refs.questionModal.openDateQuestion(this.$t("You are going to start auto Fx Rate for ")+t.currency.isoCode)},change:function(t){this.currentData=t,this.multipleActive=!1,this.$refs.questionModal.openDateQuestion(this.$t("You are going to change auto Fx Rate for ")+t.currency.isoCode)},modalConfirm:function(t){var e=this;if(this.multipleActive)this.$store.dispatch("massDeactivateAutoFxRate",this.selectedItems).then(function(){e.loadCSAutoFxRates()});else{var a=this.allItems.filter(function(t){return t.currency.id===e.currentData.currency.id})[0];null!==this.currentData.sourceID?(a.date=new Date(t),null===this.currentData.oldSourceID?this.$store.dispatch("activateAutoFxRate",a).then(function(){e.loadCSAutoFxRates()}):this.$store.dispatch("switchAutoFxRate",a).then(function(){e.loadCSAutoFxRates()})):(a.date="",this.$store.dispatch("deactivateAutoFxRate",a).then(function(){e.loadCSAutoFxRates()})),a.oldSourceID=a.sourceID}},modalCancel:function(){var t=this,e=this.allItems.filter(function(e){return e.currency.id===t.currentData.currency.id})[0];e.sourceID=e.oldSourceID},turnSelected:function(t){this.multiple(this.selectedItems)},changeCurrent:function(t){var e=this;setTimeout(function(){e.pauseChange||(null===t.oldSourceID?e.enable(t):null===t.sourceID?e.disable(t):e.change(t))},25)}},be};Ce.options=be;var De=Ce(ge.TableStore("AutoFxSettings")),$e={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("AutoFxSwitchModal",{ref:"questionModal",on:{confirm:t.modalConfirm,cancel:t.modalCancel}}),t._v(" "),a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("b-btn",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])],1),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("Label")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Code")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("on/off")))])]),t._v(" "),t.showFilters?a("tr",[a("th"),t._v(" "),a("th",[a("SelectFilter",{attrs:{filterKey:"currency.isoCode",items:t.allItems,compare:t.compare.string}})],1),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.currency?e.currency.name:""))]),t._v(" "),a("td",[t._v(t._s(e.currency?e.currency.isoCode:""))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.date)))]),t._v(" "),a("td",[a("b-form-select",{staticClass:"mb-3",attrs:{size:"sm"},on:{change:function(a){return t.changeCurrent(e)}},model:{value:e.sourceID,callback:function(a){t.$set(e,"sourceID",a)},expression:"current.sourceID"}},[a("option",{domProps:{value:null}},[t._v("none")]),t._v(" "),t._l(e.sources,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.description))])})],2)],1)])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},xe=a("VU/8")(De,$e,!1,null,null,null).exports;o.default.use(x.a);var we="__selected__",Se={items:[],filteredItems:[],sorter:{id:null,comparator:null,onKeyChangeCallback:function(){}},filters:{},page:1};function Re(t){var e=$t()(t.filters).reduce(function(e,a){return e.filter(function(e){return t.filters[a](e)})},t.items.slice(0));t.page=1,t.filteredItems=t.sorter.comparator?e.sort(t.sorter.comparator):e}function Fe(t){return t[we]||!1}function Ie(t,e){t.items=e,t.filteredItems=t.items,t.sorter=wt()({},Se.sorter),t.filters=wt()({},Se.filters),t.page=Se.page}var Pe=function(t){var e=wt()({name:t},Se),a={getItems:function(t){return t.items},pageItems:function(t){return function(e){if(e){var a=(t.page-1)*e,n=t.page*e;return t.filteredItems.slice(a,n)}return t.filteredItems}},totalRows:function(t){return t.filteredItems.length},totalPages:function(t){return function(e){return Math.ceil(t.filteredItems.length/e)}},selectedItems:function(t){return t.items.filter(Fe)},isItemSelected:function(t){return Fe},page:function(t){return t.page}},n={removeItem:function(t,e){var a=t.items.indexOf(e);-1!==a&&t.items.splice(a,1)},setInitialState:function(t,e){t.items!==e&&Ie(t,e)},setItems:function(t,e){e?(t.items=e,t.filteredItems={},Re(t)):(t.sorter.onKeyChangeCallback(),Ie(t,[]))},resetState:function(t){t.sorter.onKeyChangeCallback(),Ie(t,[])},addFilter:function(t,e){t.filters[e.key]=e.comparator,Re(t)},removeFilter:function(t,e){t.filters[e]&&(delete t.filters[e],Re(t))},removeAllFilters:function(t){$t()(t.filters).length>0&&(t.filters={},Re(t))},setSorter:function(t,e){var a=t.sorter;a.id!==e.sortId&&(a.onKeyChangeCallback(e.sortId),a.id=e.sortId,a.comparator=e.comparator,a.onKeyChangeCallback=e.onKeyChangeCallback,t.filteredItems.sort(a.comparator))},toggleItemSelection:function(t,e){o.default.set(e,we,!e[we])},setItemsSelection:function(t,e){e.items.forEach(function(t){o.default.set(t,we,e.areSelected)})},setPage:function(t,e){t.page=e}};return new x.a.Store({state:e,getters:a,mutations:n})},Me={},ke=function(t){return Me.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},Me.methods={setFilter:kt(function(e){var a,n,o=this,s=e.target.value;if(null!==s&&""!==s){var r=(a=s,n={},function(t){return o.compare(Tt(t,o.filterKey,n),a)}),i={key:o.filterKey,comparator:r};t.commit("addFilter",i)}else t.commit("removeFilter",o.filterKey)},300)},Me};ke.options=Me;var Te=ke,Ne={render:function(){var t=this.$createElement;return(this._self._c||t)("input",{staticClass:"form-control form-control-sm",attrs:{type:"text"},on:{input:this.setFilter}})},staticRenderFns:[]},Ae=a("VU/8")(Te,Ne,!1,null,null,null).exports;var Ee={},Ue=function(t){return Ee.props={items:{required:!0},filterKey:{required:!0},compare:{type:Function,required:!0}},Ee.computed={options:function(){return t=this.items,e=this.filterKey,a=[],n={},t.forEach(function(t){var o=Tt(t,e,n);null!==o&&""!==o&&-1===a.indexOf(o)&&a.push(o)}),a;var t,e,a,n}},Ee.methods={setFilter:function(e){var a,n,o=this,s=e.target.value;if(""!==s){var r=(a=s,n={},function(t){return o.compare(Tt(t,o.filterKey,n),a)}),i={key:o.filterKey,comparator:r};t.commit("addFilter",i)}else t.commit("removeFilter",o.filterKey)}},Ee};Ue.options=Ee;var Oe=Ue,Ve={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control form-control-sm",on:{change:t.setFilter}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.options,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)},staticRenderFns:[]},Le=a("VU/8")(Oe,Ve,!1,null,null,null).exports,qe={},Ke=function(t){return qe.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},qe.data=function(){return{date:null}},qe.watch={date:function(e){var a,n,o=this,s=new Date(e);if(null!==e&&""!==e){var r=(a=s,n={},function(t){return o.compare(Tt(t,o.filterKey,n),a)}),i={key:o.filterKey,comparator:r};t.commit("addFilter",i)}else t.commit("removeFilter",o.filterKey)}},qe};Ke.options=qe;var ze=Ke,Be={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{ref:"dropdown"},[a("btn",{staticClass:"dropdown-toggle calendar-btn"},[t._v(t._s(t.date)+" "),a("i",{staticClass:"fa fa-calendar"})]),t._v(" "),a("template",{slot:"dropdown"},[a("li",[a("date-picker",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])],2)},staticRenderFns:[]},je=a("VU/8")(ze,Be,!1,null,null,null).exports,He="marked"+Date.now(),Ye={},Xe=function(t){return Ye.data=function(){var t=this,e=[{label:"All",fn:function(){t.removeFilter()}},{label:"Selected",fn:function(){t.filter(!0)}},{label:"Not selected",fn:function(){t.filter(!1)}}];return{selection:e[0].label,options:e}},Ye.methods={select:function(t){t.fn(),this.selection=t.label},filter:function(e){var a,n=(a=e,function(e){return t.getters.isItemSelected(e)===a}),o={key:He,comparator:n};t.commit("addFilter",o)},removeFilter:function(){t.commit("removeFilter",He)}},Ye};Xe.options=Ye;var Ge=Xe,We={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-dropdown",{ref:"dropdown",staticClass:"m-2",attrs:{size:"sm",text:t.selection}},t._l(t.options,function(e){return a("b-dropdown-item",{key:e.label},[a("a",{attrs:{role:"button"},on:{click:function(a){return t.select(e)}}},[t._v(t._s(e.label))])])}),1)},staticRenderFns:[]},Je=a("VU/8")(Ge,We,!1,null,null,null).exports,Qe="sort-asc",Ze="sort-desc",ta={},ea=function(t){return ta.props={item:{required:!0},disable:{type:Boolean}},ta.methods={changeHandler:function(e){t.commit("toggleItemSelection",this.item)}},ta.computed={isSelected:{get:function(){return t.getters.isItemSelected(this.item)},set:function(){}}},ta.watch={disable:function(e){e&&this.isSelected&&t.commit("toggleItemSelection",this.item)}},ta};ea.options=ta;var aa=ea,na={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isSelected,expression:"isSelected"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isSelected)?t._i(t.isSelected,null)>-1:t.isSelected},on:{change:[function(e){var a=t.isSelected,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.isSelected=a.concat([null])):s>-1&&(t.isSelected=a.slice(0,s).concat(a.slice(s+1)))}else t.isSelected=o},t.changeHandler]}})])},staticRenderFns:[]},oa=a("VU/8")(aa,na,!1,null,null,null).exports,sa={},ra=function(t){return sa.props={items:{type:Array,required:!0}},sa.computed={itemsCount:function(){return this.items.length},totalSelectedCount:function(){return t.getters.selectedItems.length},pageSelectedCount:function(){return this.items.reduce(function(e,a){return t.getters.isItemSelected(a)&&e++,e},0)},areSelected:function(){return this.itemsCount-this.pageSelectedCount==0?(this.checkHalf(!1),!0):0===this.totalSelectedCount?(this.checkHalf(!1),!1):(this.checkHalf(!0),!1)}},sa.methods={checkHalf:function(t){this.$refs.checkbox&&(this.$refs.checkbox.indeterminate=t)},toggleAll:function(e){var a={items:this.items,areSelected:e.target.checked};t.commit("setItemsSelection",a)}},sa};ra.options=sa;var ia=ra,ca={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-group btn-group-sm bulk-selector",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("input",{ref:"checkbox",attrs:{type:"checkbox"},domProps:{checked:t.areSelected},on:{change:t.toggleAll}})]),t._v(" "),t.totalSelectedCount?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("span",[t._v(t._s(t.totalSelectedCount)+" "+t._s(t.totalSelectedCount>1?"Records":"Record")+" selected")])]):t._e(),t._v(" "),t.totalSelectedCount&&t.$slots.default?a("b-dropdown",{attrs:{text:"Bulk actions"}},[t._t("default")],2):t._e()],1)},staticRenderFns:[]},la={TableStore:Pe,InputFilter:Ae,SelectFilter:Le,DateFilter:je,MarkedFilter:Je,SortDirective:function(t){return{bind:function(e,a,n){var o=a.value,s=o.sortKey,r=o.compare,i=o.initOrder,c=null;function l(){null===c||-1===c?(c=1,e.classList.add(Qe),e.classList.remove(Ze)):(c=-1,e.classList.add(Ze),e.classList.remove(Qe));var a={sortId:s+c,comparator:ae(r,s,c),onKeyChangeCallback:u};t.commit("setSorter",a)}function u(t){void 0!==t&&t.startsWith(s)||(e.classList.remove(Ze),e.classList.remove(Qe),c=null)}e.classList.add("sort"),e.addEventListener("click",l),i&&(c="DESC"===i?1:-1,l())}}},CheckboxSelect:oa,BulkSelector:a("VU/8")(ia,ca,!1,null,null,null).exports},ua=function(t){return{computed:{pageItems:function(){return t.getters.pageItems(this.itemsPerPage)},totalRows:function(){return t.getters.totalRows},pages:function(){return t.getters.totalPages(this.itemsPerPage)},page:{get:function(){return t.getters.page},set:function(e){t.commit("setPage",e)}}},methods:{setItemsPerPage:he()(function(e){var a=+e.target.value;t.commit("setPage",1),!isNaN(a)&&a>0?this.itemsPerPage=a:10===this.itemsPerPage&&0===a?(this.itemsPerPage=1,this.itemsPerPage=10):this.itemsPerPage=10},300)}}},da=la.TableStore(),ma={name:"FxRatesTable",mixins:[ua(da)],directives:{Sort:la.SortDirective(da)},props:{fxRates:{},averageFxRates:{},selectedDateProp:{}},components:{Datepicker:gt.a,InputFilter:la.InputFilter(da),SelectFilter:la.SelectFilter(da),DateFilter:la.DateFilter(da),BulkSelector:la.BulkSelector(da),CheckboxSelect:la.CheckboxSelect(da),MarkedFilter:la.MarkedFilter(da)},computed:{allItems:function(){return da.getters.getItems},selectedCompany:function(){return this.$store.getters.selectedCompany},selectedDate:{get:function(){return this.selectedDateProp},set:function(t){this.$emit("changeSelectedDate",t)}}},data:function(){return{editActiveForId:null,loading:!1,internalRate:0,itemsPerPage:5,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day},locales:{en:_t.b,bg:_t.a}}},methods:{haveManual:function(t){return null!==t.manual},showInvModal:function(){this.$emit("showInvModal")},haveAuto:function(t){return null!==t.auto},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||da.commit("removeAllFilters")},deleteFxRate:function(t){var e=this;this.$store.dispatch("removeFxRate",t).then(function(){e.$emit("deleteFxRate",t)}).catch(function(t){e.$customMsg.showErrorMessage(e.$t(t.messageDetail))})},editFxRate:function(t){this.internalEditRate=t.manual.rate,this.editActiveForId=t.id},cancelEdit:function(){this.editActiveForId=null},saveEdit:function(){var t=this,e=this.pageItems.filter(function(e){return e.id===t.editActiveForId})[0];e.manual.rate=this.internalEditRate,this.$store.dispatch("editFxRate",e).then(function(){t.$emit("reload")}),this.editActiveForId=null}},watch:{fxRates:function(t){da.commit("setItems",t)}}},pa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive fx-rates-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"left-side-toolbar"},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("b-btn",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])],1),t._v(" "),a("b-input-group",{staticClass:"items-counter-width mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp",maxlength:"3"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})]),t._v(" "),a("datepicker",{class:{"is-invalid":t.errors.has("toDate")},attrs:{"bootstrap-styling":!0,id:"month",name:"month",language:t.locales[t.$i18n.locale],"minimum-view":"month",format:"MMMM yyyy","full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1),t._v(" "),a("div",{staticClass:"right-side-toolbar"},[a("b-btn",{staticClass:"btn btn-success btn-sm",on:{click:t.showInvModal}},[t._v(t._s(t.averageFxRates?t.$t("Add Average FX Rate"):t.$t("Add Daily FX Rate")))])],1)]),t._v(" "),a("table",{staticClass:"table table-striped text-center"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"date",compare:"dates"},expression:"{sortKey: 'date', compare: 'dates'}"}]},[t._v(t._s(t.$t("Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"toCurrency.code",compare:"strings"},expression:"{sortKey: 'toCurrency.code', compare: 'strings'}"}]},[t._v(t._s(t.$t("Units")))]),t._v(" "),a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"rate",compare:"numbers"},expression:"{sortKey: 'rate', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Rate")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"toCurrency.code",compare:"strings"},expression:"{sortKey: 'toCurrency.code', compare: 'strings'}"}]},[t._v(t._s(t.$t("Auto Units")))]),t._v(" "),a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"rate",compare:"numbers"},expression:"{sortKey: 'rate', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Auto Rate")))]),t._v(" "),a("th")]),t._v(" "),t.showFilters?a("tr",[a("th"),t._v(" "),a("th",[t._v("Currency: "),a("SelectFilter",{attrs:{filterKey:"toCurrency.code",compare:t.compare.string,items:t.allItems}})],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",[a("td",[t._v(t._s(t._f("bsDate")(e.date)))]),t._v(" "),t.haveManual(e)?[a("td",[t._v(t._s(e.manual?e.manual.units:"")+" "+t._s(e.toCurrency?e.toCurrency.code:""))]),t._v(" "),a("td",[t._v("=")]),t._v(" "),t.editActiveForId===e.id?a("td",[a("b-form-input",{attrs:{type:"number"},model:{value:t.internalEditRate,callback:function(e){t.internalEditRate=e},expression:"internalEditRate"}}),t._v("\n            "+t._s(t.selectedCompany.currency?t.selectedCompany.currency.code:"")+"\n          ")],1):t._e(),t._v(" "),t.editActiveForId!==e.id?a("td",[t._v("\n            "+t._s(e.manual?e.manual.rate:"")+" "+t._s(t.selectedCompany.currency?t.selectedCompany.currency.code:"")+"\n          ")]):t._e()]:t._e(),t._v(" "),t.haveManual(e)?t._e():[a("td"),t._v(" "),a("td"),t._v(" "),a("td")],t._v(" "),t.haveAuto(e)?[a("td",[t._v(t._s(e.auto?e.auto.units:"")+" "+t._s(e.toCurrency?e.toCurrency.code:""))]),t._v(" "),a("td",[t._v("=")]),t._v(" "),a("td",[t._v("\n            "+t._s(e.auto?e.auto.rate:"")+" "+t._s(t.selectedCompany.currency?t.selectedCompany.currency.code:"")+"\n          ")])]:t._e(),t._v(" "),t.haveAuto(e)?t._e():[a("td"),t._v(" "),a("td"),t._v(" "),a("td")],t._v(" "),t.haveManual(e)?[t.editActiveForId!==e.id?a("td",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(a){return t.editFxRate(e)}}},[t._v(t._s(t.$t("Edit")))]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.deleteFxRate(e)}}},[t._v(t._s(t.$t("Remove")))])]):t._e(),t._v(" "),t.editActiveForId===e.id?a("td",[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:t.saveEdit}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v(t._s(t.$t("Cancel")))])]):t._e()]:t._e(),t._v(" "),t.haveManual(e)?t._e():a("td",[t._v(t._s(t.$t("No manual Rate")))])],2)}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},va=a("VU/8")(ma,pa,!1,null,null,null).exports,fa={DAILY:{id:1,label:"Daily"},AVERAGE:{id:2,label:"Avarage"}},ha=[{id:1,label:"Balance Sheet",code:"BS",context:{IN:"Receivables",OUT:"Payables",FX_TYPES:[fa.DAILY]}},{id:2,label:"Income Statement",code:"IS",context:{IN:"Income",OUT:"Expense",FX_TYPES:[fa.DAILY,fa.AVERAGE]}},{id:3,label:"Cash Flow Statement",code:"CFS",context:{IN:"Cash Receipts",OUT:"Cash Paid",FX_TYPES:[fa.DAILY,fa.AVERAGE]}}],ga={misc:0,tax:1,software:2,responsibility:3},_a=[{id:1,label:"SuperUser"},{id:2,label:"Master"},{id:3,label:"User"},{id:4,label:"Guest"}],ya={VAT_REPORTING_DATE:{id:1,label:"vatReportingDate"},CORPTAX_FILLING_DATE:{id:2,label:"corpTaxFillingDate"},CORPTAX_DUE_DATE:{id:3,label:"corpTaxDueDate"},CORPTAX_ADVANCED_PAYMENTS_DATE:{id:4,label:"corpTaxAdvancedPaymentsDate"},AUDIT_DDL:{id:5,label:"auditDDL"}},ba=[{name:"1st",value:1},{name:"2nd",value:2},{name:"3rd",value:3},{name:"4th",value:4},{name:"5th",value:5},{name:"6th",value:6},{name:"7th",value:7},{name:"8th",value:8},{name:"9th",value:9},{name:"10th",value:10},{name:"11th",value:11},{name:"12th",value:12},{name:"13th",value:13},{name:"14th",value:14},{name:"15th",value:15},{name:"16th",value:16},{name:"17th",value:17},{name:"18th",value:18},{name:"19th",value:19},{name:"20th",value:20},{name:"21th",value:21},{name:"22th",value:22},{name:"23th",value:23},{name:"24th",value:24},{name:"25th",value:25},{name:"26th",value:26},{name:"27th",value:27},{name:"28th",value:28},{name:"29th",value:29},{name:"30th",value:30},{name:"31th",value:31},{name:"Last day",value:0}],Ca=[{name:"January",days:31},{name:"February",days:28},{name:"March",days:31},{name:"April",days:30},{name:"May",days:31},{name:"June",days:30},{name:"July",days:31},{name:"August",days:31},{name:"September",days:30},{name:"October",days:31},{name:"November",days:30},{name:"December",days:31}],Da=a("ZAW5"),$a={components:{ModelSelect:Da.ModelSelect,Datepicker:gt.a},props:{averageFxRates:{}},data:function(){return{locales:{en:_t.b,bg:_t.a},formError:"",formData:{currencyId:null,recordType:this.averageFxRates?2:1},convertedCurrencies:[]}},mounted:function(){var t=this;this.$store.dispatch("loadCurrencies").then(function(e){return t.currencyToOptions(e)})},computed:{formRecordTypeDaily:function(){return 1===this.formData.recordType},fxRecordsTypes:function(){var t=[];return $t()(fa).map(function(e){t.push(fa[e])}),t},formHasError:function(){return!!this.formError.length}},methods:{currencyToOptions:function(t){var e=[];t.forEach(function(t){e.push({value:t.id,text:t.code})}),this.convertedCurrencies=e},resetForm:function(){this.formError="",this.formData={currencyId:null,recordType:1},this.updateParent()},showError:function(t){this.formError=t.messageDetail},updateParent:function(){this.$emit("updateFormData",this.formData)}}},xa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-group",{attrs:{label:t.$t("Currency")+":"}},[a("ModelSelect",{attrs:{options:t.convertedCurrencies,placeholder:t.$t("Select currency ...")},on:{input:t.updateParent},model:{value:t.formData.currencyId,callback:function(e){t.$set(t.formData,"currencyId",e)},expression:"formData.currencyId"}})],1),t._v(" "),a("b-form-group",{attrs:{label:t.$t("Select ")+(t.averageFxRates?t.$t("Month"):t.$t("Date"))+":"}},[t.averageFxRates?a("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"minimum-view":"month",format:"MMMM yyyy","calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.recordDate,callback:function(e){t.$set(t.formData,"recordDate",e)},expression:"formData.recordDate"}}):a("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.recordDate,callback:function(e){t.$set(t.formData,"recordDate",e)},expression:"formData.recordDate"}})],1),t._v(" "),a("b-form-group",{attrs:{label:t.$t("Rate")+":"}},[a("b-input",{attrs:{type:"number"},model:{value:t.formData.recordRate,callback:function(e){t.$set(t.formData,"recordRate",e)},expression:"formData.recordRate"}})],1),t._v(" "),t.formHasError?a("div",{staticClass:"text-danger"},[t._v(t._s(t.formError))]):t._e()],1)},staticRenderFns:[]},wa={name:"FxRates",components:{FxRatesTable:va,FxRatesForm:a("VU/8")($a,xa,!1,null,null,null).exports},mixins:[ye],created:function(){this.runAfterSCisSet(this.loadCurrentFxRates)},props:{averageFxRates:{default:!1},selectedDate:{}},data:function(){return{formData:{},showInvModal:!1,loading:!1}},computed:{selectedCompany:function(){return this.$store.getters.selectedCompany},currentFxRates:function(){return this.$store.getters.getCurrentFxRates||[]}},methods:{deleteFxRate:function(t){null===t.auto?this.currentFxRates=this.currentFxRates.filter(function(e){return e.id!==t.id}):this.currentFxRates.filter(function(e){return null!==e.auto&&e.auto.id===t.auto.id})[0].manual=null},changeSelectedDate:function(t){this.$emit("onDateChange",t),this.loadCurrentFxRates(t)},reValidateOnChange:function(){this.loadCurrentFxRates(this.selectedDate)},onModalOk:function(t){var e=this;t.preventDefault(),this.formData.recordDate&&this.formData.currencyId&&this.formData.recordRate?this.$store.dispatch("addFxRate",this.formData).then(function(t){e.$customMsg.showSuccessMessage(e.$t("Successfully created ")+t.typeName+e.$t(" for ")+t.refCurrencyIsoCode),e.$refs.fxRatesForm.resetForm(),e.showInvModal=!1,e.loadCurrentFxRates()}).catch(function(t){e.$customMsg.showErrorMessage(e.$t("Error in creating FxRate :")+t.messageDetail),e.$refs.fxRatesForm.showError(t)}):this.$refs.fxRatesForm.showError({messageDetail:this.$t("Please fill all info!")})},onModalCancel:function(t){t.preventDefault(),this.$refs.fxRatesForm.resetForm(),this.showInvModal=!1},loadCurrentFxRates:function(t){var e=this;this.loading=!0;var a={data:t||this.selectedDate,average:this.averageFxRates};this.$store.dispatch("loadCurrentFxRates",a).finally(function(){e.loading=!1})},updateFormData:function(t){this.formData=t}}},Sa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fx-rates-content"},[a("b-modal",{attrs:{title:t.averageFxRates?t.$t("Add Average FX Rate"):t.$t("Add Daily FX Rate")},on:{ok:t.onModalOk,cancel:t.onModalCancel},model:{value:t.showInvModal,callback:function(e){t.showInvModal=e},expression:"showInvModal"}},[a("button",{staticClass:"close-btn",attrs:{slot:"modal-header-close"},on:{click:t.onModalCancel},slot:"modal-header-close"},[a("i",{staticClass:"far fa-times-circle"})]),t._v(" "),a("FxRatesForm",{ref:"fxRatesForm",attrs:{averageFxRates:t.averageFxRates},on:{updateFormData:t.updateFormData}})],1),t._v(" "),a("FxRatesTable",{attrs:{fxRates:t.currentFxRates,averageFxRates:t.averageFxRates,errors:t.errors,selectedDateProp:t.selectedDate},on:{deleteFxRate:t.deleteFxRate,changeSelectedDate:t.changeSelectedDate,reValidateOnChange:t.reValidateOnChange,showInvModal:function(e){t.showInvModal=!0}}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ra={name:"FxPage",components:{FxRates:a("VU/8")(wa,Sa,!1,null,null,null).exports,AutoFxSettings:xe},data:function(){return{activeTab:0,selectedDate:new Date(Date.now())}},methods:{onTabChange:function(t){this.activeTab=t},onDateChange:function(t){this.selectedDate=t}}},Fa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fx-rates"},[a("h2",[t._v(t._s(t.$t("Fx Rates")))]),t._v(" "),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:this.$t("Daily Rates"),active:""}},[0===t.activeTab?a("FxRates",{attrs:{selectedDate:t.selectedDate},on:{onDateChange:t.onDateChange}}):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:this.$t("Average Rates")}},[1===t.activeTab?a("FxRates",{attrs:{selectedDate:t.selectedDate,averageFxRates:"true"},on:{onDateChange:t.onDateChange}}):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:this.$t("Settings")}},[2===t.activeTab?a("AutoFxSettings"):t._e()],1)],1)],1)},staticRenderFns:[]},Ia=a("VU/8")(Ra,Fa,!1,null,null,null).exports,Pa={components:{Datepicker:gt.a},data:function(){return{locales:{en:_t.b,bg:_t.a},formData:{},statementTypes:ha,isFileCorrect:null,formSubmitted:!1,errMsg:null,loading:!1}},props:{uploadData:{}},created:function(){var t=this;null!==this.uploadData&&setTimeout(function(){t.formData={fromDate:t.uploadData.startDate,toDate:t.uploadData.endDate},t.statementTypes.forEach(function(e){e.id===t.uploadData.statementID&&(t.formData.statementType=e)})},500)},methods:{checkFile:function(){if(this.isFileCorrect=!1,this.$validator.errors.remove("excelFile"),void 0===this.formData.file)this.$validator.errors.add({field:"excelFile",msg:this.$t("No file selected")});else{var t=this.formData.file.name.substr(this.formData.file.name.lastIndexOf(".")+1);"xls"===t||"xlsx"===t?this.isFileCorrect=!0:this.$validator.errors.add({field:"excelFile",msg:this.$t("Please, select an Excel file")})}},reValidateOnChange:function(){var t=this;this.formSubmitted&&setTimeout(function(){t.checkFile(),t.$validator.validateAll()},100)},validateBeforeSubmit:function(){var t=this;setTimeout(function(){t.checkFile(),t.formSubmitted=!0,t.$validator.validateAll().then(function(e){e&&t.isFileCorrect&&(t.loading=!0,t.$store.dispatch("uploadExcel",t.formData).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))})},100)}}},Ma={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"upload-form",on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"statementType"}},[t._v(t._s(t.$t("Statement type"))+":")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("statementType")},attrs:{id:"statementType",name:"statementType",plain:!0,options:t.statementTypes},on:{input:t.reValidateOnChange},model:{value:t.formData.statementType,callback:function(e){t.$set(t.formData,"statementType",e)},expression:"formData.statementType"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("statementType"),expression:"errors.has('statementType')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a statement type"))+".")])],1),t._v(" "),!t.formData.statementType||t.formData.statementType.id>1?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"from"}},[t._v(t._s(t.$t("From date"))+":")]),t._v(" "),a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("from")},attrs:{"bootstrap-styling":!0,id:"from",name:"from",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{selected:t.reValidateOnChange},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("from"),expression:"errors.has('from')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"to"}},[t._v(t._s(t.$t("To date"))+":")]),t._v(" "),a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("to")},attrs:{"bootstrap-styling":!0,id:"to",name:"to",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{selected:t.reValidateOnChange},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("to"),expression:"errors.has('to')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"excelFile"}},[t._v(t._s(t.$t("Excel file"))+":")]),t._v(" "),a("b-form-file",{attrs:{placeholder:"Choose a file...",name:"excelFile",id:"excelFile",state:t.isFileCorrect},on:{change:t.reValidateOnChange},model:{value:t.formData.file,callback:function(e){t.$set(t.formData,"file",e)},expression:"formData.file"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("excelFile"),expression:"errors.has('excelFile')"}],staticClass:"text-danger"},[t._v(t._s(t.errors.first("excelFile"))+".")])],1),t._v(" "),a("div",{staticClass:"py-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(t._s(t.$t("Upload")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},ka=a("VU/8")(Pa,Ma,!1,null,null,null).exports,Ta={data:function(){return{toggle:!1,loading:!1}},methods:{open:function(){this.toggle=!0,document.body.classList.add("fpm-open-body")},close:function(){this.toggle=!1,document.body.classList.remove("fpm-open-body"),this.$emit("close")}}},Na={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"full-page-modal",class:{"fpm-open":this.toggle}},[e("div",{staticClass:"fpm-head",attrs:{id:"fpm-head"}},[this._t("head"),this._v(" "),e("a",{staticClass:"close-btn",attrs:{title:"Close"},on:{click:this.close}},[e("i",{staticClass:"far fa-times-circle"})])],2),this._v(" "),e("div",{staticClass:"fpm-body"},[this._t("default")],2)])},staticRenderFns:[]},Aa=a("VU/8")(Ta,Na,!1,null,null,null).exports,Ea={props:["contractor"],computed:{statementType:function(){return this.$store.getters.statementType},dates:function(){var t=this.$store.getters.importReceipt,e=h.formatDate(t.toDate);return+t.statementType.id>1&&(e=h.formatDate(t.fromDate)+" - "+e),e},companiesStr:function(){var t=this.$store.getters.selectedCompany.name;return this.contractor&&(t=t+" - "+this.contractor),t}}},Ua={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"heading-text"},[this._v("\n  "+this._s(this.companiesStr)+",\n  "+this._s(this.statementType.label)+",\n  "+this._s(this.dates)+"\n")])},staticRenderFns:[]},Oa={props:["value"],components:{FullPageModal:Aa,ModalHead:a("VU/8")(Ea,Ua,!1,null,null,null).exports},data:function(){return{contractorName:"",loading:!1}},watch:{value:function(t){var e=this;t&&(this.$refs.modal.open(),this.loading=!0,this.load(t).finally(function(){e.loading=!1}))}},methods:{close:function(){this.showFilters&&(this.showFilters=!1),this.$emit("input",null)}}},Va={},La=function(t){return Va.name="rcRecordsModal",Va.mixins=[Oa,ua(t)],Va.directives={Sort:la.SortDirective(t)},Va.components={InputFilter:la.InputFilter(t),SelectFilter:la.SelectFilter(t),DateFilter:la.DateFilter(t),BulkSelector:la.BulkSelector(t),CheckboxSelect:la.CheckboxSelect(t),MarkedFilter:la.MarkedFilter(t)},Va.data=function(){return{dataChanged:!1,itemsPerPage:5,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},Va.computed={records:function(){return this.$store.getters.recognizedCompanyRecords(this.value)},statementType:function(){return this.$store.getters.statementType},dates:function(){var t=this.$store.getters.importReceipt,e=h.formatDate(t.toDate);return t.fromDate&&(e=h.formatDate(t.fromDate)+" - "+e),e},myCompany:function(){return this.$store.getters.selectedCompany}},Va.methods={load:function(t){return this.dataChanged=!1,this.contractorName=t.company.name,this.$store.dispatch("loadRecognizedCompanyRecords",t)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},deleteSelected:function(){var e=this;t.getters.selectedItems.forEach(function(t){return e.deleteCurrent(t)})},deleteCurrent:function(e){var a=this;this.$store.dispatch("removeValidRecord",e).then(function(){a.dataChanged=!0,t.commit("removeItem",e)})},close:function(){this.dataChanged&&this.$emit("dataChanged")}},Va.watch={records:function(e){t.commit("setItems",e)}},Va};La.options=Va;var qa=La(la.TableStore("rcRecordsModal")),Ka={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("template",{slot:"head"},[t._v("\n    "+t._s(t.myCompany.name)+" - "+t._s(t.contractorName)+",\n    "+t._s(t.statementType.label)+",\n    "+t._s(t.dates)+"\n  ")]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v(t._s(t.$t("Line")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.line},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),t._v(" "),a("td",[t._v(t._s(e.line))]),t._v(" "),a("td",[t._v(t._s(e.account))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.payer))]),t._v(" "),a("td",[t._v(t._s(e.receiver))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),t._v(" "),a("td",[t._v(t._s(e.currency?e.currency.code:""))]),t._v(" "),a("td",[t._v(t._s(e.docAmount))]),t._v(" "),a("td",[t._v(t._s(e.desc))]),t._v(" "),a("td",[a("button",{on:{click:function(a){return t.deleteCurrent(e)}}},[t._v(t._s(t.$t("Delete")))])])])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)],2)},staticRenderFns:[]},za={components:{rcRecordsModal:a("VU/8")(qa,Ka,!1,null,null,null).exports},data:function(){return{selectedSet:null}},computed:{sets:function(){return this.$store.getters.recognizedCompaniesSets},context:function(){return this.$store.getters.statementTypeContext}},methods:{show:function(t){this.selectedSet=t},remove:function(t){this.$store.dispatch("removeValidSet",t).then(this.reloadData)},reloadData:function(){this.$store.dispatch("loadSummary")}}},Ba={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{colspan:"2"}}),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.IN))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.OUT))]),t._v(" "),a("th",{attrs:{colspan:"2"}})]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Company")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),a("tbody",t._l(t.sets,function(e){return a("tr",{key:e.company.name+e.currency.code},[a("td",[t._v(t._s(e.company.name))]),t._v(" "),a("td",[t._v(t._s(e.currency.code))]),t._v(" "),a("td",[t._v(t._s(e.receivables.amount))]),t._v(" "),a("td",[t._v(t._s(e.receivables.count))]),t._v(" "),a("td",[t._v(t._s(e.payables.amount))]),t._v(" "),a("td",[t._v(t._s(e.payables.count))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-default btn-sm",attrs:{title:"View details"},on:{click:function(a){return t.show(e)}}},[t._v(t._s(t.$t("View Details")))])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{title:"Remove the valid transactions"},on:{click:function(a){return t.remove(e)}}},[t._v(t._s(t.$t("Remove")))])])])}),0)]),t._v(" "),a("rcRecordsModal",{on:{dataChanged:t.reloadData},model:{value:t.selectedSet,callback:function(e){t.selectedSet=e},expression:"selectedSet"}})],1)},staticRenderFns:[]},ja=a("VU/8")(za,Ba,!1,null,null,null).exports,Ha={},Ya=function(t){return Ha.name="ucRecordsModal",Ha.mixins=[Oa,ua(t)],Ha.directives={Sort:la.SortDirective(t)},Ha.components={InputFilter:la.InputFilter(t),SelectFilter:la.SelectFilter(t),DateFilter:la.DateFilter(t),BulkSelector:la.BulkSelector(t),CheckboxSelect:la.CheckboxSelect(t),MarkedFilter:la.MarkedFilter(t)},Ha.data=function(){return{itemsPerPage:10,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},Ha.computed={records:function(){return this.$store.getters.unrecognizedCompanyRecords(this.value)}},Ha.methods={load:function(t){return this.contractorName=t.company.name,this.$store.dispatch("loadUnrecognizedCompanyRecords",t)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},Ha.watch={records:function(e){t.commit("setItems",e)}},Ha};Ya.options=Ha;var Xa=Ya(la.TableStore("ucRecordsModal")),Ga={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("modal-head",{attrs:{slot:"head",contractor:t.contractorName},slot:"head"}),t._v(" "),a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"line",compare:"numbers"},expression:"{sortKey: 'line', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Line")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docAmount",compare:"numbers"},expression:"{sortKey: 'docAmount', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]),t._v(" "),t.showFilters?a("tr",[a("td",[a("InputFilter",{attrs:{filterKey:"line",compare:t.compare.numAsString}})],1),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td",[a("SelectFilter",{attrs:{filterKey:"currency.code",items:t.records,compare:t.compare.numAsString}})],1),t._v(" "),a("td"),t._v(" "),a("td")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.line},[a("td",{staticClass:"line-cell"},[t._v(t._s(e.line))]),t._v(" "),a("td",[t._v(t._s(e.account))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.payer))]),t._v(" "),a("td",[t._v(t._s(e.receiver))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),t._v(" "),a("td",[t._v(t._s(e.currency?e.currency.code:""))]),t._v(" "),a("td",[t._v(t._s(e.docAmount))]),t._v(" "),a("td",[t._v(t._s(e.desc))])])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)],1)},staticRenderFns:[]},Wa={components:{ucRecordsModal:a("VU/8")(Xa,Ga,!1,null,null,null).exports},mixins:[ye],created:function(){this.runAfterSCisSet(this.loadContacts)},data:function(){return{selectedSet:null,selectedContact:{}}},computed:{selectContactsOptions:function(){return this.contacts.map(function(t){return{text:t.name,value:t}})},contacts:function(){return this.$store.getters.contacts},sets:function(){return this.$store.getters.unrecognizedCompaniesSets},context:function(){return this.$store.getters.statementTypeContext}},methods:{recognize:function(t,e){var a=e,n=t.company.name;this.$store.dispatch("createAlias",{refCompany:a,aname:n}).then(this.$store.dispatch("loadSummary"))},show:function(t){this.selectedSet=t},loadContacts:function(){this.loadStore("loadSCContacts")},loadStore:function(t){var e=this;this.loading=!0,this.$store.dispatch(t).finally(function(){e.loading=!1})}}},Ja={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.IN))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.OUT))]),t._v(" "),a("th",{attrs:{colspan:"2"}})]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Company")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),a("tbody",t._l(t.sets,function(e){return a("tr",{key:e.company.name},[a("td",[t._v(t._s(e.company.name))]),t._v(" "),a("td",[t._v(t._s(e.receivables.amount))]),t._v(" "),a("td",[t._v(t._s(e.receivables.count))]),t._v(" "),a("td",[t._v(t._s(e.payables.amount))]),t._v(" "),a("td",[t._v(t._s(e.payables.count))]),t._v(" "),a("td",[a("b-container",[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-form-select",{staticClass:"mb-3",attrs:{options:t.selectContactsOptions},model:{value:t.selectedContact[e.company.name],callback:function(a){t.$set(t.selectedContact,e.company.name,a)},expression:"selectedContact[set.company.name]"}})],1),t._v(" "),a("b-col",{attrs:{cols:"4"}},[a("button",{staticClass:"btn btn-info btn-sm",attrs:{title:t.$t("View details")},on:{click:function(a){return t.recognize(e,t.selectedContact[e.company.name])}}},[t._v(t._s(t.$t("Recognize")))])])],1)],1)],1),t._v(" "),a("td",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{title:t.$t("View details")},on:{click:function(a){return t.show(e)}}},[t._v(t._s(t.$t("View details")))])])])}),0)]),t._v(" "),a("ucRecordsModal",{model:{value:t.selectedSet,callback:function(e){t.selectedSet=e},expression:"selectedSet"}})],1)},staticRenderFns:[]},Qa=a("VU/8")(Wa,Ja,!1,null,null,null).exports,Za=la.TableStore("InvalidRecordsModal"),tn={},en=function(t){return tn.name="InvalidRecordsModal",tn.mixins=[Oa,ua(t)],tn.directives={Sort:la.SortDirective(t)},tn.components={InputFilter:la.InputFilter(t),SelectFilter:la.SelectFilter(t),DateFilter:la.DateFilter(t),BulkSelector:la.BulkSelector(t),CheckboxSelect:la.CheckboxSelect(t),MarkedFilter:la.MarkedFilter(t)},tn.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},tn.computed={records:function(){return this.$store.getters.invalidRecords}},tn.methods={load:function(){return this.$store.dispatch("loadInvalidRecords")},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},tn.watch={records:function(e){t.commit("setItems",e)}},tn};en.options=tn;var an=en(Za),nn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",staticClass:"invalid-records-modal",on:{close:t.close}},[a("modal-head",{attrs:{slot:"head",contractor:t.contractorName},slot:"head"}),t._v(" "),a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"line",compare:"numbers"},expression:"{sortKey: 'line', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Line")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Errors")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docDate",compare:"dates"},expression:"{sortKey: 'docDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"dueDate",compare:"dates"},expression:"{sortKey: 'dueDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"postingDate",compare:"dates"},expression:"{sortKey: 'postingDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"line",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[t._v(t._s(t.$t("Errors")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[a("SelectFilter",{attrs:{filterKey:"ref",items:t.records,compare:t.compare.numAsString}})],1),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.line},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e,disable:e.needFxRate}})],1),t._v(" "),a("td",{staticClass:"line-cell"},[t._v(t._s(e.line))]),t._v(" "),a("td",{staticClass:"error-cell"},[a("ul",t._l(e.errors,function(e){return a("li",[a("strong",[t._v(t._s(e.type.label)+":")]),t._v(" "+t._s(e.desc)+"\n              ")])}),0)]),t._v(" "),a("td",[t._v(t._s(e.account))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.payer))]),t._v(" "),a("td",[t._v(t._s(e.receiver))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),t._v(" "),a("td",[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",[t._v(t._s(e.docAmount))]),t._v(" "),a("td",[t._v(t._s(e.desc))])])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)],1)},staticRenderFns:[]},on=a("VU/8")(an,nn,!1,null,null,null).exports,sn=la.TableStore("OutOfScopeRecordsModal"),rn={},cn=function(t){return rn.name="outOfScopeRecordsModal",rn.mixins=[Oa,ua(t)],rn.directives={Sort:la.SortDirective(t)},rn.components={InputFilter:la.InputFilter(t),SelectFilter:la.SelectFilter(t),DateFilter:la.DateFilter(t)},rn.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},rn.computed={records:function(){return this.$store.getters.outOfScopeRecords}},rn.methods={load:function(){return this.$store.dispatch("loadOutOfScopeRecords")},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},rn.watch={records:function(e){t.commit("setItems",e)}},rn};cn.options=rn;var ln=cn(sn),un={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("modal-head",{attrs:{slot:"head",contractor:t.contractorName},slot:"head"}),t._v(" "),a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group"}},[a("label",{attrs:{for:"ipp"}},[t._v(t._s(t.$t("Items per page"))+":")]),t._v(" "),a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])]),t._v(" "),a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"line",compare:"numbers"},expression:"{sortKey: 'line', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Line")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docDate",compare:"dates"},expression:"{sortKey: 'docDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"dueDate",compare:"dates"},expression:"{sortKey: 'dueDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"postingDate",compare:"dates"},expression:"{sortKey: 'postingDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("InputFilter",{attrs:{filterKey:"line",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[a("SelectFilter",{attrs:{filterKey:"ref",items:t.records,compare:t.compare.numAsString}})],1),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.line},[a("td",{staticClass:"line-cell"},[t._v(t._s(e.line))]),t._v(" "),a("td",[t._v(t._s(e.account))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.payer))]),t._v(" "),a("td",[t._v(t._s(e.receiver))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),t._v(" "),a("td",[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",[t._v(t._s(e.docAmount))]),t._v(" "),a("td",[t._v(t._s(e.desc))])])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)],1)},staticRenderFns:[]},dn={components:{InvalidRecordsModal:on,OutOfScopeRecordsModal:a("VU/8")(ln,un,!1,null,null,null).exports},data:function(){return{showInvalidDetails:!1,showOutOfPeriodDetails:!1}},computed:{recordsCount:function(){return this.$store.getters.recordsCount},total:function(){var t=this;return $t()(this.recordsCount).reduce(function(e,a){return e+t.recordsCount[a]},0)}}},mn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive upload-summary"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("Transactions Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Number")))]),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("th",[t._v(t._s(t.$t("Valid with recognized companies"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.validRecognizedCompany))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Valid with unrecognized companies"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.validUnrecognizedCompany))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Invalid"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.invalid))]),t._v(" "),a("td",[t.recordsCount.invalid?a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(e){t.showInvalidDetails=!0}}},[t._v(t._s(t.$t("View Details")))]):t._e()])]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Out of Period"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.outOfScope))]),t._v(" "),a("td",[t.recordsCount.outOfScope?a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(e){t.showOutOfPeriodDetails=!0}}},[t._v(t._s(t.$t("View Details")))]):t._e()])]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Removed"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.removed))]),t._v(" "),a("td")])]),t._v(" "),a("tfoot",[a("tr",[a("th",[t._v(t._s(t.$t("TOTAL"))+":")]),t._v(" "),a("td",[t._v(t._s(t.total))]),t._v(" "),a("td")])])]),t._v(" "),a("invalidRecordsModal",{model:{value:t.showInvalidDetails,callback:function(e){t.showInvalidDetails=e},expression:"showInvalidDetails"}}),t._v(" "),a("outOfScopeRecordsModal",{model:{value:t.showOutOfPeriodDetails,callback:function(e){t.showOutOfPeriodDetails=e},expression:"showOutOfPeriodDetails"}})],1)},staticRenderFns:[]},pn={name:"UploadPage",components:{UploadForm:ka,RcTable:ja,UcTable:Qa,SummaryTable:a("VU/8")(dn,mn,!1,null,null,null).exports},data:function(){return{loading:!1,uploadData:null,historyComponent:this.$route.params.historyComponent?this.$route.params.historyComponent:null}},computed:{summary:function(){return this.$store.getters.importSummary}},created:function(){this.$route.params.uploadData&&(this.uploadData=this.$route.params.uploadData)},methods:{saveRecognisedRecords:function(){var t=this;this.$store.dispatch("saveValid").then(function(){t.$customMsg.showSuccessMessage(t.$t("Saved records successfully")),t.$store.commit("clearImport")}).catch(function(e){t.$customMsg.showErrorMessage(t.$t(e.messageDetail))}).finally(function(){t.loading=!1,null!==t.historyComponent&&t.$router.push(t.historyComponent)})},onUpload:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSummary").then(function(){t.loading=!1})},cancel:function(){this.$store.commit("clearImport")}}},vn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-page"},[a("h2",[t._v(t._s(t.$t("Upload")))]),t._v(" "),t.summary?t._e():a("upload-form",{attrs:{uploadData:t.uploadData},on:{success:t.onUpload}}),t._v(" "),t.summary&&t.summary.recordsCount.validRecognizedCompany?a("div",[a("h3",[t._v(t._s(t.$t("Pending valid transactions with recognized companies")))]),t._v(" "),a("p",[t._v(t._s(t.$t("You can save these transactions.")))]),t._v(" "),a("rc-table"),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.saveRecognisedRecords}},[t._v(t._s(t.$t("Save")))])],1):t._e(),t._v(" "),t.summary&&t.summary.recordsCount.validUnrecognizedCompany?a("div",[a("h3",[t._v(t._s(t.$t("Valid transactions with unrecognized companies")))]),t._v(" "),a("p",[t._v(t._s(t.$t("uploadPageValidUnrecognizedText")))]),t._v(" "),a("uc-table")],1):t._e(),t._v(" "),t.summary?a("div",[a("h3",[t._v(t._s(t.$t("Summary")))]),t._v(" "),a("summary-table"),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))])],1):t._e(),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},fn=a("VU/8")(pn,vn,!1,null,null,null).exports,hn=a("0KbX"),gn={},_n=function(t){return gn.name="ContactsTable",gn.mixins=[Oa,ua(t)],gn.directives={Sort:la.SortDirective(t)},gn.components={CompanyCard:hn.a,InputFilter:la.InputFilter(t),SelectFilter:la.SelectFilter(t),DateFilter:la.DateFilter(t),BulkSelector:la.BulkSelector(t),CheckboxSelect:la.CheckboxSelect(t),MarkedFilter:la.MarkedFilter(t),Pagination:la.Pagination},gn.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},gn.computed={contacts:function(){return this.$store.getters.contacts}},gn.mounted=function(){t.commit("setItems",this.$store.getters.contacts)},gn.methods={load:function(t){this.contractorName=t.company.name},emitEvent:function(t){this.$emit(t)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},startReconciliation:function(t){this.$router.push({name:"Reconciliations",params:{startReconciliationFor:t}})}},gn.watch={contacts:function(e){t.commit("setItems",e)}},gn};_n.options=gn;var yn=_n(la.TableStore("ContactsTable")),bn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("b-btn",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])],1),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})]),t._v(" "),a("div",{staticClass:"absolute-right"},[a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:function(e){return t.emitEvent("openInvMyCompanyModal")}}},[t._v(t._s(t.$t("Invite from my companies")))]),t._v(" "),a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:function(e){return t.emitEvent("openInvModal")}}},[t._v(t._s(t.$t("Invite Company")))])],1)],1),t._v(" "),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"name",compare:"strings",initOrder:"ASC"},expression:"{sortKey: 'name', compare: 'strings', initOrder: 'ASC'}"}]},[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Aliases")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"regNum",compare:"strings"},expression:"{sortKey: 'regNum', compare: 'strings'}"}]},[t._v(t._s(t.$t("Reg Number")))]),t._v(" "),a("th")]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"name",compare:t.compare.string}})],1),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"regNum",compare:t.compare.numAsString}})],1),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),t._v(" "),a("th",[e.logo&&e.name?a("company-card",{attrs:{company:e,size:"m"}}):t._e()],1),t._v(" "),a("td",[t._v(t._s(e.aliases?e.aliases.map(function(t){return t.aname}).join(", "):""))]),t._v(" "),a("td",[t._v(t._s(e.regNum))]),t._v(" "),a("td",[a("b-dropdown",{attrs:{text:"...","no-caret":""}},[a("b-dropdown-item",{on:{click:function(a){return t.startReconciliation(e.id)}}},[t._v(t._s(t.$t("Start Reconciliation")))])],1)],1)])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Cn=a("VU/8")(yn,bn,!1,null,null,null).exports,Dn={name:"Tree",components:{TreeNode:a("mwaQ").default},props:{nodes:{required:!0},childrenProp:{default:"children"},idProp:{default:"id"},labelProp:{default:"name"},preselectedCompany:{}},data:function(){return{deselectFunc:null}},methods:{selectNode:function(t,e){this.deselectFunc&&this.deselectFunc(),this.$emit("changeSelected",t),this.deselectFunc=e},expandAll:function(){this.$emit("expandAll")},collapseAll:function(){this.$emit("collapseAll")}},computed:{items:function(){return this.nodes||[]}}},$n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tree"},[this.items.length?e("TreeNode",{attrs:{nodes:this.items,state:this._self,preselectedCompany:this.preselectedCompany}}):this._e()],1)},staticRenderFns:[]},xn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.selected?a("div",{staticClass:"company-info"},[a("p",[t._v(t._s(t.$t("Company Name"))+": "+t._s(t.selected.name))]),t._v(" "),a("p",[t._v(t._s(t.$t("Registration ID"))+": "+t._s(t.selected.regNum))]),t._v(" "),a("p",[t._v(t._s(t.$t("Country"))+": "+t._s(t.selected.country.name))]),t._v(" "),a("p",[t._v(t._s(t.$t("Reporting Currency"))+": "+t._s(t.selected.currency.code+" - "+t.selected.currency.name))]),t._v(" "),a("p",[t._v(t._s(t.$t("Address"))+": "+t._s(t.selected.addressText))]),t._v(" "),a("p",[t._v(t._s(t.$t("Parent company"))+": "+t._s(t.selected.parent.name))])]):t._e()},staticRenderFns:[]},wn={components:{Tree:a("VU/8")(Dn,$n,!1,null,null,null).exports,CompanyInfo:a("VU/8")({props:{selected:{}},data:function(){return{}},methods:{}},xn,!1,null,null,null).exports},data:function(){return{currentSelectedNode:null}},computed:{nodes:function(){return this.$store.getters.holdingTree}},created:function(){this.$store.dispatch("loadHoldingTree").then(function(t){console.log(t)})},methods:{changeSelected:function(t){this.currentSelectedNode=t}}},Sn={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tree-wrapper"},[e("Tree",{attrs:{nodes:this.nodes},on:{changeSelected:this.changeSelected}}),this._v(" "),e("CompanyInfo",{attrs:{selected:this.currentSelectedNode}})],1)},staticRenderFns:[]},Rn=a("VU/8")(wn,Sn,!1,null,null,null).exports,Fn=a("//Fk"),In=a.n(Fn),Pn={components:{ModelSelect:Da.ModelSelect,Datepicker:gt.a},mixins:[ye],created:function(){this.runAfterSCisSet(this.loadContacts)},data:function(){return{formData:{current:!0},errMsg:null,loading:!1,SCContactsOptions:[],locales:{en:_t.b,bg:_t.a}}},computed:{hasContacts:function(){return!!this.$store.getters.contacts.length},contacts:function(){return this.$store.getters.contacts}},methods:{validate:function(){return this.$validator.validateAll()},save:function(){var t=this;return this.$store.dispatch("addRelatedParty",this.formData).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Added new relation.")),t.$emit("success",e)})},submit:function(){var t=this;this.errMsg=null,this.loading=!0,this.validate().then(function(e){return e?t.save():In.a.reject(new Error("Please, fill the required fields."))}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})},resetForm:function(){var t=this;this.$nextTick().then(function(){t.$validator.reset(),t.errors.clear(),t.formData={current:!0}})},loadContacts:function(){var t=this;this.$store.dispatch("loadSCContacts").then(function(e){return t.SCContactToOptions(e)})},SCContactToOptions:function(t){var e=[];t.forEach(function(t){var a="";t.aliases.forEach(function(t){a=t.aname}),e.push({value:t.id,text:t.name+" - "+a})}),this.SCContactsOptions=e}}},Mn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),t.hasContacts?a("div",[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Contact"))+":")]),t._v(" "),a("ModelSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"contactName",options:t.SCContactsOptions,placeholder:"select contact ..."},model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),t._v(" "),t.errors.has("contactName")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a contact"))+".")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("From date"))+":")]),t._v(" "),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"fromDate","bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t._v(" "),t.errors.has("fromDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a starting date"))+".")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group"},[a("b-form-checkbox",{model:{value:t.formData.current,callback:function(e){t.$set(t.formData,"current",e)},expression:"formData.current"}},[t._v("\n        "+t._s(t.$t("It is currently a related party"))+"\n      ")])],1),t._v(" "),t.formData.current?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("To date"))+":")]),t._v(" "),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"toDate","bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t._v(" "),t.errors.has("toDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a end date"))+".")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Description"))+":")]),t._v(" "),a("b-form-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"description",placeholder:"Enter description",rows:3,"max-rows":6},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}}),t._v(" "),t.errors.has("description")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, enter description"))+".")]):t._e()],1)]):a("div",[t._v("\n    "+t._s(t.$t("You need to have contact companies in order to mark some of them as related parties."))+"\n  ")]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},kn=a("VU/8")(Pn,Mn,!1,null,null,null).exports,Tn={components:{Datepicker:gt.a,CompanyCard:hn.a,RelatedPartiesModal:kn},created:function(){},data:function(){return{sort:{sortedBy:"toDate",isSortDescending:!1},loading:!1,itemsPerPage:10,currentPage:1,tableFields:["name","detailId","fromDate","toDate"],locales:{en:_t.b,bg:_t.a},editData:{id:null,fromDate:null,toDate:null,description:""},showRPModal:!1,formData:{fromDate:null,toDate:null},optionsPerPage:[{value:10,text:"10"},{value:25,text:"25"},{value:50,text:"50"},{value:100,text:"100"}]}},computed:{noContacts:function(){return!this.$store.getters.contacts.length},cancelBtnTitle:function(){return this.$store.getters.contacts.length?"Cancel":"Ok"},companyRelatedParties:function(){return this.$store.getters.companyRelatedParties.relatedParties},count:function(){return this.$store.getters.companyRelatedParties.totalCount||0},numberOfPages:function(){return Math.ceil(this.count/this.itemsPerPage)},startIndex:function(){return(this.currentPage-1)*this.itemsPerPage+1},endIndex:function(){return this.currentPage*this.itemsPerPage}},methods:{openRPModal:function(){this.$refs.relatedPartiesModal&&this.$refs.relatedPartiesModal.resetForm(),this.showRPModal=!0},onAddRelatedParties:function(){this.showRPModal=!1,this.loadRelatedParties()},onRPModalOk:function(t){t.preventDefault(),this.$refs.relatedPartiesModal.submit()},getSortClass:function(t){var e="sort ";return t===this.sort.sortedBy&&(e+=this.sort.isSortDescending?"sort-asc":"sort-desc"),e},setSort:function(t){t!==this.sort.sortedBy?(this.sort.sortedBy=t,this.sort.isSortDescending=!1):this.sort.isSortDescending=!this.sort.isSortDescending,this.loadRelatedParties()},editRP:function(t){this.editData.id=t.detailId,this.editData.fromDate=t.fromDate,this.editData.toDate=t.toDate,this.editData.description=t.description},deleteRP:function(t){var e=this;this.$store.dispatch("deleteRelatedParty",t.detailId).then(function(){e.currentPage=1,e.loadRelatedParties()})},confirmEdit:function(){var t=this;this.$store.dispatch("editRelatedParty",this.editData).then(function(){t.currentPage=1,t.cancelEdit(),t.loadRelatedParties()})},cancelEdit:function(){this.editData.id=null},loadRelatedParties:function(){var t=this,e={startDate:this.formData.fromDate,endDate:this.formData.toDate,startIndex:this.startIndex,endIndex:this.endIndex};""!==this.sort.sortedBy&&(e.sort=this.sort.sortedBy,e.isSortDescending=this.sort.isSortDescending),this.loading=!0,this.$store.dispatch("loadSCRelatedParties",e).finally(function(){t.loading=!1})},sendDates:function(){null!==this.formData.fromDate&&null!==this.formData.toDate&&this.formData.fromDate.getTime()>this.formData.toDate.getTime()?this.$customMsg.showErrorMessage(this.$t("End date is before start date")):(this.currentPage=1,this.loadRelatedParties())},loadPage:function(t){this.currentPage=t,this.loadRelatedParties()}}},Nn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("b-modal",{attrs:{title:t.$t("Add related party"),"ok-disabled":t.noContacts,"cancel-title":t.cancelBtnTitle},on:{ok:t.onRPModalOk},model:{value:t.showRPModal,callback:function(e){t.showRPModal=e},expression:"showRPModal"}},[a("related-parties-modal",{ref:"relatedPartiesModal",on:{success:t.onAddRelatedParties}})],1),t._v(" "),a("b-row",[a("b-col",[a("label",[t._v(t._s(t.$t("From date"))+":")]),t._v(" "),a("datepicker",{attrs:{"bootstrap-styling":!0,"clear-button":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}})],1),t._v(" "),a("b-col",[a("label",[t._v(t._s(t.$t("To date"))+":")]),t._v(" "),a("datepicker",{attrs:{"bootstrap-styling":!0,"clear-button":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}})],1),t._v(" "),a("b-col",{attrs:{"align-self":"end"}},[a("label",[t._v(t._s(t.$t("Results per page"))+":")]),t._v(" "),a("b-form-select",{attrs:{options:t.optionsPerPage},model:{value:t.itemsPerPage,callback:function(e){t.itemsPerPage=e},expression:"itemsPerPage"}})],1),t._v(" "),a("b-col",{attrs:{"align-self":"end"}},[a("b-btn",{on:{click:t.sendDates}},[t._v(t._s(t.$t("Filter")))])],1),t._v(" "),a("b-btn",{staticClass:"btn btn-success btn-sm mb-3 absolute-right",on:{click:t.openRPModal}},[t._v(t._s(t.$t("Add related party")))])],1),t._v(" "),a("br"),t._v(" "),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{on:{click:function(e){return t.setSort("name")}}},[t._v("\n          "+t._s(t.$t("Name"))+"\n          "),a("span",{class:t.getSortClass("name")})]),t._v(" "),a("th",[t._v(t._s(t.$t("Aliases")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Reg Number")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Source")))]),t._v(" "),a("th",{on:{click:function(e){return t.setSort("fromDate")}}},[t._v("\n          "+t._s(t.$t("From date"))+"\n          "),a("span",{class:t.getSortClass("fromDate")})]),t._v(" "),a("th",{on:{click:function(e){return t.setSort("toDate")}}},[t._v("\n          "+t._s(t.$t("To date"))+"\n          "),a("span",{class:t.getSortClass("toDate")})]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),a("tbody",t._l(t.companyRelatedParties,function(e){return a("tr",{key:e.id},[a("th",[e.logo&&e.name?a("company-card",{attrs:{company:e,size:"m"}}):t._e()],1),t._v(" "),a("td",[t._v(t._s(e.companyAliases))]),t._v(" "),a("td",[t._v(t._s(e.registrationNumber))]),t._v(" "),a("td",[t._v(t._s(e.typeName))]),t._v(" "),t.editData.id!==e.detailId?[a("td",[t._v(t._s(t._f("bsDate")(e.fromDate)))]),t._v(" "),null!==e.toDate?a("td",[t._v(t._s(t._f("bsDate")(e.toDate)))]):a("td",[t._v(" - ")]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),2===e.typeId?a("td",[a("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(a){return t.editRP(e)}}},[t._v("Edit")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.deleteRP(e)}}},[t._v("Delete")])],1):a("td"),t._v(" "),a("td",[t._v(t._s(e.editActive))])]:[a("td",[a("datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.editData.fromDate,callback:function(e){t.$set(t.editData,"fromDate",e)},expression:"editData.fromDate"}})],1),t._v(" "),a("td",[a("datepicker",{attrs:{"bootstrap-styling":!0,"clear-button":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.editData.toDate,callback:function(e){t.$set(t.editData,"toDate",e)},expression:"editData.toDate"}})],1),t._v(" "),a("td",[a("b-form-input",{attrs:{type:"text",placeholder:"Description"},model:{value:t.editData.description,callback:function(e){t.$set(t.editData,"description",e)},expression:"editData.description"}})],1),t._v(" "),a("td",[a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(a){return t.confirmEdit(e)}}},[t._v(t._s(t.$t("OK")))]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"warning"},on:{click:function(e){return t.cancelEdit()}}},[t._v(t._s(t.$t("Cancel")))])],1)]],2)}),0)]),t._v(" "),a("br"),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.count,"per-page":t.itemsPerPage},on:{change:t.loadPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},An=a("VU/8")(Tn,Nn,!1,null,null,null).exports,En={},Un=function(t){return En.name="ContactsTable",En.mixins=[Oa,ua(t)],En.directives={Sort:la.SortDirective(t)},En.components={CompanyCard:hn.a,InputFilter:la.InputFilter(t),SelectFilter:la.SelectFilter(t),DateFilter:la.DateFilter(t),Pagination:la.Pagination},En.data=function(){return{loading:!1,itemsPerPage:10,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},En.computed={invitations:function(){return this.$store.getters.companySentInvitations}},En.mounted=function(){t.commit("setItems",this.$store.getters.companySentInvitations)},En.methods={cancel:function(t){var e=this;this.loading=!0,this.$store.dispatch("cancelInvitation",t).finally(function(){e.loading=!1})},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},En.watch={invitations:function(e){t.commit("setItems",e)}},En};Un.options=En;var On=Un(la.TableStore("InvitationsTable")),Vn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.name",compare:"strings",initOrder:"ASC"},expression:"{sortKey: 'receiver.name', compare: 'strings', initOrder: 'ASC'}"}]},[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.country.name",compare:"strings"},expression:"{sortKey: 'receiver.country.name', compare: 'strings'}"}]},[t._v(t._s(t.$t("Country")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.regNum",compare:"strings"},expression:"{sortKey: 'receiver.regNum', compare: 'strings'}"}]},[t._v(t._s(t.$t("Reg Number")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.email",compare:"strings"},expression:"{sortKey: 'receiver.email', compare: 'strings'}"}]},[t._v(t._s(t.$t("Receiver Email")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"sender.user.name",compare:"strings"},expression:"{sortKey: 'sender.user.name', compare: 'strings'}"}]},[t._v(t._s(t.$t("Sender")))]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("th",[e.receiver?a("company-card",{attrs:{company:e.receiver,size:"m"}}):t._e()],1),t._v(" "),a("td",[a("img",{attrs:{width:"20",src:"/static/flags/"+(e.receiver?e.receiver.country.code:"")+".svg"}}),t._v("\n          "+t._s(e.receiver?e.receiver.country.name:"")+"\n        ")]),t._v(" "),a("td",[t._v(t._s(e.receiver?e.receiver.regNum:""))]),t._v(" "),a("td",[t._v(t._s(e.receiver?e.receiver.email:""))]),t._v(" "),a("td",[a("div",[t._v(t._s(e.sender?e.sender.user.name:""))]),t._v(" "),a("div",[t._v(t._s(e.sender?e.sender.user.email:""))])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){return t.cancel(e)}}},[t._v(t._s(t.$t("Cancel")))])])])}),0)]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ln=a("VU/8")(On,Vn,!1,null,null,null).exports,qn=a("RUzx"),Kn=a.n(qn),zn={components:{Multiselect:Kn.a},data:function(){return{loading:!1}},props:{disabled:{type:Boolean,default:!1},value:{},componentClass:{type:String}},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadCountries").then(function(){t.loading=!1})},computed:{internalValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},countries:function(){return this.$store.getters.countries?this.$store.getters.countries:[]}},methods:{validate:function(){return this.$validator.validateAll()},countryLabel:function(t){return""+t.name}}},Bn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.componentClass},[a("label",{attrs:{for:"country"}},[t._v("Country:")]),t._v(" "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"multiselect is-invalid":t.errors.has("country")}],attrs:{id:"country",name:"country",disabled:t.disabled,options:t.countries,"show-labels":!0,"track-by":"name","custom-label":t.countryLabel,placeholder:t.$t("Please, select a country")},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[a("span",{},[a("img",{staticClass:"country_flag",attrs:{width:"20",height:"20",src:"/static/flags/"+e.option.code+".svg",alt:e.option.code}}),t._v(" \n            "),a("span",{},[t._v(t._s(e.option.name))])])]}},{key:"option",fn:function(e){return[a("div",{},[a("img",{staticClass:"country_flag",attrs:{width:"20",height:"20",src:"/static/flags/"+e.option.code+".svg",alt:e.option.code}}),t._v(" \n        "),a("span",{},[t._v(t._s(e.option.name))])])]}}]),model:{value:t.internalValue,callback:function(e){t.internalValue=e},expression:"internalValue"}}),t._v(" "),t.errors.has("country")?a("div",{staticClass:"invalid-feedback show-feedback"},[t._v(t._s(t.$t("Please, select a country"))+".")]):t._e()],1)},staticRenderFns:[]},jn=a("VU/8")(zn,Bn,!1,null,null,null).exports,Hn={components:{CountrySelect:jn},mixins:[{methods:{runAfterNomenclatureIsSet:function(t,e){if(this.$store.getters[t])e();else var a=this.$store.watch(function(e,a){return a[t]},function(t){t&&(e(),a())})}}}],created:function(){this.$store.dispatch("loadCountries")},mounted:function(){var t=this;this.loading=!0,this.runAfterNomenclatureIsSet("countries",function(){t.loading=!1})},data:function(){return{formData:{},errMsg:null,loading:!1}},computed:{},methods:{validate:function(){return this.$refs.invitationCountrySelect.validate(),this.$validator.validateAll()},save:function(){var t=this;return this.$store.dispatch("inviteContact",this.formData).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Invitation successfully send.")),t.$emit("success",e)})},submit:function(){var t=this;this.errMsg=null,this.loading=!0,this.validate().then(function(e){return e?t.save():In.a.reject(new Error("Please, fill the required fields."))}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})},resetForm:function(){var t=this;this.$nextTick().then(function(){t.$validator.reset(),t.errors.clear(),t.formData={}})}}},Yn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-name"}},[t._v(t._s(t.$t("Company Name"))+":")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",id:"cf-name",name:"name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid name"))+".")]),t._v(" "),a("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.$t("Please enter the complete legal name as per registration"))+".")])]),t._v(" "),a("CountrySelect",{ref:"invitationCountrySelect",attrs:{componentClass:"form-group"},model:{value:t.formData.country,callback:function(e){t.$set(t.formData,"country",e)},expression:"formData.country"}}),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-regNum"}},[t._v(t._s(t.$t("Registration number"))+":")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.regNum,expression:"formData.regNum"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("regNum")}],attrs:{type:"text",id:"cf-regNum",name:"regNum"},domProps:{value:t.formData.regNum},on:{input:function(e){e.target.composing||t.$set(t.formData,"regNum",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter company's registration number"))+".")])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-email"}},[t._v(t._s(t.$t("Contact Person Email"))+":")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",id:"cf-email",name:"email"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid email"))+".")])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-email"}},[t._v(t._s(t.$t("Message"))+":")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.message,expression:"formData.message"}],staticClass:"form-control",attrs:{name:"message",rows:"5"},domProps:{value:t.formData.message},on:{input:function(e){e.target.composing||t.$set(t.formData,"message",e.target.value)}}})]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Xn=a("VU/8")(Hn,Yn,!1,null,null,null).exports,Gn=a("pGLP"),Wn={components:{Multiselect:Kn.a,LogoFlag:Gn.a},data:function(){return{loading:!1}},props:{currentCompanyId:{},allowNone:{type:Boolean,default:!1},noneLabel:{type:String},companies:{},disabled:{type:Boolean,default:!1},value:{},multiple:{type:Boolean,default:!1},componentClass:{},componentLabel:{}},computed:{internalCompanies:function(){var t=this,e=[];return void 0!==this.currentCompanyId&&null!==this.currentCompanyId||this.allowNone?(this.allowNone&&e.push({id:-1,name:""}),this.companies.forEach(function(a){t.currentCompanyId!==a.id&&e.push(a)}),e):this.companies},internalValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{companyLabel:function(t){var e="";return t.aliases?0===t.aliases.length?""+t.name:(t.aliases.forEach(function(t){e+=t.aname+", "}),e=e.slice(0,-2),t.name+"( "+e+" )"):""+t.name},validate:function(){return this.$validator.validateAll()},sendChange:function(){this.$emit("change")}},watch:{companies:{handler:function(t){t&&!t.length&&(this.internalValue=this.multiple?{}:[])},deep:!0}}},Jn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.componentClass},[a("label",{attrs:{for:"companies"}},[t._v(t._s(t.componentLabel))]),t._v(" "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"multiselect is-invalid":t.errors.has("companies")}],attrs:{id:"companies",name:"companies",disabled:t.disabled,options:t.internalCompanies,multiple:t.multiple,"track-by":"name","custom-label":t.companyLabel,"show-labels":!0,placeholder:t.companies.length?t.$t("Please, select a company"):t.$t("No companies found")},on:{select:t.sendChange,remove:t.sendChange},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[a("span",{},[a("logo-flag",{attrs:{company:e.option,size:"s"}}),t._v(" "),a("span",{},[t._v(t._s(e.option.name))])],1)]}},{key:"option",fn:function(e){return[a("div",{},[a("logo-flag",{attrs:{company:e.option,size:"s"}}),t._v(" "),a("span",[t._v(t._s(-1===e.option.id?t.$t("No parent"):e.option.name))])],1)]}}]),model:{value:t.internalValue,callback:function(e){t.internalValue=e},expression:"internalValue"}}),t._v(" "),t.errors.has("companies")?a("div",{staticClass:"invalid-feedback show-feedback"},[t._v(t._s(t.$t("Please, select a company"))+".")]):t._e()],1)},staticRenderFns:[]},Qn=a("VU/8")(Wn,Jn,!1,null,null,null).exports,Zn={components:{CompanySelect:Qn,CompanyCard:hn.a},created:function(){this.$store.dispatch("loadMyCompanies")},data:function(){return{loading:!1}},computed:{myCompanies:function(){return this.$store.getters.myCompanies},contacts:function(){return this.$store.getters.contacts},company:function(){return this.$store.getters.selectedCompany||{}},myNotContactedCompanies:function(){var t=this,e=[];return this.contacts.forEach(function(t){e.push(t.id)}),this.myCompanies.filter(function(a){return!e.includes(a.id)&&a.id!==t.company.id})}},methods:{calcAliases:function(t){var e="";return t.forEach(function(t){e+=t.aname+", "}),""!==(e=e.slice(0,-2))?e:this.$t("no aliases")},submit:function(){var t=this;this.loading=!0;var e=[];this.myCompanies.forEach(function(t){t.checked&&e.push(t.id)}),this.$store.dispatch("inviteMyCompanyContacts",e).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Invitation successfully send.")),t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})}}},to={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Aliases")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Reg Number")))])])]),t._v(" "),a("tbody",t._l(t.myNotContactedCompanies,function(e){return a("tr",{key:e.id},[a("td",[a("b-form-checkbox",{model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"current.checked"}})],1),t._v(" "),a("th",[e.logo&&e.name?a("company-card",{attrs:{company:e,size:"s"}}):t._e()],1),t._v(" "),a("td",[t._v(t._s(e.aliases?t.calcAliases(e.aliases):""))]),t._v(" "),a("td",[t._v(t._s(e.regNum))])])}),0)]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},eo={name:"ContactsPage",components:{ContactsTable:Cn,HoldingTab:Rn,RelatedPartiesTable:An,InvitationsTable:Ln,InvitationForm:Xn,InvitationMyCompaniesForm:a("VU/8")(Zn,to,!1,null,null,null).exports},mixins:[ye],data:function(){return{showInvModal:!1,showInvMyCompanyModal:!1,loading:!1,activeTabId:0}},computed:{hasContacts:function(){return!!this.$store.getters.contacts.length},hasInvitations:function(){return!!this.$store.getters.companySentInvitations.length}},methods:{onInvModalOk:function(t){t.preventDefault(),this.$refs.invitationForm.submit()},onInvMyCompanyModal:function(t){t.preventDefault(),this.$refs.invitationMyCompaniesForm.submit()},openInvModal:function(){this.$refs.invitationForm&&this.$refs.invitationForm.resetForm(),this.showInvModal=!0},openInvMyCompanyModal:function(){this.showInvMyCompanyModal=!0},onSentInvitation:function(t){this.showInvModal=!1},onSentMyCompaniesInvitation:function(t){this.showInvMyCompanyModal=!1,this.loadContacts()},onTabChange:function(t){var e=this;switch(this.activeTabId=t,t){case 1:console.log("");break;case 2:this.$nextTick(function(){e.$refs.relatedPartiesTable.loadRelatedParties()});break;case 3:this.runAfterSCisSet(this.loadInvitations);break;default:this.runAfterSCisSet(this.loadContacts)}},loadContacts:function(){this.loadStore("loadSCContacts")},loadInvitations:function(){this.loadStore("loadSCSentInvitations")},loadStore:function(t){var e=this;this.loading=!0,this.$store.dispatch(t).finally(function(){e.loading=!1})}}},ao={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contact-page"},[a("h2",[t._v(t._s(t.$t("Contacts")))]),t._v(" "),a("b-modal",{attrs:{title:t.$t("Company Invitation")},on:{ok:t.onInvModalOk},model:{value:t.showInvModal,callback:function(e){t.showInvModal=e},expression:"showInvModal"}},[a("invitation-form",{ref:"invitationForm",on:{success:t.onSentInvitation}})],1),t._v(" "),a("b-modal",{attrs:{title:t.$t("Add from my companies")},on:{ok:t.onInvMyCompanyModal},model:{value:t.showInvMyCompanyModal,callback:function(e){t.showInvMyCompanyModal=e},expression:"showInvMyCompanyModal"}},[a("invitation-my-companies-form",{ref:"invitationMyCompaniesForm",on:{success:t.onSentMyCompaniesInvitation}})],1),t._v(" "),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:"Contacts",active:""}},[t.hasContacts&&0===t.activeTabId?a("contacts-table",{on:{openInvModal:t.openInvModal,openInvMyCompanyModal:t.openInvMyCompanyModal}}):t._e(),t._v(" "),t.hasContacts||t.loading?t._e():a("div",[a("p",{staticClass:"py-3"},[t._v(t._s(t.$t("There aren't any contacts added yet.")))]),t._v(" "),a("p",[a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:t.openInvMyCompanyModal}},[t._v(t._s(t.$t("Invite from my companies")))]),t._v(" "),a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:t.openInvModal}},[t._v(t._s(t.$t("Invite Company")))])],1)])],1),t._v(" "),a("b-tab",{attrs:{title:"Holding"}},[1===t.activeTabId?a("holding-tab"):t._e()],1),t._v(" "),a("b-tab",{staticClass:"related-parties",attrs:{title:"Related parties"}},[2===t.activeTabId?a("related-parties-table",{ref:"relatedPartiesTable"}):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:"Sent Invitations"}},[t.hasInvitations?a("invitations-table"):t._e(),t._v(" "),t.hasInvitations||t.loading?t._e():a("div",[t._v(t._s(t.$t("There aren't any invitations.")))])],1)],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},no=a("VU/8")(eo,ao,!1,null,null,null).exports,oo=a("woOf"),so=a.n(oo),ro={props:{save:{required:!0,type:Function},remove:{type:Function},cancel:{required:!0,type:Function},validate:{required:!0,type:Function},editMode:{default:!1}},data:function(){return{isEditMode:this.editMode,errMsg:null,loading:!1}},methods:{submit:function(){var t=this,e=this;e.errMsg=null,e.loading=!0,e.validate().then(function(t){return t?e.save():In.a.reject(new Error("Please, fill the required fields."))}).then(function(){t.closeEditMode()}).catch(function(t){e.errMsg=e.$t(t.messageDetail)}).finally(function(){e.loading=!1})},cancelEdit:function(){this.cancel(),this.closeEditMode()},closeEditMode:function(){this.isEditMode=!1,this.errMsg=null},edit:function(){this.isEditMode=!0},del:function(){var t=this;t.loading=!0,t.remove().then(function(){t.cancelEdit()}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})}},watch:{isEditMode:function(t){this.$emit("edit",t)}}},io={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"company-property-row",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"cp-col"},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v("\n      "+t._s(t.errMsg)+"\n    ")]):t._e(),t._v(" "),t._t("default")],2),t._v(" "),t.isEditMode?t._e():a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v(t._s(t.$t("Edit")))]),t._v(" "),t.remove?a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.del}},[t._v(t._s(t.$t("Delete")))]):t._e()]),t._v(" "),t.isEditMode?a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit"}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("button",{staticClass:"btn btn-light btn-sm",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v(t._s(t.$t("Cancel")))])]):t._e(),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},co={components:{CpForm:a("VU/8")(ro,io,!1,null,null,null).exports},props:{cProp:{required:!0,default:function(){return{}}}},methods:{onEdit:function(t){this.editMode=t},validate:function(){return this.$validator.validateAll()},cancel:function(){this.cpModel=so()({},this.cProp),this.$emit("cancel")}}},lo={props:{cProp:{required:!1}},data:function(){return{cpModel:so()({},this.cProp),roles:_a,editMode:!0,loading:!1}},methods:{save:function(){var t=this;this.loading=!0,this.$store.dispatch("addSCCollaborator",this.cpModel).then(function(){t.$emit("done"),t.loading=!1})}}},uo=wt()({},co,lo),mo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{staticClass:"collaborator-form",attrs:{save:t.save,cancel:t.cancel,validate:t.validate,"edit-mode":t.editMode},on:{edit:t.onEdit}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",[t._v(t._s(t.$t("Collaborator's Email:")))]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",name:"email"},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid email"))+".")])]),t._v(" "),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"role"}},[t._v(t._s(t.$t("Role"))+":")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("role")}],attrs:{id:"role",name:"role",plain:!0,options:t.roles},model:{value:t.cpModel.role,callback:function(e){t.$set(t.cpModel,"role",e)},expression:"cpModel.role"}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, select a role"))+".")])],1)]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},po=a("VU/8")(uo,mo,!1,null,null,null).exports,vo={name:"CollaboratorsTableRow",props:{collaborator:{required:!0},pageItems:{}},data:function(){return{model:so()({},this.collaborator),roles:_a,editMode:!1,loading:!1}},methods:{save:function(){var t=this;if(-1!==this.collaborator.permittedRoles.indexOf(this.model.role.id))return this.$store.dispatch("updateCollaborator",this.model).then(function(){t.$emit("reload")}).then(function(){t.editMode=!1});this.$customMsg.showErrorMessage(this.$t("You do not have enough permissions to change to this role!"))},edit:function(){this.collaborator.isLastSU&&this.$customMsg.showErrorMessage(this.$t("Last SuperUser cannot be edited!")),this.editMode=!this.collaborator.isLastSU},cancel:function(){this.model=so()({},this.collaborator),this.editMode=!1},remove:function(){var t=this;if(this.collaborator.canBeDeleted)return this.$store.dispatch("removeCollaborator",this.model).then(function(){t.$emit("reload")});this.$customMsg.showErrorMessage(this.$t("This user cannot be deleted!"))}}},fo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[t.loading?t._e():[a("td",[t._v(t._s(t.model.name))]),t._v(" "),a("td",[t._v(t._s(t.model.email))]),t._v(" "),t.model.isInherited?a("td",[t._v("\n      "+t._s(t.model.role?t.model.role.label:"")+" ("+t._s(t.$t("Inherited from parent"))+")\n    ")]):a("td",[a("c-form-select",{staticClass:"form-control",attrs:{plain:!0,options:t.roles,disabled:!t.editMode},model:{value:t.model.role,callback:function(e){t.$set(t.model,"role",e)},expression:"model.role"}})],1),t._v(" "),a("td",[t._v(t._s(t.model.isPending?"pending":"-"))]),t._v(" "),t.collaborator.currentUser||!t.collaborator.canBeEdited||t.model.isInherited?a("td"):a("td",{staticClass:"actions-col"},[t.editMode?t._e():a("div",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:t.edit}},[t._v(t._s(t.$t("Edit")))]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.remove}},[t._v(t._s(t.$t("Remove")))])]),t._v(" "),t.editMode?a("div",[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:t.save}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))])]):t._e()])],t._v(" "),t.loading?a("td",{attrs:{colspan:"4"}},[a("loading",{attrs:{loading:t.loading}})],1):t._e()],2)},staticRenderFns:[]},ho=a("VU/8")(vo,fo,!1,null,null,null).exports,go=la.TableStore(),_o={name:"CollaboratorsTable",components:{Row:ho},directives:{Sort:la.SortDirective(go)},data:function(){return{loading:!1,collaborators:[]}},computed:{pageItems:function(){return go.commit("setItems",this.$store.getters.collaborators),go.getters.pageItems()}},methods:{reloadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").finally(function(){t.loading=!1})}},watch:{pageItems:{handler:function(t){var e=this;this.collaborators=[];var a=t.filter(function(t){return t.isCurrent})[0].role.id;t.forEach(function(t){var n=1===t.role.id&&1===e.pageItems.filter(function(t){return 1===t.role.id}).length,o=1!==t.role.id||1===t.role.id&&e.pageItems.filter(function(t){return 1===t.role.id}).length>1,s=t.isCurrent,r=[];_a.forEach(function(t){a<=t.id&&r.push(t.id)});var i=-1!==r.indexOf(t.role.id),c={isLastSU:n,canBeDeleted:o,permittedRoles:r,currentUser:s,currentUserRole:a,canBeEdited:i};e.collaborators.push(so()({},t,c))})},deep:!0}}},yo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"name",compare:"strings"},expression:"{sortKey: 'name', compare: 'strings'}"}]},[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"email",compare:"strings"},expression:"{sortKey: 'email', compare: 'strings'}"}]},[t._v(t._s(t.$t("Email")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"role.id",compare:"numbers"},expression:"{sortKey: 'role.id', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Role")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"isPending",compare:"bool"},expression:"{sortKey: 'isPending', compare: 'bool'}"}]},[t._v(t._s(t.$t("Status")))]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.collaborators,function(e){return a("row",{key:e.email,attrs:{collaborator:e},on:{reload:t.reloadCollaborators}})}),1)]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},bo={components:{CollaboratorForm:po,CollaboratorsTable:a("VU/8")(_o,yo,!1,null,null,null).exports},mixins:[ye],created:function(){this.runAfterSCisSet(this.loadCollaborators)},data:function(){return{showForm:!1,loading:!1}},methods:{reloadCollaborators:function(){this.loadCollaborators(),this.showForm=!1},loadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").finally(function(){t.loading=!1})}}},Co={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collaborator-page"},[a("div",{staticClass:"collaborator-page-heading"},[a("h2",{staticClass:"collaborator-page-title"},[t._v(t._s(t.$t("Collaborators")))]),t._v(" "),t.showForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t.showForm?a("collaborator-form",{on:{cancel:function(e){t.showForm=!1},done:t.reloadCollaborators}}):t._e(),t._v(" "),a("collaborators-table",{staticClass:"mt-3"}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Do=a("VU/8")(bo,Co,!1,null,null,null).exports;var $o={removeNulls:function t(e){var a=so()({},e);return $t()(a).forEach(function(e){if(a[e]){if(a[e].constructor===Object){var n=t(a[e]);$t()(n).length?a[e]=n:delete a[e]}}else delete a[e]}),$t()(a).length?a:null},hasAnyData:function(t){return!!$t()(t).find(function(e){return t[e]})},isObject:function(t){return!!t&&t.constructor===Object},isArray:function(t){return!!t&&t.constructor===Array}},xo={name:null,regNum:null,country:null,currency:null,address:null,parent:null,parentFromDate:null,logo:null},wo={components:{CompanySelect:Qn,Multiselect:Kn.a,CountrySelect:jn,Datepicker:gt.a},created:function(){var t=this;this.loading=!0;var e=this.$store.dispatch("loadCurrencies"),a=this.$store.dispatch("loadMyCompanies");In.a.all([e,a]).finally(function(){t.loading=!1})},props:{company:{default:function(){return xo}},logo:{default:function(){return{file:null,formData:null}}}},data:function(){return{formData:so()({},this.company),editMode:!this.company.name,errMsg:null,loading:!1,locales:{en:_t.b,bg:_t.a}}},computed:{currentCompanyId:function(){return this.company.id?this.company.id:null},currencies:function(){return this.$store.getters.currencies?this.$store.getters.currencies:[]},myCompanies:function(){return this.$store.getters.myCompanies?this.$store.getters.myCompanies:[]}},methods:{currenciesLabel:function(t){return t.code+" - "+t.name},validate:function(){return this.$refs.myCompanyCountrySelect.validate(),this.$validator.validateAll()},submit:function(){var t=this,e="";t.loading=!0,t.validate().then(function(a){if(a){var n=t.company.name?"updateSelCompany":"createCompany";return e=t.company.name?"updated":"created",t.company.name||(t.formData.logoData=t.logo.formData),t.$store.dispatch(n,t.formData)}return In.a.reject(new Error("Please, fill the required fields."))}).then(function(a){t.$customMsg.showSuccessMessage("Successfully "+e+" "+a.name+" company."),t.$emit("success",a)}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})},cancelEdit:function(){this.formData=so()({},this.company),this.$emit("cancel"),this.editMode=!1,this.errMsg=null},edit:function(){this.editMode=!0}},watch:{company:function(t){this.editMode=!t.name,this.formData=so()({},t),this.errMsg=null}}},So={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"my-company-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),t.logo.image&&t.logo.image.length>0?a("div",{staticClass:"image-preview"},[a("img",{staticClass:"preview",attrs:{src:t.logo.image,width:"200"}})]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v(t._s(t.$t("Company Name"))+":")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",id:"name",name:"name",disabled:!t.editMode},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"regId"}},[t._v(t._s(t.$t("Registration ID"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.regNum,expression:"formData.regNum"}],staticClass:"form-control",attrs:{type:"text",id:"regId",disabled:!t.editMode},domProps:{value:t.formData.regNum},on:{input:function(e){e.target.composing||t.$set(t.formData,"regNum",e.target.value)}}})]),t._v(" "),a("CountrySelect",{ref:"myCompanyCountrySelect",attrs:{disabled:!t.editMode,componentClass:"form-group"},model:{value:t.formData.country,callback:function(e){t.$set(t.formData,"country",e)},expression:"formData.country"}}),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"currency"}},[t._v(t._s(t.$t("Reporting Currency"))+":")]),t._v(" "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("currency")}],attrs:{id:"currency",name:"currency",plain:!0,disabled:!t.editMode,options:t.currencies,"custom-label":t.currenciesLabel},model:{value:t.formData.currency,callback:function(e){t.$set(t.formData,"currency",e)},expression:"formData.currency"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[t._v(t._s(t.$t("Address"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],staticClass:"form-control",attrs:{type:"text",id:"address",disabled:!t.editMode},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}})]),t._v(" "),a("CompanySelect",{attrs:{companies:t.myCompanies,disabled:!t.editMode,componentClass:"form-group",componentLabel:t.$t("Parent company")+":",currentCompanyId:t.currentCompanyId,allowNone:!0,noneLabel:t.$t("No parent")},model:{value:t.formData.parent,callback:function(e){t.$set(t.formData,"parent",e)},expression:"formData.parent"}}),t._v(" "),t.formData.parent&&t.formData.parent.id>-1?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("From date"))+":")]),t._v(" "),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:t.formData.parent?"required":"",expression:"formData.parent ? 'required' : '' "}],attrs:{name:"parentFromDate","bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",disabled:!t.editMode,placeholder:"Select date"},model:{value:t.formData.parentFromDate,callback:function(e){t.$set(t.formData,"parentFromDate",e)},expression:"formData.parentFromDate"}}),t._v(" "),t.errors.has("parentFromDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a starting date"))+".")]):t._e()],1):t._e(),t._v(" "),t.editMode?a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v(t._s(t.$t("Cancel")))])]):t._e(),t._v(" "),t.editMode?t._e():a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.edit(e)}}},[t._v(t._s(t.$t("Edit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ro=a("VU/8")(wo,So,!1,null,null,null).exports,Fo={data:function(){return{cpModel:so()({},this.cProp),editMode:!this.cProp.aname}},methods:{save:function(){var t=this;return(this.cProp.aname?this.$store.dispatch("updateSCAlias",{alias:this.cProp,updatedAname:this.cpModel.aname}):this.$store.dispatch("createSCAlias",this.cpModel.aname)).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCAlias",this.cProp).then(function(){t.$emit("remove")})}}},Io=wt()({},co,Fo),Po={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.aname},on:{edit:t.onEdit}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.cpModel.aname,expression:"cpModel.aname"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("aname")}],attrs:{type:"text",name:"aname",disabled:!t.editMode},domProps:{value:t.cpModel.aname},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"aname",e.target.value)}}})])},staticRenderFns:[]},Mo=a("VU/8")(Io,Po,!1,null,null,null).exports,ko=function(t){var e={data:function(){return{cpModel:so()({},this.cProp),editMode:!$o.hasAnyData(this.cProp),locales:{en:_t.b,bg:_t.a}}},methods:{validate:function(){return $o.hasAnyData(this.cpModel)?In.a.resolve(!0):In.a.reject(new Error("Please, enter some data."))},save:function(){var e=this,a={};return a[t]=this.cpModel,this.$store.dispatch("updateSelCompany",a).then(function(t){return e.$emit("success"),t})},remove:function(){var e=this,a={};return a[t]=$t()(this.cProp).reduce(function(t,e){return t[e]=null,t},{}),this.$store.dispatch("updateSelCompany",a).then(function(){e.$emit("remove")})}}};return wt()({},co,e)},To={components:{Multiselect:Kn.a},data:function(){return{toggle:!1,errMsg:null,formData:{date:"",months:[],output:"",id:null},dateOptions:ba,months:[{name:"January",value:"Jan"},{name:"February",value:"Feb",mark:!0},{name:"March",value:"Mar"},{name:"April",value:"Apr",mark:!0},{name:"May",value:"May"},{name:"June",value:"Jun",mark:!0},{name:"July",value:"Jul"},{name:"August",value:"Aug"},{name:"September",value:"Sep",mark:!0},{name:"October",value:"Oct"},{name:"November",value:"Nov",mark:!0},{name:"December",value:"Dec"}]}},props:{disabled:{type:Boolean,default:!1},value:{},singleMonth:{type:Boolean,default:!1}},created:function(){this.formData=this.objectToForm(this.value)},computed:{output:function(){var t=this.formData.date?"Every "+this.formData.date.name+" of ":"Select recurring date";return this.formData.date&&this.formData.months&&this.formData.months.length?(this.formData.months.forEach(function(e){t+=e.name+", "}),t=t.slice(0,-2)):this.singleMonth&&this.formData.date&&(t+=this.formData.months.name),t}},methods:{confirm:function(t){var e=this;t.preventDefault(),e.$validator.validateAll().then(function(t){return t?In.a.resolve():In.a.reject(new Error("Please, fill the required fields."))}).then(function(){e.toggle=!1,e.$emit("input",e.formToObject(e.formData))}).catch(function(){})},objectToForm:function(t){var e=this,a={months:[]};return t&&(e.singleMonth?t.months.split("").forEach(function(t,n){Number(t)&&(a.months=e.months[n])}):t.months.split("").forEach(function(t,n){Number(t)&&a.months.push(e.months[n])}),a.date=0===t.dayOfMonth?e.dateOptions[31]:e.dateOptions[t.dayOfMonth-1],a.id=t.id,a.companyId=t.companyId),a},formToObject:function(t){var e=this,a={};return a.id=t.id,a.companyId=t.companyId,a.dayOfMonth=t.date.value,a.months="",this.months.forEach(function(n){e.singleMonth?a.months+=t.months.name===n.name?"1":"0":a.months+=t.months.filter(function(t){return t.name===n.name}).length?"1":"0"}),a},open:function(){this.toggle=!0},close:function(){this.toggle=!1,this.$emit("close")}},watch:{formData:{handler:function(t){var e=!1;t.date&&31===t.date.value&&(e=!0),this.months.forEach(function(t){t.disabled=t.mark&&e}),!t.date||30!==t.date.value&&29!==t.date.value||(e=!0,this.months[1].disabled=!0),e&&(this.singleMonth?t.months=t.months.disabled?this.months[0]:t.months:t.months.forEach(function(e,a){e.disabled&&t.months.splice(a,1)}))},deep:!0},value:{handler:function(t){this.formData=this.objectToForm(t)},deep:!0}}},No={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recurring-date"},[t._v(t._s(t.output)+"\n  "),t.disabled?t._e():a("b-button",{attrs:{variant:"outline-success",size:"sm"},on:{click:t.open}},[t._v("\n    Change\n  ")]),t._v(" "),a("b-modal",{attrs:{title:"Select recurring date"},on:{ok:t.confirm},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[t._v("\n\n    Select Date:\n    "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"deselect-label":"Can't remove this value",name:"date","track-by":"name",label:"name",placeholder:"Select one",options:t.dateOptions,searchable:!1,"allow-empty":!1},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var a=e.option;return[t._v(t._s(a.name))]}}]),model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("date"),expression:"errors.has('date')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")]),t._v(" "),a("br"),t._v(" "),t.singleMonth?a("b-form-group",{attrs:{label:"Select Month"}},[a("b-form-radio-group",{attrs:{stacked:""},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},t._l(t.months,function(e,n){return a("b-form-radio",{key:n,attrs:{value:e,disabled:e.disabled}},[t._v("\n          "+t._s(e.name)+"\n        ")])}),1)],1):a("div",[t._v("\n      Select Months:\n      "),t._l(t.months,function(e,n){return a("div",{key:n},[a("b-form-checkbox",{attrs:{value:e,disabled:e.disabled},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},[t._v("\n          "+t._s(e.name)+"\n        ")])],1)})],2)],1)],1)},staticRenderFns:[]},Ao=a("VU/8")(To,No,!1,null,null,null).exports;function Eo(t){if(t.date){var e="Every "+t.date.name+" of ";return t.months&&Array.isArray(t.months)?e+=t.months.map(function(t){return t.name}).join(", "):e+=t.months.name,e}return"Select recurring date"}var Uo={components:{Multiselect:Kn.a},props:{disabled:{type:Boolean,default:!1},value:{},singleMonth:{type:Boolean,default:!1}},data:function(){return{toggle:!1,errMsg:null,formData:{date:"",months:[],id:null},selectedSingleMonth:null,recurringDateStr:"",dateOptions:ba,months:Ca}},created:function(){this.formData=this.modelToFormData(this.value),this.recurringDateStr=Eo(this.formData)},methods:{onDateChange:function(t){for(var e=11;0<e;e--){var a=this.months[e];if(a.disabled=!(a.days>=t.value),a.disabled)if(this.singleMonth)this.selectedSingleMonth===e&&(this.selectedSingleMonth=null,this.formData.months=null);else{a.selected=!1;for(var n=this.formData.months.length;n--;)if(this.formData.months[n].disabled){this.formData.months.splice(n,1);break}}}},onMonthChange:function(t){if(this.singleMonth)this.selectedSingleMonth=t;else{var e=this.months[t];e.selected=!e.selected}},confirm:function(t){var e=this,a=this;t.preventDefault(),a.$validator.validateAll().then(function(t){return t?In.a.resolve():In.a.reject(new Error("Please, fill the required fields."))}).then(function(){a.toggle=!1;var t,n,o,s,r=a.singleMonth?a.selectedSingleMonth:e.months;a.$emit("input",(t=a.formData,n=r,(s={}).id=t.id,s.companyId=t.companyId,s.dayOfMonth=t.date.value,Array.isArray(n)?o=n.map(function(t){return t.selected?1:0}):(o=new Array(12).fill(0))[n]=1,s.months=o.join(""),s))}).catch(function(){}).finally(function(){a.recurringDateStr=Eo(a.formData)})},open:function(){this.toggle=!0},close:function(){this.toggle=!1,this.$emit("close")},modelToFormData:function(t){var e=this,a={months:[]};return t&&(a.id=t.id,a.companyId=t.companyId,a.date=0===t.dayOfMonth?e.dateOptions[31]:e.dateOptions[t.dayOfMonth-1],t.months.split("").forEach(function(t,n){+t&&(e.singleMonth?a.months=e.months[n]:a.months.push(e.months[n]))})),a}},watch:{value:{handler:function(t){t&&t.companyId!==this.formData.companyId&&(this.formData=this.modelToFormData(t),this.recurringDateStr=Eo(this.formData))},deep:!0}}},Oo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"recurring-date"},[t._v(t._s(t.recurringDateStr)+"\n\n  "),t.disabled?t._e():a("b-button",{attrs:{variant:"outline-success",size:"sm"},on:{click:t.open}},[t._v("\n    Change\n  ")]),t._v(" "),a("b-modal",{attrs:{title:"Select recurring date"},on:{ok:t.confirm},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[t._v("\n\n    Select Date:\n    "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"deselect-label":"Can't remove this value",name:"date","track-by":"name",label:"name",placeholder:"Select one",options:t.dateOptions,searchable:!1,"allow-empty":!1},on:{input:t.onDateChange},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var a=e.option;return[t._v(t._s(a.name))]}}]),model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("date"),expression:"errors.has('date')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")]),t._v(" "),a("br"),t._v(" "),t.singleMonth?a("b-form-group",{attrs:{label:"Select a Month"}},[a("b-form-radio-group",{attrs:{stacked:""},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},t._l(t.months,function(e,n){return a("b-form-radio",{key:n,attrs:{value:e,disabled:e.disabled},on:{change:function(e){return t.onMonthChange2(n)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])}),1)],1):a("div",[t._v("\n      Select Months:\n      "),t._l(t.months,function(e,n){return a("div",{key:n},[a("b-form-checkbox",{attrs:{value:e,disabled:e.disabled},on:{change:function(e){return t.onMonthChange(n)}},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},[t._v("\n          "+t._s(e.name)+"\n        ")])],1)})],2)],1)],1)},staticRenderFns:[]},Vo=a("VU/8")(Uo,Oo,!1,null,null,null).exports,Lo={components:{RecurringDateModal:Ao,RecurringDateSelect:Vo},mixins:[ko("corpTax")],methods:{remove:function(){var t=this;return this.$store.dispatch("deleteSCCorpTax").then(function(){t.$emit("remove")})}}},qo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":t.editMode},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxId"}},[t._v(t._s(t.$t("Corporate Tax ID"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.taxNumber,expression:"cpModel.taxNumber"}],staticClass:"form-control",attrs:{id:"corpTaxId",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.taxNumber},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"taxNumber",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxFillingDate"}},[t._v(t._s(t.$t("Filling Deadline"))+":")]),t._v(" "),a("RecurringDateSelect",{class:[{"form-control":!0,"is-invalid":t.errors.has("corpTaxFillingDate"),inactive:!t.editMode}],attrs:{id:"corpTaxFillingDate",name:"corpTaxFillingDate",disabled:!t.editMode},model:{value:t.cpModel.fillingDate,callback:function(e){t.$set(t.cpModel,"fillingDate",e)},expression:"cpModel.fillingDate"}})],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxDueDate"}},[t._v(t._s(t.$t("Due Date"))+":")]),t._v(" "),a("RecurringDateSelect",{class:[{"form-control":!0,"is-invalid":t.errors.has("corpTaxDueDate"),inactive:!t.editMode}],attrs:{id:"corpTaxDueDate",name:"corpTaxDueDate",disabled:!t.editMode},model:{value:t.cpModel.dueDate,callback:function(e){t.$set(t.cpModel,"dueDate",e)},expression:"cpModel.dueDate"}})],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxAdvancedPayments"}},[t._v("Advanced Payments:")]),t._v(" "),a("RecurringDateSelect",{class:[{"form-control":!0,"is-invalid":t.errors.has("corpTaxAdvancedPayments"),inactive:!t.editMode}],attrs:{id:"corpTaxAdvancedPayments",name:"corpTaxAdvancedPayments",disabled:!t.editMode},model:{value:t.cpModel.advancedPayments,callback:function(e){t.$set(t.cpModel,"advancedPayments",e)},expression:"cpModel.advancedPayments"}})],1)])},staticRenderFns:[]},Ko=a("VU/8")(Lo,qo,!1,null,null,null).exports,zo={components:{RecurringDateModal:Ao},mixins:[ko("audit")]},Bo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":t.editMode},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorName"}},[t._v(t._s(t.$t("Name"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"}],staticClass:"form-control",attrs:{id:"auditorName",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorEmail"}},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",attrs:{id:"auditorEmail",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorPhone"}},[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"}],staticClass:"form-control",attrs:{id:"auditorPhone",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorDdl"}},[t._v(t._s(t.$t("Deadline"))+":")]),t._v(" "),a("RecurringDateModal",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("auditorDdl"),inactive:!t.editMode}],attrs:{id:"auditorDdl",name:"auditorDdl",disabled:!t.editMode},model:{value:t.cpModel.auditDeadlineDate,callback:function(e){t.$set(t.cpModel,"auditDeadlineDate",e)},expression:"cpModel.auditDeadlineDate"}})],1)])},staticRenderFns:[]},jo=a("VU/8")(zo,Bo,!1,null,null,null).exports,Ho={components:{Multiselect:Kn.a,RecurringDateSelect:Vo,CountrySelect:jn},props:{cProp:{required:!1,default:function(){return{}}}},data:function(){return{cpModel:so()({},this.cProp),editMode:!this.cProp.num}},methods:{save:function(){var t=this,e=t.cProp.num?"updateSCVat":"createSCVat";return t.loading=!0,t.$store.dispatch(e,t.cpModel).then(function(){t.$emit("success"),"createSCVat"===e&&(t.cpModel={})})},remove:function(){var t=this;return this.$store.dispatch("deleteSCVat",this.cProp).then(function(){t.$emit("remove")})}},watch:{cProp:{handler:function(t){this.cpModel=so()({},t),this.loading=!1},deep:!0}}},Yo=wt()({},co,Ho),Xo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.num},on:{edit:t.onEdit}},[a("CountrySelect",{attrs:{disabled:!t.editMode,componentClass:"cp-row"},model:{value:t.cpModel.country,callback:function(e){t.$set(t.cpModel,"country",e)},expression:"cpModel.country"}}),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(1===t.cpModel.countryId?t.$t("VAT ID"):t.$t("Sales Tax ID"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.num,expression:"cpModel.num"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("num")}],attrs:{type:"text",name:"num",disabled:!t.editMode},domProps:{value:t.cpModel.num},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"num",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Reporting Regularity"))+":")]),t._v(" "),a("RecurringDateSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("repReg"),inactive:!t.editMode}],attrs:{name:"repReg",disabled:!t.editMode},model:{value:t.cpModel.reportingRecurringDate,callback:function(e){t.$set(t.cpModel,"reportingRecurringDate",e)},expression:"cpModel.reportingRecurringDate"}})],1)],1)},staticRenderFns:[]},Go=a("VU/8")(Yo,Xo,!1,null,null,null).exports,Wo={$_veeValidate:{name:function(){return this.name},value:function(){return this.innerValue.value}},data:function(){return{innerValue:{value:null===this.value.key.id?"input":this.value.key.id,customValue:this.value.customKey},showInput:null===this.value.key.id}},props:{options:{default:function(){return[]}},name:{default:"customSelect"},value:{default:function(){return{}}},selectPlaceholderText:{default:"Please, choose..."},inputPlaceholderText:{default:"Enter value..."},valueKey:{default:"id"},labelKey:{default:"label"},inputLabel:{default:"Custom option"},hasError:{default:!1},errorClass:{default:"is-invalid"},disabled:{default:!1}},methods:{emitValue:function(){var t=this,e=this.options?this.options.filter(function(e){return e[t.valueKey]===Number(t.innerValue.value)}):[];e=0!==e.length?e[0][this.labelKey]:null,this.$emit("input",{key:{id:""===this.innerValue.value?null:this.innerValue.value,label:e},customKey:this.innerValue.customValue})},onSelect:function(t){var e=this;"input"===t.target.value&&(this.showInput=!0,this.$nextTick(function(){return e.$refs.input.focus()})),this.emitValue()},onInput:function(t){this.innerValue.customValue=t.target.value,this.emitValue()},onTriggerClick:function(){var t=this;this.innerValue.value="",this.showInput=!1,this.$nextTick(function(){return t.$refs.select.focus()})},onBlur:function(t){t&&this.$emit("blur")},onSelectBlur:function(){this.showInput||this.$emit("blur")}},watch:{value:{handler:function(t){this.innerValue={value:null===t.key.id?"input":t.key.id,customValue:this.value.customKey},this.showInput=null===t.key.id},deep:!0}}},Jo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-relative"},[a("select",{directives:[{name:"show",rawName:"v-show",value:!t.showInput,expression:"!showInput"},{name:"model",rawName:"v-model",value:t.innerValue.value,expression:"innerValue.value"}],ref:"select",class:[t.hasError?t.errorClass:"","form-control"],attrs:{disabled:t.disabled},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.innerValue,"value",e.target.multiple?a:a[0])},function(e){return t.onSelect(e)}],blur:function(e){return t.onBlur(!t.showInput)},focus:function(e){return t.$emit("focus")}}},[a("option",{attrs:{value:"",disabled:""}},[t._v(t._s(t.selectPlaceholderText))]),t._v(" "),t._l(t.options,function(e){return a("option",{key:e[t.valueKey],domProps:{value:e[t.valueKey]}},[t._v("\n            "+t._s(e[t.labelKey])+"\n    ")])}),t._v(" "),a("option",{attrs:{value:"input"}},[t._v(t._s(t.inputLabel))])],2),t._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:t.showInput,expression:"showInput"}],ref:"input",class:[t.hasError?t.errorClass:"","form-control"],attrs:{disabled:t.disabled,type:"text",placeholder:t.inputPlaceholderText},domProps:{value:t.innerValue.customValue},on:{input:function(e){return t.onInput(e)},blur:function(e){return t.onBlur(t.showInput)},focus:function(e){return t.$emit("focus")}}}),t._v(" "),t.showInput&&!t.disabled?a("button",{staticClass:"btn btn-default close-custom-input-btn",attrs:{type:"button"},on:{click:function(e){return t.onTriggerClick()}}},[t._v("×")]):t._e()])},staticRenderFns:[]};var Qo=a("VU/8")(Wo,Jo,!1,function(t){a("GNxC")},null,null).exports,Zo={components:{VueCustomSelect:Qo},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadResponsibilityKeys").finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{key:{id:""}}}}},data:function(){return{cpModel:so()({},this.cProp),editMode:!this.cProp.name}},computed:{responsibilityKeys:function(){return this.$store.getters.responsibilityKeys}},methods:{save:function(){var t=this,e=this.cProp.id?"updateSCPersonnel":"createSCPersonnel";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCPersonnel",this.cProp).then(function(){t.$emit("remove")})},onInput:function(t){this.cpModel.key=t.key,t.key.id="input"===t.key.id?null:t.key.id,this.cpModel.customKey=t.customKey}},watch:{cProp:{handler:function(){this.cpModel=so()({},this.cProp)},deep:!0}}},ts=wt()({},co,Zo),es={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.name},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Responsibility"))+":")]),t._v(" "),a("VueCustomSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("responsibility")},"w-100"],attrs:{options:t.responsibilityKeys,value:t.cpModel,name:"customSelect",disabled:!t.editMode,loading:t.loading,hasError:t.fields.customSelect&&!t.fields.customSelect.valid&&t.fields.customSelect.touched},on:{input:t.onInput}})],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Name"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",name:"name",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",name:"email",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("phone")}],attrs:{type:"text",name:"phone",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})])])},staticRenderFns:[]},as=a("VU/8")(ts,es,!1,null,null,null).exports;var ns={getFirstLetter:function(t){return t.slice(0,1)},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},os={components:{VueCustomSelect:Qo},created:function(){var t=this;this.cProp.category||(this.cpModel.category={id:ga[this.cat]}),this.loading=!0;var e="load"+ns.capitalizeFirstLetter(this.storeKeysName);this.$store.dispatch(e).finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{key:{}}}},cat:{required:!0},loadingProp:{default:!1}},data:function(){return{cpModel:so()({},this.cProp),storeKeysName:this.cat+"Keys",editMode:!this.cProp.value,loading:!1}},computed:{keys:function(){return this.$store.getters[this.storeKeysName]}},methods:{save:function(){var t=this,e=this.cProp.value?"updateSCCPPair":"createSCCPPair";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success"),t.loading=!0,"createSCCPPair"===e&&(self.cpModel={key:{}})})},remove:function(){var t=this;return this.$store.dispatch("deleteSCCPPair",this.cProp).then(function(){t.$emit("remove")})},onInput:function(t){this.cpModel.key=t.key,t.key.id="input"===t.key.id?null:t.key.id,this.cpModel.customKey=t.customKey}},watch:{cProp:{handler:function(){this.cpModel=so()({},this.cProp),this.loading=!1},deep:!0},loadingProp:function(t){this.loading=t}}},ss=wt()({},co,os),rs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.value},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row cp-pair"},[a("VueCustomSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("key")}],attrs:{options:t.keys,value:t.cpModel,name:"customSelect",disabled:!t.editMode,loading:t.loading,hasError:t.fields.customSelect&&!t.fields.customSelect.valid&&t.fields.customSelect.touched},on:{input:t.onInput}}),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.value,expression:"cpModel.value"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("value")}],attrs:{name:"value",disabled:!t.editMode,rows:"3"},domProps:{value:t.cpModel.value},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"value",e.target.value)}}})],1)])},staticRenderFns:[]},is=a("VU/8")(ss,rs,!1,null,null,null).exports,cs={data:function(){return{toggle:!1,avatarFile:null,imageData:""}},methods:{previewImage:function(t){var e=this,a=t.target;if(a.files&&a.files[0]){var n=new FileReader;n.onload=function(t){e.imageData=t.target.result},n.readAsDataURL(a.files[0])}},confirm:function(){if(this.toggle=!1,""!==this.imageData){var t=new FormData;t.append("file",this.avatarFile),this.$emit("file",t),this.$emit("image",{image:this.imageData,formData:t})}},open:function(){this.toggle=!0},close:function(){this.toggle=!1,this.$emit("close")}}},ls={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{on:{ok:t.confirm},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("New picture"))+":")]),t._v(" "),a("b-form-file",{staticClass:"mt-3",attrs:{accept:"image/*",plain:""},on:{change:t.previewImage},model:{value:t.avatarFile,callback:function(e){t.avatarFile=e},expression:"avatarFile"}})],1),t._v(" "),t.imageData.length>0?a("div",{staticClass:"image-preview"},[a("img",{staticClass:"preview",attrs:{src:t.imageData,width:"200"}})]):t._e()])},staticRenderFns:[]},us=a("VU/8")(cs,ls,!1,null,null,null).exports,ds={name:"avatar",props:{username:{type:String},initials:{type:String},backgroundColor:{type:String},color:{type:String},customStyle:{type:Object},inline:{type:Boolean},size:{type:Number,default:50},src:{type:String},rounded:{type:Boolean,default:!0},lighten:{type:Number,default:80}},data:function(){return{backgroundColors:["#F44336","#FF4081","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"]}},mounted:function(){this.isImage||this.$emit("avatar-initials",this.username,this.userInitial)},computed:{background:function(){if(!this.isImage)return this.backgroundColor||this.randomBackgroundColor(this.username.length,this.backgroundColors)},fontColor:function(){if(!this.isImage)return this.color||this.lightenColor(this.background,this.lighten)},isImage:function(){return Boolean(this.src)},style:function(){var t={display:this.inline?"inline-flex":"flex",width:this.size+"px",height:this.size+"px",borderRadius:this.rounded?"50%":0,lineHeight:this.size+Math.floor(this.size/20)+"px",fontWeight:"bold",alignItems:"center",justifyContent:"center"},e={background:"transparent url('"+this.src+"') no-repeat scroll center center / cover content-box border-box"},a={backgroundColor:this.background,font:Math.floor(this.size/2.5)+"px/100px Helvetica, Arial, sans-serif",color:this.fontColor},n=this.isImage?e:a;return so()(t,n),t},userInitial:function(){return this.isImage?"":this.initials||this.initial(this.username)}},methods:{initial:function(t){for(var e=t.split(/[ -]/),a="",n=0;n<e.length;n++)a+=e[n].charAt(0);return a.length>3&&-1!==a.search(/[A-Z]/)&&(a=a.replace(/[a-z]+/g,"")),a=a.substr(0,3).toUpperCase()},randomBackgroundColor:function(t,e){return e[t%e.length]},lightenColor:function(t,e){var a=!1;"#"===t[0]&&(t=t.slice(1),a=!0);var n=parseInt(t,16),o=(n>>16)+e;o>255?o=255:o<0&&(o=0);var s=(n>>8&255)+e;s>255?s=255:s<0&&(s=0);var r=(255&n)+e;return r>255?r=255:r<0&&(r=0),(a?"#":"")+(r|s<<8|o<<16).toString(16)}}},ms={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-avatar--wrapper",style:[this.style,this.customStyle]},[e("span",{directives:[{name:"show",rawName:"v-show",value:!this.isImage,expression:"!this.isImage"}]},[this._v(this._s(this.userInitial))])])},staticRenderFns:[]},ps=a("VU/8")(ds,ms,!1,null,null,null).exports,vs={components:{MyCompanyForm:Ro,Alias:Mo,CorpTax:Ko,Audit:jo,Vat:Go,Personnel:as,CpPair:is,AvatarChangeModal:us,Avatar:ps},data:function(){return{showAliasForm:!1,showCorpTax:!1,showAudit:!1,showVatForm:!1,showPersonnelForm:!1,showTaxForm:!1,showSoftwareForm:!1,showMiscForm:!1,loading:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}},hasAnyCorpTaxData:function(){return!!this.company.corpTax&&$o.hasAnyData(this.company.corpTax)},hasAnyAuditData:function(){return!!this.company.audit&&$o.hasAnyData(this.company.audit)}},methods:{reloadSelCompany:function(){var t=this;this.loading=!0,this.$store.dispatch("reloadSelCompany",this.company.id).then(function(){t.loading=!1})},deleteCompany:function(){var t=this;this.loading=!0,this.$store.dispatch("deleteSelCompany",this.company.id).then(function(){t.loading=!1,t.$router.push("Home")})},openChangeLogoModal:function(){this.$refs.logoModal.open()},uploadNewLogo:function(t){var e=this;this.loading=!0,this.$store.dispatch("uploadSCLogo",t).then(function(){e.$customMsg.showSuccessMessage(e.$t("Successfully changed company logo"))}).catch(function(t){e.$customMsg.showErrorMessage(e.$t(t.messageDetail))}).finally(function(){e.$store.dispatch("reloadSelCompany",e.company.id).then(function(){e.loading=!1})})},deleteLogo:function(){var t=this;this.loading=!0,this.$store.dispatch("deleteCSLogo").then(function(){t.$customMsg.showSuccessMessage(t.$t("Successfully deleted company logo"))}).catch(function(e){t.$customMsg.showErrorMessage(t.$t(e.messageDetail))}).finally(function(){t.$store.dispatch("reloadSelCompany",t.company.id).then(function(){t.loading=!1})})}}},fs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"company-profile"},[a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"custom-avatar-container"},[a("div",{staticClass:"d-inline-block custom-avatar",on:{click:t.openChangeLogoModal}},[a("Avatar",{attrs:{username:t.company.name?t.company.name:"",initials:t.company.logo&&t.company.logo.initials?t.company.logo.initials:null,src:t.company.logo&&t.company.logo.URL?t.company.logo.URL:"",size:145,rounded:!1}}),t._v(" "),t._m(0)],1),t._v(" "),a("h2",[t._v(t._s(t.company.name))]),t._v(" "),a("AvatarChangeModal",{ref:"logoModal",on:{file:t.uploadNewLogo}})],1),t._v(" "),a("my-company-form",{attrs:{company:t.company}}),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Aliases")))]),t._v(" "),t.showAliasForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAliasForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.aliases,function(t){return a("alias",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showAliasForm?a("alias",{attrs:{"c-prop":{companyId:t.company.id,refCompanyId:t.company.id}},on:{cancel:function(e){t.showAliasForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Corporate Tax")))]),t._v(" "),t.hasAnyCorpTaxData||t.showCorpTax?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showCorpTax=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t.hasAnyCorpTaxData||t.showCorpTax?a("corp-tax",{attrs:{"c-prop":t.company.corpTax},on:{cancel:function(e){t.showCorpTax=t.hasAnyCorpTaxData}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Audit")))]),t._v(" "),t.hasAnyAuditData||t.showAudit?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAudit=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t.hasAnyAuditData||!t.hasAnyAuditData&&t.showAudit?a("audit",{attrs:{"c-prop":t.company.audit},on:{cancel:function(e){t.showAudit=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("VAT / Sales Tax ID")))]),t._v(" "),t.showVatForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showVatForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.vats,function(t){return a("vat",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showVatForm?a("vat",{on:{success:function(e){t.showVatForm=!1},cancel:function(e){t.showVatForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Personnel")))]),t._v(" "),t.showPersonnelForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showPersonnelForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.personnel,function(t){return a("personnel",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showPersonnelForm?a("personnel",{on:{success:function(e){t.showPersonnelForm=!1},cancel:function(e){t.showPersonnelForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Taxes")))]),t._v(" "),t.showTaxForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showTaxForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.taxes,function(e){return a("cp-pair",{key:e.id,attrs:{"c-prop":e,cat:"tax",loadingProp:t.loading}})}),t._v(" "),t.showTaxForm?a("cp-pair",{attrs:{cat:"tax"},on:{success:function(e){t.showTaxForm=!1},cancel:function(e){t.showTaxForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Software")))]),t._v(" "),t.showSoftwareForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showSoftwareForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.software,function(e){return a("cp-pair",{key:e.id,attrs:{"c-prop":e,cat:"software",loadingProp:t.loading}})}),t._v(" "),t.showSoftwareForm?a("cp-pair",{attrs:{cat:"software"},on:{success:function(e){t.showSoftwareForm=!1},cancel:function(e){t.showSoftwareForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Misc")))]),t._v(" "),t.showMiscForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showMiscForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.misc,function(e){return a("cp-pair",{key:e.id,attrs:{"c-prop":e,cat:"misc",loadingProp:t.loading}})}),t._v(" "),t.showMiscForm?a("cp-pair",{attrs:{cat:"misc"},on:{success:function(e){t.showMiscForm=!1},cancel:function(e){t.showMiscForm=!1}}}):t._e(),t._v(" "),t.company.userRole&&1===t.company.userRole.id?a("div",[a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Admin")))]),t._v(" "),a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.delete-modal",modifiers:{"delete-modal":!0}}],attrs:{size:"sm",variant:"danger"}},[t._v(t._s(t.$t("Delete Company")))])],1),t._v(" "),a("b-modal",{attrs:{id:"delete-modal",size:"sm",title:t.$t("Delete Company")},on:{ok:t.deleteCompany}},[t._v("\n        "+t._s(t.$t("Are you really sure you want to delete this company ?"))+"\n      ")])],1):t._e()],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"custom-avatar-overlay"},[e("i",{staticClass:"fa fa-edit fa-lg"})])}]},hs=a("VU/8")(vs,fs,!1,null,null,null).exports,gs={components:{Datepicker:gt.a,CompanySelect:Qn},data:function(){return{locales:{en:_t.b,bg:_t.a},initialDataFilled:!1,formData:{},statementTypes:ha}},computed:{CompanyList:function(){return this.$store.getters.getRecordCompanyList},CompanyListLength:function(){return this.CompanyList.length}},methods:{loadCompanyList:function(){this.$store.dispatch("loadRecordCompanyList",this.formData)},reValidateOnChange:function(){var t=this;this.initialDataFilled=this.formData.statementType&&this.formData.toDate&&(1===this.formData.statementType.id||this.formData.fromDate),this.initialDataFilled&&(this.checkToDate(),setTimeout(function(){t.$validator.validateAll().then(function(e){e&&t.loadCompanyList()})},100))},checkToDate:function(){if(this.formData.statementType&&1===this.formData.statementType.id)return!0;this.$validator.errors.remove("toDate"),Date.parse(this.formData.fromDate)>Date.parse(this.formData.toDate)&&this.$validator.errors.add({field:"toDate",msg:this.$t("To(date) must be greater than From(date)")}),this.$validator.validate("toDate")||this.$validator.errors.add({field:"toDate",msg:this.$t("Please, select a date")})},validateBeforeSubmit:function(){var t=this;this.checkToDate(),this.initialDataFilled=!0,this.$refs.recordsCompanySelect.validate(),this.$validator.validateAll().then(function(e){t.$refs.recordsCompanySelect.validate().then(function(a){e&&a&&(t.loading=!0,t.$emit("success",t.formData))})})}}},_s=wt()({},gs),ys={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-row record-form"},[a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("Statement type")+":","label-for":"statementType"}},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("statementType")},attrs:{id:"statementType",name:"statementType"},on:{input:t.reValidateOnChange},model:{value:t.formData.statementType,callback:function(e){t.$set(t.formData,"statementType",e)},expression:"formData.statementType"}},t._l(t.statementTypes,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.label))])}),0),t._v(" "),t.errors.has("statementType")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a statement type"))+".")]):t._e()],1),t._v(" "),!t.formData.statementType||t.formData.statementType.id>1?a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("From")+":","label-for":"fromDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("fromDate")},attrs:{"bootstrap-styling":!0,id:"fromDate",name:"fromDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{input:t.reValidateOnChange},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t._v(" "),t.errors.has("fromDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")]):t._e()],1):t._e(),t._v(" "),a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("To")+":","label-for":"toDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("toDate")},attrs:{"bootstrap-styling":!0,id:"toDate",name:"toDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{input:t.reValidateOnChange},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t._v(" "),t.errors.has("toDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("toDate"))+".")]):t._e()],1),t._v(" "),a("CompanySelect",{ref:"recordsCompanySelect",staticClass:"mr-4 record-select",attrs:{companies:t.CompanyList,componentClass:"form-group",componentLabel:t.$t("Company:")},model:{value:t.formData.selectedContact,callback:function(e){t.$set(t.formData,"selectedContact",e)},expression:"formData.selectedContact"}}),t._v(" "),a("b-form-group",{attrs:{label:"","label-for":"submitButton"}},[a("b-button",{attrs:{id:"submitButton",variant:"primary"},on:{click:t.validateBeforeSubmit}},[t._v("\n      "+t._s(t.$t("Submit"))+"\n    ")])],1)],1)},staticRenderFns:[]},bs=a("VU/8")(_s,ys,!1,null,null,null).exports,Cs={},Ds=function(t){return Cs.name="RecordsTable",Cs.mixins=[ua(t)],Cs.directives={Sort:la.SortDirective(t)},Cs.props={inputData:{}},Cs.components={InputFilter:la.InputFilter(t),SelectFilter:la.SelectFilter(t),DateFilter:la.DateFilter(t)},Cs.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},Cs.computed={currentRecords:function(){return this.$store.getters.getCurrentRecords},selectedCompany:function(){return this.$store.getters.selectedCompany}},Cs.methods={loadCurrentRecords:function(){this.$store.dispatch("loadCurrentRecords",this.inputData)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},Cs.mounted=function(){this.loadCurrentRecords()},Cs.watch={currentRecords:function(e){t.commit("setItems",e)},inputData:{handler:function(){this.loadCurrentRecords()},deep:!0}},Cs};Ds.options=Cs;var $s=Ds(la.TableStore("RecordsTable")),xs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-condensed table-bordered"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"accType",compare:"strings"},expression:"{sortKey: 'accType', compare: 'strings'}"}]},[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"ref",compare:"strings"},expression:"{sortKey: 'ref', compare: 'strings'}"}]},[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"viewDocDate",compare:"dates"},expression:"{sortKey: 'viewDocDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docCurrency",compare:"strings"},expression:"{sortKey: 'docCurrency', compare: 'strings'}"}]},[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docAmountStr",compare:"numbers"},expression:"{sortKey: 'docAmountStr', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Amount in doc. currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("FX Rate")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"amountInRepCurrencyStr",compare:"numbers"},expression:"{sortKey: 'amountInRepCurrencyStr', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Amount in"))+" "+t._s(t.selectedCompany.currency.code))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"description",compare:"strings"},expression:"{sortKey: 'description', compare: 'strings'}"}]},[t._v(t._s(t.$t("Description")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Creator")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("input-filter",{attrs:{filterKey:"accType",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[a("input-filter",{attrs:{filterKey:"ref",compare:t.compare.numAsString}})],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th",[a("select-filter",{attrs:{filterKey:"docCurrency",compare:t.compare.string,items:t.currentRecords}})],1),t._v(" "),a("th",[a("input-filter",{attrs:{filterKey:"docAmountStr",compare:t.compare.number}})],1),t._v(" "),a("th"),t._v(" "),a("th",[a("input-filter",{attrs:{filterKey:"amountInRepCurrencyStr",compare:t.compare.number}})],1),t._v(" "),a("th",[a("input-filter",{attrs:{filterKey:"description",compare:t.compare.numAsString}})],1),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.accType))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.viewDocDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.viewPostingDate)))]),t._v(" "),a("td",[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",[t._v(t._s(e.docAmountStr))]),t._v(" "),a("td",[t._v(t._s(e.fxRate||"-"))]),t._v(" "),a("td",[t._v(t._s(e.amountInRepCurrencyStr||t.$t("require FX rate")))]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),a("td",[t._v(t._s(e.isOwn?t.$t("Own"):t.$t("Opposite")))])])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},ws={components:{RecordsForm:bs,RecordsTable:a("VU/8")($s,xs,!1,null,null,null).exports},data:function(){return{formData:{},showTable:!1,loading:!1}},methods:{formSubmitted:function(t){this.showTable=!0,this.formData=wt()({},t)}}},Ss={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("RecordsForm",{on:{success:t.formSubmitted}}),t._v(" "),t.showTable?a("RecordsTable",{attrs:{inputData:t.formData}}):t._e(),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Rs=a("VU/8")(ws,Ss,!1,null,null,null).exports,Fs=la.TableStore(),Is={name:"OpenReconciliationsTable",mixins:[ye,ua(Fs)],directives:{Sort:la.SortDirective(Fs)},components:{CompanyCard:hn.a,InputFilter:la.InputFilter(Fs),SelectFilter:la.SelectFilter(Fs),DateFilter:la.DateFilter(Fs),BulkSelector:la.BulkSelector(Fs),CheckboxSelect:la.CheckboxSelect(Fs),MarkedFilter:la.MarkedFilter(Fs)},props:{recType:{}},created:function(){this.runAfterSCisSet(this.loadOpenReconciliations)},computed:{allItems:function(){return Fs.getters.getItems},selectedReconciliations:function(){return Fs.getters.selectedItems}},data:function(){return{reconciliations:null,editActiveForId:null,loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},methods:{startUpload:function(t){var e={statementID:t.statement.id,startDate:t.startDate,endDate:t.endDate},a=this.$route.path;this.$router.push({name:"Upload",params:{uploadData:e,historyComponent:a}})},loadOpenReconciliations:function(){var t=this;this.loading=!0,this.$store.dispatch("load"+this.recType+"Reconciliations").then(function(){t.reconciliations=t.$store.getters[t.recType+"Reconciliations"],t.loading=!1})},deleteReconciliation:function(t){var e=this;this.loading=!0,this.$store.dispatch("deleteReconciliation",t).then(function(){e.$customMsg.showSuccessMessage(e.$t("Successfully deleted reconciliation."))}).catch(function(t){e.$customMsg.showErrorMessage(e.$t("Error")+" : "+t.messageDetail)}).finally(function(){e.loadOpenReconciliations()})},deleteSelectedReconciliations:function(){var t=this;this.loading=!0,this.$store.dispatch("deleteMultipleReconciliation",this.selectedReconciliations).then(function(){t.$customMsg.showSuccessMessage(t.$t("Successfully deleted reconciliation."))}).catch(function(e){t.$customMsg.showErrorMessage(t.$t("Error")+" : "+e.messageDetail)}).finally(function(){t.loadOpenReconciliations()})},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||Fs.commit("removeAllFilters")}},watch:{reconciliations:function(t){Fs.commit("setItems",t)}}},Ps={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelectedReconciliations(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("b-btn",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])],1),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table text-center table-striped"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v(t._s(t.$t("Company")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Dates")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Matched")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Unmatched")))]),t._v(" "),a("th")]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),t._v(" "),a("td",[a("router-link",{attrs:{to:"reconciliation/"+e.id}},[e.refCompany?a("CompanyCard",{attrs:{company:e.refCompany,size:"s"}}):t._e()],1)],1),t._v(" "),a("td",[t._v(t._s(e.statement?e.statement.code:""))]),t._v(" "),a("td",[e.statement&&e.statement.id>1?a("span",[t._v(t._s(t._f("bsDate")(e.startDate))+" - ")]):t._e(),t._v(t._s(t._f("bsDate")(e.endDate)))]),t._v(" "),a("td",[t._v("Amount: "+t._s(e.matchedAmount)+" | Count: "+t._s(e.matchedCount))]),t._v(" "),a("td",[t._v("Amount: "+t._s(e.unMatchedAmount)+" | Count: "+t._s(e.unMatchedCount))]),t._v(" "),a("td",[a("b-dropdown",{attrs:{text:"...","no-caret":""}},[a("b-dropdown-item",{on:{click:function(a){return t.startUpload(e)}}},[t._v(t._s(t.$t("Upload")))]),t._v(" "),a("b-dropdown-item",{on:{click:function(a){return t.deleteReconciliation(e)}}},[t._v(t._s(t.$t("Delete")))])],1)],1)])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ms=a("VU/8")(Is,Ps,!1,null,null,null).exports,ks=a("sUu7");ks.a.extend("checkSelect",{validate:function(t){return!!t.length}});var Ts={selectedCompanies:[],selectedStatements:[],fromDate:"",toDate:""},Ns={name:"CreateReconciliationForm",components:{Datepicker:gt.a,CompanySelect:Qn},mixins:[ye],props:{startRCForId:{}},created:function(){this.runAfterSCisSet(this.loadContacts),this.resetForm()},data:function(){return{locales:{en:_t.b,bg:_t.a},loading:!0,statementTypes:ha,formData:{},lastSelectItem:{},show:!0,formSubmittedOnce:!1}},computed:{hideFromDate:function(){return 1===this.formData.selectedStatements.length&&1===this.formData.selectedStatements[0].id},contacts:function(){return this.$store.getters.contacts},haveContacts:function(){return!!this.contacts.length}},methods:{selectCompany:function(){var t=this;this.startRCForId&&this.contacts.forEach(function(e){e.id===t.startRCForId&&t.formData.selectedCompanies.push(e)})},resetForm:function(){this.formData=wt()({},Ts)},onSubmit:function(t){var e=this;this.formSubmittedOnce=!0,t.preventDefault(),this.$refs.reconciliationCompanySelect.validate().then(function(t){e.$validator.validateAll().then(function(a){a&&t&&e.$emit("formSubmitted",e.formData)})})},reValidateOnChange:function(){var t=this;this.formSubmittedOnce&&setTimeout(function(){t.$refs.reconciliationCompanySelect.validate(),t.$validator.validateAll()},50)},onReset:function(t){var e=this;t.preventDefault(),this.resetForm(),this.show=!1,this.$nextTick(function(){e.show=!0})},loadContacts:function(){this.loadStore("loadSCContacts")},loadStore:function(t){var e=this;this.loading=!0,this.$store.dispatch(t).finally(function(){e.loading=!1,e.selectCompany()})}}},As={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[t.haveContacts?a("div",[a("CompanySelect",{ref:"reconciliationCompanySelect",attrs:{companies:t.contacts,componentLabel:"Companies:",componentClass:"b-form-group form-group",multiple:""},on:{change:t.reValidateOnChange},model:{value:t.formData.selectedCompanies,callback:function(e){t.$set(t.formData,"selectedCompanies",e)},expression:"formData.selectedCompanies"}}),t._v(" "),a("b-form-group",{attrs:{label:t.$t("Statement types"),"label-for":"statements"}},[a("b-form-checkbox-group",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"statements",id:"statements"},model:{value:t.formData.selectedStatements,callback:function(e){t.$set(t.formData,"selectedStatements",e)},expression:"formData.selectedStatements"}},t._l(t.statementTypes,function(e){return a("b-form-checkbox",{key:e.id,attrs:{value:e},on:{change:t.reValidateOnChange}},[t._v("\n          "+t._s(e.code)+"\n        ")])}),1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("statements"),expression:"errors.has('statements')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select at least one statement"))+".")])],1),t._v(" "),t.hideFromDate?t._e():a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("From")+":","label-for":"fromDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"bootstrap-styling":!0,id:"fromDate",name:"fromDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},on:{selected:t.reValidateOnChange},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("fromDate"),expression:"errors.has('fromDate')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1),t._v(" "),a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("To")+":","label-for":"toDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"bootstrap-styling":!0,id:"toDate",name:"toDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},on:{selected:t.reValidateOnChange},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("toDate"),expression:"errors.has('toDate')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1),t._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.$t("Next")))]),t._v(" "),a("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v(t._s(t.$t("Reset")))])],1):a("div",[t._v("\n    "+t._s(t.$t("You need to have contact companies in order to reconcile with them. You can invite companies in "))+"\n    "),a("router-link",{attrs:{to:"contacts"}},[t._v(t._s(t.$t("Contacts page.")))])],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1):t._e()},staticRenderFns:[]},Es=a("VU/8")(Ns,As,!1,null,null,null).exports,Us=la.TableStore(),Os={name:"CreateReconciliationTable",components:{CompanyCard:hn.a,Datepicker:gt.a,InputFilter:la.InputFilter(Us),SelectFilter:la.SelectFilter(Us),DateFilter:la.DateFilter(Us),BulkSelector:la.BulkSelector(Us),CheckboxSelect:la.CheckboxSelect(Us),MarkedFilter:la.MarkedFilter(Us)},mixins:[ye,ua(Us)],created:function(){this.runAfterSCisSet(this.loadCollaborators),this.setTableItems(),Us.commit("setItems",this.tableItems)},props:{formData:{}},data:function(){return{locales:{en:_t.b,bg:_t.a},loading:!1,itemsPerPage:20,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day},tableItems:[],exportData:{disclosed:{},assignee:{},ddl:{}}}},computed:{collaborators:function(){return this.$store.getters.collaborators},selectAssigneeOptions:function(){return this.collaborators.map(function(t){return{text:t.name,value:t}})}},methods:{setTableItems:function(){var t=this,e=[],a=0;this.formData.selectedCompanies.forEach(function(n){t.formData.selectedStatements.forEach(function(o){e.push({id:a,company:n,statement:o,fromDate:t.formData.fromDate,toDate:t.formData.toDate}),a++})}),this.tableItems=e},loadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").then(function(){t.loading=!1})},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||Us.commit("removeAllFilters")},deleteItem:function(t){this.tableItems=this.tableItems.filter(function(e){return e.id!==t}),Us.commit("setItems",this.tableItems)},goStepBack:function(){this.$emit("back")},CreateReconciliations:function(){var t=this,e=[];this.tableItems.forEach(function(a){e.push({id:a.id,company:a.company,statement:a.statement,fromDate:a.fromDate,toDate:a.toDate,disclosed:t.exportData.disclosed[a.id]||!1,assignee:t.exportData.assignee[a.id]||null,ddl:t.exportData.ddl[a.id]||null})}),this.$store.dispatch("createReconciliation",e).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Successfully created ")+e.length+" "+t.$t(1===e.length?"reconciliation":"reconciliations"))}).catch(function(e){t.$customMsg.showErrorMessage(t.$t("Error")+" : "+e.messageDetail)}).finally(function(){t.$emit("close")})}}},Vs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Statement Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Dates")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Assignee")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Disclose")))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("DDL")))])])]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",[a("company-card",{attrs:{company:e.company,size:"m"}})],1),t._v(" "),a("td",[t._v(t._s(e.statement.code))]),t._v(" "),a("td",[1===e.statement.id?a("span",[t._v(t._s(t._f("bsDate")(e.toDate)))]):a("span",[t._v(t._s(t._f("bsDate")(e.fromDate))+" - "+t._s(t._f("bsDate")(e.toDate)))])]),t._v(" "),a("td",[a("b-form-select",{staticClass:"mb-3",attrs:{options:t.selectAssigneeOptions,size:"sm"},model:{value:t.exportData.assignee[e.id],callback:function(a){t.$set(t.exportData.assignee,e.id,a)},expression:"exportData.assignee[item.id]"}})],1),t._v(" "),a("td",[a("b-form-checkbox",{model:{value:t.exportData.disclosed[e.id],callback:function(a){t.$set(t.exportData.disclosed,e.id,a)},expression:"exportData.disclosed[item.id]"}})],1),t._v(" "),a("td",[a("datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},model:{value:t.exportData.ddl[e.id],callback:function(a){t.$set(t.exportData.ddl,e.id,a)},expression:"exportData.ddl[item.id]"}})],1),t._v(" "),a("td",[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.id)}}},[t._v("X")])],1)])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("b-button",{attrs:{variant:"secondary"},on:{click:t.goStepBack}},[t._v(t._s(t.$t("Back")))]),t._v(" "),a("b-button",{attrs:{variant:"primary"},on:{click:t.CreateReconciliations}},[t._v(t._s(t.$t("Create")))]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ls={name:"CreateReconciliationModal",components:{CreateReconciliationForm:Es,CreateReconciliationTable:a("VU/8")(Os,Vs,!1,null,null,null).exports},props:{startRCForId:{}},mixins:[Oa],data:function(){return{formActive:!0,formData:{}}},methods:{load:function(){return In.a.resolve()},close:function(){this.formActive=!0,this.$refs.CrRecForm.resetForm(),this.$emit("input",null)},closeModal:function(){this.formActive=!1,this.$emit("input",null),this.$refs.modal.close()},backToForm:function(){this.formActive=!0},formSubmitted:function(t){this.formData=t,this.formActive=!1}}},qs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("CreateReconciliationForm",{directives:[{name:"show",rawName:"v-show",value:t.formActive,expression:"formActive"}],ref:"CrRecForm",attrs:{startRCForId:t.startRCForId},on:{formSubmitted:t.formSubmitted}}),t._v(" "),t.formActive?t._e():a("CreateReconciliationTable",{attrs:{formData:t.formData},on:{back:t.backToForm,close:t.closeModal}})],1)},staticRenderFns:[]},Ks={name:"ReconciliationsPage",components:{ReconciliationsTable:Ms,CreateReconciliationModal:a("VU/8")(Ls,qs,!1,null,null,null).exports},data:function(){return{loading:!1,activeTabId:0,createModalOpened:!1,startRCForId:null}},created:function(){var t=this;this.$route.params.startReconciliationFor&&(this.startRCForId=this.$route.params.startReconciliationFor,setTimeout(function(){t.createModalOpened=!0},500))},methods:{onTabChange:function(t){this.activeTabId=t}}},zs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reconciliations-page"},[a("div",{staticClass:"reconciliations-page-heading"},[a("h2",{staticClass:"reconciliations-page-title"},[t._v(t._s(t.$t("Reconciliations")))]),t._v(" "),a("b-button",{staticClass:"btn btn-success btn-sm mb-3",attrs:{variant:"primary",size:"sm"},on:{click:function(e){t.createModalOpened=!0}}},[t._v("\n      "+t._s(t.$t("Create Reconciliation"))+"\n    ")])],1),t._v(" "),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:t.$t("Open"),active:""}},[0!==t.activeTabId||t.createModalOpened?t._e():a("ReconciliationsTable",{attrs:{recType:"Open"}})],1),t._v(" "),a("b-tab",{attrs:{title:t.$t("Finished")}},[1!==t.activeTabId||t.createModalOpened?t._e():a("ReconciliationsTable",{attrs:{recType:"Finished"}})],1),t._v(" "),a("b-tab",{attrs:{title:t.$t("Rejected")}},[2!==t.activeTabId||t.createModalOpened?t._e():a("ReconciliationsTable",{attrs:{recType:"Rejected"}})],1)],1),t._v(" "),a("CreateReconciliationModal",{attrs:{startRCForId:t.startRCForId},model:{value:t.createModalOpened,callback:function(e){t.createModalOpened=e},expression:"createModalOpened"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Bs=a("VU/8")(Ks,zs,!1,null,null,null).exports,js={props:{inputValue:{required:!0,type:[String,Number]},placeholder:{},onSubmit:{required:!0,type:Function},formatter:{type:Function,default:function(t){return t}},editMode:{default:!1},id:{}},data:function(){return{edit:this.editMode}},computed:{showValue:function(){return this.formatter(this.inputValue)},modelValue:function(){return this.inputValue}},methods:{submit:function(t){var e=this,a=t.target.elements.eInput.value;if(this.inputValue!==a){var n=e.onSubmit(t,a,e.id);In.a.resolve(n).then(function(){return e.edit=!1,!0}).catch(function(t){return e.edit=!0,t})}else e.edit=!1},cancel:function(){this.edit=!1}}},Hs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.edit?t._e():a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit=!0}}},[t._v(t._s(t.showValue))]),t._v(" "),t.edit?a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.modelValue,expression:"modelValue"}],staticClass:"form-control",attrs:{type:"type",name:"eInput",placeholder:t.placeholder},domProps:{value:t.modelValue},on:{input:function(e){e.target.composing||(t.modelValue=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit"}},[t._v("Ok")]),t._v(" "),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancel}},[t._v("Cancel")])]):t._e()])},staticRenderFns:[]},Ys=a("VU/8")(js,Hs,!1,null,null,null).exports,Xs={},Gs=function(t){return Xs.name="ExceptionsTable",Xs.mixins=[ua(t)],Xs.directives={Sort:la.SortDirective(t)},Xs.components={InputFilter:la.InputFilter(t),SelectFilter:la.SelectFilter(t),DateFilter:la.DateFilter(t),BulkSelector:la.BulkSelector(t),CheckboxSelect:la.CheckboxSelect(t),MarkedFilter:la.MarkedFilter(t),EditInput:Ys},Xs.data=function(){return{itemsPerPage:10,showFilters:!1,loading:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},Xs.created=function(){var t=this;t.loading=!0,t.$store.dispatch("loadCurrencies").finally(function(){t.loading=!1})},Xs.computed={allItems:function(){return this.$store.getters.exceptions},selectedCompany:function(){return this.$store.getters.selectedCompany},isBalanceSheet:function(){return 1===this.$store.getters.selectedReconciliation.statement.id}},Xs.methods={deleteSelected:function(){var e=this;if(!0===confirm("Are you shure?")){var a=t.getters.selectedItems;e.loading=!0,e.$store.dispatch("deleteExceptions",a).then(function(){e.showSuccess()}).catch(function(){e.showError()}).finally(function(){e.loading=!1})}},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},setFxRate:function(e,a,n){var o=this;o.loading=!0;var s={rate:a,record:n};o.$store.dispatch("setRecordFxRate",s).then(function(){return o.showSuccess(),o.$store.dispatch("reloadExceptions")}).then(function(e){t.commit("setItems",e)}).catch(function(t){return o.showError(),t}).finally(function(){o.loading=!1})}},Xs};Gs.options=Xs;var Ws=Gs,Js={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive exceptions-cmp"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-condensed table-bordered"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"accType",compare:"strings"},expression:"{sortKey: 'accType', compare: 'strings'}"}]},[t._v("Acc. Type")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"ref",compare:"strings"},expression:"{sortKey: 'ref', compare: 'strings'}"}]},[t._v("Ref #")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docDate",compare:"dates"},expression:"{sortKey: 'docDate', compare: 'dates'}"}]},[t._v("Doc. Date")]),t._v(" "),t.isBalanceSheet?t._e():a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"postingDate",compare:"dates"},expression:"{sortKey: 'postingDate', compare: 'dates'}"}]},[t._v("Posting Date")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docCurrency",compare:"strings"},expression:"{sortKey: 'docCurrency', compare: 'strings'}"}]},[t._v("Doc. Currency")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docAmount",compare:"numbers"},expression:"{sortKey: 'docAmount', compare: 'numbers'}"}]},[t._v("Amount in doc. currency")]),t._v(" "),a("th",[t._v("FX Rate")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"amountInRepCurrency",compare:"numbers"},expression:"{sortKey: 'amountInRepCurrency', compare: 'numbers'}"}]},[t._v("Amount in "+t._s(t.selectedCompany.currency.code))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"description",compare:"strings"},expression:"{sortKey: 'description', compare: 'strings'}"}]},[t._v("Description")]),t._v(" "),a("th",[t._v("Creator")])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"accType",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"ref",compare:t.compare.numAsString}})],1),t._v(" "),a("th"),t._v(" "),t.isBalanceSheet?t._e():a("th"),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"docAmount",compare:t.compare.number}})],1),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"amountInRepCurrency",compare:t.compare.number}})],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"description",compare:t.compare.numAsString}})],1),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e,disable:e.needFxRate&&!e.amountInRepCurrencyStr}})],1),t._v(" "),a("td",[t._v(t._s(e.accType))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.viewDocDate)))]),t._v(" "),t.isBalanceSheet?t._e():a("td",[t._v(t._s(t._f("bsDate")(e.viewPostingDate)))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.docAmountStr))]),t._v(" "),a("td",{staticClass:"fx-cell",class:{"text-danger":e.needFxRate&&!e.fxRate.value}},[e.needFxRate?a("edit-input",{attrs:{"input-value":e.fxRate.value||"0.00",formatter:t.formatFx,placeholder:0,"on-submit":t.setFxRate,id:e}}):t._e(),t._v(" "),e.needFxRate?t._e():a("span",{staticClass:"text-center"},[t._v("-")])],1),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.amountInRepCurrencyStr||"require FX rate"))]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),a("td",[t._v(t._s(e.isOwn?"Own":"Opposite"))])])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Qs=a("VU/8")(Ws,Js,!1,null,null,null).exports,Zs={},tr=function(t){return Zs.name="ExceptionsCalcTable",Zs.mixins=[ua(t)],Zs.props={exceptions:{required:!0,default:[]},ownCompany:{required:!0},oppCompanyName:{required:!0}},Zs.computed={stats:function(){var t={own:{count:0,amount:0},opp:{count:0,amount:0}};return this.exceptions.reduce(function(e,a){var n=t[a.isOwn?"own":"opp"];return n.count++,n.amount+=+a.amountInRepCurrency,n.amountStr=n.amount.toLocaleString("en-US",{minimumFractionDigits:2}),t},t)},balance:function(){return this.stats.own.amount-this.stats.opp.amount},disableMatch:function(){return this.balance||!this.exceptions||!this.exceptions.length}},Zs.methods={match:function(){this.disableMatch||this.$emit("match")}},Zs};tr.options=Zs;var er=tr,ar={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-striped table-condensed table-bordered"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("Selected Records")]),t._v(" "),a("th",[t._v("Amount ("+t._s(t.ownCompany.currency.code)+")")])])]),t._v(" "),a("tbody",[a("tr",[a("th",[t._v(t._s(t.ownCompany.name))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(t.stats.own.count))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t.stats.own.amountStr))])]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.oppCompanyName))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(t.stats.opp.count))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t.stats.opp.amountStr))])])]),t._v(" "),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[a("button",{staticClass:"btn btn-success",attrs:{disabled:t.disableMatch},on:{click:t.match}},[t._v("Match")])]),t._v(" "),a("td",{staticClass:"text-right"},[a("strong",[t._v(t._s(t._f("numToDec2")(t.balance)))])])])])])},staticRenderFns:[]},nr=a("VU/8")(er,ar,!1,null,null,null).exports,or=la.TableStore(),sr={name:"ExceptionsModal",components:{FullPageModal:Aa,ExceptionsTable:Qs(or),ExceptionsCalcTable:nr(or)},props:{IN:{type:Boolean,required:!0},OUT:{type:Boolean,required:!0},open:{type:Boolean,required:!0}},data:function(){return{hasExceptions:!1,loading:!1}},computed:{selectedCompany:function(){return this.$store.getters.selectedCompany},exceptionsRecords:function(){return this.$store.getters.exceptionsRecords},periodStr:function(){var t=this.$store.getters.selectedReconciliation,e=t.startDate?new Date(t.startDate):null,a=t.endDate?new Date(t.endDate):null;return h.beautifyDates(e,a)},selectedReconciliation:function(){return this.$store.getters.selectedReconciliation},selectedExceptions:function(){return or.getters.selectedItems},title:function(){var t=[];return this.IN&&t.push("Receivables"),this.OUT&&t.push("Payables"),t.join(", ")}},methods:{close:function(){this.$emit("close")},onMatch:function(){var t=this;t.loading=!0;var e={selectedExceptions:t.selectedExceptions,selectedReconciliation:t.selectedReconciliation};t.$store.dispatch("manualMatch",e).then(function(){t.loadExceptions()}).finally(function(){t.loading=!1})},autoMatch:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,selectedReconciliation:this.selectedReconciliation};t.$store.dispatch("matchAuto",e).then(function(){t.loadExceptions()}).finally(function(){t.loading=!1})},exportFile:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,matched:!1,exceptions:!0};t.$store.dispatch("exportRecords",e).finally(function(){t.loading=!1})},loadExceptions:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,selectedReconciliation:this.selectedReconciliation};t.$store.dispatch("loadExceptionsRecords",e).then(function(e){or.commit("setItems",e),t.hasExceptions=!!e.length}).finally(function(){t.loading=!1})}},watch:{open:function(t){t?(this.$refs.modal.open(),this.loadExceptions()):(this.$refs.modal.close(),this.hasExceptions=!1)}}},rr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FullPageModal",{ref:"modal",on:{close:t.close}},[t.hasExceptions?a("div",[a("h1",[t._v("Exceptions - "+t._s(t.title))]),t._v(" "),a("div",{staticClass:"modal-top-info-wrapper"},[a("p",{staticClass:"info-text"},[t._v("\n\t\t\t\t"+t._s(t.selectedCompany.name)+" - "+t._s(t.selectedReconciliation.refCompany.name)),a("br"),t._v("\n\t\t\t\t"+t._s(t.selectedReconciliation.statement.label)+", "+t._s(t.periodStr)+"\n\t\t\t")]),t._v(" "),t.hasExceptions?a("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar"}},[a("b-button",{staticClass:"mr-2",attrs:{variant:"success",size:"sm"},on:{click:t.exportFile}},[t._v("Export")]),t._v(" "),a("b-button",{staticClass:"mr-2",attrs:{variant:"warning",size:"sm"},on:{click:t.autoMatch}},[t._v("Auto Match")]),t._v(" "),a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:t.loadExceptions}},[t._v("Refresh")])],1):t._e()])]):t._e(),t._v(" "),t.hasExceptions?a("ExceptionsCalcTable",{attrs:{exceptions:t.selectedExceptions,"own-company":t.selectedCompany,"opp-company-name":t.selectedReconciliation.refCompany.name},on:{match:t.onMatch}}):t._e(),t._v(" "),t.hasExceptions?a("ExceptionsTable"):t._e(),t._v(" "),t.hasExceptions||t.loading?t._e():a("div",[a("p",[t._v("There are no any records for these parameters.")])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},ir=a("VU/8")(sr,rr,!1,null,null,null).exports,cr={},lr=function(t){return cr.name="MatchedTable",cr.mixins=[ua(t)],cr.data=function(){return{itemsPerPage:10,showFilters:!1,loading:!1}},cr.computed={allItems:function(){return this.$store.getters.matchedSets},selectedCompany:function(){return this.$store.getters.selectedCompany}},cr.methods={toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},unmatch:function(t){this.$emit("unmatch",t.id)}},cr.watch={records:function(e){t.commit("setItems",e)}},cr};lr.options=cr;var ur=lr,dr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive matched-cmp"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-condensed table-bordered"},[a("thead",[a("tr",[a("th",[t._v("Acc. Type")]),t._v(" "),a("th",[t._v("Ref #")]),t._v(" "),a("th",[t._v("Doc. Date")]),t._v(" "),a("th",[t._v("Posting Date")]),t._v(" "),a("th",[t._v("Doc. Currency")]),t._v(" "),a("th",[t._v("Amount in doc. currency")]),t._v(" "),a("th",[t._v("FX Rate")]),t._v(" "),a("th",[t._v("Amount in "+t._s(t.selectedCompany.currency.code))]),t._v(" "),a("th",[t._v("Description")]),t._v(" "),a("th",[t._v("Creator")])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("InputFilter",{attrs:{filterKey:"accType",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"ref",compare:t.compare.numAsString}})],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"docAmount",compare:t.compare.number}})],1),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"description",compare:t.compare.numAsString}})],1),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),t._l(t.pageItems,function(e){return a("tbody",{key:e.id},[a("tr",[a("th",[t._v("#"+t._s(e.id))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(e.matchingType.label))]),t._v(" "),a("th",{attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(a){return t.unmatch(e)}}},[t._v("Unmatch")])])]),t._v(" "),t._l(e.transactions,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.accType))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.viewDocDate))]),t._v(" "),a("td",[t._v(t._s(e.viewPostingDate))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.docAmountStr))]),t._v(" "),a("td",{staticClass:"text-right fx-cell"},[e.needFxRate?a("span",[t._v(t._s(e.fxRate.value||"0.00"))]):t._e(),t._v(" "),e.needFxRate?t._e():a("span",[t._v("-")])]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.amountInRepCurrencyStr))]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),a("td",[t._v(t._s(e.isOwn?"Own":"Opposite"))])])})],2)})],2),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},mr=a("VU/8")(ur,dr,!1,null,null,null).exports,pr=la.TableStore(),vr={name:"matchedModal",components:{FullPageModal:Aa,MatchedTable:mr(pr)},props:{IN:{type:Boolean,required:!0},open:{type:Boolean,required:!0}},data:function(){return{hasSets:!1,loading:!1}},computed:{selectedCompany:function(){return this.$store.getters.selectedCompany},selectedReconciliation:function(){return this.$store.getters.selectedReconciliation},dates:function(){var t=this.$store.getters.selectedReconciliation;if(t){var e=h.formatDate(t.endDate);return t.statement.id>1&&(e=h.formatDate(t.startDate)+" - "+e),e}}},methods:{close:function(){this.$emit("close")},exportFile:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,matched:!0,exceptions:!1};t.$store.dispatch("exportRecords",e).then(function(){}).catch(function(){}).finally(function(){t.loading=!1})},onUnmatch:function(t){var e=this;this.loading=!0,this.$store.dispatch("unmatchSet",t).then(function(){e.loadSets()}).finally(function(){e.loading=!1})},loadSets:function(){var t=this;t.loading=!0;var e={areIN:t.IN,selectedReconciliation:this.selectedReconciliation};t.$store.dispatch("loadMatchedSets",e).then(function(e){t.hasSets=!!e.length,t.hasSets&&pr.commit("setItems",e)}).finally(function(){t.loading=!1})}},watch:{open:function(t){t?(this.$refs.modal.open(),this.loadSets()):(this.$refs.modal.close(),this.hasSets=!1)}}},fr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FullPageModal",{ref:"modal",on:{close:t.close}},[t.hasSets?a("div",[a("h1",[t._v("Matched - "+t._s(this.IN?"Receivables":"Payables"))]),t._v(" "),a("div",{staticClass:"modal-top-info-wrapper"},[a("p",{staticClass:"info-text"},[t._v("\n\t\t\t\t"+t._s(t.selectedCompany.name)+" - "+t._s(t.selectedReconciliation.refCompany.name)),a("br"),t._v("\n\t\t\t\t"+t._s(t.selectedReconciliation.statement.label)+", "+t._s(t.dates)+"\n\t\t\t")]),t._v(" "),t.hasSets?a("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar"}},[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:t.exportFile}},[t._v("Export")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.loadSets}},[t._v("Refresh")])],1):t._e()])]):t._e(),t._v(" "),t.hasSets?a("MatchedTable",{on:{unmatch:t.onUnmatch}}):t._e(),t._v(" "),t.hasSets||t.loading?t._e():a("div",[a("p",[t._v("There are no any records for these parameters.")])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},hr={name:"ReconciliationSummaryTable",components:{ExceptionsModal:ir,MatchedModal:a("VU/8")(vr,fr,!1,null,null,null).exports},data:function(){return{openExceptionsModal:!1,openMatchedModal:!1,isIN:!1,isOUT:!1,loading:!1}},props:["recId"],computed:{selectedReconciliation:function(){return this.$store.getters.selectedReconciliation},company:function(){return this.$store.getters.selectedCompany||{}},summary:function(){return this.$store.getters.selectedReconciliationSummary},statementContext:function(){return{IN:this.selectedReconciliation.context?this.selectedReconciliation.context.IN:"",OUT:this.selectedReconciliation.context?this.selectedReconciliation.context.OUT:""}}},methods:{autoMatch:function(t,e){var a=this,n=this;n.loading=!0;var o={areIN:t,areOUT:e,selectedReconciliation:this.selectedReconciliation};n.$store.dispatch("matchAuto",o).then(function(){a.loadReconciliation()}).finally(function(){n.loading=!1})},showExceptions:function(t,e){this.isIN=!!t,this.isOUT=!!e,this.openExceptionsModal=!0},showMatched:function(t){this.isIN=!!t,this.openMatchedModal=!0},onClose:function(){this.loading||(this.loadReconciliation(),this.openExceptionsModal=!1,this.openMatchedModal=!1)},loadReconciliation:function(){var t=this;return this.loading=!0,In.a.all([this.$store.dispatch("loadSelReconciliation",this.recId),this.$store.dispatch("loadSelReconciliationSummary",this.recId)]).finally(function(){t.loading=!1})}}},gr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pt-3"},[t.summary.in?a("table",{staticClass:"table table-bordered text-center records-summary-table"},[a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v(t._s(t.statementContext.IN))]),t._v(" "),a("th",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v(t._s(t.statementContext.OUT))]),t._v(" "),a("th",[t._v("All")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("Exceptions:")]),a("br"),t._v("\n        Total Amount: "+t._s(t.summary.in.exceptions.me.amount)+" / "+t._s(t.summary.in.exceptions.they.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.in.exceptions.me.count)+" / "+t._s(t.summary.in.exceptions.they.count)+"\n        "),t.summary.in.exceptions.me.count||t.summary.in.exceptions.they.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.autoMatch(1,0)}}},[t._v("Auto Match")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showExceptions(1,0)}}},[t._v("Show Records")])]):t._e()]),t._v(" "),a("td",[a("strong",[t._v("Matched:")]),a("br"),t._v("\n        Total Amount: "+t._s(t.summary.in.matched.me.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.in.matched.me.count)+"\n        "),t.summary.in.matched.me.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showMatched(!0)}}},[t._v("Show Records")])]):t._e()]),t._v(" "),a("td",[a("strong",[t._v("Exceptions:")]),a("br"),t._v("\n        Total Amount: "+t._s(t.summary.out.exceptions.me.amount)+" / "+t._s(t.summary.out.exceptions.they.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.out.exceptions.me.count)+" / "+t._s(t.summary.out.exceptions.they.count)+"\n        "),t.summary.out.exceptions.me.count||t.summary.out.exceptions.they.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.autoMatch(0,1)}}},[t._v("Auto Match")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showExceptions(0,1)}}},[t._v("Show Records")])]):t._e()]),t._v(" "),a("td",[a("strong",[t._v("Matched:")]),a("br"),t._v("\n        Total Amount: "+t._s(t.summary.out.matched.me.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.out.matched.me.count)+"\n        "),t.summary.out.matched.me.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showMatched(!1)}}},[t._v("Show Records")])]):t._e()]),t._v(" "),a("td",[a("strong",[t._v("Exceptions:")]),a("br"),t._v("\n        Total Amount: "+t._s(t.summary.in.exceptions.me.amount+t.summary.out.exceptions.me.amount)+"/"+t._s(t.summary.in.exceptions.they.amount+t.summary.out.exceptions.they.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.in.exceptions.me.count+t.summary.out.exceptions.me.count)+"/"+t._s(t.summary.in.exceptions.they.count+t.summary.out.exceptions.they.count)+"\n        "),t.summary.in.exceptions.me.count||t.summary.out.exceptions.me.count||t.summary.in.exceptions.they.count||t.summary.out.exceptions.they.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){return t.autoMatch(1,1)}}},[t._v("Auto Match")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.showExceptions(1,1)}}},[t._v("Show Records")])]):t._e()])])])]):t._e(),t._v("\n\n  All amounts are in "+t._s(t.company.currency.code)+".\n\n  "),t._v(" "),a("ExceptionsModal",{attrs:{open:t.openExceptionsModal,IN:!!t.isIN,OUT:!!t.isOUT},on:{close:t.onClose}}),t._v(" "),a("MatchedModal",{attrs:{open:t.openMatchedModal,IN:!!t.isIN},on:{close:t.onClose}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},_r=a("VU/8")(hr,gr,!1,null,null,null).exports,yr={name:"ReconciliationMessageRow",components:{Avatar:ps},data:function(){return{editActive:!1,internalMessage:this.message.body}},props:{message:{}},computed:{user:function(){return this.$store.getters.user},selfLiveMessage:function(){if(!this.message.from||!this.message.date)return!1;var t=Date.parse(this.message.date),e=Date.now();return this.message.from.email===this.user.email&&t>e-9e5}},methods:{deleteMessage:function(){var t=this;this.$store.dispatch("deleteMessage",this.message).then(function(){t.$emit("reload")})},switchEditMessage:function(){this.editActive=!this.editActive},saveMessage:function(){var t=this;this.editActive=!1;var e=so()({},this.message);e.body=this.internalMessage,this.$store.dispatch("editMessage",e).then(function(){t.$emit("reload")})}}},br={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message"},[a("Avatar",{attrs:{size:70,username:t.message.from?t.message.from.fullName:"",src:t.message.from&&t.message.from.profileImageUrl?t.message.from.profileImageUrl:""}}),t._v(" "),a("div",{staticClass:"message-content"},[a("div",{staticClass:"message-heading"},[a("div",{staticClass:"full-name"},[t._v("\n        "+t._s(t.message.from?t.message.from.fullName:"")+t._s(t.selfLiveMessage?"(me)":"")+"\n      ")]),t._v(" "),a("div",{staticClass:"message-date"},[t._v("\n        "+t._s(t._f("bsDateTime")(t.message.date))+"\n      ")]),t._v(" "),a("div",{staticClass:"message-buttons"})]),t._v(" "),a("div",{staticClass:"message-text"},[t.editActive?t._e():a("div",[t._v("\n        "+t._s(t.message.body)+"\n      ")]),t._v(" "),t.editActive?a("div",{staticClass:"message-edit"},[a("b-form-textarea",{attrs:{placeholder:"Enter message","no-resize":!0,rows:3,"max-rows":6},model:{value:t.internalMessage,callback:function(e){t.internalMessage=e},expression:"internalMessage"}})],1):t._e()])])],1)},staticRenderFns:[]},Cr=a("VU/8")(yr,br,!1,null,null,null).exports,Dr={name:"ReconciliationMessageRow",components:{Avatar:ps},data:function(){return{messageText:""}},props:{recId:{}},computed:{user:function(){return this.$store.getters.user}},methods:{submit:function(){var t=this,e={recId:this.recId,message:this.messageText};this.$store.dispatch("sendReconciliationMessage",e).then(function(){t.messageText="",t.$emit("reload")})}}},$r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"message-form"},[a("div",{staticClass:"message-form-content "},[a("b-form-textarea",{staticClass:"message-form-text mt-3 mb-3",attrs:{placeholder:"Enter message","no-resize":!0,rows:3,"max-rows":6},model:{value:t.messageText,callback:function(e){t.messageText=e},expression:"messageText"}})],1),t._v(" "),a("b-button",{attrs:{size:"small",variant:"primary"},on:{click:t.submit}},[t._v("\n    SEND\n  ")])],1)},staticRenderFns:[]},xr=a("VU/8")(Dr,$r,!1,null,null,null).exports,wr=la.TableStore(),Sr={name:"ReconciliationMessages",components:{MessageRow:Cr,MessageForm:xr},mixins:[ye,ua(wr)],created:function(){this.runAfterSCisSet(this.loadSRMessages)},computed:{thread:function(){return this.$store.getters.SRMessages},messages:function(){return this.thread.messages?this.thread.messages:[]}},props:["recId"],data:function(){return{itemsPerPage:5,loading:!0}},methods:{loadSRMessages:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSRMessages",this.recId).then(function(){t.loading=!1})}},watch:{messages:function(t){wr.commit("setItems",t)}}},Rr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("b-input-group",{staticClass:"w-25 mx-1 mt-3 mb-3",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})]),t._v(" "),t._l(t.pageItems,function(e){return a("MessageRow",{key:e.id,attrs:{message:e},on:{reload:t.loadSRMessages}})}),t._v(" "),a("MessageForm",{attrs:{recId:t.recId},on:{reload:t.loadSRMessages}}),t._v(" "),a("br"),t._v(" "),a("div",[a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],2)},staticRenderFns:[]},Fr={name:"ReconciliationsPage",components:{ReconciliationSummaryTable:_r,ReconciliationMessages:a("VU/8")(Sr,Rr,!1,null,null,null).exports},mixins:[ye],props:["recId"],data:function(){return{loading:!1,activeTabId:0,options:[{text:"Open",value:1},{text:"Finished",value:2},{text:"Rejected",value:3}]}},computed:{selectedReconciliation:function(){return this.$store.getters.selectedReconciliation||{}},dates:function(){var t=this.$store.getters.selectedReconciliation;if(t){var e=h.formatDate(t.endDate);return t.statement.id>1&&(e=h.formatDate(t.startDate)+" - "+e),e}}},created:function(){this.runAfterSCisSet(this.loadReconciliation)},methods:{loadReconciliation:function(){var t=this;this.loading=!0,In.a.all([this.$store.dispatch("loadSelReconciliation",this.recId),this.$store.dispatch("loadSelReconciliationSummary",this.recId)]).finally(function(){t.loading=!1})},goToUpload:function(){var t={statementID:this.selectedReconciliation.statement.id,startDate:this.selectedReconciliation.startDate,endDate:this.selectedReconciliation.endDate},e=this.$route.path;this.$router.push({name:"Upload",params:{uploadData:t,historyComponent:e}})},goBack:function(){this.$router.go(-1)},changeRecStatus:function(t){this.selectedReconciliation.statusId=t,this.$store.dispatch("editSelReconciliationStatus",this.selectedReconciliation)},onTabChange:function(t){this.activeTabId=t}}},Ir={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reconciliation-page"},[a("h2",[t._v("Reconciliation")]),t._v(" "),a("div",{staticClass:"modal-top-info-wrapper"},[t.selectedReconciliation?a("span",[t._v("\n      "+t._s(t.$t("With"))+": "+t._s(t.selectedReconciliation.refCompany?t.selectedReconciliation.refCompany.name:"")),a("br"),t._v("\n      "+t._s(t.$t("Type"))+": "+t._s(t.selectedReconciliation.statement?t.selectedReconciliation.statement.label:"")),a("br"),t._v("\n      "+t._s(t.$t("For period"))+": "+t._s(t.dates)+"\n    ")]):t._e(),t._v(" "),a("div",[a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:t.goToUpload}},[t._v(t._s(t.$t("Upload")))]),t._v(" "),a("b-button",{attrs:{variant:"warning",size:"sm"},on:{click:t.goBack}},[t._v(t._s(t.$t("Back")))])],1)]),t._v(" "),a("b-form-select",{staticClass:"w-25 mt-3 mb-3",attrs:{options:t.options},on:{change:t.changeRecStatus},model:{value:t.selectedReconciliation.statusId,callback:function(e){t.$set(t.selectedReconciliation,"statusId",e)},expression:"selectedReconciliation.statusId"}}),t._v(" "),a("br"),t._v(" "),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:"Summary",active:""}},[t.loading||0!==t.activeTabId?t._e():a("ReconciliationSummaryTable",{attrs:{recId:t.recId}})],1),t._v(" "),a("b-tab",{attrs:{title:"Messages"}},[1===t.activeTabId?a("ReconciliationMessages",{attrs:{recId:t.recId}}):t._e()],1)],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Pr=[{path:"reconciliations",name:"Reconciliations",component:Bs,meta:{pageId:"reconciliations-page",pageClass:""},beforeEnter:G},{path:"reconciliation/:recId",name:"Reconciliation",component:a("VU/8")(Fr,Ir,!1,null,null,null).exports,props:!0,meta:{pageId:"reconciliation-page",pageClass:""},beforeEnter:G},{path:"upload",name:"Upload",component:fn,meta:{pageId:"upload-page",pageClass:""},beforeEnter:G},{path:"contacts",name:"Contacts",component:no,meta:{pageId:"contacts-page",pageClass:""},beforeEnter:G},{path:"fx",name:"FX",component:Ia,meta:{pageId:"fx-page",pageClass:""},beforeEnter:G},{path:"profile",name:"CompanyProfile",component:hs,meta:{pageId:"profile-page",pageClass:""},beforeEnter:G},{path:"collaborators",name:"Collaborators",component:Do,meta:{pageId:"collaborators-page",pageClass:""},beforeEnter:G},{path:"records",name:"Records",component:Rs,meta:{pageId:"records-page",pageClass:""},beforeEnter:G}];function Mr(t){return{id:t.id,name:t.name,code:t.code,order:t.sortOrder}}function kr(t){return{id:t.id,name:t.name,code:t.isoCode,order:t.sortOrder}}var Tr={};[{name:"countries",converter:"apiToCountry"},{name:"currencies",converter:"apiToCurrency"}].reduce(function(t,e){return t[e.name]=function(){var t=e.endpoint||e.name,a=P.a.get("/"+t);return e.converter?a.then(function(t){return t.map(n[e.converter])}):a},t},Tr),$t()(ga).reduce(function(t,e){return t[e+"Keys"]=function(){return t=ga[e],P.a.get("/CompanyPropertyTypes/"+t+"/keys");var t},t},Tr);var Nr=Tr,Ar={},Er={},Ur={},Or={};$t()(Nr).forEach(function(t){var e,a;a=Nr[t],Ar[e=t]=null,Er[e]=function(t){return t[e]},Ur[e]=function(t,a){t[e]=a},Or["load"+ns.capitalizeFirstLetter(e)]=function(t){var n=t.commit,o=t.state;return o[e]?In.a.resolve(o[e]):a().then(function(t){return n(e,t),t})}});var Vr={state:Ar,getters:Er,mutations:Ur,actions:Or},Lr={created:function(){var t=this;this.loading=!0;var e=$t()(Vr.state).map(function(e){var a=Vr.state[e];a?t.nomenclatures.push({name:e,items:a}):t.$store.dispatch("load"+ns.capitalizeFirstLetter(e)).then(function(a){t.nomenclatures.push({name:e,items:a})})});In.a.all(e).finally(function(){t.loading=!1})},data:function(){return{nomenclatures:[],loading:!1}},methods:{count:function(t){return $o.isObject(t)?$t()(t).length:t.length}}},qr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[t._l(t.nomenclatures,function(e){return a("div",{key:e.name,staticClass:"m-4"},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.name,expression:"nomenclature.name"}],staticClass:"mb-2"},[t._v(t._s(e.name)+" ("+t._s(t.count(e.items))+")")]),t._v(" "),a("b-collapse",{attrs:{id:e.name}},[a("b-card",[a("pre",[t._v(t._s(e.items))])])],1)],1)}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],2)},staticRenderFns:[]},Kr=[{path:"nomenclatures",name:"Nomenclatures",component:a("VU/8")(Lr,qr,!1,null,null,null).exports,meta:{pageId:"nomenclatures-page",pageClass:""},beforeEnter:G}],zr={components:{Avatar:ps},props:{toggleFunc:{},current:{}}},Br={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"notification-panel-body-wrapper":!0,"notification-not-read":!t.current.isRead}},[a("Avatar",{attrs:{username:t.current.userFullName?t.current.userFullName:"",src:t.current.profileImageUrl?t.current.profileImageUrl:"",size:50,customStyle:{border:"1px solid lightgray","flex-shrink":"0"}}}),t._v(" "),a("div",{staticClass:"notifications-text"},[a("h3",[t._v(t._s(t.current.userFullName))]),t._v(" "),a("p",[t._v(t._s(t.current.description))])]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.isRead,expression:"current.isRead"}],class:{"notification-checkbox":!0," checked":t.current.isRead},attrs:{type:"checkbox",title:t.current.isRead?"Mark as unread":"Mark as read"},domProps:{checked:Array.isArray(t.current.isRead)?t._i(t.current.isRead,null)>-1:t.current.isRead},on:{click:function(e){return t.toggleFunc(t.current)},change:function(e){var a=t.current.isRead,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&t.$set(t.current,"isRead",a.concat([null])):s>-1&&t.$set(t.current,"isRead",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.current,"isRead",o)}}})])],1)},staticRenderFns:[]},jr={components:{NotificationBlock:a("VU/8")(zr,Br,!1,null,null,null).exports},props:{notifications:{},panel_style:{},loading:{},handleScroll:{},finalResult:{},goToFunc:{},markAllFunc:{},toggleFunc:{}}},Hr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notification-panel",style:[t.panel_style]},[a("loading",{attrs:{loading:t.loading}}),t._v(" "),t.notifications.length>=1?a("div",{staticClass:"notification-heading"},[a("h6",{staticClass:"notification-heading-title"},[t._v(t._s(t.$t("Notifications")))]),t._v(" "),a("a",{staticClass:"notification-link",on:{click:t.markAllFunc}},[t._v(t._s(t.$t("Mark all as read")))]),t._v(" "),a("a",{staticClass:"notification-link",on:{click:t.goToFunc}},[t._v(t._s(t.$t("See all")))])]):t._e(),t._v(" "),a("div",{staticClass:"notification-panel-body",on:{scroll:t.handleScroll}},[t._l(t.notifications,function(e){return a("NotificationBlock",{key:e.id,attrs:{current:e,toggleFunc:t.toggleFunc}})}),t._v(" "),t.finalResult?a("div",{staticClass:"text-center"},[a("p",[t._v(" No more results.")])]):t._e()],2)],1)},staticRenderFns:[]},Yr=a("VU/8")(jr,Hr,!1,null,null,null).exports,Xr={components:{NotificationPanel:Yr},data:function(){return{loading:!1,company:{},currentTime:null,currentNotification:1,notificationsPerLoad:10}},computed:{notifications:function(){return this.$store.getters.companyNotifications},nextCompanyNotifications:function(){return this.$store.getters.nextCompanyNotifications},finalResult:function(){return 0===this.nextCompanyNotifications.length},payload:function(){var t=new Date(this.currentTime);return{company:this.company,currentTime:t.toISOString(),startIndex:this.currentNotification,endIndex:this.currentNotification+this.notificationsPerLoad-1}},panel_style:function(){return{height:this.windowHeight/2+"px"}}},methods:{showModal:function(t){this.currentNotification=1,this.company=t,this.currentTime=Date.now(),this.loadCompanyNotification(),this.$refs.NotificationModalRef.show()},reloadCompanies:function(){this.$store.dispatch("loadMyCompanies"),this.$store.dispatch("loadUserNotificationsCount")},loadMore:function(){var t=this;this.currentNotification+=this.notificationsPerLoad,this.$store.dispatch("loadNextCompanyNotifications",this.payload).then(function(){t.loading=!1})},loadCompanyNotification:function(){var t=this;this.loading=!0,this.$store.dispatch("loadCompanyNotifications",this.payload).then(function(){t.$store.dispatch("markCompanyNotificationsOld",t.payload),t.loadMore()})},markCompanyNotificationsRead:function(){var t=this;this.loading=!0,this.$store.dispatch("markCompanyNotificationsRead",this.payload).then(function(){t.loading=!1})},loadNextCompanyNotification:function(){var t=this;this.loading=!0,this.finalResult||this.$store.dispatch("addCompanyNotifications",this.nextCompanyNotifications).then(function(){t.loadMore()})},handleScroll:function(t){t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<100&&!this.loading&&!this.finalResult&&this.loadNextCompanyNotification()},goToCompanyNotifications:function(){this.showPanel=!this.showPanel,this.currentNotification=1,this.$router.push({name:"Notifications",params:{type:this.company.id}})},toggleCompanyNotification:function(t){this.$store.dispatch("switchCompanyNotificationReadStatus",t.company.id)}}},Gr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"NotificationModalRef",staticClass:"company-notifications",attrs:{"hide-footer":"",title:"Company Notifications"},on:{hide:t.reloadCompanies}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(" ID: "+t._s(t.company.name))])]),t._v(" "),a("NotificationPanel",{attrs:{notifications:t.notifications,loading:t.loading,panel_style:t.panel_style,handleScroll:t.handleScroll,finalResult:t.finalResult,goToFunc:t.goToCompanyNotifications,markAllFunc:t.markCompanyNotificationsRead,toggleFunc:t.toggleCompanyNotification}})],1)},staticRenderFns:[]},Wr=a("VU/8")(Xr,Gr,!1,null,null,null).exports,Jr={components:{CompanyCard:hn.a,NotificationModal:Wr},props:["companies"],methods:{showCompanyNotifications:function(t){this.$refs.NotificationModal.showModal(t)},goToUploads:function(t){this.$router.push({path:"/companies/"+t+"/upload"})},goToReconciliations:function(t){this.$router.push({path:"/companies/"+t+"/reconciliations"})}}},Qr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Aliases")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Reg Number")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Reporting Currency")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Direct Parent")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Top Parent")))]),t._v(" "),t._m(0),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),a("tbody",t._l(t.companies,function(e){return a("tr",[a("th",[a("router-link",{attrs:{to:"/companies/"+e.id}},[a("company-card",{attrs:{company:e,size:"m"}})],1)],1),t._v(" "),a("td",[t._v(t._s(e.aliases.map(function(t){return t.aname}).join(", ")))]),t._v(" "),a("td",[t._v(t._s(e.regNum))]),t._v(" "),a("td",[t._v(t._s(e.currency.code))]),t._v(" "),a("td",[t._v(t._s(e.parent?e.parent.name:""))]),t._v(" "),a("td",[t._v(t._s(e.topParent?e.topParent.name:""))]),t._v(" "),a("td",[a("a",{on:{click:function(a){return t.showCompanyNotifications(e)}}},[t._v(t._s(e.notificationsCount))])]),t._v(" "),a("td",[a("b-dropdown",{staticClass:"companies-list-actions",attrs:{text:"...",right:"","no-caret":""}},[a("b-dropdown-item",{on:{click:function(a){return t.goToUploads(e.id)}}},[t._v(t._s(t.$t("Upload")))]),t._v(" "),a("b-dropdown-item",{on:{click:function(a){return t.goToReconciliations(e.id)}}},[t._v(t._s(t.$t("Start Reconciliation")))])],1)],1)])}),0)]),t._v(" "),a("NotificationModal",{ref:"NotificationModal"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("th",{attrs:{scope:"col"}},[e("i",{staticClass:"fa fa-bell"})])}]},Zr={components:{CompaniesTable:a("VU/8")(Jr,Qr,!1,null,null,null).exports},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadMyCompanies").finally(function(){t.loading=!1})},data:function(){return{loading:!1}},computed:{myCompanies:function(){return this.$store.getters.myCompanies}}},ti={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h1",[t._v(t._s(t.$t("Companies")))]),t._v(" "),t.myCompanies.length?a("div",{staticClass:"companies-list"},[a("router-link",{staticClass:"btn btn-success btn-sm absolute-right",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))]),t._v(" "),a("companies-table",{attrs:{companies:t.myCompanies}})],1):t._e(),t._v(" "),t.myCompanies.length||t.loading?t._e():a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Add your first company :")))]),t._v(" "),a("router-link",{staticClass:"btn btn-success btn-lg",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))])],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)])])},staticRenderFns:[]},ei=a("VU/8")(Zr,ti,!1,null,null,null).exports,ai={name:"AddCompany",components:{MyCompanyForm:Ro,AvatarChangeModal:us},data:function(){return{companyLogo:{image:null,formData:null}}},methods:{onAddedCompany:function(t){this.$router.push({name:"CompanyProfile",params:{id:t.id}})},cancel:function(){this.$router.go(-1)},setLogo:function(t){this.companyLogo=t},deleteLogo:function(){this.companyLogo={image:null,formData:null}}}},ni={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mx-auto pt-5"},[a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("Add Company")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.$refs.logoModal.open()}}},[t._v(t._s(t.$t("Select Logo")))]),t._v(" "),null!==t.companyLogo.image?a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.deleteLogo}},[t._v("X")]):t._e(),t._v(" "),a("AvatarChangeModal",{ref:"logoModal",on:{image:t.setLogo}}),t._v(" "),a("my-company-form",{attrs:{logo:t.companyLogo},on:{success:t.onAddedCompany,cancel:t.cancel}})],1)])])])])},staticRenderFns:[]},oi=a("VU/8")(ai,ni,!1,null,null,null).exports,si={},ri=function(t){return si.name="ReceivedInvitationsTable",si.mixins=[ua(t)],si.props=["invitations"],si.directives={Sort:la.SortDirective(t)},si.components={CompanyCard:hn.a,CompanySelect:Qn,InputFilter:la.InputFilter(t),SelectFilter:la.SelectFilter(t),DateFilter:la.DateFilter(t)},si.data=function(){return{companiesModels:[],loading:!1,itemsPerPage:10,showFilters:!1,compare:{string:_e.a.string,numAsString:_e.a.numAsString,number:_e.a.number,day:_e.a.day}}},si.mounted=function(){this.setStore()},si.computed={myCompanies:function(){return this.$store.getters.myCompanies}},si.methods={setStore:function(){t.commit("setItems",this.invitations)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},accept:function(t){var e=this.invitations[t],a=this.companiesModels[t];a?this.loadStore("acceptContactInvitation",{company:a,invitation:e}):this.$customMsg.showErrorMessage("Please select company")},reject:function(t){var e=this.invitations[t];this.loadStore("rejectContactInvitation",e)},loadStore:function(t,e){var a=this;this.loading=!0,this.$store.dispatch(t,e).catch(function(t){a.$customMsg.showErrorMessage(t.messageDetail)}).finally(function(){a.loading=!1,a.$emit("reload")})}},si.watch={invitations:function(){this.setStore()}},si};ri.options=si;var ii=ri(la.TableStore("ReceivedInvitationsTable")),ci={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar  mb-4",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{blur:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"sender.company.name",compare:"strings"},expression:"{sortKey: 'sender.company.name', compare: 'strings'}"}]},[t._v("From Company")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.name",compare:"strings"},expression:"{sortKey: 'receiver.name', compare: 'strings'}"}]},[t._v("To Company")]),t._v(" "),a("th",[t._v("Actions")])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("SelectFilter",{attrs:{filterKey:"sender.company.country.name",items:t.invitations,compare:t.compare.string}})],1),t._v(" "),a("th",[a("SelectFilter",{attrs:{filterKey:"receiver.name",items:t.invitations,compare:t.compare.string}})],1),t._v(" "),a("th",[t._v("Actions")])]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e,n){return a("tr",{key:e.id},[a("td",[a("company-card",{attrs:{company:e.sender.company,size:"m"}}),t._v(" "),a("div",[a("strong",[t._v("Country: ")]),t._v(t._s(e.sender.company.country.name))]),t._v(" "),a("div",[a("strong",[t._v("Reg #: ")]),t._v(t._s(e.sender.company.regNum))])],1),t._v(" "),a("td",[a("company-card",{attrs:{company:e.receiver,size:"m"}}),t._v(" "),a("div",[a("strong",[t._v("Country: ")]),t._v(t._s(e.receiver.country.name))]),t._v(" "),a("div",[a("strong",[t._v("Reg #: ")]),t._v(t._s(e.receiver.regNum))])],1),t._v(" "),a("td",[a("form",{on:{submit:function(e){return e.preventDefault(),t.accept(n)}}},[a("div",{staticClass:"form-group"},[a("CompanySelect",{attrs:{ID:"myCompany",name:"myCompany",companies:t.myCompanies,componentClass:"form-group",componentLabel:t.$t("Company")+":",allowNone:!1},model:{value:t.companiesModels[n],callback:function(e){t.$set(t.companiesModels,n,e)},expression:"companiesModels[index]"}})],1),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.accept(n)}}},[t._v("Accept")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.reject(n)}}},[t._v("Reject")])])])])}),0)]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},li={components:{ReceivedInvitationsTable:a("VU/8")(ii,ci,!1,null,null,null).exports},created:function(){this.loadData()},data:function(){return{loading:!1}},computed:{receivedInvitations:function(){return this.$store.getters.receivedInvitations}},methods:{goToHome:function(){this.$router.push("Home")},loadData:function(){var t=this;this.loading=!0,this.$store.dispatch("loadReceivedInvitations").then(function(){t.$store.dispatch("loadMyCompanies").finally(function(){t.loading=!1})})}}},ui={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pl-4 pr-4"},[a("h2",{staticClass:"text-center mt-5"},[t._v("Received Invitations")]),t._v(" "),t.receivedInvitations.length?a("ReceivedInvitationsTable",{attrs:{invitations:t.receivedInvitations},on:{reload:t.loadData}}):t._e(),t._v(" "),t.receivedInvitations.length||t.loading?t._e():a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Currently there are no invitations.")))]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:t.goToHome}},[t._v("\n      "+t._s(t.$t("Go to my companies"))+"\n    ")])],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},di=a("VU/8")(li,ui,!1,null,null,null).exports,mi={data:function(){return{formData:{statement:1}}},methods:{submit:function(){alert("Bai Hui")}}},pi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h1",[t._v("Matching Tool")]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"country"}},[t._v("Statement type:")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.statement,expression:"formData.statement"}],staticClass:"form-control",attrs:{id:"country",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"statement",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1",selected:""}},[t._v("Balance Sheet")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Income Statement")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("Cash Flow Statement")])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"from"}},[t._v("From:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.from,expression:"formData.from"}],staticClass:"form-control",attrs:{type:"text",id:"from",required:""},domProps:{value:t.formData.from},on:{input:function(e){e.target.composing||t.$set(t.formData,"from",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"to"}},[t._v("To:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.to,expression:"formData.to"}],staticClass:"form-control",attrs:{type:"text",id:"to",required:""},domProps:{value:t.formData.to},on:{input:function(e){e.target.composing||t.$set(t.formData,"to",e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"file1"}},[this._v("Own Company File:")]),this._v(" "),e("div",{staticClass:"custom-file"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file1"}}),this._v(" "),e("label",{staticClass:"custom-file-label",attrs:{for:"file1"}},[this._v("Choose file")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"file2"}},[this._v("Opposite Company File:")]),this._v(" "),e("div",{staticClass:"custom-file"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file2"}}),this._v(" "),e("label",{staticClass:"custom-file-label",attrs:{for:"file2"}},[this._v("Choose file")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mt-4"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Submit")])])}]},vi=a("VU/8")(mi,pi,!1,null,null,null).exports,fi={components:{CompanyCard:hn.a},props:["id"],created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSelCompany",this.id).finally(function(){t.loading=!1})},data:function(){return{loading:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}}}},hi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-section"},[a("div",{staticClass:"left-side"},[a("div",{staticClass:"left-side-company-info"},[a("CompanyCard",{attrs:{company:t.company,size:"m",extend:"true"}})],1),t._v(" "),a("nav",{staticClass:"nav flex-column nav-pills"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/upload"}},[a("i",{staticClass:"fas fa-cloud-upload-alt"}),t._v(" "),a("span",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Upload")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/contacts"}},[a("i",{staticClass:"far fa-address-book"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Contacts")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/profile"}},[a("i",{staticClass:"fas fa-user"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Profile")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/collaborators"}},[a("i",{staticClass:"fas fa-users"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Collaborators")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/records"}},[a("i",{staticClass:"fas fa-save"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Records")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/fx"}},[a("i",{staticClass:"fas fa-chart-line"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Fx Rates")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/reconciliations"}},[a("i",{staticClass:"fas fa-exchange-alt fa-rotate-90"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Reconciliations")))])])],1)]),t._v(" "),a("div",{staticClass:"right-side"},[a("router-view")],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},gi=a("VU/8")(fi,hi,!1,null,null,null).exports,_i={data:function(){return{loading:!1,internalData:{},editActive:!1,uploadedFile:null}},components:{Avatar:ps,AvatarChangeModal:us},computed:{user:function(){return this.$store.getters.user}},mounted:function(){this.resetInternalData()},methods:{reloadUser:function(){var t=this;setTimeout(function(){t.$store.dispatch("reloadUser").then(function(){t.resetInternalData(),t.loading=!1})},500)},openChangeAvatarModal:function(){this.$refs.modal.open()},uploadNewAvatar:function(t){var e=this;this.loading=!0,K(t).then(function(){e.$customMsg.showSuccessMessage(e.$t("Successfully changed user avatar"))}).catch(function(t){e.$customMsg.showErrorMessage(t.messageDetail)}).finally(function(){e.reloadUser()})},deleteAvatar:function(t){var e=this;this.loading=!0,z().then(function(){e.$customMsg.showSuccessMessage(e.$t("Successfully deleted user avatar"))}).catch(function(t){e.$customMsg.showErrorMessage(t.messageDetail)}).finally(function(){e.reloadUser()})},resetInternalData:function(){this.internalData=so()({},this.$store.getters.user)},switchEdit:function(){this.editActive&&this.resetInternalData(),this.editActive=!this.editActive},submit:function(){var t=this,e={firstName:this.internalData.firstName,lastName:this.internalData.lastName,phone:this.internalData.phone};this.loading=!0,N(e).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Updated account info for")+": "+e.email)}).catch(function(e){t.$customMsg.showErrorMessage(e.messageDetail)}).finally(function(){t.reloadUser(),t.editActive=!t.editActive})}}},yi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"user-profile-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"custom-avatar-wrapper"},[a("div",{staticClass:"d-inline-block custom-avatar",on:{click:t.openChangeAvatarModal}},[a("Avatar",{attrs:{username:t.internalData.fullName?t.internalData.fullName:"",src:t.internalData.profileImageUrl?t.internalData.profileImageUrl:"",size:145,rounded:!1}}),t._v(" "),t._m(0)],1),t._v(" "),a("AvatarChangeModal",{ref:"modal",on:{file:t.uploadNewAvatar}})],1),t._v(" "),a("div",{staticClass:"form-group inline-form-group email"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v("\n    "+t._s(t.internalData.email)+"\n\n  ")]),t._v(" "),a("div",[a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("First Name"))+":")]),t._v(" "),a("b-form-input",{attrs:{disabled:!t.editActive},model:{value:t.internalData.firstName,callback:function(e){t.$set(t.internalData,"firstName",e)},expression:"internalData.firstName"}})],1),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Last Name"))+":")]),t._v(" "),a("b-form-input",{attrs:{disabled:!t.editActive},model:{value:t.internalData.lastName,callback:function(e){t.$set(t.internalData,"lastName",e)},expression:"internalData.lastName"}})],1),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("b-form-input",{attrs:{disabled:!t.editActive},model:{value:t.internalData.phone,callback:function(e){t.$set(t.internalData,"phone",e)},expression:"internalData.phone"}})],1)]),t._v(" "),t.editActive?a("div",{staticClass:"text-center py-3"},[a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:t.submit}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.switchEdit}},[t._v(t._s(t.$t("Cancel")))])],1):t._e(),t._v(" "),t.editActive?t._e():a("div",{staticClass:"text-center py-3"},[a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:t.switchEdit}},[t._v(t._s(t.$t("Edit")))])],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"custom-avatar-overlay"},[e("i",{staticClass:"fa fa-edit fa-lg"})])}]},bi=a("VU/8")(_i,yi,!1,null,null,null).exports,Ci={data:function(){return{loading:!1,userLanguage:this.$t("lang"),options:[{value:null,disabled:!0,text:"Please select language"},{value:"EN",text:"English"},{value:"БГ",text:"Български"}]}},methods:{submit:function(){var t=this;this.loading=!0;var e=[{key:"language",value:this.$i18n.locale}];A(e).then(function(e){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})},languageChange:function(t){switch(t){case"EN":this.$i18n.locale="en";break;case"БГ":this.$i18n.locale="bg";break;default:this.$i18n.locale="en"}}},watch:{"$i18n.locale":function(){this.userLanguage=this.$t("lang")}}},Di={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"user-settings-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Language"))+":")]),t._v(" "),a("div",[a("b-form-select",{staticClass:"mb-3 form-control",attrs:{options:t.options},on:{change:t.languageChange},model:{value:t.userLanguage,callback:function(e){t.userLanguage=e},expression:"userLanguage"}})],1)]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("Save")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},$i=a("VU/8")(Ci,Di,!1,null,null,null).exports,xi={validations:{formData:{oldPassword:{required:W.required},password:{required:W.required,minLength:Object(W.minLength)(8)},repPassword:{required:W.required,minLength:Object(W.minLength)(8),sameAsPass:Object(W.sameAs)("password")}}},data:function(){return{formData:{oldPassword:null,password:null,repPassword:null},errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,q(this.formData.oldPassword,this.formData.password).then(function(e){t.$customMsg.showSuccessMessage("Password succesfuly updated for account: "+e.email),t.formData.oldPassword=null,t.formData.password=null,t.formData.repPassword=null,t.$emit("success")}).catch(function(e){console.log(e),t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))}}},wi={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"password-change-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Old Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.oldPassword,expression:"formData.oldPassword"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.oldPassword.required&&t.$v.formData.oldPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.oldPassword},on:{blur:function(e){return t.$v.formData.oldPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"oldPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your old password")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.password.required||!t.$v.formData.password.minLength)&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){return t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.repPassword.sameAsPass||!t.$v.formData.repPassword.minLength)&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){return t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.sameAsPass?t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"):t.$t("Please, repeat the password"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("Change Password")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Si={components:{UserProfileForm:bi,UserSettings:$i,PasswordChangeForm:a("VU/8")(xi,wi,!1,null,null,null).exports},data:function(){return{tabIndex:0}},created:function(){this.switchTab()},methods:{changeRoute:function(t){switch(t){case 0:this.$router.push({hash:"#profile"});break;case 1:this.$router.push({hash:"#settings"});break;case 2:this.$router.push({hash:"#password"})}},switchTab:function(){switch(this.$route.hash){case"#profile":this.tabIndex=0;break;case"#settings":this.tabIndex=1;break;case"#password":this.tabIndex=2;break;default:this.tabIndex=0}},reset:function(){this.tabIndex=0}},watch:{$route:function(){this.switchTab()}}},Ri={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-tabs",{staticClass:"user-profile",attrs:{pills:"",card:"",vertical:""},on:{input:t.changeRoute},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"Profile"}},[0===t.tabIndex?a("UserProfileForm"):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:"Settings"}},[1===t.tabIndex?a("UserSettings",{on:{success:t.reset}}):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:"Change Password"}},[2===t.tabIndex?a("PasswordChangeForm",{on:{success:t.reset}}):t._e()],1)],1)},staticRenderFns:[]},Fi=a("VU/8")(Si,Ri,!1,null,null,null).exports,Ii={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},Pi=a("VU/8")({name:"Prototype"},Ii,!1,null,null,null).exports,Mi={components:{Avatar:ps},props:{type:{}},data:function(){return{userNotification:!1,companyId:null}},mounted:function(){this.$store.dispatch("loadAllUserNotifications")},computed:{userNotifications:function(){return this.$store.getters.userNotifications},companyNotifications:function(){return this.$store.getters.companyNotifications},notifications:function(){return this.userNotification?this.userNotifications:this.companyNotifications},notificationTypeText:function(){return"user"===this.type?(this.userNotification=!0,"User Notifications"):(this.companyId=this.type,this.userNotification=!1,"Company Notifications (for company id:"+this.type+")")}},methods:{}},ki={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h2",{staticClass:"text-center mt-5"},[t._v(t._s(t.notificationTypeText)+" :")]),t._v(" "),t._l(t.notifications,function(e){return a("div",{class:{"notification-panel-body-wrapper page":!0,"notification-not-read":!e.isRead}},[a("Avatar",{attrs:{username:e.userFullName?e.userFullName:"",src:e.profileImageUrl?e.profileImageUrl:"",size:50,customStyle:{border:"1px solid lightgray","flex-shrink":"0"}}}),t._v(" "),a("div",{staticClass:"notifications-text"},[a("h3",[t._v(t._s(e.userFullName))]),t._v(" "),a("p",[t._v(t._s(e.description))])])],1)})],2)},staticRenderFns:[]},Ti=a("VU/8")(Mi,ki,!1,null,null,null).exports,Ni={beforeMount:function(){this.$route.query&&void 0!==this.$route.query.c&&this.makeApiCall(),this.afterConfirmation()},methods:{makeApiCall:function(){var t=this,e=this.$route.query;this.$store.dispatch("confirmAccount",e).then(this.$customMsg.showSuccessMessage("Success")).catch(function(e){return t.$customMsg.showErrorMessage(e.messageDetail)})},afterConfirmation:function(){this.$router.push("/")}}},Ai={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-5 mx-auto pt-5"},[this._v("\n      Confirming account ....\n    ")])])])}]},Ei=a("VU/8")(Ni,Ai,!1,null,null,null).exports;o.default.use(Y.a);var Ui=new Y.a({routes:[{path:"/",name:"Home",component:ei,meta:{pageId:"home-page",pageClass:""},beforeEnter:G},{path:"/ConfirmAccount",name:"ConfirmAccount",component:Ei,meta:{pageId:"confirm-account-page",pageClass:""}}].concat(H()(ht),[{path:"/user",name:"UserPage",component:Fi,meta:{pageId:"user-page",pageClass:""},beforeEnter:G},{path:"/companies/:id",name:"CompanyPage",component:gi,props:!0,redirect:"/companies/:id/profile",meta:{pageId:"company-page",pageClass:""},beforeEnter:G,children:Pr},{path:"/add-company",name:"AddCompany",component:oi,meta:{pageId:"add-company-page",pageClass:""},beforeEnter:G},{path:"/received-invitations",name:"ReceivedInvitations",component:di,meta:{pageId:"received-invitations-page",pageClass:""},beforeEnter:G},{path:"/notifications/:type",name:"Notifications",props:!0,component:Ti,meta:{pageId:"notifications-page",pageClass:""},beforeEnter:G},{path:"/matching-tool",name:"MatchingTool",component:vi,meta:{pageId:"matching-tool-page",pageClass:""},beforeEnter:G},{path:"/prototype",name:"Prototype",component:Pi,redirect:"/prototype/company",meta:{pageId:"",pageClass:"prototype-page"},beforeEnter:G,children:Kr},{path:"*",redirect:"/"}]),mode:"history",linkExactActiveClass:"active"}),Oi={state:{user:null,token:null},getters:{user:function(t){return t.user},token:function(t){return t.token}},mutations:{setToken:function(t,e){t.token=e},setUser:function(t,e){t.user=e},clearUser:function(t){t.user=null,t.token=null}},actions:{loadUserCash:function(t){var e=t.commit,a=t.dispatch,n=sessionStorage.getItem("at");n&&e("setToken",n);var o=JSON.parse(sessionStorage.getItem("ud"));o&&(e("setUser",o),a("userNotificationsCountTimer",!0))},register:function(t,e){t.commit;return E(e)},login:function(t,e){var a=t.commit,n=t.dispatch;return U(e).then(function(t){n("resetCompanyStore"),n("userNotificationsCountTimer",!0),sessionStorage.setItem("ud",F()(t)),a("setUser",t)})},logout:function(t){var e=t.dispatch;return O().finally(function(){e("clearout"),e("userNotificationsCountTimer",!1)})},clearout:function(t){var e=t.commit;e("clearUser"),e("clearInvitations"),Ui.push("/login"),sessionStorage.clear()},setToken:function(t,e){(0,t.commit)("setToken",e),sessionStorage.setItem("at",e)},reloadUser:function(t){var e=t.commit;return T().then(function(t){e("setUser",t),sessionStorage.setItem("ud",F()(t))})},confirmAccount:function(t,e){t.commit;var a=e.c||"";return B(a)}}};function Vi(t){return{id:t.id,companyId:t.companyId,typeId:t.typeId,typeName:t.typeName,targetId:t.targetId,dayOfMonth:+t.dayOfMonth,months:t.months,holidayHandlingTypeName:t.holidayHandlingTypeName,holidayHandlingTypeId:t.holidayHandlingTypeId}}function Li(t){var e={typeId:t.typeId,dayOfMonth:t.dayOfMonth||0,months:t.months?t.months:"000000000000"};return t.id&&(e.id=t.id),t.companyId&&(e.companyId=t.companyId),t.typeName&&(e.typeName=t.typeName),t.targetId&&(e.targetId=t.targetId),t.holidayHandlingTypeName&&(e.holidayHandlingTypeName=t.holidayHandlingTypeName),t.holidayHandlingTypeId&&(e.holidayHandlingTypeId=t.holidayHandlingTypeId),e}function qi(t){return{id:t.id,name:t.name,country:{id:t.country.id,code:t.country.code,name:t.country.name},regNum:t.registrationNumber,logo:ec(t.name,t.logoUrl)}}function Ki(t){return S()({},qi(t),{aliases:t.companyAliases.map(ji)})}function zi(t){var e=S()({},qi(t),{currency:{id:t.currency.id,code:t.currency.code,name:t.currency.name},address:t.addressText,parent:t.parent?t.parent:null,parentFromDate:t.parentFromDate?new Date(t.parentFromDate):null,parentToDate:t.parentToDate?new Date(t.parentToDate):null,aliases:t.ownCompanyAliases?t.ownCompanyAliases.map(ji):[],userSettings:t.userSettings,userRole:{id:t.userRole.id,label:t.userRole.label},notificationsCount:t.notificationsCount});return t.topMostParent&&(e.topParent={id:t.topMostParent.id,name:t.topMostParent.name}),e}function Bi(t){var e=S()({},zi(t),{corpTax:{taxNumber:t.taxNumber},audit:{name:t.auditorName,email:t.auditorEmail,phone:t.auditorPhone},personnel:t.companyPersonnels.map(Yi),vats:t.companyVatNumbers.map(Hi),taxes:[],software:[],misc:[]});return t.companyPropertyValues.reduce(function(t,e){var a=Xi(e);switch(a.category.id){case ga.tax:t.taxes.push(a);break;case ga.software:t.software.push(a);break;default:t.misc.push(a)}return t},e),t.recurringDates.forEach(function(t){switch(console.log("* TODO: review recDate object",t),t.typeId){case 2:e.corpTax.fillingDate=Vi(t);break;case 3:e.corpTax.dueDate=Vi(t);break;case 4:e.corpTax.advancedPayments=Vi(t);break;case 5:e.audit.auditDeadlineDate=Vi(t)}}),console.log("* api-to-company: ",e),e}function ji(t){return{id:t.id,companyid:t.companyId,refCompanyid:t.refCompanyId,aname:t.aliasText}}function Hi(t){return{id:t.id,num:t.vatNumber,country:{id:t.countryId,name:t.countryName,code:t.countryCode},reportingRecurringDate:t.reportingRecurringDate}}function Yi(t){return{id:t.id,key:{id:t.typeKeyId,label:t.typeKeyText},customKey:t.customKeyValue,name:t.name,email:t.email,phone:t.phone}}function Xi(t){return{id:t.id,category:{id:t.typeId,name:t.typeName},key:{id:t.keyId,label:t.keyName},customKey:t.customKey,value:t.value}}function Gi(t,e,a,n){void 0!==a[n]&&(t[e]=a[n])}function Wi(t,e,a){e&&(e.typeId=ya[t].id,a.push(Li(e)))}function Ji(t){return{id:t.id,companyid:t.companyId,refCompanyid:t.refCompanyId,aliasText:t.aname}}function Qi(t){var e={id:t.id,typeKeyid:t.key.id,customKeyValue:t.customKey,name:t.name,email:t.email,phone:t.phone};return t.company&&(e.companyId=t.company.id),e}function Zi(t){var e={vatNumber:t.num,countryId:t.country.id,reportingRecurringDate:{typeId:ya.VAT_REPORTING_DATE.id,months:t.reportingRecurringDate.months,dayOfMonth:t.reportingRecurringDate.dayOfMonth}};return t.id&&(e.id=t.id,e.reportingRecurringDate.targetId=t.id),t.company&&(e.companyId=t.company.id,e.reportingRecurringDate.companyId=t.company.id),e}function tc(t){var e={typeid:t.category.id,value:t.value,customKey:t.customKey,keyId:t.key.id};return t.company&&(e.companyId=t.company.id),t.id&&(e.id=t.id),console.log(e),e}function ec(t,e){var a=Math.floor(10001*Math.random()),n={};return e?n.URL=e+"?rand="+a:n.initials=t?ns.getFirstLetter(t):"",n}function ac(t){var e=oc(t);return e.sender=function(t){return{company:{id:t.companyId,name:t.companyName,regNum:t.companyRegistrationNumber,country:{id:t.companyCountry.id,code:t.companyCountry.code,name:t.companyCountry.name},logo:ec(t.companyName,t.companyLogoUrl)},user:rc(t)}}(t),e.receiver=sc(t),e}function nc(t){var e=oc(t);return e.sender={user:rc(t)},e.receiver=sc(t),e}function oc(t){return{id:t.id,ddl:new Date(t.expirationDate)}}function sc(t){return{email:t.invitedUserEmail,name:t.invitedCompanyName,regNum:t.invitedCompanyRegistrationNumber,country:{id:t.invitedCompanyCountry?t.invitedCompanyCountry.id:"",code:t.invitedCompanyCountry?t.invitedCompanyCountry.code:"",name:t.invitedCompanyCountry?t.invitedCompanyCountry.name:""},logo:ec(t.invitedCompanyName)}}function rc(t){return{name:t.inviterName,email:t.inviterEmail}}function ic(t){return{name:t.name,id:t.id,country:t.country,addressText:t.addressText,currency:t.currency,ownCompanyAliases:t.ownCompanyAliases,regNum:t.registrationNumber,parent:t.parent,children:t.children.map(ic),logo:ec(t.name,t.logoUrl)}}var cc=function(t){return P.a.get("/Contacts/Companies/"+t.id).then(function(t){return t.map(Ki)})},lc=function(t){return P.a.get("/CompaniesTree/"+t.id).then(function(t){return t.map(ic)})},uc=function(t){return P.a.get("/Contacts/Companies/"+t.id+"/PendingSentInvitations").then(function(t){return t.map(nc)})},dc=function(t,e){var a,n={invitedCompanyName:(a=e).name,invitedCompanyCountryId:a.country.id,invitedCompanyRegistrationNumber:a.regNum,collaboratorEmail:a.email,message:a.message};return P.a.post("/Contacts/Companies/"+t.id,n).then(nc)},mc=function(t,e){return P.a.post("/Contacts/Companies/"+t.id+"/OwnCompanies",e)},pc=function(t){return P.a.delete("/Contacts/Invitations/"+t.id)},vc=function(){return P.a.get("/Contacts/PendingReceivedInvitations").then(function(t){return t.map(ac)})},fc=function(t,e){return P.a.post("/Contacts/Invitations/"+e.id+"/Companies/"+t.id+"/Acceptance")},hc=function(t){return P.a.post("/Contacts/Invitations/"+t.id+"/Rejection")};function gc(t,e){return function(a){return t(e,a),a}}var _c=a("etT0"),yc=a.n(_c),bc={state:{invitations:[]},getters:{receivedInvitations:function(t){return t.invitations}},mutations:{setUserReceivedInvitations:function(t,e){t.invitations=e},removeInvitation:function(t,e){var a=yc()(t.invitations,function(t){return t.id===e.id});t.invitations.splice(a,1)},clearInvitations:function(t){t.invitations=[]}},actions:{loadReceivedInvitations:function(t){var e=t.commit;return vc().then(gc(e,"setUserReceivedInvitations"))},acceptContactInvitation:function(t,e){var a=t.commit,n=e.company,o=e.invitation;return fc(n,o).then(gc(a,"removeInvitation"))},rejectContactInvitation:function(t,e){var a=t.commit;return hc(e).then(gc(a,"removeInvitation"))}}},Cc={state:S()({},Oi.state,bc.state),getters:S()({},Oi.getters,bc.getters),mutations:S()({},Oi.mutations,bc.mutations),actions:S()({},Oi.actions,bc.actions)};function Dc(t,e){return{name:t.userFullName||"",role:{id:t.roleId,label:t.roleLabel},company:{id:t.companyId},email:t.userEmail,isPending:t.isPending,isInherited:t.isInherited,isCurrent:e&&t.userEmail===e.email}}function $c(t){var e={roleid:t.role.id,userEmail:t.email};return t.isInherited&&(e.isInherited=t.isInherited),t.name&&(e.userFullName=t.name),t.company&&(e.companyId=t.company.id),e}var xc=function(t,e){return P.a.get("/Collaborators/Companies/"+t.id).then(function(t){return t.map(function(t){return Dc(t,e)})})},wc=function(t,e,a){e.company=t;var n=$c(e);return P.a.post("/Collaborators/",n).then(function(t){return Dc(t,a)})},Sc=function(t){var e=$c(t);return P.a.put("/Collaborators/",e)},Rc=function(t){return P.a.delete("/Collaborators/Companies/"+t.company.id+"?userEmail="+encodeURIComponent(t.email))},Fc={collaborators:[]},Ic={state:S()({},Fc),mutations:{setCollaborators:function(t,e){t.collaborators=e},addCollaborator:function(t,e){t.collaborators.push(e)},updateCollaborator:function(t,e){var a=yc()(t.collaborators,function(t){return t.id===e.id});t.collaborators[a]=e},removeCollaborator:function(t,e){var a=t.collaborators.indexOf(e);t.collaborators.splice(a,1)}},actions:{resetCollaborators:function(t){var e=t.state;so()(e,Fc)},loadSCCollaborators:function(t){var e=t.commit,a=t.getters;return xc(a.selectedCompany,a.user).then(gc(e,"setCollaborators"))},addSCCollaborator:function(t,e){var a=t.commit,n=t.getters;return wc(n.selectedCompany,e,n.user).then(gc(a,"addCollaborator"))},updateCollaborator:function(t,e){var a=t.commit;return Sc(e).then(function(){return a("updateCollaborator",e),!0})},removeCollaborator:function(t,e){var a=t.commit;return Rc(e).then(function(){a("removeCollaborator",e)})}},getters:{collaborators:function(t){return t.collaborators}}},Pc=function(t){var e=Li(t);return P.a.post("/RecurringDates/",e)},Mc=function(t){var e=t.map(function(t){P.a.patch("/RecurringDates/"+t.id,t)});return In.a.all(e)},kc=function(t){return P.a.delete("/RecurringDates/"+t)},Tc=function(){return P.a.get("/Companies/").then(function(t){return t.map(zi)})},Nc=function(t){var e={name:t.name,addressText:t.address,countryId:t.country.id,parentFromDate:t.parentFromDate,currencyId:t.currency.id};return t.regNum&&(e.registrationNumber=t.regNum),t.parent&&(e.parentId=t.parent.id),P.a.post("/Companies/",e).then(Bi)},Ac=function(t){return P.a.get("/Companies/"+t.id).then(Bi)},Ec=function(t,e){var a=function(t){var e={},a=[];Gi(e,"id",t,"id"),Gi(e,"name",t,"name"),Gi(e,"registrationNumber",t,"regNum"),Gi(e,"addressText",t,"address"),t.aliases&&(e.ownCompanyAliases=t.aliases.map(Ji)),t.personnel&&(e.companyPersonnels=t.personnel.map(Qi)),t.vats&&(e.companyVatNumbers=t.vats.map(Zi)),t.taxes&&(e.taxes=t.taxes.map(tc)),t.software&&(e.software=t.software.map(tc)),t.misc&&(e.companyPropertyValues=t.misc.map(tc)),t.country&&(e.countryId=t.country.id),t.currency&&(e.currencyId=t.currency.id),t.parent&&(e.parentId=t.parent.id),void 0!==t.parentFromDate&&(e.parentFromDate=h.formatDate(t.parentFromDate)),t.corpTax&&(e.taxNumber=t.corpTax.taxNumber||null,Wi("CORPTAX_FILLING_DATE",t.corpTax.fillingDate,a),Wi("CORPTAX_DUE_DATE",t.corpTax.dueDate,a),Wi("CORPTAX_ADVANCED_PAYMENTS_DATE",t.corpTax.advancedPayments,a)),t.audit&&(e.auditorName=t.audit.name,e.auditorEmail=t.audit.email,e.auditorPhone=t.audit.phone,Wi("AUDIT_DDL",t.audit.auditDeadlineDate,a));var n={company:e};return 0!==a.length&&(n.recurringDates=a),n}(e),n=[];return a.recurringDates&&n.push(Mc(a.recurringDates)),In.a.all(n).then(function(){return P.a.patch("/Companies/"+t.id,a.company)}).then(function(t){return console.log("Kakvo vrusta server-a?",t),Bi(t)})},Uc=function(t){return P.a.delete("/Companies/"+t.id)},Oc=function(t,e){return P.a.post("/Companies/"+t.id+"/Logo",e)},Vc=function(t){return P.a.delete("/Companies/"+t.id+"/Logo")},Lc=function(t,e,a){var n={companyId:t.id,refCompanyId:e.id,aliasText:a};return P.a.post("/Aliases/",n).then(ji)},qc=function(t,e){var a={aliasText:e};return P.a.patch("/Aliases/"+t.id,a)},Kc=function(t){return P.a.delete("/Aliases/"+t.id)},zc={create:function(t,e){e.company=t;var a=Qi(e);return P.a.post("/Personnel/",a).then(Yi)},update:function(t){var e=Qi(t);return P.a.patch("/Personnel/"+e.id,e)},delete:function(t){return P.a.delete("/Personnel/"+t.id)}},Bc={create:function(t,e){e.company=t;var a=Zi(e);return P.a.post("/Vats/",a).then(Hi)},update:function(t){var e=Zi(t);return P.a.patch("/Vats/"+e.id,e)},delete:function(t){return P.a.delete("/Vats/"+t.id)}},jc={create:function(t,e){e.company=t;var a=tc(e);return P.a.post("/CompanyPropertyValues/",a).then(Xi)},update:function(t){var e=tc(t);return P.a.patch("/CompanyPropertyValues/"+e.id,e)},delete:function(t){return P.a.delete("/CompanyPropertyValues/"+t.id)}},Hc={myCompanies:[],selectedCompany:null},Yc=S()({},Hc),Xc={};$t()(Yc).reduce(function(t,e){return t[e]=function(t){return t[e]},t},Xc);var Gc={setMyCompanies:function(t,e){t.myCompanies=e},addCompany:function(t,e){t.myCompanies.push(e)},setSelectedCompany:function(t,e){if(t.selectedCompany=e,t.myCompanies){var a=yc()(t.myCompanies,function(t){return t.id===e.id});a>-1&&(t.myCompanies[a]=e)}},deleteSelCompany:function(t){if(t.myCompanies){var e=t.myCompanies.indexOf(t.selectedCompany);e>-1&&t.myCompanies.splice(e,1)}t.selectedCompany=null},setSCLogo:function(t,e){console.log("setSCLogo: ",e),t.selectedCompany.logo.URL=e},addSCAlias:function(t,e){t.selectedCompany.aliases.push(e)},updateSCAlias:function(t,e){var a=e.alias,n=e.updatedAname,o=t.selectedCompany.aliases;o[o.indexOf(a)].aname=n},deleteSCAlias:function(t,e){var a=t.selectedCompany.aliases,n=a.indexOf(e);a.splice(n,1)},addSCVat:function(t,e){t.selectedCompany.vats.push(e)},updateSCVat:function(t,e){var a=t.selectedCompany.vats;a[yc()(a,function(t){return t.id===e.id})]=e},deleteSCVat:function(t,e){var a=t.selectedCompany.vats,n=a.indexOf(e);a.splice(n,1)},addSCPersonnel:function(t,e){t.selectedCompany.personnel.push(e)},updateSCPersonnel:function(t,e){var a=t.selectedCompany.personnel;a[yc()(a,function(t){return t.id===e.id})]=e},deleteSCPersonnel:function(t,e){var a=t.selectedCompany.personnel,n=a.indexOf(e);a.splice(n,1)},addSCCPPair:function(t,e){var a=Wc(e);t.selectedCompany[a].push(e)},updateSCCPPair:function(t,e){var a=Wc(e),n=t.selectedCompany[a];n[yc()(n,function(t){return t.id===e.id})]=e},deleteSCCPPair:function(t,e){var a=Wc(e),n=t.selectedCompany[a],o=n.indexOf(e);n.splice(o,1)}};function Wc(t){var e=$t()(ga).find(function(e){return ga[e]===t.category.id});return"tax"===e&&(e="taxes"),e}function Jc(t,e){return function(a){return t(e,a),a}}var Qc={resetCompanies:function(t){var e=t.state;so()(e,Hc)},loadMyCompanies:function(t){var e=t.commit;t.state;return Tc().then(Jc(e,"setMyCompanies"))},createCompany:function(t,e){var a=t.commit;t.state;return Nc(e).then(Jc(a,"addCompany")).then(function(t){return null!==e.logoData?Oc(t,e.logoData).then(Jc(a,"setSCLogo")).then(function(){return t}):t})},loadSelCompany:function(t,e){var a=t.commit,n=t.state;return n.selectedCompany&&n.selectedCompany.id===e?In.a.resolve(n.selectedCompany):Ac({id:e}).then(Jc(a,"setSelectedCompany"))},reloadSelCompany:function(t,e){var a=t.commit;t.state;return Ac({id:e}).then(Jc(a,"setSelectedCompany"))},updateSelCompany:function(t,e){var a=t.commit,n=t.state,o=n.selectedCompany.corpTax,s=wt()({},e),r=[];if(o&&s.corpTax){if(!o.fillingDate&&s.corpTax.fillingDate){var i=s.corpTax.fillingDate;delete s.corpTax.fillingDate,i.companyId=n.selectedCompany.id,i.typeId=ya.CORPTAX_FILLING_DATE.id,i.holidayHandlingTypeId=0,r.push(Pc(i))}if(!o.dueDate&&s.corpTax.dueDate){var c=s.corpTax.dueDate;delete s.corpTax.dueDate,c.companyId=n.selectedCompany.id,c.typeId=ya.CORPTAX_DUE_DATE.id,c.holidayHandlingTypeId=0,r.push(Pc(c))}if(!o.advancedPayments&&s.corpTax.advancedPayments){var l=s.corpTax.advancedPayments;delete s.corpTax.advancedPayments,l.companyId=n.selectedCompany.id,l.typeId=ya.CORPTAX_ADVANCED_PAYMENTS_DATE.id,l.holidayHandlingTypeId=0,r.push(Pc(l))}}return In.a.all(r).then(function(){return Ec(n.selectedCompany,s)}).then(function(t){return a("setSelectedCompany",t),console.log("STORE company: ",t),t})},deleteSelCompany:function(t){var e=t.commit,a=t.state;return Uc(a.selectedCompany).then(function(){e("deleteSelCompany")})},deleteSCCorpTax:function(t){var e=t.commit,a=t.state,n=a.selectedCompany.corpTax,o=[];return n.fillingDate&&n.fillingDate.id&&o.push(kc(n.fillingDate.id)),n.dueDate&&n.dueDate.id&&o.push(kc(n.dueDate.id)),n.advancedPayments&&n.advancedPayments.id&&o.push(kc(n.advancedPayments.id)),In.a.all(o).then(function(){return Ec(a.selectedCompany,{corpTax:{taxNumber:null}})}).then(function(t){return e("setSelectedCompany",t),t})},uploadSCLogo:function(t,e){var a=t.commit,n=t.state;return Oc(n.selectedCompany,e).then(Jc(a,"setSCLogo"))},deleteSCLogo:function(t){var e=t.commit,a=t.state;return Vc(a.selectedCompany).then(Jc(e,"setSCLogo"))},createAlias:function(t,e){t.commit;var a=t.state,n=e.refCompany,o=e.aname;return Lc(a.selectedCompany,n,o)},createSCAlias:function(t,e){var a=t.commit,n=t.state;return Lc(n.selectedCompany,n.selectedCompany,e).then(Jc(a,"addSCAlias"))},updateSCAlias:function(t,e){var a=t.commit,n=e.alias,o=e.updatedAname;return qc(n,o).then(function(){return a("updateSCAlias",{alias:n,updatedAname:o}),!0})},deleteSCAlias:function(t,e){var a=t.commit;return Kc(e).then(function(){a("deleteSCAlias",e)})}};[{name:"Vat",service:Bc},{name:"Personnel",service:zc},{name:"CPPair",service:jc}].reduce(function(t,e){t["createSC"+e.name]=function(t,a){var n=t.commit,o=t.state;return e.service.create(o.selectedCompany,a).then(Jc(n,"addSC"+e.name))};var a="updateSC"+e.name;t[a]=function(t,n){var o=t.commit;return e.service.update(n).then(function(){return o(a,n),!0})};var n="deleteSC"+e.name;return t[n]=function(t,a){var o=t.commit;return e.service.delete(a).then(function(){o(n,a)})},t},Qc);var Zc={state:Yc,getters:Xc,mutations:Gc,actions:Qc};function tl(t){return{detailId:t.detailId,typeId:t.typeId,typeName:t.typeName,fromDate:new Date(t.fromDate),toDate:null!==t.toDate?new Date(t.toDate):null,name:t.name,country:t.country,description:t.description,registrationNumber:t.registrationNumber,companyAliases:t.companyAliases.join(", "),logo:ec(t.name,t.logoUrl)}}var el=function(t,e){return P.a.get("/RelatedParties/Companies/"+t.id+function(t){var e=null!==t.startDate?"startDate="+h.formatDate(t.startDate)+"&":"";return e+=null!==t.endDate?"endDate="+h.formatDate(t.endDate)+"&":"",e+=null!==t.startIndex?"startIndex="+t.startIndex+"&":"",e+=null!==t.endIndex?"endIndex="+t.endIndex+"&":"",e+=null!==t.sort?"sort="+t.sort+"&":"",""!=(e+=null!==t.isSortDescending?"isSortDescending="+t.isSortDescending+"&":"")?"?"+(e=e.slice(0,-1)):""}(e)).then(function(t){return t.relatedParties=t.relatedParties.map(tl),t})},al=function(t,e){var a=function(t,e){return{companyId:t.id,refCompanyId:e.contact,fromDate:e.fromDate,toDate:e.toDate,description:e.description}}(t,e);return P.a.post("/RelatedParties",a).then(function(t){return tl(t)})},nl=function(t){return P.a.delete("/RelatedParties/"+t)},ol=function(t){var e=function(t){return{fromDate:t.fromDate,toDate:t.toDate?t.toDate:null,description:t.description}}(t);return P.a.patch("/RelatedParties/Details/"+t.id,e)},sl={contacts:[],holdingTree:[],companyRelatedParties:[],companySentInvitations:[]},rl=S()({},sl),il={},cl={addInvitation:function(t,e){t.companySentInvitations.push(e)},removeInvitation:function(t,e){var a=t.companySentInvitations.indexOf(e);a>-1&&t.companySentInvitations.splice(a,1)}};$t()(rl).forEach(function(t){il[t]=function(e){return e[t]},cl["set"+ns.capitalizeFirstLetter(t)]=function(e,a){e[t]=a}});var ll={state:rl,mutations:cl,actions:{resetContacts:function(t){var e=t.state;so()(e,sl)},loadSCContacts:function(t){var e=t.commit,a=t.getters;return cc(a.selectedCompany).then(gc(e,"setContacts"))},loadSCSentInvitations:function(t){var e=t.commit,a=t.getters;return uc(a.selectedCompany).then(gc(e,"setCompanySentInvitations"))},inviteContact:function(t,e){var a=t.commit,n=t.getters;return dc(n.selectedCompany,e).then(gc(a,"addInvitation"))},inviteMyCompanyContacts:function(t,e){t.commit;var a=t.getters;return mc(a.selectedCompany,e)},cancelInvitation:function(t,e){var a=t.commit;return pc(e).then(function(){a("removeInvitation",e)})},loadSCRelatedParties:function(t,e){var a=t.commit,n=t.getters;return el(n.selectedCompany,e).then(gc(a,"setCompanyRelatedParties"))},addRelatedParty:function(t,e){t.commit;var a=t.getters;return al(a.selectedCompany,e)},editRelatedParty:function(t,e){t.commit;return ol(e)},deleteRelatedParty:function(t,e){t.commit;return nl(e)},loadHoldingTree:function(t){var e=t.commit,a=t.getters;return lc(a.selectedCompany).then(gc(e,"setHoldingTree"))}},getters:il};function ul(t){return{id:t.id,statementType:{id:t.statementTypeId},fromDate:new Date(t.startDate),toDate:new Date(t.endDate)}}function dl(t){var e={recordsCount:{}};return e.recognizedCompaniesSets=t.validTransactionsSummary.map(pl),e.recordsCount.validRecognizedCompany=ml(e.recognizedCompaniesSets),e.unrecognizedCompaniesSets=t.unknownRefCompanyTransactionsSummary.map(vl),e.recordsCount.validUnrecognizedCompany=ml(e.unrecognizedCompaniesSets),e.recordsCount.invalid=t.invalidTransactionsCount?t.invalidTransactionsCount:0,e.recordsCount.outOfScope=t.outOfScopeTransactionsCount?t.outOfScopeTransactionsCount:0,e.recordsCount.removed=t.userCanceledTransactionsCount?t.userCanceledTransactionsCount:0,e}function ml(t){return t.reduce(function(t,e){return t+e.payables.count+e.receivables.count},0)}function pl(t){return S()({},vl(t),{currency:{id:t.docCurrencyId,code:t.docCurrencyISOCode}})}function vl(t){return{company:{id:t.companyId,name:t.companyName},receivables:{amount:+t.receivablesAmount,count:+t.receivablesCount},payables:{amount:+t.payablesAmount,count:+t.payablesCount}}}function fl(t){return S()({},(e=t.errors,a=0,n=e.map(function(t){return a=t.level>a?t.level:a,{level:{id:t.level,label:t.levelName},type:{id:t.typeId,label:t.typeName},desc:t.description}}).sort(function(t,e){return t.level.id-e.level.id}),{highestErrorLevel:a,errors:n}),{line:t.fileRowIndex,account:t.accountText,ref:t.referenceText,isReceivable:t.isReceivable,payer:t.payerName,receiver:t.receiverName,docDate:new Date(t.documentDate),postingDate:new Date(t.postingDate),dueDate:new Date(t.dueDate),currency:{id:t.currencyId,code:t.currencyCode},docAmount:t.documentAmount,desc:t.description});var e,a,n}var hl={importExcel:function(t,e){e.company=t;var a=function(t){var e={companyid:t.company.id,statementTypeid:t.statementType.id,startDate:t.fromDate?h.prepareForUTCString(t.fromDate):null,endDate:t.toDate?h.prepareForUTCString(t.toDate):null},a=new FormData;return a.append("data",F()(e)),a.append("file",t.file),a}(e);return P.a.post("/Imports/ExcelTransactions",a).then(ul)},saveValidRecords:function(t){return P.a.post("/Imports/"+t.id+"/ValidRecords")},removeValidSet:function(t,e){return P.a.delete("/Imports/"+t.id+"/RefCompanies/"+e.company.id+"/Currencies/"+e.currency.id)},removeValidRecord:function(t,e){return P.a.delete("/Imports/"+t.id+"/RowIndex/"+e.line)},getSummary:function(t){return P.a.get("/Imports/"+t.id+"/Records/Summary").then(dl)},getRecognizedCompanyRecords:function(t,e){return P.a.get("/Imports/"+t.id+"/ValidRecords/RefCompanies/"+e.company.id+"/Currencies/"+e.currency.id).then(function(t){return t.map(fl)})},getUnrecognizedCompanyRecords:function(t,e){return P.a.get("/Imports/"+t.id+"/ValidRecords/UnknownRefCompanies/"+e.company.name).then(function(t){return t.map(fl)})},getInvalidRecords:function(t,e){return P.a.get("/Imports/"+t.id+"/InvalidRecords").then(function(t){return t.map(fl)})},getOutOfScopeRecords:function(t,e){return P.a.get("/Imports/"+t.id+"/OutOfScopeRecords").then(function(t){return t.map(fl)})}},gl={importReceipt:null,summary:null,rcSetsRecords:{},ucSetsRecords:{},invalidRecords:null,outOfScopeRecords:null};function _l(t,e,a,n,o){var s=t.commit,r=t.getters,i=r[e](o);if(i)return In.a.resolve(i);var c=r.importReceipt;return hl[a](c,o).then(function(t){s(n,{set:o,records:t})})}function yl(t,e,a,n){var o=t.commit,s=t.getters.importReceipt;return hl[a](s).then(gc(o,n))}var bl={state:S()({},gl),mutations:{setImportReceipt:function(t,e){t.importReceipt=e},setSummary:function(t,e){t.summary=e},setUCRecords:function(t,e){var a=t.summary.unrecognizedCompaniesSets.find(function(t){return t.company.name===e.set.company.name}),n=S()({},t.ucSetsRecords);n[a.company.name]=e.records,t.ucSetsRecords=n},setRCRecords:function(t,e){var a=t.summary.recognizedCompaniesSets.find(function(t){return t.company.name===e.set.company.name}),n=S()({},t.rcSetsRecords);n[a.company.name]=e.records,t.rcSetsRecords=n},setInvalidRecords:function(t,e){t.invalidRecords=e},setOutOfScopeRecords:function(t,e){t.outOfScopeRecords=e},clearImport:function(t){so()(t,gl)}},actions:{resetImports:function(t){var e=t.state;so()(e,gl)},uploadExcel:function(t,e){var a=t.commit,n=t.getters;return hl.importExcel(n.selectedCompany,e).then(gc(a,"setImportReceipt"))},saveValid:function(t){t.commit;var e=t.getters;return hl.saveValidRecords(e.importReceipt)},removeValidSet:function(t,e){t.commit;var a=t.getters;return hl.removeValidSet(a.importReceipt,e)},removeValidRecord:function(t,e){t.commit;var a=t.getters;return hl.removeValidRecord(a.importReceipt,e)},loadSummary:function(t){var e=t.commit,a=t.getters.importReceipt;return a?hl.getSummary(a).then(gc(e,"setSummary")):In.a.resolve()},loadRecognizedCompanyRecords:function(t,e){return _l(t,"recognizedCompanyRecords","getRecognizedCompanyRecords","setRCRecords",e)},loadUnrecognizedCompanyRecords:function(t,e){return _l(t,"unrecognizedCompanyRecords","getUnrecognizedCompanyRecords","setUCRecords",e)},loadInvalidRecords:function(t){return yl(t,0,"getInvalidRecords","setInvalidRecords")},loadOutOfScopeRecords:function(t){return yl(t,0,"getOutOfScopeRecords","setOutOfScopeRecords")}},getters:{importReceipt:function(t){return t.importReceipt},importSummary:function(t){return t.summary},recognizedCompaniesSets:function(t){if(t.summary)return t.summary.recognizedCompaniesSets},recognizedCompanyRecords:function(t){return function(e){if(t.rcSetsRecords&&e)return t.rcSetsRecords[e.company.name]}},unrecognizedCompaniesSets:function(t){if(t.summary)return t.summary.unrecognizedCompaniesSets},unrecognizedCompanyRecords:function(t){return function(e){if(t.ucSetsRecords&&e)return t.ucSetsRecords[e.company.name]}},recordsCount:function(t){if(t.summary)return t.summary.recordsCount},invalidRecords:function(t){return t.invalidRecords},outOfScopeRecords:function(t){return t.outOfScopeRecords},statementType:function(t){if(t.importReceipt)return ha[+t.importReceipt.statementType.id-1]},statementTypeContext:function(t){if(t.importReceipt)return ha[+t.importReceipt.statementType.id-1].context}}};function Cl(t){return{id:t.id,accType:t.accountText,setId:t.setId,ref:t.referenceText,viewDocDate:new Date(t.documentDate),viewPostingDate:new Date(t.postingDate),fxRate:t.currentReportFxRate,docCurrency:t.currencyCode,docAmountStr:t.documentAmount,amountInRepCurrencyStr:t.amountInReportCurrency,description:t.description,isOwn:t.isOwn}}var Dl=function(t,e){var a=function(t,e){return{companyId:e.id,statementTypeId:t.statementType.id,refCompanyId:t.selectedContact.id,startDate:t.fromDate?h.formatDate(t.fromDate):"1900-01-01",endDate:t.toDate?h.formatDate(t.toDate):null}}(t,e);return P.a.get("/ReportTransactions/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId+"/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/"+a.endDate+"?payables=true&receivables=true&matched=true&unmatched=true").then(function(t){return t.map(Cl)})},$l=function(t,e){var a=function(t,e){return{companyId:e.id,statementTypeId:t.statementType.id,startDate:t.fromDate?h.formatDate(t.fromDate):null,endDate:t.toDate?h.formatDate(t.toDate):null}}(t,e);return P.a.get("/ReportingOppositeCompanies/"+a.companyId+"/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/"+a.endDate).then(function(t){return t.map(Ki)})},xl={currentRecords:[],recordCompanyList:[]};function wl(t,e){return function(a){return t(e,a),a}}var Sl={state:S()({},xl),getters:{getCurrentRecords:function(t){return t.currentRecords},getRecordCompanyList:function(t){return t.recordCompanyList}},mutations:{setCurrentRecords:function(t,e){t.currentRecords=e},setRecordCompanyList:function(t,e){t.recordCompanyList=e}},actions:{resetRecords:function(t){var e=t.state;so()(e,xl)},loadCurrentRecords:function(t,e){var a=t.commit,n=t.state;return Dl(e,n.selectedCompany).then(wl(a,"setCurrentRecords"))},loadRecordCompanyList:function(t,e){var a=t.commit,n=t.state;return $l(e,n.selectedCompany).then(wl(a,"setRecordCompanyList"))}}};function Rl(t){var e={};$t()(fa).map(function(a){t.typeId===fa[a].id&&(e=fa[a])});var a=null===t.manualRate?null:{units:t.manualRate.units,rate:t.manualRate.value},n=null===t.autoRate?null:{units:t.autoRate.units,rate:t.autoRate.value};return{id:null===t.manualRate?null:t.manualRate.id,rateType:e,date:new Date(t.date),manual:a,auto:n,toCurrency:{id:t.refCurrencyId,code:t.refCurrencyIsoCode}}}function Fl(t){return{sourceID:t.usedSourceFxRateSourceId,oldSourceID:t.usedSourceFxRateSourceId,date:t.usedSourceFromDate?new Date(t.usedSourceFromDate):null,usedSourceId:t.usedSourceId,usedSourceFxRateSourceId:t.usedSourceFxRateSourceId,usedSourceFromDate:t.usedSourceFromDate,currency:{id:t.currency.id,isoCode:t.currency.isoCode,name:t.currency.name},sources:t.sources}}var Il=function(t,e){var a=function(t,e){return{companyId:e.id,periodMonth:h.formatDate(t.data),parameter:"?get"+(t.average?"Average":"Daily")+"=true"}}(t,e);return P.a.get("/FxRates/Companies/"+a.companyId+"/periodMonth/"+a.periodMonth+a.parameter).then(function(t){return t.map(Rl)})},Pl=function(t){return P.a.delete("/ManualFxRates/"+t.id)},Ml=function(t,e){var a=function(t,e){return{companyId:e.id,refCurrencyId:t.currencyId,typeId:t.recordType,date:t.recordDate,value:t.recordRate,units:1}}(t,e);return P.a.post("/ManualFxRates/",a).catch(function(t){return In.a.reject(t)})},kl=function(t){var e,a={id:(e=t).id,value:e.manual.rate};return P.a.patch("/ManualFxRates/"+a.id,a).catch(function(t){return In.a.reject(t)})},Tl=function(t){return P.a.get("/AutoFxRates/CompanyCurrencies/"+t.id).then(function(t){return t.map(Fl)})},Nl=function(t,e){var a=function(t,e){return{companyId:e.id,refCurrencyId:t.currency.id,dateFrom:t.date.toISOString(),fxRateSourceId:t.sourceID}}(t,e);return P.a.post("/AutoFxRates/UsedSources/",a)},Al=function(t){var e=t.usedSourceId;return P.a.delete("/AutoFxRates/UsedSources/"+e)},El=function(t){var e,a={id:(e=t).usedSourceId,dateFrom:e.date.toISOString(),fxRateSourceId:e.sourceID};return P.a.patch("/AutoFxRates/UsedSources/"+a.id,a)},Ul=function(t){var e=function(t){var e="";return t.forEach(function(t){null!==t.usedSourceId&&(e+=(0===e.length?"?":"&")+"ids="+t.usedSourceId)}),e}(t);return P.a.delete("/AutoFxRates/UsedSources"+e)},Ol={currentFxRates:[],autoFxRates:[]};function Vl(t,e){return function(a){return t(e,a),a}}var Ll={state:S()({},Ol),getters:{getCurrentFxRates:function(t){return t.currentFxRates},getAutoFxRates:function(t){return t.autoFxRates}},mutations:{setCurrentFxRates:function(t,e){t.currentFxRates=e},setAutoFxRates:function(t,e){t.autoFxRates=e}},actions:{resetFxRates:function(t){var e=t.state;so()(e,Ol)},loadCurrentFxRates:function(t,e){var a=t.commit,n=t.state;return Il(e,n.selectedCompany).then(Vl(a,"setCurrentFxRates"))},removeFxRate:function(t,e){t.commit,t.getters;return Pl(e)},addFxRate:function(t,e){t.commit;var a=t.state;return Ml(e,a.selectedCompany)},editFxRate:function(t,e){t.commit,t.state;return kl(e)},loadCSAutoFxRates:function(t){var e=t.commit,a=t.state;return Tl(a.selectedCompany).then(Vl(e,"setAutoFxRates"))},activateAutoFxRate:function(t,e){t.commit;var a=t.state;return Nl(e,a.selectedCompany)},deactivateAutoFxRate:function(t,e){t.commit,t.state;return Al(e)},switchAutoFxRate:function(t,e){t.commit,t.state;return El(e)},massDeactivateAutoFxRate:function(t,e){t.commit,t.state;return Ul(e)}}};function ql(t,e){return{companyId:e.id}}function Kl(t,e){return{id:t,companyId:e.id}}function zl(t,e,a){return{companyId:e.id,refCompanyId:t.selectedReconciliation.refCompany.id,statementTypeId:t.selectedReconciliation.statement.id,startDate:t.selectedReconciliation.startDate?h.formatDate(t.selectedReconciliation.startDate):"1900-01-01",endDate:t.selectedReconciliation.endDate?h.formatDate(t.selectedReconciliation.endDate):null,queryString:a}}function Bl(t){return{id:t.id,accType:t.accountText,ref:t.referenceText,viewDocDate:new Date(t.documentDate),viewPostingDate:new Date(t.dueDate),docCurrency:t.currencyCode,docAmountStr:t.documentAmount,fxRate:t.currentReportFxRate,amountInRepCurrency:Number(t.amountInReportCurrency),amountInRepCurrencyStr:t.amountInReportCurrency,description:t.description,isOwn:t.isOwn}}function jl(t){var e=[];return t.forEach(function(t){e[t.setId]?e[t.setId].transactions.push(Bl(t)):e[t.setId]={id:t.setId,matchingType:{id:t.statusId,label:t.statusDescription},transactions:[Bl(t)]}}),e.filter(function(){return!0})}function Hl(t){return{id:t.id,refCompany:{id:t.refCompanyId,name:t.refCompanyName,logo:ec(t.refCompanyName,t.oppositeCompanyProfileImageUrl),country:{code:t.oppositeCompanyCountryCode}},statusId:t.statusId,status:{id:t.statusId,description:t.statusDescription},context:ha.filter(function(e){return e.id===t.statusId})[0].context,refCompanyStatus:{id:t.refCompanyStatusId,description:t.refCompanyStatusDescription},isInitiatorCompany:t.isInitiatorCompany,startDate:new Date(t.startDate),endDate:new Date(t.endDate),dld:new Date(t.deadlineDate),statement:ha.filter(function(e){return e.id===t.statementTypeId})[0],isDisclosed:t.isDisclosed,matchedAmount:t.matchedAmount,matchedCount:t.matchedCount,unMatchedAmount:t.unMatchedAmount,unMatchedCount:t.unMatchedCount}}function Yl(t){return{in:{exceptions:{me:{amount:t.receivables.unMatched.amount,count:t.receivables.unMatched.transactionsCount},they:{amount:t.receivables.unMatched.refAmount,count:t.receivables.unMatched.refTransactionsCount}},matched:{me:{amount:t.receivables.matched.amount,count:t.receivables.matched.transactionsCount},they:{amount:t.receivables.matched.refAmount,count:t.receivables.matched.refTransactionsCount}}},out:{exceptions:{me:{amount:t.payables.unMatched.amount,count:t.payables.unMatched.transactionsCount},they:{amount:t.payables.unMatched.refAmount,count:t.payables.unMatched.refTransactionsCount}},matched:{me:{amount:t.payables.matched.amount,count:t.payables.matched.transactionsCount},they:{amount:t.payables.matched.refAmount,count:t.payables.matched.refTransactionsCount}}}}}function Xl(t){var e=[];return t.messages&&0!==t.messages.length&&t.messages.forEach(function(t){e.push({id:t.id,date:new Date(t.createdOn),from:{fullName:t.user.fullName,profileImageUrl:t.user.profileImageUrl,email:t.user.email},body:t.body,isRead:t.isRead})}),{thread:{id:t.id,name:t.title},messages:e}}var Gl=function(t,e){var a=function(t,e){var a=[];return t.forEach(function(t){a.push({companyId:e.id,refCompanyId:t.company.id,assignedUserEmail:t.assignee?t.assignee.email:"",statementTypeId:t.statement.id,startDate:t.fromDate,endDate:t.toDate,isDisclosed:t.disclosed,deadlineDate:t.ddl})}),a}(t,e);return P.a.post("/Reconciliations/",a)},Wl=function(t,e){var a=Kl(t,e);return P.a.get("/Reconciliations/"+a.id+"/Companies/"+a.companyId).then(Hl)},Jl=function(t,e){var a=function(t,e){return{data:{statusId:t.statusId},companyId:e.id,id:t.id}}(t,e);return P.a.patch("/Reconciliations/"+a.id+"/Companies/"+a.companyId,a.data)},Ql=function(t,e){var a=Kl(t,e);return P.a.get("/ReconciliationSummary/"+a.id+"/Companies/"+a.companyId).then(Yl)},Zl=function(t,e){var a=ql(0,e);return P.a.get("/Reconciliations/Companies/"+a.companyId+"?statusId=1").then(function(t){return t.map(Hl)})},tu=function(t,e){var a=ql(0,e);return P.a.get("/Reconciliations/Companies/"+a.companyId+"?statusId=2").then(function(t){return t.map(Hl)})},eu=function(t,e){var a=ql(0,e);return P.a.get("/Reconciliations/Companies/"+a.companyId+"?statusId=3").then(function(t){return t.map(Hl)})},au=function(t){return P.a.delete("/Reconciliations/"+t.id)},nu=function(t){var e=function(t){var e="";return t.forEach(function(t){e+=(0===e.length?"?":"&")+"ids="+t.id}),e}(t);return P.a.delete("/Reconciliations/"+e)},ou={selectedReconciliation:null,selectedReconciliationSummary:[],OpenReconciliations:[],FinishedReconciliations:[],RejectedReconciliations:[]},su=S()({},ou),ru={};$t()(su).reduce(function(t,e){return t[e]=function(t){return t[e]},t},ru);function iu(t,e){return function(a){return t(e,a),a}}var cu={state:su,getters:ru,mutations:{setSelectedReconciliation:function(t,e){t.selectedReconciliation=e},setSelectedReconciliationSummary:function(t,e){t.selectedReconciliationSummary=e},setOpenReconciliations:function(t,e){t.OpenReconciliations=e},setFinishedReconciliations:function(t,e){t.FinishedReconciliations=e},setRejectedReconciliations:function(t,e){t.RejectedReconciliations=e}},actions:{resetReconciliations:function(t){var e=t.state;so()(e,ou)},createReconciliation:function(t,e){t.commit;var a=t.state;return Gl(e,a.selectedCompany)},loadSelReconciliation:function(t,e){var a=t.commit,n=t.state;return n.selectedReconciliation&&n.selectedReconciliation.id===e?In.a.resolve(n.selectedReconciliation):Wl(e,n.selectedCompany).then(iu(a,"setSelectedReconciliation"))},editSelReconciliationStatus:function(t,e){t.commit;var a=t.state;return Jl(e,a.selectedCompany)},loadSelReconciliationSummary:function(t,e){var a=t.commit,n=t.state;return Ql(e,n.selectedCompany).then(iu(a,"setSelectedReconciliationSummary"))},loadOpenReconciliations:function(t,e){var a=t.commit,n=t.state;return Zl(e,n.selectedCompany).then(iu(a,"setOpenReconciliations"))},loadFinishedReconciliations:function(t,e){var a=t.commit,n=t.state;return tu(e,n.selectedCompany).then(iu(a,"setFinishedReconciliations"))},loadRejectedReconciliations:function(t,e){var a=t.commit,n=t.state;return eu(e,n.selectedCompany).then(iu(a,"setRejectedReconciliations"))},deleteReconciliation:function(t,e){t.commit;return au(e)},deleteMultipleReconciliation:function(t,e){t.commit;return nu(e)}}},lu=function(t,e){var a=function(t,e){var a="?unmatched=true";return t.areOUT&&(a+="&payables=true"),t.areIN&&(a+="&receivables=true"),zl(t,e,a)}(t,e),n="/ReportTransactions/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId;return n+="/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/",n+=a.endDate+a.queryString,P.a.get(n).then(function(t){return t.map(Bl)})},uu=function(t){return P.a.get("/Conversations/Reconciliations/"+t).then(Xl)},du=function(t){var e={body:t.message};return P.a.post("/Conversations/Reconciliations/"+t.recId+"/Messages",e).then()},mu=function(t){return P.a.delete("/Conversations/Messages/"+t.id).then()},pu=function(t){console.log(t);var e={body:t.body};return P.a.patch("/Conversations/Messages/"+t.id,e).then()},vu=function(t,e){var a=function(t,e){var a="?matched=true";return zl(t,e,a+=t.areIN?"&receivables=true":"&payables=true")}(t,e),n="/ReportTransactions/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId;return n+="/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/",n+=a.endDate+a.queryString,P.a.get(n).then(jl)},fu=function(t,e){var a=function(t,e){var a="?";return t.areOUT&&(a+="payables=true"),t.areIN&&("?"!==a&&(a+="&"),a+="receivables=true"),zl(t,e,a)}(t,e),n="/MatchingSets/AutoMatching/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId;return n+="/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/",n+=a.endDate+a.queryString,P.a.post(n).then()},hu=function(t,e){var a=function(t,e){var a=[];return t.selectedExceptions.forEach(function(t){a.push(t.id)}),{companyId:e.id,statementTypeId:t.selectedReconciliation.statement.id,payload:{ids:a},queryString:1===t.selectedReconciliation.statement.id?"?endDate="+h.formatDate(t.selectedReconciliation.endDate):""}}(t,e),n="/MatchingSets/ManualMatching/Companies/"+a.companyId+"/StatementTypes/"+a.statementTypeId+a.queryString;return P.a.post(n,a.payload).then()},gu=function(t){return P.a.delete(/MatchingSets/+t).then()},_u=a("t4zo"),yu=a.n(_u),bu=function(t,e){var a=["ExportExcel","Companies",t.selectedCompany.id,"StatementTypes",t.statementTypeId,"StartDate",t.startDate?h.formatDate(t.startDate):"1900-01-01","EndDate",t.endDate?h.formatDate(t.endDate):null].join("/"),n=["oppositeCompanyId="+t.oppCompany.id,"payables="+!!t.areIN,"receivables="+!!t.areOUT,"matched="+!!t.matched,"unmatched="+!!t.exceptions].join("&");return P.a.get(a+"?"+n,{responseType:"arraybuffer"}).then(function(t){var a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});yu.a.saveAs(a,e)})},Cu={exceptionsRecords:[],matchedSets:[],SRMessages:[]},Du=S()({},Cu),$u={};$t()(Du).reduce(function(t,e){return t[e]=function(t){return t[e]},t},$u);function xu(t,e){return function(a){return t(e,a),a}}var wu={state:Du,getters:$u,mutations:{setMatchedSets:function(t,e){t.matchedSets=e},setExceptionsRecords:function(t,e){t.exceptionsRecords=e},setSRMessages:function(t,e){t.SRMessages=e}},actions:{resetReconciliation:function(t){var e=t.state;so()(e,Cu)},loadMatchedSets:function(t,e){var a=t.commit,n=t.state;return vu(e,n.selectedCompany).then(xu(a,"setMatchedSets"))},loadSRMessages:function(t,e){var a=t.commit;t.state;return uu(e).then(xu(a,"setSRMessages"))},sendReconciliationMessage:function(t,e){t.commit,t.state;return du(e).then()},deleteMessage:function(t,e){t.commit,t.state;return mu(e).then()},editMessage:function(t,e){t.commit,t.state;return pu(e).then()},loadExceptionsRecords:function(t,e){var a=t.commit,n=t.state;return lu(e,n.selectedCompany).then(xu(a,"setExceptionsRecords"))},matchAuto:function(t,e){t.commit;var a=t.state;return fu(e,a.selectedCompany).then()},manualMatch:function(t,e){t.commit;var a=t.state;return hu(e,a.selectedCompany).then()},unmatchSet:function(t,e){t.commit,t.state;return gu(e).then()},exportRecords:function(t,e){t.commit;var a=t.state,n=a.selectedReconciliation;e.statementTypeId=n.statement.id,e.startDate=n.startDate?new Date(n.startDate):null,e.endDate=n.endDate?new Date(n.endDate):null;var o=a.selectedCompany;e.selectedCompany=o;var s=n.refCompany;e.oppCompany=s;var r=["BASH",o.name,s.name];return e.matched&&r.push("Matched-Records"),e.exceptions&&r.push("Exceptions"),e.areIN&&r.push(n.context.IN),e.areOUT&&r.push(n.context.OUT),bu(e,r.join("-")+".xlsx")}}},Su={state:S()({},Ic.state,Zc.state,ll.state,bl.state,Sl.state,Ll.state,cu.state,wu.state),getters:S()({},Ic.getters,Zc.getters,ll.getters,bl.getters,Sl.getters,Ll.getters,cu.getters,wu.getters),mutations:S()({},Ic.mutations,Zc.mutations,ll.mutations,bl.mutations,Sl.mutations,Ll.mutations,cu.mutations,wu.mutations),actions:S()({},Ic.actions,Zc.actions,ll.actions,bl.actions,Sl.actions,Ll.actions,cu.actions,wu.actions)};function Ru(t){return t}function Fu(t){return{id:t.company.id,data:"currentTime="+t.currentTime+"&startIndex="+t.startIndex+"&endIndex="+t.endIndex}}var Iu=function(t){var e=function(t){return"currentTime="+t.currentTime+"&startIndex="+t.startIndex+"&endIndex="+t.endIndex}(t);return P.a.get("/Log?"+e).then(function(t){return t.map(Ru)})},Pu=function(t){var e=Fu(t);return P.a.get("/Log/Companies/"+e.id+"?"+e.data).then(function(t){return t.map(Ru)})},Mu=function(){return P.a.get("/Log").then(function(t){return t.map(Ru)})},ku=function(t){return P.a.post("/Log/ReadStatus/"+t)},Tu=function(){return P.a.post("/Log/MarkAllAsOld")},Nu=function(){return P.a.post("/Log/MarkAllAsRead")},Au=function(t){var e=Fu(t);return P.a.post("/Log/Companies/"+e.id+"/MarkAllAsRead")},Eu=function(t){var e=Fu(t);return P.a.post("/Log/Companies/"+e.id+"/MarkAllAsOld")},Uu=function(){return P.a.get("/Log/Count").then()};function Ou(t,e,a){a?t.isRead=!0:t.id===e&&(t.isRead=!t.isRead)}var Vu={state:{userNotifications:[],nextUserNotifications:[],userNotificationsCount:0,userNotificationsCountTimerActive:!1,companyNotifications:[],nextCompanyNotifications:[],notificationTimer:null},getters:{userNotifications:function(t){return t.userNotifications},nextUserNotifications:function(t){return t.nextUserNotifications},userNotificationsCount:function(t){return t.userNotificationsCount},companyNotifications:function(t){return t.companyNotifications},nextCompanyNotifications:function(t){return t.nextCompanyNotifications}},mutations:{setUserNotifications:function(t,e){t.userNotifications=e},addUserNotifications:function(t,e){t.userNotifications=t.userNotifications.concat(e)},setNextUserNotifications:function(t,e){t.nextUserNotifications=e},setNextCompanyNotifications:function(t,e){t.nextCompanyNotifications=e},setUserNotificationsCount:function(t,e){t.userNotificationsCount=e},setCompanyNotifications:function(t,e){t.companyNotifications=e},setUserNotificationsCountTimerActive:function(t,e){t.userNotificationsCountTimerActive=e},addCompanyNotifications:function(t,e){t.companyNotifications=t.companyNotifications.concat(e)},switchUserNotificationStatus:function(t,e){t.userNotifications.forEach(function(t){return Ou(t,e[0],e[1])}),t.nextUserNotifications.forEach(function(t){return Ou(t,e[0],e[1])})},switchCompanyNotificationStatus:function(t,e){t.companyNotifications.forEach(function(t){return Ou(t,e[0],e[1])}),t.nextCompanyNotifications.forEach(function(t){return Ou(t,e[0],e[1])})}},actions:{loadUserNotifications:function(t,e){var a=t.commit;return Iu(e).then(function(t){return a("setUserNotifications",t)})},loadCompanyNotifications:function(t,e){var a=t.commit;return Pu(e).then(function(t){return a("setCompanyNotifications",t)})},loadAllUserNotifications:function(t){var e=t.commit;return Mu().then(function(t){return e("setUserNotifications",t)})},switchUserNotificationReadStatus:function(t,e){var a=t.commit;return ku(e).then(function(t){a("switchUserNotificationStatus",[e,!1])})},switchCompanyNotificationReadStatus:function(t,e){var a=t.commit;return ku(e).then(a("switchCompanyNotificationStatus",[e,!1]))},markUserNotificationsRead:function(t){var e=t.commit;return Nu().then(function(t){e("switchUserNotificationStatus",[0,!0])})},markUserNotificationsOld:function(){return Tu()},markCompanyNotificationsRead:function(t,e){var a=t.commit;return Au(e).then(a("switchCompanyNotificationStatus",[0,!0]))},markCompanyNotificationsOld:function(t,e){t.commit;return Eu(e)},loadNextUserNotifications:function(t,e){var a=t.commit;return Iu(e).then(function(t){return a("setNextUserNotifications",t)})},loadNextCompanyNotifications:function(t,e){var a=t.commit;return Pu(e).then(function(t){return a("setNextCompanyNotifications",t)})},addUserNotifications:function(t,e){(0,t.commit)("addUserNotifications",e)},addCompanyNotifications:function(t,e){(0,t.commit)("addCompanyNotifications",e)},seeNotifications:function(t){return(0,t.commit)("setUserNotificationsCount",0)},loadUserNotificationsCount:function(t){var e=t.commit;return Uu().then(function(t){return e("setUserNotificationsCount",+t.count)})},userNotificationsCountTimer:function(t,e){var a=t.commit,n=t.dispatch,o=t.state;a("setUserNotificationsCountTimerActive",e),null===o.notificationTimer&&(o.notificationTimer=setInterval(function(){o.userNotificationsCountTimerActive?n("loadUserNotificationsCount"):clearInterval(o.notificationTimer)},3e4))}}},Lu={actions:{resetCompanyStore:function(t){var e=t.dispatch;return In.a.all([e("resetRecords"),e("resetReconciliation"),e("resetReconciliations"),e("resetImports"),e("resetFxRates"),e("resetContacts"),e("resetCompanies"),e("resetCollaborators")])}}};o.default.use(x.a);var qu=new x.a.Store({modules:{userStore:Cc,companyStore:Su,notificationsStore:Vu,nomenclatureStore:Vr,resetCompanyStore:Lu}});P.a.defaults.baseURL="https://balanceshareapidev-v2-001.azurewebsites.net",P.a.interceptors.request.use(function(t){t.headers=t.headers||{};var e=qu.getters.token;return e&&(t.headers.Token=e),t}),P.a.interceptors.response.use(function(t){var e=t.headers;return e.token&&qu.dispatch("setToken",e.token),t.data.data?t.data.data:t.data},function(t){var e=t.response;if(401===e.status)return qu.dispatch("clearout"),In.a.reject(e.data.errors[0]);if(e.data&&e.data.errors){var a=e.data.errors[0];return In.a.reject(a)}return In.a.reject(t)});o.default.use(ks.b,{events:"blur"});var Ku={render:function(){var t=this.$createElement,e=this._self._c||t;return this.loading?e("div",{staticClass:"loading"},[e("img",{attrs:{src:"/static/images/loading.gif"}})]):this._e()},staticRenderFns:[]},zu=a("VU/8")({props:["loading"]},Ku,!1,null,null,null).exports,Bu=a("OfYj"),ju=a.n(Bu),Hu={props:{options:{type:[Array],default:function(){return[]}},valueField:{type:String,default:"id"},textField:{type:String,default:"label"},disabledField:{type:String,default:"disabled"}},computed:{formOptions:function(){var t=this.options||[],e=this.valueField,a=this.textField,n=this.disabledField;return t.map(function(t){return $o.isObject(t)?{value:t[e],text:String(t[a]),disabled:t[n]||!1}:{text:String(t),value:t,disabled:!1}})}}},Yu=a("/gqF"),Xu=a.n(Yu),Gu=a("60E9"),Wu=a.n(Gu),Ju=a("TMTb"),Qu=a.n(Ju),Zu=a("dfnb"),td=a.n(Zu),ed=a("GnGf"),ad={mixins:[ju.a,Xu.a,Wu.a,Qu.a,td.a,Hu],render:function(t){var e=this,a=e.$slots,n=e.formOptions.map(function(e,a){return t("option",{key:"option_"+a+"_opt",attrs:{disabled:Boolean(e.disabled)},domProps:{innerHTML:e.text,value:e.value}})});return t("select",{ref:"input",class:e.inputClass,directives:[{name:"model",rawName:"v-model",value:e.localValue?e.localValue[this.valueField]:e.localValue,expression:"localValue"}],attrs:{id:e.safeId(),name:e.name,multiple:e.multiple||null,size:e.isMultiple?e.selectSize:null,disabled:e.disabled,required:e.required,"aria-required":e.required?"true":null,"aria-invalid":e.computedAriaInvalid},on:{change:function(t){var a=t.target,n=Object(ed.from)(a.options).reduce(function(t,e,a){return e.selected&&t.push(a),t},[]);e.localValue=a.multiple?n:e.allOptions[n[0]],e.$emit("change",e.localValue)}}},[a.first,n,a.default])},data:function(){return{localValue:this.value}},watch:{value:function(t,e){this.localValue=t},localValue:function(t,e){this.$emit("input",this.localValue)}},props:{value:{},multiple:{type:Boolean,default:!1},selectSize:{type:Number,default:0},ariaInvalid:{type:[Boolean,String],default:!1},slotOptions:{type:[Array],default:function(){return[]}}},computed:{inputClass:function(){return["form-control",this.stateClass,this.sizeFormClass,this.isPlain?null:"custom-select",this.isPlain||!this.size?null:"custom-select-"+this.size]},isPlain:function(){return this.plain||this.isMultiple},isMultiple:function(){return Boolean(this.multiple&&this.selectSize>1)},computedAriaInvalid:function(){return!0===this.ariaInvalid||"true"===this.ariaInvalid?"true":"is-invalid"===this.stateClass?"true":null},allOptions:function(){return this.options.concat(this.slotOptions)}}},nd=a("IZMb"),od=a.n(nd),sd={duration:2500,action:{text:"X",onClick:function(t,e){e.goAway(0)}}},rd=function(t,e){o.default.toasted.show(t,e)},id={install:function(t){t.prototype.$customMsg={showErrorMessage:function(t){var e=so()({},sd,{type:"error",duration:5e3});rd(t,e)},showSuccessMessage:function(t){var e=so()({},sd,{type:"success"});rd(t,e)},showInfoMessage:function(t){var e=so()({},sd,{type:"info"});rd(t,e)}}}},cd={components:{NotificationPanel:Yr},data:function(){return{showPanel:!1,loading:!1,currentTime:null,currentNotification:1,notificationsPerLoad:10,windowHeight:0}},computed:{notifications:function(){return this.$store.getters.userNotifications},nextUserNotifications:function(){return this.$store.getters.nextUserNotifications},finalResult:function(){return 0===this.nextUserNotifications.length},notificationsCount:function(){return this.$store.getters.userNotificationsCount},payload:function(){return{currentTime:new Date(this.currentTime).toISOString(),startIndex:this.currentNotification,endIndex:this.currentNotification+this.notificationsPerLoad-1}},panel_style:function(){return{height:this.windowHeight/2+"px"}}},created:function(){this.$store.dispatch("loadUserNotificationsCount")},mounted:function(){this.$nextTick(function(){window.addEventListener("resize",this.getWindowHeight),this.getWindowHeight()})},beforeDestroy:function(){window.removeEventListener("resize",this.getWindowHeight)},methods:{getWindowHeight:function(){this.windowHeight=document.documentElement.clientHeight},switchUserNotification:function(){this.$store.dispatch("seeNotifications"),this.showPanel=!this.showPanel,this.showPanel?(this.currentTime=Date.now(),this.loadUserNotification()):this.currentNotification=1},loadMore:function(){var t=this;this.currentNotification+=this.notificationsPerLoad,this.$store.dispatch("loadNextUserNotifications",this.payload).then(function(){t.loading=!1})},loadUserNotification:function(){var t=this;this.loading=!0,this.$store.dispatch("loadUserNotifications",this.payload).then(function(){t.$store.dispatch("markUserNotificationsOld"),t.loadMore()})},markUserNotificationsRead:function(){var t=this;this.loading=!0,this.$store.dispatch("markUserNotificationsRead").then(function(){t.loading=!1})},loadNextUserNotifications:function(){var t=this;this.loading=!0,this.finalResult||this.$store.dispatch("addUserNotifications",this.nextUserNotifications).then(function(){t.loadMore()})},goToUserNotifications:function(){this.showPanel=!this.showPanel,this.currentNotification=1,this.$router.push({name:"Notifications",params:{type:"user"}})},handleScroll:function(t){t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<100&&!this.loading&&!this.finalResult&&this.loadNextUserNotifications()},toggleUserNotification:function(t){this.$store.dispatch("switchUserNotificationReadStatus",t.id)}},watch:{showPanel:function(t){t?document.body.classList.add("notification_open"):document.body.classList.remove("notification_open")}}},ld={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-nav-item",[a("div",{staticClass:"tooltip-bell",on:{click:t.switchUserNotification}},[a("i",{staticClass:"far fa-bell"}),t._v(" "),t.notificationsCount&&t.notificationsCount>0?a("span",{staticClass:"notifications-count"},[t._v(t._s(t.notificationsCount))]):t._e()]),t._v(" "),t.showPanel?a("div",{staticClass:"nav-item-notifications"},[a("div",{staticClass:"background-panel",on:{click:t.switchUserNotification}}),t._v(" "),a("NotificationPanel",{attrs:{notifications:t.notifications,panel_style:t.panel_style,loading:t.loading,handleScroll:t.handleScroll,finalResult:t.finalResult,goToFunc:t.goToUserNotifications,markAllFunc:t.markUserNotificationsRead,toggleFunc:t.toggleUserNotification}})],1):t._e()])},staticRenderFns:[]},ud={components:{Avatar:ps,UserNotifications:a("VU/8")(cd,ld,!1,null,null,null).exports},data:function(){return{i18n:{lang:this.$t("lang")},isDev:!0,buildTimestamp:"Sun, 28 Jun 2020 21:59:38 GMT"}},methods:{test:function(){console.log("TEST")},showTestToasted:function(){this.$customMsg.showInfoMessage("Info Message"),this.$customMsg.showErrorMessage("Error Message"),this.$customMsg.showSuccessMessage("Success Message")},logout:function(){this.$store.dispatch("logout")}},computed:{user:function(){return this.$store.getters.user}},watch:{"$i18n.locale":function(){this.i18n.lang=this.$t("lang")}}},dd={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("body",{class:{"main-wrapper":!0,debug:t.isDev}},[a("header",[a("b-navbar",{staticClass:"navigation",attrs:{toggleable:"md",id:"top-bar"}},[a("b-navbar-brand",{attrs:{to:"/"}},[a("img",{attrs:{src:"/static/images/logo.png",alt:"Balance share"}})]),t._v(" "),a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[t.user?t._e():a("b-navbar-nav",[a("b-nav-item",{attrs:{to:"/login"}},[t._v("Login")]),t._v(" "),a("b-nav-item",{attrs:{to:"/register"}},[t._v("Register")])],1),t._v(" "),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item-dropdown",{attrs:{text:"DEV PAGES",right:""}},[a("b-dropdown-item",{attrs:{to:"/prototype/nomenclatures",exact:""}},[t._v("Nomenclatures")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/matching-tool",exact:""}},[t._v("Matching Tool")])],1),t._v(" "),a("b-nav-item-dropdown",{attrs:{text:t.i18n.lang,right:""}},[a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="en"}}},[t._v("English")]),t._v(" "),a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="bg"}}},[t._v("Български")])],1),t._v(" "),t.user?[a("b-nav-item",{attrs:{to:"/received-invitations"}},[t._v(t._s(t.$t("Invitations")))]),t._v(" "),a("b-nav-item-dropdown",{attrs:{text:t.i18n.lang,right:""}},[a("template",{slot:"button-content"},[a("Avatar",{attrs:{username:t.user.fullName?t.user.fullName:"",src:t.user.profileImageUrl?t.user.profileImageUrl:"",size:25,customStyle:{display:"inline-flex",border:"1px solid lightgray",marginRight:"10px"}}}),t._v(" "),a("div",{staticClass:"d-inline-block"},[t._v(t._s(t.user.fullName))])],1),t._v(" "),a("b-dropdown-item",{attrs:{to:"/user#profile"}},[t._v(t._s(t.$t("Profile")))]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/user#settings"}},[t._v(t._s(t.$t("Settings")))]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/user#password"}},[t._v(t._s(t.$t("Change Password")))]),t._v(" "),a("b-dropdown-divider"),t._v(" "),a("b-dropdown-item",{on:{click:t.logout}},[t._v(t._s(t.$t("Logout")))])],2),t._v(" "),a("UserNotifications")]:t._e()],2)],1)],1)],1),t._v(" "),a("router-view"),t._v(" "),t.isDev?a("div",{attrs:{id:"dev-toolbox"}},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseDevToolbox",modifiers:{collapseDevToolbox:!0}}],attrs:{variant:"outline-danger"}},[t._v("* Dev Toolbox")]),t._v(" "),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapseDevToolbox"}},[a("b-card",[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.test}},[t._v("Test Action")]),t._v(" "),a("button",{staticClass:"btn btn-warning btn-sm",attrs:{type:"button"},on:{click:t.showTestToasted}},[t._v("Test Toast Notification")]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[t._v("\n          "+t._s(t.buildTimestamp)+"\n        ")])])],1)],1):t._e()],1)},staticRenderFns:[]},md=a("VU/8")(ud,dd,!1,null,null,null).exports;a("pQP2");o.default.config.productionTip=!1,o.default.use(r.a),o.default.use(c.a),o.default.use(od.a),o.default.use(id),o.default.component("loading",zu),o.default.component("c-form-select",ad),qu.dispatch("loadUserCash"),new o.default({el:"#app",router:Ui,store:qu,i18n:$,render:function(t){return t(md)}})},UpdR:function(t,e){t.exports={" for ":" for ","Acc. Type":"Acc. Type",Actions:"Actions",Admin:"Admin","Add Company":"Add Company","Add FX Rate":"Add FX Rate","Add related party":"Add related party","Add your first company :":"Add your first company :",Add:"Add",Address:"Address","Are you really sure you want to delete this company ?":"Are you really sure you want to delete this company ?",Aliases:"Aliases","Invitation successfully send.":"Invitation successfully send.","Invite from my companies":"Invite from my companies","Amount in doc. currency":"Amount in doc. currency","Amount in":"Amount in",Amount:"Amount","Company Invitation":"Company Invitation","Add from my companies":"Add from my companies","no aliases":"no aliases","Add Average FX Rate":"Add Average FX Rate","Add Daily FX Rate":"Add Daily FX Rate","No manual Rate":"No manual Rate","Auto Units":"Auto Units","Auto Rate":"Auto Rate","Daily Rates":"Daily Rates","Average Rates":"Average Rates","Inherited from parent":"Inherited from parent",Notifications:"Notifications","Mark all as read":"Mark all as read","See all":"See all","Go to my companies":"Go to my companies","Currently there are no invitations.":"Currently there are no invitations.","Are you sure ?":"Are you sure ?","Are you sure you want to STOP auto Fx Rate ?":"Are you sure you want to STOP auto Fx Rate ?","Are you sure you want to STOP auto for selected Fx Rates ?":"Are you sure you want to STOP auto for selected Fx Rates ?",Assignee:"Assignee",Audit:"Audit","Company:":"Company:",Back:"Back",With:"With","For period":"For period",Cancel:"Cancel","Change Password":"Change Password","Close/Open":"Close/Open",Code:"Code","Collaborator's Email:":"Collaborator's Email:",Collaborators:"Collaborators",Companies:"Companies","Company Name":"Company Name",Company:"Company",Confirm:"Confirm","Contact Person Email":"Contact Person Email",Contact:"Contact","Contacts page.":"Contacts page.",Contacts:"Contacts","Corporate Tax ID":"Corporate Tax ID","Corporate Tax":"Corporate Tax",Country:"Country","Create Reconciliation":"Create Reconciliation",Create:"Create",Creator:"Creator",Currency:"Currency",DDL:"DDL",Date:"Date",Dates:"Dates",Deadline:"Deadline",Delete:"Delete","Delete Company":"Delete Company",Description:"Description","Direct Parent":"Direct Parent",Disclose:"Disclose","Doc. Currency":"Doc. Currency","Successfully deleted reconciliation.":"Successfully deleted reconciliation.","Doc. Date":"Doc. Date","Due Date":"Due Date",Edit:"Edit",Email:"Email","End date is before start date":"End date is before start date","Error in creating FxRate :":"Error in creating FxRate :",Error:"Error",Errors:"Errors","Excel file":"Excel file","FX Rate":"FX Rate","Filling Deadline":"Filling Deadline",Filter:"Filter",Finished:"Finished","First Name":"First Name","Forgot password?":"Forgot password?","From date":"From date",From:"From","Fx Rates":"Fx Rates","FxRecord Type":"FxRecord Type",Invalid:"Invalid",Invitations:"Invitations","Invite Company":"Invite Company","It is currently a related party":"It is currently a related party","Items per page":"Items per page",Label:"Label",Language:"Language","Last Name":"Last Name","Last SuperUser cannot be edited!":"Last SuperUser cannot be edited!",Line:"Line","Login successful":"Login successful",Login:"Login",Logout:"Logout",Matched:"Matched",Message:"Message",Misc:"Misc",Month:"Month",Name:"Name","New picture":"New picture",Next:"Next","No companies found":"No companies found","No company found":"No company found","No more results.":"No more results.","No parent":"No parent",Now:"Now",Number:"Number",OK:"OK","Old Password":"Old Password",Open:"Open",Opposite:"Opposite","Out of Period":"Out of Period","Own currency":"Own currency",Own:"Own",Password:"Password",Payer:"Payer","Parent company":"Parent company","Pending valid transactions with recognized companies":"Pending valid transactions with recognized companies",Personnel:"Personnel",Phone:"Phone","Please enter the complete legal name as per registration":"Please enter the complete legal name as per registration","Please fill all info!":"Please fill all info!","Please, check your email and confirm the registration by clicking on the link in it.":"Please, check your email and confirm the registration by clicking on the link in it.","Please, check your email, click on the link and reset your password.":"Please, check your email, click on the link and reset your password.","Please, enter a valid email":"Please, enter a valid email","Please, enter a valid name":"Please, enter a valid name","Please, enter company's registration number":"Please, enter company's registration number","Please, enter description":"Please, enter description","Please, enter the password":"Please, enter the password","Please, enter your first name.":"Please, enter your first name.","Please, enter your last name.":"Please, enter your last name.","Please, enter your old password":"Please, enter your old password","Please, enter your phone number.":"Please, enter your phone number.","Please, fill the required fields.":"Please, fill the required fields.","Please, repeat the password":"Please, repeat the password","Please, select a company":"Please, select a company","Please, select a contact":"Please, select a contact","Please, select a country":"Please, select a country","Please, select a date":"Please, select a date","Please, select a role":"Please, select a role","Please, select a starting date":"Please, select a starting date","Please, select a statement type":"Please, select a statement type","Please, select an Excel file":"Please, select an Excel file","Please, select at least one statement":"Please, select at least one statement","Posting Date":"Posting Date",Profile:"Profile",Rate:"Rate",Rates:"Rates","Receiver Email":"Receiver Email",Receiver:"Receiver",Recognize:"Recognize",Reconciliations:"Reconciliations",Records:"Records","Ref #":"Ref #","Reg Number":"Reg Number",Register:"Register","Registration ID":"Registration ID","Registration number":"Registration number",Rejected:"Rejected",Remove:"Remove",Removed:"Removed","Repeat Password":"Repeat Password","Repeated password is not the same":"Repeated password is not the same","Reporting Currency":"Reporting Currency","Reporting Regularity":"Reporting Regularity",Reset:"Reset",Responsibility:"Responsibility","Results per page":"Results per page",Role:"Role","Sales Tax ID":"Sales Tax ID",Save:"Save","Saved records successfully":"Saved records successfully","Select ":"Select ","Select Logo":"Select Logo","Select country: ":"Select country: ","Select currency ...":"Select currency ...",Sender:"Sender",Settings:"Settings","Show All":"Show All",Software:"Software",Source:"Source","Start Reconciliation":"Start Reconciliation","Statement Type":"Statement Type","Statement type":"Statement type","Statement types":"Statement types",Status:"Status","Stop Notification":"Stop Notification",Submit:"Submit",Success:"Success","Successfully changed company logo":"Successfully changed company logo","Successfully changed user avatar":"Successfully changed user avatar","Successfully created ":"Successfully created ","Successfully deleted company logo":"Successfully deleted company logo","Successfully deleted user avatar":"Successfully deleted user avatar",Summary:"Summary",TOTAL:"TOTAL",Taxes:"Taxes","There aren't any contacts added yet.":"There aren't any contacts added yet.","There aren't any invitations.":"There aren't any invitations.","This user cannot be deleted!":"This user cannot be deleted!","To date":"To date",To:"To","Top Parent":"Top Parent","Transactions Type":"Transactions Type","Turn selected OFF":"Turn selected OFF",Type:"Type",Units:"Units",Unmatched:"Unmatched","Updated account info for":"Updated account info for",Upload:"Upload","VAT / Sales Tax ID":"VAT / Sales Tax ID","VAT ID":"VAT ID","Valid transactions with unrecognized companies":"Valid transactions with unrecognized companies","Valid with recognized companies":"Valid with recognized companies","Valid with unrecognized companies":"Valid with unrecognized companies","View Details":"View Details","View details":"View details","We have received your registration and have sent a mail to your email address.":"We have received your registration and have sent a mail to your email address.","We have received your request for recovery and have sent a mail to your email address.":"We have received your request for recovery and have sent a mail to your email address.","You are going to change auto Fx Rate for ":"You are going to change auto Fx Rate for ","You are going to start auto Fx Rate for ":"You are going to start auto Fx Rate for ","You can save these transactions.":"You can save these transactions.","You do not have enough permissions to change to this role!":"You do not have enough permissions to change to this role!","You need to have contact companies in order to mark some of them as related parties.":"You need to have contact companies in order to mark some of them as related parties.","You need to have contact companies in order to reconcile with them. You can invite companies in ":"You need to have contact companies in order to reconcile with them. You can invite companies in ","[x] Remove Filters":"[x] Remove Filters","click on avatar to change it":"click on avatar to change it","click on logo to change it":"click on logo to change it",forgotPageTitle:"Forgotten Password",forgotPasswordText:"Enter your email, so we can send a message with instruction, on how to reset your password.",lang:"EN",loginFormSubmit:"Login",loginPageTitle:"Login","on/off":"on/off",reconciliation:"reconciliation",reconciliations:"reconciliations",regFormSubmit:"Register",registerPageTitle:"Register account","require FX rate":"require FX rate",resetFormSubmit:"Reset",uploadPageValidUnrecognizedText:"You can link unrecognized name to a company from your contacts and this name will ba saved as a company alias. Then the company will appear in the table with pending valid transactions from recognized companies."}},YFeG:function(t,e){t.exports={lang:"БГ",Name:"Име",Email:"Имейл",Phone:"Телефон",Language:"Език"}},mwaQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"TreeNode",components:{TreeLeaf:function(){return a.e(0).then(a.bind(null,"FkDT"))}},props:["nodes","state","preselectedCompany"],computed:{items:function(){return this.nodes}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",t._l(t.items,function(e){return a("TreeLeaf",{key:e[t.state.idProp],attrs:{node:e,state:t.state,preselectedCompany:t.preselectedCompany}})}),1)},staticRenderFns:[]},s=a("VU/8")(n,o,!1,null,null,null);e.default=s.exports},pGLP:function(t,e,a){"use strict";var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.company.logo?a("div",{class:["logo","logo-"+t.size],style:t.logoStyle},[t.company.logo.URL?t._e():a("div",{staticClass:"logo-initials"},[t._v(t._s(t.company.logo.initials))]),t._v(" "),a("div",{style:t.flagStyle})]):t._e()},staticRenderFns:[]},o=a("VU/8")({props:{company:{required:!0},size:{required:!0}},computed:{logoStyle:function(){return this.company.logo.URL?{"background-image":"url("+this.company.logo.URL+")"}:{}},flagStyle:function(){return{"background-image":"url(/static/flags/"+this.company.country.code+".svg)"}}}},n,!1,null,null,null);e.a=o.exports},pQP2:function(t,e){},sb1D:function(module,__webpack_exports__,__webpack_require__){"use strict";function compareDays(t,e){return compareMonths(t,e)&&t.getDate()===e.getDate()}function compareMonths(t,e){return compareYears(t,e)&&t.getMonth()===e.getMonth()}function compareYears(t,e){return t.getFullYear()===e.getFullYear()}function searchStringInString(t,e){return t.toLowerCase().indexOf(e.toLowerCase())>-1}function matchExactString(t,e){return t===e}__webpack_exports__.a={number:function(t,e){return+t==+e},modifNumber:function modifNumber(numA,numB,mod){return eval("+numA"+mod+"+numB")},rangeNumber:function(t,e,a){return e<=t&&t<=a},string:function(t,e){return t&&searchStringInString(t,e)},exactString:function(t,e){return t&&matchExactString(t,e)},numAsString:function(t,e){return null!==t&&searchStringInString(""+t,e)},day:function(t,e){return compareDays(t,e)},month:function(t,e){return compareMonths(t,e)},year:function(t,e){return compareYears(t,e)}}}},["NHnr"]);
//# sourceMappingURL=app.f9064260f7f47e3ebe01.js.map