webpackJsonp([2],{"0KbX":function(t,e,a){"use strict";var n={components:{LogoFlag:a("pGLP").a},props:{company:{required:!0},size:{required:!0},extend:{default:!1}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["company-card","company-card-"+t.size]},[a("logo-flag",{attrs:{company:t.company,size:t.size}}),t._v(" "),a("div",{staticClass:"company-text"},[a("div",{staticClass:"company-card-name"},[t._v(t._s(t.company.name))]),t._v(" "),t.extend?a("div",{staticClass:"company-card-currency"},[t._v(t._s(t.$t("Currency"))+": "+t._s(t.company.currency?t.company.currency.code:""))]):t._e()])],1)},staticRenderFns:[]},s=a("VU/8")(n,o,!1,null,null,null);e.a=s.exports},"1/oy":function(t,e){},"1IYV":function(t,e){},GNxC:function(t,e){},GfHa:function(t,e){},Id91:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};a.d(n,"apiToCountry",function(){return Ls}),a.d(n,"apiToCurrency",function(){return qs});a("j1ja"),a("MU8w"),a("+Mt+");var o=a("/5sW"),s=(a("1IYV"),a("ESwS")),r=a.n(s),i=a("e6fC"),c=6e4;function l(t){return t?t.getUTCFullYear()+"-"+u(t.getUTCMonth()+1)+"-"+u(t.getUTCDate()):""}function u(t){return t<10?"0"+t:t}var d=["Jan","Feb","March","April","May","June","July","Aug","Sep","Oct","Nov","Dec"];function m(t){return"`"+t.toString().substr(-2)}function p(t,e){var a=t.getMonth(),n=t.getFullYear(),o=e.getMonth(),s=e.getFullYear(),r="",i=d[o]+" "+m(s),c=n===s;return 1===t.getDate()&&function(t){return 1===new Date(t.getTime()+864e5).getDate()}(e)?a===o&&c||(r=d[a]):(r=t.getDate()+" "+d[a],i=e.getDate()+" "+i),(r=(r=c?r:r+" "+m(n))?r+" - ":r)+i}function v(t){return t.getDate()+" "+d[t.getMonth()]+" "+m(t.getFullYear())}var f={beautifyDates:function(t,e){return 1===arguments.length?v(t):t?e?p(t,e):v(t):v(e)},prepareForUTCString:function(t){return new Date(t.getTime()-t.getTimezoneOffset()*c)},formatDate:l,formatDateTime:function(t){return t?l(t)+", "+u(t.getUTCHours())+":"+u(t.getUTCMinutes())+":"+u(t.getUTCSeconds()):""}};o.a.filter("bsDate",function(t){return f.formatDate(t)}),o.a.filter("bsDateTime",function(t){return f.formatDateTime(t)}),o.a.filter("numToDec2",function(t){return function(t,e){return(+t).toLocaleString("en-US",{minimumFractionDigits:e,maximumFractionDigits:e})}(t,2)});var h=a("TXmL"),_=a("UpdR"),g=a.n(_),y=a("YFeG"),b=a.n(y),C={en:g.a,bg:b.a};o.a.use(h.a);var D=new h.a({locale:"en",messages:C,fallbackLocale:"en"}),$=a("NYxO"),x=a("Dd8w"),w=a.n(x),R=a("mvHQ"),S=a.n(R),F=a("mtWM"),I=a.n(F),P=a("xrTZ");function M(t){var e=Math.floor(10001*Math.random());return{email:t.email,firstName:t.firstName,lastName:t.lastName,fullName:t.fullName,phone:t.phone,profileImageUrl:""!==t.profileImageUrl?t.profileImageUrl+"?rand="+e:"",settings:{language:t.settings.language?t.settings.language:"en"}}}var k=function(){return I.a.get("/Account/").then(M)},N=function(t){return I.a.patch("/Account/",t)},A=function(t){return I.a.post("/Account/Settings",t).then()},T=function(t){var e,a={email:(e=t).email,password:P.Base64.encode(e.password),firstName:e.firstName,lastName:e.lastName,phone:e.phone};return I.a.post("/Account/",a).then(M)},E=function(t){var e=t.email,a=t.password,n={headers:{Authorization:"Basic "+P.Base64.encode(e+":"+a)}};return I.a.post("/Account/Login",null,n).then(M)},U=function(){return I.a.get("/Account/Logout")},O=function(t){return I.a.post("/Account/Recover",{email:t})},V=function(t,e){return I.a.post("/Account/Recover/"+t,{password:P.Base64.encode(e)})},L=function(t,e){var a={oldPassword:P.Base64.encode(t),newPassword:P.Base64.encode(e)};return I.a.post("/Account/Password",a)},q=function(t){return I.a.post("/Account/ProfileImage",t,{headers:{"Content-Type":"multipart/form-data"}})},K=function(){return I.a.delete("/Account/ProfileImage")},z=function(t){return I.a.get("/account/confirmation/"+t)},B=a("Gu7T"),j=a.n(B),Y=a("/ocq");function H(t,e,a){Ll.getters.token?a({path:"/"}):a()}function X(t,e,a){Ll.getters.token?"/login"===e.path&&e.query.redirect&&e.query.redirect!==t.path?a({path:e.query.redirect}):a():a({path:"/login",query:{redirect:t.fullPath}})}var G=a("+cKO"),W={validations:{formData:{firstName:{required:G.required},lastName:{required:G.required},phone:{required:G.required},password:{required:G.required,minLength:Object(G.minLength)(8)},repPassword:{required:G.required,minLength:Object(G.minLength)(8),sameAsPass:Object(G.sameAs)("password")},email:{required:G.required,email:G.email}}},data:function(){return{formData:{firstName:null,lastName:null,phone:null,password:null,repPassword:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("register",this.formData).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))}}},Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"register-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("First Name"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.firstName,expression:"formData.firstName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.firstName.required&&t.$v.formData.firstName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.firstName},on:{blur:function(e){t.$v.formData.firstName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"firstName",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your first name.")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Last Name"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.lastName,expression:"formData.lastName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.lastName.required&&t.$v.formData.lastName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.lastName},on:{blur:function(e){t.$v.formData.lastName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"lastName",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your last name.")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.phone.required&&t.$v.formData.phone.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.phone},on:{blur:function(e){t.$v.formData.phone.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your phone number.")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.minLength&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.password.minLength?"":t.$t("Password must me 8 chars"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.repPassword.sameAsPass||!t.$v.formData.repPassword.minLength)&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.sameAsPass?t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"):t.$t("Please, repeat the password"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("regFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},J={components:{RegisterForm:a("VU/8")(W,Q,!1,null,null,null).exports},data:function(){return{isActionSuccessful:!1}}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("registerPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("register-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v(t._s(t.$t("Forgot password?")))])],1)]),t._v(" "),t.isActionSuccessful?a("div",[a("p",[t._v(t._s(t.$t("We have received your registration and have sent a mail to your email address.")))]),t._v(" "),a("p",[t._v(t._s(t.$t("Please, check your email and confirm the registration by clicking on the link in it.")))])]):t._e()])])])},staticRenderFns:[]},tt=a("VU/8")(J,Z,!1,null,null,null).exports,et={validations:{formData:{password:{required:G.required},email:{required:G.required,email:G.email}}},data:function(){return{formData:{password:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("login",this.formData).then(function(){t.$emit("success"),t.$customMsg.showSuccessMessage(t.$t("Login successful"))}).catch(function(e){t.errMsg=e.messageDetail}).finally(function(){t.loading=!1}))}}},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"login-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.required&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter the password")))])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("loginFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},nt={components:{LoginForm:a("VU/8")(et,at,!1,null,null,null).exports},methods:{onLogin:function(){var t=this.$store.getters.user;this.$i18n.locale=t.settings.language,this.$router.push("/")}}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("loginPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("login-form",{on:{success:t.onLogin}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v(t._s(t.$t("Forgot password?")))])],1)])])])])},staticRenderFns:[]},st=a("VU/8")(nt,ot,!1,null,null,null).exports,rt={validations:{formData:{email:{required:G.required,email:G.email}}},data:function(){return{formData:{email:null},errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,O(this.formData.email).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))}}},it={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"forgot-pass-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[t._v("\n    "+t._s(t.$t("forgotPasswordText"))+"\n  ")]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("resetFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},ct={components:{ForgotPassForm:a("VU/8")(rt,it,!1,null,null,null).exports},data:function(){return{isActionSuccessful:!1}}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("forgotPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("forgot-pass-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))])],1)]),t._v(" "),t.isActionSuccessful?a("div",[a("p",[t._v(t._s(t.$t("We have received your request for recovery and have sent a mail to your email address.")))]),t._v(" "),a("p",[t._v(t._s(t.$t("Please, check your email, click on the link and reset your password.")))])]):t._e()])])])},staticRenderFns:[]},ut=a("VU/8")(ct,lt,!1,null,null,null).exports,dt={props:["token"],validations:{formData:{password:{required:G.required,minLength:Object(G.minLength)(8)},repPassword:{required:G.required,minLength:Object(G.minLength)(8),sameAsPass:Object(G.sameAs)("password")}}},data:function(){return{formData:{password:null,repPassword:null},errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,V(this.token,this.formData.password).then(function(e){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))}}},mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"reset-pass-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.password.required||!t.$v.formData.password.minLength)&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.repPassword.sameAsPass||!t.$v.formData.repPassword.minLength)&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.sameAsPass?t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"):t.$t("Please, repeat the password"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("resetFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},pt={components:{ResetPassForm:a("VU/8")(dt,mt,!1,null,null,null).exports},props:["token"],data:function(){return{isActionSuccessful:!1}}},vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("resetPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("reset-pass-form",{attrs:{token:t.token},on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"})]),t._v(" "),t.isActionSuccessful?a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Password reset was successfull"))+".")]),t._v(" "),a("b-button",{attrs:{size:"lg",variant:"success",to:"/login"}},[t._v(t._s(t.$t("Login")))])],1):t._e()])])])},staticRenderFns:[]},ft=[{path:"/register",name:"Register",component:tt,meta:{pageId:"register-page",pageClass:""},beforeEnter:H},{path:"/login",name:"Login",component:st,meta:{pageId:"login-page",pageClass:""},beforeEnter:H},{path:"/forgot",name:"Forgot",component:ut,meta:{pageId:"forgot-page",pageClass:""},beforeEnter:H},{path:"/reset/:token",name:"Reset",component:a("VU/8")(pt,vt,!1,null,null,null).exports,props:!0,meta:{pageId:"reset-page",pageClass:""},beforeEnter:H}],ht=a("IC97"),_t=a("D52M"),gt={components:{Datepicker:ht.a},data:function(){return{locales:{en:_t.b,bg:_t.a},question:"Are you sure ?",advanced:!1,date:Date.now()}},methods:{openModal:function(t){this.question=null!==t?t:this.$t("Are you sure ?"),this.$refs.modal.show()},openQuestion:function(t){this.advanced=!1,this.openModal(t)},openDateQuestion:function(t,e){this.options=e,this.advanced=!0,this.openModal(t)},confirm:function(){this.$emit("confirm",this.date),this.$refs.modal.hide()},cancel:function(){this.$emit("cancel"),this.$refs.modal.hide()}}},yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"modal"},[t._v("\n\n  "+t._s(t.question)+"\n\n  "),t.advanced?a("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}):t._e(),t._v(" "),a("div",{staticClass:"w-100",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:t.confirm}},[t._v(t._s(t.$t("Confirm")))]),t._v(" "),a("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"warning"},on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))])],1)],1)},staticRenderFns:[]},bt=a("VU/8")(gt,yt,!1,null,null,null).exports,Ct=a("fZjL"),Dt=a.n(Ct),$t=a("mB6w"),xt=a.n($t);o.a.use($.a);var wt="__selected__",Rt={items:[],filteredItems:[],sorter:{id:null,comparator:null,onKeyChangeCallback:function(){}},filters:{},page:1};function St(t){var e=Dt()(t.filters).reduce(function(e,a){return e.filter(function(e){return t.filters[a](e)})},t.items.slice(0));t.page=1,t.filteredItems=t.sorter.comparator?e.sort(t.sorter.comparator):e}function Ft(t){return t[wt]||!1}function It(t,e){t.items=e,t.filteredItems=t.items,t.sorter=xt()({},Rt.sorter),t.filters=xt()({},Rt.filters),t.page=Rt.page}var Pt=xt()({},Rt),Mt={getItems:function(t){return t.items},pageItems:function(t){return function(e){if(e){var a=(t.page-1)*e,n=t.page*e;return t.filteredItems.slice(a,n)}return t.filteredItems}},totalRows:function(t){return t.filteredItems.length},totalPages:function(t){return function(e){return Math.ceil(t.filteredItems.length/e)}},selectedItems:function(t){return t.items.filter(Ft)},isItemSelected:function(t){return Ft},page:function(t){return t.page}},kt={removeItem:function(t,e){var a=t.items.indexOf(e);-1!==a&&t.items.splice(a,1)},setInitialState:function(t,e){t.items!==e&&It(t,e)},setItems:function(t,e){console.log("Current state.items: "),console.log(t.items),console.log("Setting store with: "),console.log(e),e?(t.items=e,t.filteredItems={},St(t)):(t.sorter.onKeyChangeCallback(),It(t,[]))},resetState:function(t){t.sorter.onKeyChangeCallback(),It(t,[])},addFilter:function(t,e){t.filters[e.key]=e.comparator,St(t)},removeFilter:function(t,e){t.filters[e]&&(delete t.filters[e],St(t))},removeAllFilters:function(t){Dt()(t.filters).length>0&&(t.filters={},St(t))},setSorter:function(t,e){var a=t.sorter;a.id!==e.sortId&&(a.onKeyChangeCallback(e.sortId),a.id=e.sortId,a.comparator=e.comparator,a.onKeyChangeCallback=e.onKeyChangeCallback,t.filteredItems.sort(a.comparator))},toggleItemSelection:function(t,e){o.a.set(e,wt,!e[wt])},setItemsSelection:function(t,e){e.items.forEach(function(t){o.a.set(t,wt,e.areSelected)})},setPage:function(t,e){t.page=e}},Nt=new $.a.Store({state:Pt,getters:Mt,mutations:kt}),At=a("o31/"),Tt={},Et=function(t){return Tt.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},Tt.methods={setFilter:Object(At.debounce)(function(e){var a,n,o=this,s=e.target.value;if(null!==s&&""!==s){var r=(a=s,n={},function(t){return o.compare(Object(At.memoizedLookupFunction)(t,o.filterKey,n),a)}),i={key:o.filterKey,comparator:r};t.commit("addFilter",i)}else t.commit("removeFilter",o.filterKey)},300)},Tt};Et.options=Tt;var Ut=Et,Ot={render:function(){var t=this.$createElement;return(this._self._c||t)("input",{staticClass:"form-control form-control-sm",attrs:{type:"text"},on:{input:this.setFilter}})},staticRenderFns:[]},Vt=a("VU/8")(Ut,Ot,!1,null,null,null).exports;var Lt={},qt=function(t){return Lt.props={items:{required:!0},filterKey:{required:!0},compare:{type:Function,required:!0}},Lt.computed={options:function(){return t=this.items,e=this.filterKey,a=[],n={},t.forEach(function(t){var o=Object(At.memoizedLookupFunction)(t,e,n);null!==o&&""!==o&&-1===a.indexOf(o)&&a.push(o)}),a;var t,e,a,n}},Lt.methods={setFilter:function(e){var a,n,o=this,s=e.target.value;if(""!==s){var r=(a=s,n={},function(t){return o.compare(Object(At.memoizedLookupFunction)(t,o.filterKey,n),a)}),i={key:o.filterKey,comparator:r};t.commit("addFilter",i)}else t.commit("removeFilter",o.filterKey)}},Lt};qt.options=Lt;var Kt=qt,zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-control form-control-sm",on:{change:t.setFilter}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.options,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)},staticRenderFns:[]},Bt=a("VU/8")(Kt,zt,!1,null,null,null).exports,jt={},Yt=function(t){return jt.props={filterKey:{type:String,required:!0},compare:{type:Function,required:!0}},jt.data=function(){return{date:null}},jt.watch={date:function(e){var a,n,o=this,s=new Date(e);if(null!==e&&""!==e){var r=(a=s,n={},function(t){return o.compare(Object(At.memoizedLookupFunction)(t,o.filterKey,n),a)}),i={key:o.filterKey,comparator:r};t.commit("addFilter",i)}else t.commit("removeFilter",o.filterKey)}},jt};Yt.options=jt;var Ht=Yt,Xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dropdown",{ref:"dropdown"},[a("btn",{staticClass:"dropdown-toggle calendar-btn"},[t._v(t._s(t.date)+" "),a("i",{staticClass:"fa fa-calendar"})]),t._v(" "),a("template",{slot:"dropdown"},[a("li",[a("date-picker",{model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)])],2)},staticRenderFns:[]},Gt=a("VU/8")(Ht,Xt,!1,null,null,null).exports,Wt="marked"+Date.now(),Qt={},Jt=function(t){return Qt.data=function(){var t=this,e=[{label:"All",fn:function(){t.removeFilter()}},{label:"Selected",fn:function(){t.filter(!0)}},{label:"Not selected",fn:function(){t.filter(!1)}}];return{selection:e[0].label,options:e}},Qt.methods={select:function(t){t.fn(),this.selection=t.label},filter:function(e){var a,n=(a=e,function(e){return t.getters.isItemSelected(e)===a}),o={key:Wt,comparator:n};t.commit("addFilter",o)},removeFilter:function(){t.commit("removeFilter",Wt)}},Qt};Jt.options=Qt;var Zt=Jt,te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-dropdown",{ref:"dropdown",staticClass:"m-2",attrs:{size:"sm",text:t.selection}},t._l(t.options,function(e){return a("b-dropdown-item",{key:e.label},[a("a",{attrs:{role:"button"},on:{click:function(a){t.select(e)}}},[t._v(t._s(e.label))])])}))},staticRenderFns:[]},ee=a("VU/8")(Zt,te,!1,null,null,null).exports,ae={strings:function(t,e,a){var n=t?t.toUpperCase().trim():"",o=e?e.toUpperCase().trim():"";return n<o?-1*a:n>o?1*a:0},numbers:function(t,e,a){return a*(t-e)},dates:function(t,e,a){return a*((t?t.getTime():0)-(e?e.getTime():0))},bool:function(t,e,a){return a*((t?1:0)-(e?1:0))}},ne=function(t,e,a){var n={};return function(o,s){return ae[t](Object(At.memoizedLookupFunction)(o,e,n),Object(At.memoizedLookupFunction)(s,e,n),a)}},oe="sort-asc",se="sort-desc",re={},ie=function(t){return re.props={item:{required:!0},disable:{type:Boolean}},re.methods={changeHandler:function(e){t.commit("toggleItemSelection",this.item)}},re.computed={isSelected:{get:function(){return t.getters.isItemSelected(this.item)},set:function(){}}},re.watch={disable:function(e){e&&this.isSelected&&t.commit("toggleItemSelection",this.item)}},re};ie.options=re;var ce=ie,le={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isSelected,expression:"isSelected"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isSelected)?t._i(t.isSelected,null)>-1:t.isSelected},on:{change:[function(e){var a=t.isSelected,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&(t.isSelected=a.concat([null])):s>-1&&(t.isSelected=a.slice(0,s).concat(a.slice(s+1)))}else t.isSelected=o},t.changeHandler]}})])},staticRenderFns:[]},ue=a("VU/8")(ce,le,!1,null,null,null).exports,de={},me=function(t){return de.props={items:{type:Array,required:!0}},de.computed={itemsCount:function(){return this.items.length},totalSelectedCount:function(){return t.getters.selectedItems.length},pageSelectedCount:function(){return this.items.reduce(function(e,a){return t.getters.isItemSelected(a)&&e++,e},0)},areSelected:function(){return this.itemsCount-this.pageSelectedCount==0?(this.checkHalf(!1),!0):0===this.totalSelectedCount?(this.checkHalf(!1),!1):(this.checkHalf(!0),!1)}},de.methods={checkHalf:function(t){this.$refs.checkbox&&(this.$refs.checkbox.indeterminate=t)},toggleAll:function(e){var a={items:this.items,areSelected:e.target.checked};t.commit("setItemsSelection",a)}},de};me.options=de;var pe=me,ve={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-group btn-group-sm bulk-selector",attrs:{role:"group"}},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("input",{ref:"checkbox",attrs:{type:"checkbox"},domProps:{checked:t.areSelected},on:{change:t.toggleAll}})]),t._v(" "),t.totalSelectedCount?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"}},[a("span",[t._v(t._s(t.totalSelectedCount)+" "+t._s(t.totalSelectedCount>1?"Records":"Record")+" selected")])]):t._e(),t._v(" "),t.totalSelectedCount&&t.$slots.default?a("b-dropdown",{attrs:{text:"Bulk actions"}},[t._t("default")],2):t._e()],1)},staticRenderFns:[]},fe={tableStore:Nt,InputFilter:Vt,SelectFilter:Bt,DateFilter:Gt,MarkedFilter:ee,SortDirective:function(t){return{bind:function(e,a,n){var o=a.value,s=o.sortKey,r=o.compare,i=o.initOrder,c=null;function l(){null===c||-1===c?(c=1,e.classList.add(oe),e.classList.remove(se)):(c=-1,e.classList.add(se),e.classList.remove(oe));var a={sortId:s+c,comparator:ne(r,s,c),onKeyChangeCallback:u};t.commit("setSorter",a)}function u(t){void 0!==t&&t.startsWith(s)||(e.classList.remove(se),e.classList.remove(oe),c=null)}e.classList.add("sort"),e.addEventListener("click",l),i&&(c="DESC"===i?1:-1,l())}}},CheckboxSelect:ue,BulkSelector:a("VU/8")(pe,ve,!1,null,null,null).exports},he=a("sb1D"),_e=a("a93R"),ge=a.n(_e),ye={methods:{runAfterSCisSet:function(t){this.$store.getters.selectedCompany?t():this.$store.watch(function(t,e){return e.selectedCompany},function(e){e&&t()})}}},be=fe.tableStore,Ce={mixins:[ge()(be),ye],directives:{Sort:fe.SortDirective(be)},components:{InputFilter:fe.InputFilter(be),SelectFilter:fe.SelectFilter(be),DateFilter:fe.DateFilter(be),BulkSelector:fe.BulkSelector(be),CheckboxSelect:fe.CheckboxSelect(be),MarkedFilter:fe.MarkedFilter(be),AutoFxSwitchModal:bt},data:function(){return{pauseChange:!1,currentData:null,loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},created:function(){this.runAfterSCisSet(this.loadCSAutoFxRates)},computed:{selectedItems:function(){return be.getters.selectedItems},allItems:function(){return be.getters.getItems}},methods:{loadCSAutoFxRates:function(){var t=this;this.loading=!0,this.$store.dispatch("loadCSAutoFxRates").then(function(){be.commit("setItems",t.$store.getters.getAutoFxRates)}).finally(function(){t.loading=!1})},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||be.commit("removeAllFilters")},disable:function(t){this.currentData=t,this.multipleActive=!1,this.$refs.questionModal.openQuestion(this.$t("Are you sure you want to STOP auto Fx Rate ?"))},multiple:function(t){this.multipleActive=!0,this.$refs.questionModal.openQuestion(this.$t("Are you sure you want to STOP auto for selected Fx Rates ?"))},enable:function(t){this.currentData=t,this.multipleActive=!1,this.$refs.questionModal.openDateQuestion(this.$t("You are going to start auto Fx Rate for ")+t.currency.isoCode)},change:function(t){this.currentData=t,this.multipleActive=!1,this.$refs.questionModal.openDateQuestion(this.$t("You are going to change auto Fx Rate for ")+t.currency.isoCode)},modalConfirm:function(t){var e=this;if(this.multipleActive)this.$store.dispatch("massDeactivateAutoFxRate",this.selectedItems).then(function(){e.loadCSAutoFxRates()});else{var a=this.allItems.filter(function(t){return t.currency.id===e.currentData.currency.id})[0];null!==this.currentData.sourceID?(a.date=new Date(t),null===this.currentData.oldSourceID?this.$store.dispatch("activateAutoFxRate",a).then(function(){e.loadCSAutoFxRates()}):this.$store.dispatch("switchAutoFxRate",a).then(function(){e.loadCSAutoFxRates()})):(a.date="",this.$store.dispatch("deactivateAutoFxRate",a).then(function(){e.loadCSAutoFxRates()})),a.oldSourceID=a.sourceID}},modalCancel:function(){var t=this,e=this.allItems.filter(function(e){return e.currency.id===t.currentData.currency.id})[0];e.sourceID=e.oldSourceID},turnSelected:function(t){this.multiple(this.selectedItems)},changeCurrent:function(t){var e=this;setTimeout(function(){e.pauseChange||(null===t.oldSourceID?e.enable(t):null===t.sourceID?e.disable(t):e.change(t))},25)}}},De={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("AutoFxSwitchModal",{ref:"questionModal",on:{confirm:t.modalConfirm,cancel:t.modalCancel}}),t._v(" "),a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.turnSelected(!1)}}},[t._v(t._s(t.$t("Turn selected OFF")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v(t._s(t.$t("Label")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Code")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("on/off")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th",[a("SelectFilter",{attrs:{filterKey:"currency.name",items:t.allItems,compare:t.compare.string}})],1),t._v(" "),a("th",[a("SelectFilter",{attrs:{filterKey:"currency.isoCode",items:t.allItems,compare:t.compare.string}})],1),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),t._v(" "),a("td",[t._v(t._s(e.currency?e.currency.name:""))]),t._v(" "),a("td",[t._v(t._s(e.currency?e.currency.isoCode:""))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.date)))]),t._v(" "),a("td",[a("b-form-select",{staticClass:"mb-3",attrs:{size:"sm"},on:{change:function(a){t.changeCurrent(e)}},model:{value:e.sourceID,callback:function(a){t.$set(e,"sourceID",a)},expression:"current.sourceID"}},[a("option",{domProps:{value:null}},[t._v("none")]),t._v(" "),t._l(e.sources,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.description))])})],2)],1)])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},$e=a("VU/8")(Ce,De,!1,null,null,null).exports,xe=fe.tableStore,we={name:"FxRatesTable",mixins:[ge()(xe)],directives:{Sort:fe.SortDirective(xe)},props:{FxRates:{},averageFxRates:{},selectedDateProp:{}},components:{Datepicker:ht.a,InputFilter:fe.InputFilter(xe),SelectFilter:fe.SelectFilter(xe),DateFilter:fe.DateFilter(xe),BulkSelector:fe.BulkSelector(xe),CheckboxSelect:fe.CheckboxSelect(xe),MarkedFilter:fe.MarkedFilter(xe)},computed:{allItems:function(){return xe.getters.getItems},selectedCompany:function(){return this.$store.getters.selectedCompany},selectedDate:{get:function(){return this.selectedDateProp},set:function(t){this.$emit("changeSelectedDate",t)}}},data:function(){return{editActiveForId:null,loading:!1,internalRate:0,itemsPerPage:5,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day},locales:{en:_t.b,bg:_t.a}}},methods:{haveManual:function(t){return null!==t.manual},showInvModal:function(){this.$emit("showInvModal")},haveAuto:function(t){return null!==t.auto},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||xe.commit("removeAllFilters")},deleteFxRate:function(t){var e=this;this.$store.dispatch("removeFxRate",t).then(function(){e.$emit("deleteFxRate",t)}).catch(function(t){e.$customMsg.showErrorMessage(e.$t(t.messageDetail))})},editFxRate:function(t){this.internalEditRate=t.manual.rate,this.editActiveForId=t.id},cancelEdit:function(){this.editActiveForId=null},saveEdit:function(){var t=this,e=this.pageItems.filter(function(e){return e.id===t.editActiveForId})[0];e.manual.rate=this.internalEditRate,this.$store.dispatch("editFxRate",e).then(function(){t.$emit("reload")}),this.editActiveForId=null}},watch:{FxRates:function(t){xe.commit("setItems",t)}}},Re={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive fx-rates-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"left-side-toolbar"},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})]),t._v(" "),a("datepicker",{class:{"is-invalid":t.errors.has("toDate")},attrs:{"bootstrap-styling":!0,id:"month",name:"month",language:t.locales[t.$i18n.locale],"minimum-view":"month",format:"MMMM yyyy","full-month-name":!0,"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{input:function(e){t.$emit("reValidateOnChange")}},model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1),t._v(" "),a("div",{staticClass:"right-side-toolbar"},[a("b-btn",{staticClass:"btn btn-success btn-sm",on:{click:t.showInvModal}},[t._v(t._s(t.averageFxRates?t.$t("Add Average FX Rate"):t.$t("Add Daily FX Rate")))])],1)]),t._v(" "),a("table",{staticClass:"table table-striped text-center"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"date",compare:"dates"},expression:"{sortKey: 'date', compare: 'dates'}"}]},[t._v(t._s(t.$t("Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"toCurrency.code",compare:"strings"},expression:"{sortKey: 'toCurrency.code', compare: 'strings'}"}]},[t._v(t._s(t.$t("Units")))]),t._v(" "),a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"rate",compare:"numbers"},expression:"{sortKey: 'rate', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Rate")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"toCurrency.code",compare:"strings"},expression:"{sortKey: 'toCurrency.code', compare: 'strings'}"}]},[t._v(t._s(t.$t("Auto Units")))]),t._v(" "),a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"rate",compare:"numbers"},expression:"{sortKey: 'rate', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Auto Rate")))]),t._v(" "),a("th")]),t._v(" "),t.showFilters?a("tr",[a("th"),t._v(" "),a("th",[t._v("Currency: "),a("SelectFilter",{attrs:{filterKey:"toCurrency.code",compare:t.compare.string,items:t.allItems}})],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",[a("td",[t._v(t._s(t._f("bsDate")(e.date)))]),t._v(" "),t.haveManual(e)?[a("td",[t._v(t._s(e.manual?e.manual.units:"")+" "+t._s(e.toCurrency?e.toCurrency.code:""))]),t._v(" "),a("td",[t._v("=")]),t._v(" "),t.editActiveForId===e.id?a("td",[a("b-form-input",{attrs:{type:"number"},model:{value:t.internalEditRate,callback:function(e){t.internalEditRate=e},expression:"internalEditRate"}}),t._v("\n            "+t._s(t.selectedCompany.currency?t.selectedCompany.currency.code:"")+"\n          ")],1):t._e(),t._v(" "),t.editActiveForId!==e.id?a("td",[t._v("\n            "+t._s(e.manual?e.manual.rate:"")+" "+t._s(t.selectedCompany.currency?t.selectedCompany.currency.code:"")+"\n          ")]):t._e()]:t._e(),t._v(" "),t.haveManual(e)?t._e():[a("td"),t._v(" "),a("td"),t._v(" "),a("td")],t._v(" "),t.haveAuto(e)?[a("td",[t._v(t._s(e.auto?e.auto.units:"")+" "+t._s(e.toCurrency?e.toCurrency.code:""))]),t._v(" "),a("td",[t._v("=")]),t._v(" "),a("td",[t._v("\n            "+t._s(e.auto?e.auto.units:"")+" "+t._s(t.selectedCompany.currency?t.selectedCompany.currency.code:"")+"\n          ")])]:t._e(),t._v(" "),t.haveAuto(e)?t._e():[a("td"),t._v(" "),a("td"),t._v(" "),a("td")],t._v(" "),t.haveManual(e)?[t.editActiveForId!==e.id?a("td",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(a){t.editFxRate(e)}}},[t._v(t._s(t.$t("Edit")))]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(a){t.deleteFxRate(e)}}},[t._v(t._s(t.$t("Remove")))])]):t._e(),t._v(" "),t.editActiveForId===e.id?a("td",[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:t.saveEdit}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v(t._s(t.$t("Cancel")))])]):t._e()]:t._e(),t._v(" "),t.haveManual(e)?t._e():a("td",[t._v(t._s(t.$t("No manual Rate")))])],2)}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Se=a("VU/8")(we,Re,!1,null,null,null).exports,Fe={DAILY:{id:1,label:"Daily"},AVERAGE:{id:2,label:"Avarage"}},Ie=[{id:1,label:"Balance Sheet",code:"BS",context:{IN:"Receivables",OUT:"Payables",FX_TYPES:[Fe.DAILY]}},{id:2,label:"Cash Flow Statement",code:"CFS",context:{IN:"Cash Receipts",OUT:"Cash Paid",FX_TYPES:[Fe.DAILY,Fe.AVERAGE]}},{id:3,label:"Income Statement",code:"IS",context:{IN:"Income",OUT:"Expense",FX_TYPES:[Fe.DAILY,Fe.AVERAGE]}}],Pe={misc:0,tax:1,software:2,responsibility:3},Me=[{id:1,label:"SuperUser"},{id:2,label:"Master"},{id:3,label:"User"},{id:4,label:"Guest"}],ke=a("ZAW5"),Ne={components:{ModelSelect:ke.ModelSelect,Datepicker:ht.a},props:{averageFxRates:{}},data:function(){return{locales:{en:_t.b,bg:_t.a},formError:"",formData:{currencyId:null,recordType:this.averageFxRates?2:1},convertedCurrencies:[]}},mounted:function(){var t=this;this.$store.dispatch("loadCurrencies").then(function(e){return t.currencyToOptions(e)})},computed:{formRecordTypeDaily:function(){return 1===this.formData.recordType},fxRecordsTypes:function(){var t=[];return Dt()(Fe).map(function(e){t.push(Fe[e])}),t},formHasError:function(){return!!this.formError.length}},methods:{currencyToOptions:function(t){var e=[];t.forEach(function(t){e.push({value:t.id,text:t.code})}),this.convertedCurrencies=e},resetForm:function(){this.formError="",this.formData={currencyId:null,recordType:1},this.updateParent()},showError:function(t){this.formError=t.messageDetail},updateParent:function(){this.$emit("updateFormData",this.formData)}}},Ae={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-group",{attrs:{label:t.$t("Currency")+":"}},[a("ModelSelect",{attrs:{options:t.convertedCurrencies,placeholder:t.$t("Select currency ...")},on:{input:t.updateParent},model:{value:t.formData.currencyId,callback:function(e){t.$set(t.formData,"currencyId",e)},expression:"formData.currencyId"}})],1),t._v(" "),a("b-form-group",{attrs:{label:t.$t("Select ")+(t.averageFxRates?t.$t("Month"):t.$t("Date"))+":"}},[t.averageFxRates?a("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"minimum-view":"month",format:"MMMM yyyy","calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.recordDate,callback:function(e){t.$set(t.formData,"recordDate",e)},expression:"formData.recordDate"}}):a("Datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.recordDate,callback:function(e){t.$set(t.formData,"recordDate",e)},expression:"formData.recordDate"}})],1),t._v(" "),a("b-form-group",{attrs:{label:t.$t("Rate")+":"}},[a("b-input",{attrs:{type:"number"},model:{value:t.formData.recordRate,callback:function(e){t.$set(t.formData,"recordRate",e)},expression:"formData.recordRate"}})],1),t._v(" "),t.formHasError?a("div",{staticClass:"text-danger"},[t._v(t._s(t.formError))]):t._e()],1)},staticRenderFns:[]},Te={name:"FxRates",components:{FxRatesTable:Se,FxRatesForm:a("VU/8")(Ne,Ae,!1,null,null,null).exports},mixins:[ye],created:function(){this.runAfterSCisSet(this.loadCurrentFxRates)},props:{averageFxRates:{default:!1},selectedDate:{}},data:function(){return{formData:{},showInvModal:!1,loading:!1,currentFxRates:[]}},computed:{selectedCompany:function(){return this.$store.getters.selectedCompany}},methods:{deleteFxRate:function(t){null===t.auto?this.currentFxRates=this.currentFxRates.filter(function(e){return e.id!==t.id}):this.currentFxRates.filter(function(e){return null!==e.auto&&e.auto.id===t.auto.id})[0].manual=null},setCurrentFxRates:function(){this.currentFxRates=this.$store.getters.getCurrentFxRates},changeSelectedDate:function(t){this.$emit("onDateChange",t)},reValidateOnChange:function(){this.loadCurrentFxRates(this.selectedDate)},onModalOk:function(t){var e=this;t.preventDefault(),this.formData.recordDate&&this.formData.currencyId&&this.formData.recordRate?this.$store.dispatch("addFxRate",this.formData).then(function(t){e.$customMsg.showSuccessMessage(e.$t("Successfully created ")+t.typeName+e.$t(" for ")+t.refCurrencyIsoCode),e.$refs.fxRatesForm.resetForm(),e.showInvModal=!1,e.loadCurrentFxRates()}).catch(function(t){e.$customMsg.showErrorMessage(e.$t("Error in creating FxRate :")+t.messageDetail),e.$refs.fxRatesForm.showError(t)}):this.$refs.fxRatesForm.showError({messageDetail:this.$t("Please fill all info!")})},onModalCancel:function(t){t.preventDefault(),this.$refs.fxRatesForm.resetForm(),this.showInvModal=!1},loadCurrentFxRates:function(){var t=this;this.loading=!0;var e={data:this.selectedDate,average:this.averageFxRates};this.$store.dispatch("loadCurrentFxRates",e).finally(function(){t.setCurrentFxRates(),t.loading=!1})},updateFormData:function(t){this.formData=t}},watch:{currentFxRates:function(t){fe.tableStore.commit("setItems",t)}}},Ee={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fx-rates-content"},[a("b-modal",{attrs:{title:t.averageFxRates?t.$t("Add Average FX Rate"):t.$t("Add Daily FX Rate")},on:{ok:t.onModalOk,cancel:t.onModalCancel},model:{value:t.showInvModal,callback:function(e){t.showInvModal=e},expression:"showInvModal"}},[a("button",{staticClass:"close-btn",attrs:{slot:"modal-header-close"},on:{click:t.onModalCancel},slot:"modal-header-close"},[a("i",{staticClass:"far fa-times-circle"})]),t._v(" "),a("FxRatesForm",{ref:"fxRatesForm",attrs:{averageFxRates:t.averageFxRates},on:{updateFormData:t.updateFormData}})],1),t._v(" "),a("FxRatesTable",{attrs:{averageFxRates:t.averageFxRates,errors:t.errors,selectedDateProp:t.selectedDate},on:{deleteFxRate:t.deleteFxRate,changeSelectedDate:t.changeSelectedDate,reValidateOnChange:t.reValidateOnChange,showInvModal:function(e){t.showInvModal=!0}}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ue={name:"FxPage",components:{FxRates:a("VU/8")(Te,Ee,!1,null,null,null).exports,AutoFxSettings:$e},data:function(){return{activeTab:0,selectedDate:new Date(Date.now())}},methods:{onTabChange:function(t){this.activeTab=t},onDateChange:function(t){this.selectedDate=t}}},Oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fx-rates"},[a("h2",[t._v(t._s(t.$t("Fx Rates")))]),t._v(" "),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:this.$t("Daily Rates"),active:""}},[0===t.activeTab?a("FxRates",{attrs:{selectedDate:t.selectedDate},on:{onDateChange:t.onDateChange}}):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:this.$t("Average Rates")}},[1===t.activeTab?a("FxRates",{attrs:{selectedDate:t.selectedDate,averageFxRates:"true"},on:{onDateChange:t.onDateChange}}):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:this.$t("Settings")}},[2===t.activeTab?a("AutoFxSettings"):t._e()],1)],1)],1)},staticRenderFns:[]},Ve=a("VU/8")(Ue,Oe,!1,null,null,null).exports,Le={components:{Datepicker:ht.a},data:function(){return{locales:{en:_t.b,bg:_t.a},formData:{},statementTypes:Ie,isFileCorrect:null,formSubmitted:!1,errMsg:null,loading:!1}},props:{uploadData:{}},created:function(){var t=this;null!==this.uploadData&&setTimeout(function(){t.formData={fromDate:t.uploadData.startDate,toDate:t.uploadData.endDate},t.statementTypes.forEach(function(e){e.id===t.uploadData.statementID&&(t.formData.statementType=e)})},500)},methods:{checkFile:function(){if(this.isFileCorrect=!1,this.$validator.errors.remove("excelFile"),void 0===this.formData.file)this.$validator.errors.add({field:"excelFile",msg:this.$t("No file selected")});else{var t=this.formData.file.name.substr(this.formData.file.name.lastIndexOf(".")+1);"xls"===t||"xlsx"===t?this.isFileCorrect=!0:this.$validator.errors.add({field:"excelFile",msg:this.$t("Please, select an Excel file")})}},reValidateOnChange:function(){var t=this;this.formSubmitted&&setTimeout(function(){t.checkFile(),t.$validator.validateAll()},100)},validateBeforeSubmit:function(){var t=this;setTimeout(function(){t.checkFile(),t.formSubmitted=!0,t.$validator.validateAll().then(function(e){e&&t.isFileCorrect&&(t.loading=!0,t.$store.dispatch("uploadExcel",t.formData).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))})},100)}}},qe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"upload-form",on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"statementType"}},[t._v(t._s(t.$t("Statement type"))+":")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("statementType")},attrs:{id:"statementType",name:"statementType",plain:!0,options:t.statementTypes},on:{input:t.reValidateOnChange},model:{value:t.formData.statementType,callback:function(e){t.$set(t.formData,"statementType",e)},expression:"formData.statementType"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("statementType"),expression:"errors.has('statementType')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a statement type"))+".")])],1),t._v(" "),!t.formData.statementType||t.formData.statementType.id>1?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"from"}},[t._v(t._s(t.$t("From date"))+":")]),t._v(" "),a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("from")},attrs:{"bootstrap-styling":!0,id:"from",name:"from",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{selected:t.reValidateOnChange},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("from"),expression:"errors.has('from')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"to"}},[t._v(t._s(t.$t("To date"))+":")]),t._v(" "),a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("to")},attrs:{"bootstrap-styling":!0,id:"to",name:"to",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{selected:t.reValidateOnChange},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("to"),expression:"errors.has('to')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"excelFile"}},[t._v(t._s(t.$t("Excel file"))+":")]),t._v(" "),a("b-form-file",{attrs:{placeholder:"Choose a file...",name:"excelFile",id:"excelFile",state:t.isFileCorrect},on:{change:t.reValidateOnChange},model:{value:t.formData.file,callback:function(e){t.$set(t.formData,"file",e)},expression:"formData.file"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("excelFile"),expression:"errors.has('excelFile')"}],staticClass:"text-danger"},[t._v(t._s(t.errors.first("excelFile"))+".")])],1),t._v(" "),a("div",{staticClass:"py-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(t._s(t.$t("Upload")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ke=a("VU/8")(Le,qe,!1,null,null,null).exports,ze={data:function(){return{toggle:!1,loading:!1}},methods:{open:function(){this.toggle=!0,document.body.classList.add("fpm-open-body")},close:function(){this.toggle=!1,document.body.classList.remove("fpm-open-body"),this.$emit("close")}}},Be={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"full-page-modal",class:{"fpm-open":this.toggle}},[e("div",{staticClass:"fpm-head",attrs:{id:"fpm-head"}},[this._t("head"),this._v(" "),e("a",{staticClass:"close-btn",attrs:{title:"Close"},on:{click:this.close}},[e("i",{staticClass:"far fa-times-circle"})])],2),this._v(" "),e("div",{staticClass:"fpm-body"},[this._t("default")],2)])},staticRenderFns:[]},je=a("VU/8")(ze,Be,!1,null,null,null).exports,Ye={props:["contractor"],computed:{statementType:function(){return this.$store.getters.statementType},dates:function(){var t=this.$store.getters.importReceipt,e=f.formatDate(t.toDate);return t.fromDate&&(e=f.formatDate(t.fromDate)+" - "+e),e},companiesStr:function(){var t=this.$store.getters.selectedCompany.name;return this.contractor&&(t=t+" - "+this.contractor),t}}},He={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"heading-text"},[this._v("\n  "+this._s(this.companiesStr)+",\n  "+this._s(this.statementType.label)+",\n  "+this._s(this.dates)+"\n")])},staticRenderFns:[]},Xe={props:["value"],components:{FullPageModal:je,ModalHead:a("VU/8")(Ye,He,!1,null,null,null).exports},data:function(){return{contractorName:"",loading:!1}},watch:{value:function(t){var e=this;t&&(this.$refs.modal.open(),this.loading=!0,this.load(t).finally(function(){e.loading=!1}))}},methods:{close:function(){this.showFilters&&(this.showFilters=!1),this.$emit("input",null)}}},Ge={},We=function(t){return Ge.name="rcRecordsModal",Ge.mixins=[Xe,ge()(t)],Ge.directives={Sort:fe.SortDirective(t)},Ge.components={InputFilter:fe.InputFilter(t),SelectFilter:fe.SelectFilter(t),DateFilter:fe.DateFilter(t),BulkSelector:fe.BulkSelector(t),CheckboxSelect:fe.CheckboxSelect(t),MarkedFilter:fe.MarkedFilter(t)},Ge.data=function(){return{dataChanged:!1,itemsPerPage:5,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},Ge.computed={records:function(){return this.$store.getters.recognizedCompanyRecords(this.value)},statementType:function(){return this.$store.getters.statementType},dates:function(){var t=this.$store.getters.importReceipt,e=f.formatDate(t.toDate);return t.fromDate&&(e=f.formatDate(t.fromDate)+" - "+e),e},myCompany:function(){return this.$store.getters.selectedCompany}},Ge.methods={load:function(t){return this.dataChanged=!1,this.contractorName=t.company.name,this.$store.dispatch("loadRecognizedCompanyRecords",t)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},deleteSelected:function(){var e=this;t.getters.selectedItems.forEach(function(t){return e.deleteCurrent(t)})},deleteCurrent:function(e){var a=this;this.$store.dispatch("removeValidRecord",e).then(function(){a.dataChanged=!0,t.commit("removeItem",e)})},close:function(){this.dataChanged&&this.$emit("dataChanged")}},Ge.watch={records:function(e){t.commit("setItems",e)}},Ge};We.options=Ge;var Qe=We(fe.tableStore),Je={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("template",{slot:"head"},[t._v("\n    "+t._s(t.myCompany.name)+" - "+t._s(t.contractorName)+",\n    "+t._s(t.statementType.label)+",\n    "+t._s(t.dates)+"\n  ")]),t._v(" "),a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v(t._s(t.$t("Line")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.line},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),t._v(" "),a("td",[t._v(t._s(e.line))]),t._v(" "),a("td",[t._v(t._s(e.account))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.payer))]),t._v(" "),a("td",[t._v(t._s(e.receiver))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),t._v(" "),a("td",[t._v(t._s(e.currency?e.currency.code:""))]),t._v(" "),a("td",[t._v(t._s(e.docAmount))]),t._v(" "),a("td",[t._v(t._s(e.desc))]),t._v(" "),a("td",[a("button",{on:{click:function(a){t.deleteCurrent(e)}}},[t._v(t._s(t.$t("Delete")))])])])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)],2)},staticRenderFns:[]},Ze={components:{rcRecordsModal:a("VU/8")(Qe,Je,!1,null,null,null).exports},data:function(){return{selectedSet:null}},computed:{sets:function(){return this.$store.getters.recognizedCompaniesSets},context:function(){return this.$store.getters.statementTypeContext}},methods:{show:function(t){this.selectedSet=t},remove:function(t){this.$store.dispatch("removeValidSet",t).then(this.reloadData)},reloadData:function(){this.$store.dispatch("loadSummary")}}},ta={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{colspan:"2"}}),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.IN))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.OUT))]),t._v(" "),a("th",{attrs:{colspan:"2"}})]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Company")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),a("tbody",t._l(t.sets,function(e){return a("tr",{key:e.company.name+e.currency.code},[a("td",[t._v(t._s(e.company.name))]),t._v(" "),a("td",[t._v(t._s(e.currency.code))]),t._v(" "),a("td",[t._v(t._s(e.receivables.amount))]),t._v(" "),a("td",[t._v(t._s(e.receivables.count))]),t._v(" "),a("td",[t._v(t._s(e.payables.amount))]),t._v(" "),a("td",[t._v(t._s(e.payables.count))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-default btn-sm",attrs:{title:"View details"},on:{click:function(a){t.show(e)}}},[t._v(t._s(t.$t("View Details")))])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{title:"Remove the valid transactions"},on:{click:function(a){t.remove(e)}}},[t._v(t._s(t.$t("Remove")))])])])}))]),t._v(" "),a("rcRecordsModal",{on:{dataChanged:t.reloadData},model:{value:t.selectedSet,callback:function(e){t.selectedSet=e},expression:"selectedSet"}})],1)},staticRenderFns:[]},ea=a("VU/8")(Ze,ta,!1,null,null,null).exports,aa={},na=function(t){return aa.name="ucRecordsModal",aa.mixins=[Xe,ge()(t)],aa.directives={Sort:fe.SortDirective(t)},aa.components={InputFilter:fe.InputFilter(t),SelectFilter:fe.SelectFilter(t),DateFilter:fe.DateFilter(t),BulkSelector:fe.BulkSelector(t),CheckboxSelect:fe.CheckboxSelect(t),MarkedFilter:fe.MarkedFilter(t)},aa.data=function(){return{itemsPerPage:10,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},aa.computed={records:function(){return this.$store.getters.unrecognizedCompanyRecords(this.value)}},aa.methods={load:function(t){return this.contractorName=t.company.name,this.$store.dispatch("loadUnrecognizedCompanyRecords",t)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},aa.watch={records:function(t){fe.tableStore.commit("setItems",t)}},aa};na.options=aa;var oa=na(fe.tableStore),sa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("modal-head",{attrs:{slot:"head",contractor:t.contractorName},slot:"head"}),t._v(" "),a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"line",compare:"numbers"},expression:"{sortKey: 'line', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Line")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docAmount",compare:"numbers"},expression:"{sortKey: 'docAmount', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]),t._v(" "),t.showFilters?a("tr",[a("td",[a("InputFilter",{attrs:{filterKey:"line",compare:t.compare.numAsString}})],1),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td",[a("SelectFilter",{attrs:{filterKey:"currency.code",items:t.records,compare:t.compare.numAsString}})],1),t._v(" "),a("td"),t._v(" "),a("td")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.line},[a("td",{staticClass:"line-cell"},[t._v(t._s(e.line))]),t._v(" "),a("td",[t._v(t._s(e.account))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.payer))]),t._v(" "),a("td",[t._v(t._s(e.receiver))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),t._v(" "),a("td",[t._v(t._s(e.currency?e.currency.code:""))]),t._v(" "),a("td",[t._v(t._s(e.docAmount))]),t._v(" "),a("td",[t._v(t._s(e.desc))])])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)],1)},staticRenderFns:[]},ra={components:{ucRecordsModal:a("VU/8")(oa,sa,!1,null,null,null).exports},mixins:[ye],created:function(){this.runAfterSCisSet(this.loadContacts)},data:function(){return{selectedSet:null,selectedContact:{}}},computed:{selectContactsOptions:function(){return this.contacts.map(function(t){return{text:t.name,value:t}})},contacts:function(){return this.$store.getters.contacts},sets:function(){return this.$store.getters.unrecognizedCompaniesSets},context:function(){return this.$store.getters.statementTypeContext}},methods:{recognize:function(t,e){var a=e,n=t.company.name;this.$store.dispatch("createAlias",{refCompany:a,aname:n}).then(this.$store.dispatch("loadSummary"))},show:function(t){this.selectedSet=t},loadContacts:function(){this.loadStore("loadSCContacts")},loadStore:function(t){var e=this;this.loading=!0,this.$store.dispatch(t).finally(function(){e.loading=!1})}}},ia={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.IN))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.context.OUT))]),t._v(" "),a("th",{attrs:{colspan:"2"}})]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Company")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),a("tbody",t._l(t.sets,function(e){return a("tr",{key:e.company.name},[a("td",[t._v(t._s(e.company.name))]),t._v(" "),a("td",[t._v(t._s(e.receivables.amount))]),t._v(" "),a("td",[t._v(t._s(e.receivables.count))]),t._v(" "),a("td",[t._v(t._s(e.payables.amount))]),t._v(" "),a("td",[t._v(t._s(e.payables.count))]),t._v(" "),a("td",[a("b-container",[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-form-select",{staticClass:"mb-3",attrs:{options:t.selectContactsOptions},model:{value:t.selectedContact[e.company.name],callback:function(a){t.$set(t.selectedContact,e.company.name,a)},expression:"selectedContact[set.company.name]"}})],1),t._v(" "),a("b-col",{attrs:{cols:"4"}},[a("button",{staticClass:"btn btn-info btn-sm",attrs:{title:t.$t("View details")},on:{click:function(a){t.recognize(e,t.selectedContact[e.company.name])}}},[t._v(t._s(t.$t("Recognize")))])])],1)],1)],1),t._v(" "),a("td",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{title:t.$t("View details")},on:{click:function(a){t.show(e)}}},[t._v(t._s(t.$t("View details")))])])])}))]),t._v(" "),a("ucRecordsModal",{model:{value:t.selectedSet,callback:function(e){t.selectedSet=e},expression:"selectedSet"}})],1)},staticRenderFns:[]},ca=a("VU/8")(ra,ia,!1,null,null,null).exports,la=fe.tableStore,ua={},da=function(t){return ua.name="InvalidRecordsModal",ua.mixins=[Xe,ge()(t)],ua.directives={Sort:fe.SortDirective(t)},ua.components={InputFilter:fe.InputFilter(t),SelectFilter:fe.SelectFilter(t),DateFilter:fe.DateFilter(t),BulkSelector:fe.BulkSelector(t),CheckboxSelect:fe.CheckboxSelect(t),MarkedFilter:fe.MarkedFilter(t)},ua.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},ua.computed={records:function(){return this.$store.getters.invalidRecords}},ua.methods={load:function(){return this.$store.dispatch("loadInvalidRecords")},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},ua.watch={records:function(e){t.commit("setItems",e)}},ua};da.options=ua;var ma=da(la),pa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",staticClass:"invalid-records-modal",on:{close:t.close}},[a("modal-head",{attrs:{slot:"head",contractor:t.contractorName},slot:"head"}),t._v(" "),a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"line",compare:"numbers"},expression:"{sortKey: 'line', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Line")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Errors")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docDate",compare:"dates"},expression:"{sortKey: 'docDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"dueDate",compare:"dates"},expression:"{sortKey: 'dueDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"postingDate",compare:"dates"},expression:"{sortKey: 'postingDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"line",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[t._v(t._s(t.$t("Errors")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[a("SelectFilter",{attrs:{filterKey:"ref",items:t.records,compare:t.compare.numAsString}})],1),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.line},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e,disable:e.needFxRate}})],1),t._v(" "),a("td",{staticClass:"line-cell"},[t._v(t._s(e.line))]),t._v(" "),a("td",{staticClass:"error-cell"},[a("ul",t._l(e.errors,function(e){return a("li",[a("strong",[t._v(t._s(e.type.label)+":")]),t._v(" "+t._s(e.desc)+"\n              ")])}))]),t._v(" "),a("td",[t._v(t._s(e.account))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.payer))]),t._v(" "),a("td",[t._v(t._s(e.receiver))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),t._v(" "),a("td",[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",[t._v(t._s(e.docAmount))]),t._v(" "),a("td",[t._v(t._s(e.desc))])])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)],1)},staticRenderFns:[]},va=a("VU/8")(ma,pa,!1,null,null,null).exports,fa=fe.tableStore,ha={},_a=function(t){return ha.name="outOfScopeRecordsModal",ha.mixins=[Xe,ge()(t)],ha.directives={Sort:fe.SortDirective(t)},ha.components={InputFilter:fe.InputFilter(t),SelectFilter:fe.SelectFilter(t),DateFilter:fe.DateFilter(t)},ha.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},ha.computed={records:function(){return this.$store.getters.outOfScopeRecords}},ha.methods={load:function(){return this.$store.dispatch("loadOutOfScopeRecords")},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},ha.watch={records:function(e){t.commit("setItems",e)}},ha};_a.options=ha;var ga=_a(fa),ya={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("modal-head",{attrs:{slot:"head",contractor:t.contractorName},slot:"head"}),t._v(" "),a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group"}},[a("label",{attrs:{for:"ipp"}},[t._v(t._s(t.$t("Items per page"))+":")]),t._v(" "),a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])]),t._v(" "),a("table",{staticClass:"table table-striped table-bordered table-sm"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"line",compare:"numbers"},expression:"{sortKey: 'line', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Line")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docDate",compare:"dates"},expression:"{sortKey: 'docDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"dueDate",compare:"dates"},expression:"{sortKey: 'dueDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"postingDate",compare:"dates"},expression:"{sortKey: 'postingDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("InputFilter",{attrs:{filterKey:"line",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",[a("SelectFilter",{attrs:{filterKey:"ref",items:t.records,compare:t.compare.numAsString}})],1),t._v(" "),a("th",[t._v(t._s(t.$t("Payer")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Receiver")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Due Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Amount")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))])]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.line},[a("td",{staticClass:"line-cell"},[t._v(t._s(e.line))]),t._v(" "),a("td",[t._v(t._s(e.account))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.payer))]),t._v(" "),a("td",[t._v(t._s(e.receiver))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.docDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.dueDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.postingDate)))]),t._v(" "),a("td",[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",[t._v(t._s(e.docAmount))]),t._v(" "),a("td",[t._v(t._s(e.desc))])])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)],1)},staticRenderFns:[]},ba={components:{InvalidRecordsModal:va,OutOfScopeRecordsModal:a("VU/8")(ga,ya,!1,null,null,null).exports},data:function(){return{showInvalidDetails:!1,showOutOfPeriodDetails:!1}},computed:{recordsCount:function(){return this.$store.getters.recordsCount},total:function(){var t=this;return Dt()(this.recordsCount).reduce(function(e,a){return e+t.recordsCount[a]},0)}}},Ca={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive upload-summary"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v(t._s(t.$t("Transactions Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Number")))]),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("th",[t._v(t._s(t.$t("Valid with recognized companies"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.validRecognizedCompany))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Valid with unrecognized companies"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.validUnrecognizedCompany))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Invalid"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.invalid))]),t._v(" "),a("td",[t.recordsCount.invalid?a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(e){t.showInvalidDetails=!0}}},[t._v(t._s(t.$t("View Details")))]):t._e()])]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Out of Period"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.outOfScope))]),t._v(" "),a("td",[t.recordsCount.outOfScope?a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(e){t.showOutOfPeriodDetails=!0}}},[t._v(t._s(t.$t("View Details")))]):t._e()])]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.$t("Removed"))+":")]),t._v(" "),a("td",[t._v(t._s(t.recordsCount.removed))]),t._v(" "),a("td")])]),t._v(" "),a("tfoot",[a("tr",[a("th",[t._v(t._s(t.$t("TOTAL"))+":")]),t._v(" "),a("td",[t._v(t._s(t.total))]),t._v(" "),a("td")])])]),t._v(" "),a("invalidRecordsModal",{model:{value:t.showInvalidDetails,callback:function(e){t.showInvalidDetails=e},expression:"showInvalidDetails"}}),t._v(" "),a("outOfScopeRecordsModal",{model:{value:t.showOutOfPeriodDetails,callback:function(e){t.showOutOfPeriodDetails=e},expression:"showOutOfPeriodDetails"}})],1)},staticRenderFns:[]},Da={name:"UploadPage",components:{UploadForm:Ke,RcTable:ea,UcTable:ca,SummaryTable:a("VU/8")(ba,Ca,!1,null,null,null).exports},data:function(){return{loading:!1,uploadData:null,historyComponent:this.$route.params.historyComponent?this.$route.params.historyComponent:null}},computed:{summary:function(){return this.$store.getters.importSummary}},created:function(){this.$route.params.uploadData&&(this.uploadData=this.$route.params.uploadData)},methods:{saveRecognisedRecords:function(){var t=this;this.$store.dispatch("saveValid").then(function(){t.$customMsg.showSuccessMessage(t.$t("Saved records successfully")),t.$store.commit("clearImport")}).catch(function(e){t.$customMsg.showErrorMessage(t.$t(e.messageDetail))}).finally(function(){t.loading=!1,null!==t.historyComponent&&t.$router.push(t.historyComponent)})},onUpload:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSummary").then(function(){t.loading=!1})},cancel:function(){this.$store.commit("clearImport")}}},$a={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-page"},[a("h2",[t._v(t._s(t.$t("Upload")))]),t._v(" "),t.summary?t._e():a("upload-form",{attrs:{uploadData:t.uploadData},on:{success:t.onUpload}}),t._v(" "),t.summary&&t.summary.recordsCount.validRecognizedCompany?a("div",[a("h3",[t._v(t._s(t.$t("Pending valid transactions with recognized companies")))]),t._v(" "),a("p",[t._v(t._s(t.$t("You can save these transactions.")))]),t._v(" "),a("rc-table"),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.saveRecognisedRecords}},[t._v(t._s(t.$t("Save")))])],1):t._e(),t._v(" "),t.summary&&t.summary.recordsCount.validUnrecognizedCompany?a("div",[a("h3",[t._v(t._s(t.$t("Valid transactions with unrecognized companies")))]),t._v(" "),a("p",[t._v(t._s(t.$t("uploadPageValidUnrecognizedText")))]),t._v(" "),a("uc-table")],1):t._e(),t._v(" "),t.summary?a("div",[a("h3",[t._v(t._s(t.$t("Summary")))]),t._v(" "),a("summary-table"),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))])],1):t._e(),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},xa=a("VU/8")(Da,$a,!1,null,null,null).exports,wa=a("0KbX"),Ra={},Sa=function(t){return Ra.name="ContactsTable",Ra.mixins=[Xe,ge()(t)],Ra.directives={Sort:fe.SortDirective(t)},Ra.components={CompanyCard:wa.a,InputFilter:fe.InputFilter(t),SelectFilter:fe.SelectFilter(t),DateFilter:fe.DateFilter(t),BulkSelector:fe.BulkSelector(t),CheckboxSelect:fe.CheckboxSelect(t),MarkedFilter:fe.MarkedFilter(t),Pagination:fe.Pagination},Ra.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},Ra.computed={contacts:function(){return this.$store.getters.contacts}},Ra.mounted=function(){t.commit("setItems",this.$store.getters.contacts)},Ra.methods={load:function(t){this.contractorName=t.company.name},emitEvent:function(t){this.$emit(t)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},startReconciliation:function(t){this.$router.push({name:"Reconciliations",params:{startReconciliationFor:t}})}},Ra.watch={contacts:function(t){fe.tableStore.commit("setItems",t)}},Ra};Sa.options=Ra;var Fa=Sa(fe.tableStore),Ia={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})]),t._v(" "),a("div",{staticClass:"absolute-right"},[a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:function(e){t.emitEvent("openInvMyCompanyModal")}}},[t._v(t._s(t.$t("Invite from my companies")))]),t._v(" "),a("b-btn",{staticClass:"btn btn-success btn-sm mb-3",on:{click:function(e){t.emitEvent("openInvModal")}}},[t._v(t._s(t.$t("Invite Company")))])],1)],1),t._v(" "),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"name",compare:"strings",initOrder:"ASC"},expression:"{sortKey: 'name', compare: 'strings', initOrder: 'ASC'}"}]},[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Aliases")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"regNum",compare:"strings"},expression:"{sortKey: 'regNum', compare: 'strings'}"}]},[t._v(t._s(t.$t("Reg Number")))]),t._v(" "),a("th")]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"name",compare:t.compare.string}})],1),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"regNum",compare:t.compare.numAsString}})],1),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),t._v(" "),a("th",[e.logo&&e.name?a("company-card",{attrs:{company:e,size:"m"}}):t._e()],1),t._v(" "),a("td",[t._v(t._s(e.aliases?e.aliases.map(function(t){return t.aname}).join(", "):""))]),t._v(" "),a("td",[t._v(t._s(e.regNum))]),t._v(" "),a("td",[a("b-dropdown",{attrs:{text:"...","no-caret":""}},[a("b-dropdown-item",{on:{click:function(a){t.startReconciliation(e.id)}}},[t._v(t._s(t.$t("Start Reconciliation")))])],1)],1)])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Pa=a("VU/8")(Fa,Ia,!1,null,null,null).exports,Ma={name:"Tree",components:{TreeNode:a("mwaQ").default},props:{nodes:{required:!0},childrenProp:{default:"children"},idProp:{default:"id"},labelProp:{default:"name"},preselectedCompany:{}},data:function(){return{deselectFunc:null}},methods:{selectNode:function(t,e){this.deselectFunc&&this.deselectFunc(),this.$emit("changeSelected",t),this.deselectFunc=e},expandAll:function(){this.$emit("expandAll")},collapseAll:function(){this.$emit("collapseAll")}},computed:{items:function(){return this.nodes||[]}}},ka={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tree"},[this.items.length?e("TreeNode",{attrs:{nodes:this.items,state:this._self,preselectedCompany:this.preselectedCompany}}):this._e()],1)},staticRenderFns:[]},Na={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.selected?a("div",{staticClass:"company-info"},[a("p",[t._v(t._s(t.$t("Company Name"))+": "+t._s(t.selected.name))]),t._v(" "),a("p",[t._v(t._s(t.$t("Registration ID"))+": "+t._s(t.selected.regNum))]),t._v(" "),a("p",[t._v(t._s(t.$t("Country"))+": "+t._s(t.selected.country.name))]),t._v(" "),a("p",[t._v(t._s(t.$t("Reporting Currency"))+": "+t._s(t.selected.currency.code+" - "+t.selected.currency.name))]),t._v(" "),a("p",[t._v(t._s(t.$t("Address"))+": "+t._s(t.selected.addressText))]),t._v(" "),a("p",[t._v(t._s(t.$t("Parent company"))+": "+t._s(t.selected.parent.name))])]):t._e()},staticRenderFns:[]},Aa={components:{Tree:a("VU/8")(Ma,ka,!1,null,null,null).exports,CompanyInfo:a("VU/8")({props:{selected:{}},data:function(){return{}},methods:{}},Na,!1,null,null,null).exports},data:function(){return{currentSelectedNode:null}},computed:{nodes:function(){return this.$store.getters.holdingTree}},created:function(){this.$store.dispatch("loadHoldingTree").then(function(t){console.log(t)})},methods:{changeSelected:function(t){this.currentSelectedNode=t}}},Ta={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tree-wrapper"},[e("Tree",{attrs:{nodes:this.nodes},on:{changeSelected:this.changeSelected}}),this._v(" "),e("CompanyInfo",{attrs:{selected:this.currentSelectedNode}})],1)},staticRenderFns:[]},Ea=a("VU/8")(Aa,Ta,!1,null,null,null).exports,Ua={components:{Datepicker:ht.a},data:function(){return{formData:{fromDate:null,toDate:null,itemsPerPage:5},locales:{en:_t.b,bg:_t.a},optionsPerPage:[{value:2,text:"2"},{value:5,text:"5"},{value:10,text:"10"},{value:25,text:"25"},{value:50,text:"50"}]}},methods:{sendDates:function(){var t={fromDate:this.formData.fromDate,toDate:this.formData.toDate,itemsPerPage:this.formData.itemsPerPage};t.fromDate<=t.toDate||null===t.toDate?this.$emit("datesChanged",t):this.$customMsg.showErrorMessage(this.$t("End date is before start date"))},openRPModal:function(){this.$emit("openRPModal")}}},Oa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-col",[a("label",[t._v(t._s(t.$t("From date"))+":")]),t._v(" "),a("datepicker",{attrs:{"bootstrap-styling":!0,"clear-button":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}})],1),t._v(" "),a("b-col",[a("label",[t._v(t._s(t.$t("To date"))+":")]),t._v(" "),a("datepicker",{attrs:{"bootstrap-styling":!0,"clear-button":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}})],1),t._v(" "),a("b-col",{attrs:{"align-self":"end"}},[a("label",[t._v(t._s(t.$t("Results per page"))+":")]),t._v(" "),a("b-form-select",{attrs:{options:t.optionsPerPage},model:{value:t.formData.itemsPerPage,callback:function(e){t.$set(t.formData,"itemsPerPage",e)},expression:"formData.itemsPerPage"}})],1),t._v(" "),a("b-col",{attrs:{"align-self":"end"}},[a("b-btn",{on:{click:t.sendDates}},[t._v(t._s(t.$t("Filter")))])],1),t._v(" "),a("b-btn",{staticClass:"btn btn-success btn-sm mb-3 absolute-right",on:{click:t.openRPModal}},[t._v(t._s(t.$t("Add related party")))])],1),t._v(" "),a("br")],1)},staticRenderFns:[]},Va=a("VU/8")(Ua,Oa,!1,null,null,null).exports,La={components:{RelatedPartiesForm:Va,Datepicker:ht.a,CompanyCard:wa.a},created:function(){},data:function(){return{sort:{sortedBy:"toDate",isSortDescending:!1},loading:!1,itemsPerPage:5,currentPage:1,dates:{fromDate:null,toDate:null},tableFields:["name","detailId","fromDate","toDate"],locales:{en:_t.b,bg:_t.a},editData:{id:null,fromDate:null,toDate:null,description:""}}},computed:{companyRelatedParties:function(){return this.$store.getters.companyRelatedParties.relatedParties},count:function(){return this.$store.getters.companyRelatedParties.totalCount},numberOfPages:function(){return Math.ceil(this.count/this.itemsPerPage)},startIndex:function(){return(this.currentPage-1)*this.itemsPerPage+1},endIndex:function(){return this.currentPage*this.itemsPerPage}},methods:{openRPModal:function(){this.$emit("openRPModal")},getSortClass:function(t){var e="sort ";return t===this.sort.sortedBy&&(e+=this.sort.isSortDescending?"sort-asc":"sort-desc"),e},setSort:function(t){t!==this.sort.sortedBy?(this.sort.sortedBy=t,this.sort.isSortDescending=!1):this.sort.isSortDescending=!this.sort.isSortDescending,this.loadRelatedParties()},editRP:function(t){this.editData.id=t.detailId,this.editData.fromDate=t.fromDate,this.editData.toDate=t.toDate,this.editData.description=t.description},deleteRP:function(t){var e=this;this.$store.dispatch("deleteRelatedParty",t.detailId).then(function(){e.currentPage=1,e.loadRelatedParties()})},confirmEdit:function(){var t=this;this.$store.dispatch("editRelatedParty",this.editData).then(function(){t.currentPage=1,t.cancelEdit(),t.loadRelatedParties()})},cancelEdit:function(){this.editData.id=null},loadRelatedParties:function(){var t=this,e={startDate:this.dates.fromDate,endDate:this.dates.toDate,startIndex:this.startIndex,endIndex:this.endIndex};""!==this.sort.sortedBy&&(e.sort=this.sort.sortedBy,e.isSortDescending=this.sort.isSortDescending),this.loading=!0,this.$store.dispatch("loadSCRelatedParties",e).then(function(){t.loading=!1})},datesChanged:function(t){this.dates={fromDate:t.fromDate,toDate:t.toDate},this.itemsPerPage=t.itemsPerPage,this.currentPage=1,this.loadRelatedParties()},loadPage:function(t){this.currentPage=t,this.loadRelatedParties()}}},qa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("RelatedPartiesForm",{on:{openRPModal:t.openRPModal,datesChanged:t.datesChanged}}),t._v(" "),null!==t.dates.fromDate||null!==t.dates.toDate?a("span",[t._v("\n    ( From:"+t._s(t.dates.fromDate?t.dates.fromDate.toDateString():"Beginning")+" - To:"+t._s(t.dates.toDate?t.dates.toDate.toDateString():t.$t("Now"))+" )\n  ")]):t._e(),t._v(" "),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{on:{click:function(e){t.setSort("name")}}},[t._v("\n          "+t._s(t.$t("Name"))+"\n          "),a("span",{class:t.getSortClass("name")})]),t._v(" "),a("th",[t._v(t._s(t.$t("Aliases")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Reg Number")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Source")))]),t._v(" "),a("th",{on:{click:function(e){t.setSort("fromDate")}}},[t._v("\n          "+t._s(t.$t("From date"))+"\n          "),a("span",{class:t.getSortClass("fromDate")})]),t._v(" "),a("th",{on:{click:function(e){t.setSort("toDate")}}},[t._v("\n          "+t._s(t.$t("To date"))+"\n          "),a("span",{class:t.getSortClass("toDate")})]),t._v(" "),a("th",[t._v(t._s(t.$t("Description")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),a("tbody",t._l(t.companyRelatedParties,function(e){return a("tr",{key:e.id},[a("th",[e.logo&&e.name?a("company-card",{attrs:{company:e,size:"m"}}):t._e()],1),t._v(" "),a("td",[t._v(t._s(e.companyAliases))]),t._v(" "),a("td",[t._v(t._s(e.registrationNumber))]),t._v(" "),a("td",[t._v(t._s(e.typeName))]),t._v(" "),t.editData.id!==e.detailId?[a("td",[t._v(t._s(t._f("bsDate")(e.fromDate)))]),t._v(" "),null!==e.toDate?a("td",[t._v(t._s(t._f("bsDate")(e.toDate)))]):a("td",[t._v(" - ")]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),2===e.typeId?a("td",[a("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(a){t.editRP(e)}}},[t._v("Edit")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){t.deleteRP(e)}}},[t._v("Delete")])],1):a("td"),t._v(" "),a("td",[t._v(t._s(e.editActive))])]:[a("td",[a("datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.editData.fromDate,callback:function(e){t.$set(t.editData,"fromDate",e)},expression:"editData.fromDate"}})],1),t._v(" "),a("td",[a("datepicker",{attrs:{"bootstrap-styling":!0,"clear-button":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.editData.toDate,callback:function(e){t.$set(t.editData,"toDate",e)},expression:"editData.toDate"}})],1),t._v(" "),a("td",[a("b-form-input",{attrs:{type:"text",placeholder:"Description"},model:{value:t.editData.description,callback:function(e){t.$set(t.editData,"description",e)},expression:"editData.description"}})],1),t._v(" "),a("td",[a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(a){t.confirmEdit(e)}}},[t._v(t._s(t.$t("OK")))]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"warning"},on:{click:function(e){t.cancelEdit()}}},[t._v(t._s(t.$t("Cancel")))])],1)]],2)}))]),t._v(" "),a("br"),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.count,"per-page":t.itemsPerPage},on:{change:t.loadPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ka=a("VU/8")(La,qa,!1,null,null,null).exports,za=a("//Fk"),Ba=a.n(za),ja={components:{ModelSelect:ke.ModelSelect,Datepicker:ht.a},mixins:[ye],created:function(){this.runAfterSCisSet(this.loadContacts)},data:function(){return{formData:{current:!0},errMsg:null,noContacts:!1,loading:!1,SCContactsOptions:[],locales:{en:_t.b,bg:_t.a}}},computed:{contacts:function(){return this.$store.getters.contacts}},methods:{validate:function(){return this.$validator.validateAll()},save:function(){var t=this;return this.$store.dispatch("addRelatedParty",this.formData).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Added new relation.")),t.$emit("success",e)})},submit:function(){var t=this;this.errMsg=null,this.loading=!0,this.validate().then(function(e){return e?t.save():Ba.a.reject(new Error("Please, fill the required fields."))}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})},resetForm:function(){var t=this;this.$nextTick().then(function(){t.$validator.reset(),t.errors.clear(),t.formData={current:!0}})},loadContacts:function(){var t=this;this.$store.dispatch("loadSCContacts").then(function(e){return t.SCContactToOptions(e)})},SCContactToOptions:function(t){var e=[];t.forEach(function(t){var a="";t.aliases.forEach(function(t){a=t.aname}),e.push({value:t.id,text:t.name+" - "+a})}),this.SCContactsOptions=e,0===e.length&&(this.noContacts=!0,this.$emit("noContacts"))}}},Ya={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),t.noContacts?a("div",[t._v("\n    "+t._s(t.$t("You need to have contact companies in order to mark some of them as related parties."))+"\n  ")]):a("div",[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Contact"))+":")]),t._v(" "),a("ModelSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"contactName",options:t.SCContactsOptions,placeholder:"select contact ..."},model:{value:t.formData.contact,callback:function(e){t.$set(t.formData,"contact",e)},expression:"formData.contact"}}),t._v(" "),t.errors.has("contactName")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a contact"))+".")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("From date"))+":")]),t._v(" "),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"fromDate","bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t._v(" "),t.errors.has("fromDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a starting date"))+".")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group"},[a("b-form-checkbox",{model:{value:t.formData.current,callback:function(e){t.$set(t.formData,"current",e)},expression:"formData.current"}},[t._v("\n        "+t._s(t.$t("It is currently a related party"))+"\n      ")])],1),t._v(" "),t.formData.current?t._e():a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("To date"))+":")]),t._v(" "),a("Datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"toDate","bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t._v(" "),t.errors.has("toDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a end date"))+".")]):t._e()],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Description"))+":")]),t._v(" "),a("b-form-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"description",placeholder:"Enter description",rows:3,"max-rows":6},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}}),t._v(" "),t.errors.has("description")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, enter description"))+".")]):t._e()],1)]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ha=a("VU/8")(ja,Ya,!1,null,null,null).exports,Xa={},Ga=function(t){return Xa.name="ContactsTable",Xa.mixins=[Xe,ge()(t)],Xa.directives={Sort:fe.SortDirective(t)},Xa.components={CompanyCard:wa.a,InputFilter:fe.InputFilter(t),SelectFilter:fe.SelectFilter(t),DateFilter:fe.DateFilter(t),Pagination:fe.Pagination},Xa.data=function(){return{loading:!1,itemsPerPage:10,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},Xa.computed={invitations:function(){return this.$store.getters.companySentInvitations}},Xa.mounted=function(){t.commit("setItems",this.$store.getters.companySentInvitations)},Xa.methods={cancel:function(t){var e=this;this.loading=!0,this.$store.dispatch("cancelInvitation",t).finally(function(){e.loading=!1})},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},Xa.watch={invitations:function(t){fe.tableStore.commit("setItems",t)}},Xa};Ga.options=Xa;var Wa=Ga(fe.tableStore),Qa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.name",compare:"strings",initOrder:"ASC"},expression:"{sortKey: 'receiver.name', compare: 'strings', initOrder: 'ASC'}"}]},[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.country.name",compare:"strings"},expression:"{sortKey: 'receiver.country.name', compare: 'strings'}"}]},[t._v(t._s(t.$t("Country")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.regNum",compare:"strings"},expression:"{sortKey: 'receiver.regNum', compare: 'strings'}"}]},[t._v(t._s(t.$t("Reg Number")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.email",compare:"strings"},expression:"{sortKey: 'receiver.email', compare: 'strings'}"}]},[t._v(t._s(t.$t("Receiver Email")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"sender.user.name",compare:"strings"},expression:"{sortKey: 'sender.user.name', compare: 'strings'}"}]},[t._v(t._s(t.$t("Sender")))]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("th",[e.receiver?a("company-card",{attrs:{company:e.receiver,size:"m"}}):t._e()],1),t._v(" "),a("td",[a("img",{attrs:{width:"20",src:"/static/flags/"+(e.receiver?e.receiver.country.code:"")+".svg"}}),t._v("\n          "+t._s(e.receiver?e.receiver.country.name:"")+"\n        ")]),t._v(" "),a("td",[t._v(t._s(e.receiver?e.receiver.regNum:""))]),t._v(" "),a("td",[t._v(t._s(e.receiver?e.receiver.email:""))]),t._v(" "),a("td",[a("div",[t._v(t._s(e.sender?e.sender.user.name:""))]),t._v(" "),a("div",[t._v(t._s(e.sender?e.sender.user.email:""))])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(a){t.cancel(e)}}},[t._v(t._s(t.$t("Cancel")))])])])}))]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ja=a("VU/8")(Wa,Qa,!1,null,null,null).exports,Za=a("RUzx"),tn=a.n(Za),en={components:{Multiselect:tn.a},data:function(){return{loading:!1}},props:{disabled:{type:Boolean,default:!1},value:{},componentClass:{type:String}},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadCountries").then(function(){t.loading=!1})},computed:{internalValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},countries:function(){return this.$store.getters.countries?this.$store.getters.countries:[]}},methods:{validate:function(){return this.$validator.validateAll()},countryLabel:function(t){return""+t.name}}},an={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.componentClass},[a("label",{attrs:{for:"country"}},[t._v("Country:")]),t._v(" "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"multiselect is-invalid":t.errors.has("country")}],attrs:{id:"country",name:"country",disabled:t.disabled,options:t.countries,"show-labels":!0,"track-by":"name","custom-label":t.countryLabel,placeholder:t.$t("Please, select a country")},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[a("span",{},[a("img",{staticClass:"country_flag",attrs:{width:"20",height:"20",src:"/static/flags/"+e.option.code+".svg",alt:e.option.code}}),t._v(" \n            "),a("span",{},[t._v(t._s(e.option.name))])])]}},{key:"option",fn:function(e){return[a("div",{},[a("img",{staticClass:"country_flag",attrs:{width:"20",height:"20",src:"/static/flags/"+e.option.code+".svg",alt:e.option.code}}),t._v(" \n        "),a("span",{},[t._v(t._s(e.option.name))])])]}}]),model:{value:t.internalValue,callback:function(e){t.internalValue=e},expression:"internalValue"}}),t._v(" "),t.errors.has("country")?a("div",{staticClass:"invalid-feedback show-feedback"},[t._v(t._s(t.$t("Please, select a country"))+".")]):t._e()],1)},staticRenderFns:[]},nn=a("VU/8")(en,an,!1,null,null,null).exports,on={components:{CountrySelect:nn},mixins:[{methods:{runAfterNomenclatureIsSet:function(t,e){if(this.$store.getters[t])e();else var a=this.$store.watch(function(e,a){return a[t]},function(t){t&&(e(),a())})}}}],created:function(){this.$store.dispatch("loadCountries")},mounted:function(){var t=this;this.loading=!0,this.runAfterNomenclatureIsSet("countries",function(){t.loading=!1})},data:function(){return{formData:{},errMsg:null,loading:!1}},computed:{},methods:{validate:function(){return this.$refs.invitationCountrySelect.validate(),this.$validator.validateAll()},save:function(){var t=this;return this.$store.dispatch("inviteContact",this.formData).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Invitation successfully send.")),t.$emit("success",e)})},submit:function(){var t=this;this.errMsg=null,this.loading=!0,this.validate().then(function(e){return e?t.save():Ba.a.reject(new Error("Please, fill the required fields."))}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})},resetForm:function(){var t=this;this.$nextTick().then(function(){t.$validator.reset(),t.errors.clear(),t.formData={}})}}},sn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-name"}},[t._v(t._s(t.$t("Company Name"))+":")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",id:"cf-name",name:"name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid name"))+".")]),t._v(" "),a("small",{staticClass:"form-text text-muted"},[t._v(t._s(t.$t("Please enter the complete legal name as per registration"))+".")])]),t._v(" "),a("CountrySelect",{ref:"invitationCountrySelect",attrs:{componentClass:"form-group"},model:{value:t.formData.country,callback:function(e){t.$set(t.formData,"country",e)},expression:"formData.country"}}),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-regNum"}},[t._v(t._s(t.$t("Registration number"))+":")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.regNum,expression:"formData.regNum"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("regNum")}],attrs:{type:"text",id:"cf-regNum",name:"regNum"},domProps:{value:t.formData.regNum},on:{input:function(e){e.target.composing||t.$set(t.formData,"regNum",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter company's registration number"))+".")])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-email"}},[t._v(t._s(t.$t("Contact Person Email"))+":")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",id:"cf-email",name:"email"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid email"))+".")])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"cf-email"}},[t._v(t._s(t.$t("Message"))+":")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.message,expression:"formData.message"}],staticClass:"form-control",attrs:{name:"message",rows:"5"},domProps:{value:t.formData.message},on:{input:function(e){e.target.composing||t.$set(t.formData,"message",e.target.value)}}})]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},rn=a("VU/8")(on,sn,!1,null,null,null).exports,cn=a("pGLP"),ln={components:{Multiselect:tn.a,LogoFlag:cn.a},data:function(){return{loading:!1}},props:{currentCompanyId:{},allowNone:{type:Boolean,default:!1},noneLabel:{type:String},companies:{},disabled:{type:Boolean,default:!1},value:{},multiple:{type:Boolean,default:!1},componentClass:{},componentLabel:{}},computed:{internalCompanies:function(){var t=this,e=[];return void 0!==this.currentCompanyId&&null!==this.currentCompanyId||this.allowNone?(this.allowNone&&e.push({id:-1,name:""}),this.companies.forEach(function(a){t.currentCompanyId!==a.id&&e.push(a)}),e):this.companies},internalValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},methods:{companyLabel:function(t){var e="";return t.aliases?0===t.aliases.length?""+t.name:(t.aliases.forEach(function(t){e+=t.aname+", "}),e=e.slice(0,-2),t.name+"( "+e+" )"):""+t.name},validate:function(){return this.$validator.validateAll()},sendChange:function(){this.$emit("change")}},watch:{companies:{handler:function(t){t&&!t.length&&(this.internalValue=this.multiple?{}:[])},deep:!0}}},un={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.componentClass},[a("label",{attrs:{for:"companies"}},[t._v(t._s(t.componentLabel))]),t._v(" "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"multiselect is-invalid":t.errors.has("companies")}],attrs:{id:"companies",name:"companies",disabled:t.disabled,options:t.internalCompanies,multiple:t.multiple,"track-by":"name","custom-label":t.companyLabel,"show-labels":!0,placeholder:t.companies.length?t.$t("Please, select a company"):t.$t("No companies found")},on:{select:t.sendChange,remove:t.sendChange},scopedSlots:t._u([{key:"singleLabel",fn:function(e){return[a("span",{},[a("logo-flag",{attrs:{company:e.option,size:"s"}}),t._v(" "),a("span",{},[t._v(t._s(e.option.name))])],1)]}},{key:"option",fn:function(e){return[a("div",{},[a("logo-flag",{attrs:{company:e.option,size:"s"}}),t._v(" "),a("span",[t._v(t._s(-1===e.option.id?t.$t("No parent"):e.option.name))])],1)]}}]),model:{value:t.internalValue,callback:function(e){t.internalValue=e},expression:"internalValue"}}),t._v(" "),t.errors.has("companies")?a("div",{staticClass:"invalid-feedback show-feedback"},[t._v(t._s(t.$t("Please, select a company"))+".")]):t._e()],1)},staticRenderFns:[]},dn=a("VU/8")(ln,un,!1,null,null,null).exports,mn={components:{CompanySelect:dn,CompanyCard:wa.a},created:function(){this.$store.dispatch("loadMyCompanies")},data:function(){return{loading:!1}},computed:{myCompanies:function(){return this.$store.getters.myCompanies},contacts:function(){return this.$store.getters.contacts},company:function(){return this.$store.getters.selectedCompany||{}},myNotContactedCompanies:function(){var t=this,e=[];return this.contacts.forEach(function(t){e.push(t.id)}),this.myCompanies.filter(function(a){return!e.includes(a.id)&&a.id!==t.company.id})}},methods:{calcAliases:function(t){var e="";return t.forEach(function(t){e+=t.aname+", "}),""!==(e=e.slice(0,-2))?e:this.$t("no aliases")},submit:function(){var t=this;this.loading=!0;var e=[];this.myCompanies.forEach(function(t){t.checked&&e.push(t.id)}),this.$store.dispatch("inviteMyCompanyContacts",e).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Invitation successfully send.")),t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})}}},pn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Aliases")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Reg Number")))])])]),t._v(" "),a("tbody",t._l(t.myNotContactedCompanies,function(e){return a("tr",{key:e.id},[a("td",[a("b-form-checkbox",{model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"current.checked"}})],1),t._v(" "),a("th",[e.logo&&e.name?a("company-card",{attrs:{company:e,size:"s"}}):t._e()],1),t._v(" "),a("td",[t._v(t._s(e.aliases?t.calcAliases(e.aliases):""))]),t._v(" "),a("td",[t._v(t._s(e.regNum))])])}))]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},vn={name:"ContactsPage",components:{ContactsTable:Pa,HoldingTab:Ea,RelatedPartiesTable:Ka,RelatedPartiesModal:Ha,RelatedPartiesForm:Va,InvitationsTable:Ja,InvitationForm:rn,InvitationMyCompaniesForm:a("VU/8")(mn,pn,!1,null,null,null).exports},mixins:[ye],data:function(){return{showInvModal:!1,showInvMyCompanyModal:!1,showRPModal:!1,loading:!1,activeTabId:0,noContacts:!1}},computed:{hasContacts:function(){return!!this.$store.getters.contacts.length},hasInvitations:function(){return!!this.$store.getters.companySentInvitations.length}},methods:{onInvModalOk:function(t){t.preventDefault(),this.$refs.invitationForm.submit()},onInvMyCompanyModal:function(t){t.preventDefault(),this.$refs.invitationMyCompaniesForm.submit()},onRPModalOk:function(t){t.preventDefault(),this.$refs.relatedPartiesModal.submit()},openRPModal:function(){this.$refs.relatedPartiesModal.resetForm(),this.showRPModal=!0},openInvModal:function(){this.$refs.invitationForm.resetForm(),this.showInvModal=!0},openInvMyCompanyModal:function(){this.showInvMyCompanyModal=!0},onSentInvitation:function(t){this.showInvModal=!1},onSentMyCompaniesInvitation:function(t){this.showInvMyCompanyModal=!1,this.loadContacts()},onAddRelatedParties:function(t){this.showRPModal=!1},onTabChange:function(t){var e=this;switch(this.activeTabId=t,t){case 1:console.log("");break;case 2:this.$nextTick(function(){e.$refs.relatedPartiesTable.loadRelatedParties()});break;case 3:this.runAfterSCisSet(this.loadInvitations);break;default:this.runAfterSCisSet(this.loadContacts)}},loadContacts:function(){this.loadStore("loadSCContacts")},loadInvitations:function(){this.loadStore("loadSCSentInvitations")},loadStore:function(t){var e=this;this.loading=!0,this.$store.dispatch(t).finally(function(){e.loading=!1})}}},fn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contact-page"},[a("h2",[t._v(t._s(t.$t("Contacts")))]),t._v(" "),a("b-modal",{attrs:{title:t.$t("Company Invitation")},on:{ok:t.onInvModalOk},model:{value:t.showInvModal,callback:function(e){t.showInvModal=e},expression:"showInvModal"}},[a("invitation-form",{ref:"invitationForm",on:{success:t.onSentInvitation}})],1),t._v(" "),a("b-modal",{attrs:{title:t.$t("Add from my companies")},on:{ok:t.onInvMyCompanyModal},model:{value:t.showInvMyCompanyModal,callback:function(e){t.showInvMyCompanyModal=e},expression:"showInvMyCompanyModal"}},[a("invitation-my-companies-form",{ref:"invitationMyCompaniesForm",on:{success:t.onSentMyCompaniesInvitation}})],1),t._v(" "),a("b-modal",{attrs:{title:t.$t("Add related party"),"ok-disabled":t.noContacts},on:{ok:t.onRPModalOk},model:{value:t.showRPModal,callback:function(e){t.showRPModal=e},expression:"showRPModal"}},[a("related-parties-modal",{ref:"relatedPartiesModal",on:{success:t.onAddRelatedParties,noContacts:function(e){t.noContacts=!0}}})],1),t._v(" "),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:"Contacts",active:""}},[t.hasContacts&&0===t.activeTabId?a("contacts-table",{on:{openInvModal:t.openInvModal,openInvMyCompanyModal:t.openInvMyCompanyModal}}):t._e(),t._v(" "),t.hasContacts||t.loading?t._e():a("div",[t._v(t._s(t.$t("There aren't any contacts added yet.")))])],1),t._v(" "),a("b-tab",{attrs:{title:"Holding"}},[1===t.activeTabId?a("holding-tab"):t._e()],1),t._v(" "),a("b-tab",{staticClass:"related-parties",attrs:{title:"Related parties"}},[2===t.activeTabId?a("related-parties-table",{ref:"relatedPartiesTable",on:{openRPModal:t.openRPModal}}):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:"Sent Invitations"}},[t.hasInvitations?a("invitations-table"):t._e(),t._v(" "),t.hasInvitations||t.loading?t._e():a("div",[t._v(t._s(t.$t("There aren't any invitations.")))])],1)],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},hn=a("VU/8")(vn,fn,!1,null,null,null).exports,_n=a("woOf"),gn=a.n(_n),yn={props:{save:{required:!0,type:Function},remove:{type:Function},cancel:{required:!0,type:Function},validate:{required:!0,type:Function},editMode:{default:!1}},data:function(){return{isEditMode:this.editMode,errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.errMsg=null,this.loading=!0,this.validate().then(function(e){return e?t.save():Ba.a.reject(new Error("Please, fill the required fields."))}).then(function(){t.cancelEdit()}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})},cancelEdit:function(){this.cancel(),this.isEditMode=!1,this.errMsg=null},edit:function(){this.isEditMode=!0},del:function(){var t=this;this.loading=!0,this.remove().catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})}},watch:{isEditMode:function(t){this.$emit("edit",t)}}},bn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"company-property-row",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"cp-col"},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v("\n      "+t._s(t.errMsg)+"\n    ")]):t._e(),t._v(" "),t._t("default")],2),t._v(" "),t.isEditMode?t._e():a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:t.edit}},[t._v(t._s(t.$t("Edit")))]),t._v(" "),t.remove?a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.del}},[t._v(t._s(t.$t("Delete")))]):t._e()]),t._v(" "),t.isEditMode?a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit"}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("button",{staticClass:"btn btn-light btn-sm",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v(t._s(t.$t("Cancel")))])]):t._e(),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Cn={components:{CpForm:a("VU/8")(yn,bn,!1,null,null,null).exports},props:{cProp:{required:!0,default:function(){return{}}}},methods:{onEdit:function(t){this.editMode=t},validate:function(){return this.$validator.validateAll()},cancel:function(){this.cpModel=gn()({},this.cProp),this.$emit("cancel")}}},Dn={props:{cProp:{required:!1}},data:function(){return{cpModel:gn()({},this.cProp),roles:Me,editMode:!0,loading:!1}},methods:{save:function(){var t=this;this.loading=!0,this.$store.dispatch("addSCCollaborator",this.cpModel).then(function(){t.$emit("done"),t.loading=!1})}}},$n=xt()({},Cn,Dn),xn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{staticClass:"collaborator-form",attrs:{save:t.save,cancel:t.cancel,validate:t.validate,"edit-mode":t.editMode},on:{edit:t.onEdit}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",[t._v(t._s(t.$t("Collaborator's Email:")))]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",name:"email"},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid email"))+".")])]),t._v(" "),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"role"}},[t._v(t._s(t.$t("Role"))+":")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("role")}],attrs:{id:"role",name:"role",plain:!0,options:t.roles},model:{value:t.cpModel.role,callback:function(e){t.$set(t.cpModel,"role",e)},expression:"cpModel.role"}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, select a role"))+".")])],1)]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},wn=a("VU/8")($n,xn,!1,null,null,null).exports,Rn={name:"CollaboratorsTableRow",props:{collaborator:{required:!0},pageItems:{}},data:function(){return{model:gn()({},this.collaborator),roles:Me,editMode:!1,loading:!1}},methods:{save:function(){var t=this;if(-1!==this.collaborator.permittedRoles.indexOf(this.model.role.id))return this.$store.dispatch("updateCollaborator",this.model).then(function(){t.$emit("reload")}).then(function(){t.editMode=!1});this.$customMsg.showErrorMessage(this.$t("You do not have enough permissions to change to this role!"))},edit:function(){this.collaborator.isLastSU&&this.$customMsg.showErrorMessage(this.$t("Last SuperUser cannot be edited!")),this.editMode=!this.collaborator.isLastSU},cancel:function(){this.model=gn()({},this.collaborator),this.editMode=!1},remove:function(){var t=this;if(this.collaborator.canBeDeleted)return this.$store.dispatch("removeCollaborator",this.model).then(function(){t.$emit("reload")});this.$customMsg.showErrorMessage(this.$t("This user cannot be deleted!"))}}},Sn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[t.loading?t._e():[a("td",[t._v(t._s(t.model.name))]),t._v(" "),a("td",[t._v(t._s(t.model.email))]),t._v(" "),t.model.isInherited?a("td",[t._v("\n      "+t._s(t.model.role?t.model.role.label:"")+" ("+t._s(t.$t("Inherited from parent"))+")\n    ")]):a("td",[a("c-form-select",{staticClass:"form-control",attrs:{plain:!0,options:t.roles,disabled:!t.editMode},model:{value:t.model.role,callback:function(e){t.$set(t.model,"role",e)},expression:"model.role"}})],1),t._v(" "),a("td",[t._v(t._s(t.model.isPending?"pending":"-"))]),t._v(" "),t.collaborator.currentUser||!t.collaborator.canBeEdited||t.model.isInherited?a("td"):a("td",{staticClass:"actions-col"},[t.editMode?t._e():a("div",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:t.edit}},[t._v(t._s(t.$t("Edit")))]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.remove}},[t._v(t._s(t.$t("Remove")))])]),t._v(" "),t.editMode?a("div",[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:t.save}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancel}},[t._v(t._s(t.$t("Cancel")))])]):t._e()])],t._v(" "),t.loading?a("td",{attrs:{colspan:"4"}},[a("loading",{attrs:{loading:t.loading}})],1):t._e()],2)},staticRenderFns:[]},Fn=a("VU/8")(Rn,Sn,!1,null,null,null).exports,In=fe.tableStore,Pn={name:"CollaboratorsTable",components:{Row:Fn},directives:{Sort:fe.SortDirective(In)},data:function(){return{loading:!1,collaborators:[]}},computed:{pageItems:function(){return fe.tableStore.commit("setItems",this.$store.getters.collaborators),fe.tableStore.getters.pageItems()}},methods:{reloadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").finally(function(){t.loading=!1})}},watch:{pageItems:{handler:function(t){var e=this;this.collaborators=[];var a=t.filter(function(t){return t.isCurrent})[0].role.id;t.forEach(function(t){var n=1===t.role.id&&1===e.pageItems.filter(function(t){return 1===t.role.id}).length,o=1!==t.role.id||1===t.role.id&&e.pageItems.filter(function(t){return 1===t.role.id}).length>1,s=t.isCurrent,r=[];Me.forEach(function(t){a<=t.id&&r.push(t.id)});var i=-1!==r.indexOf(t.role.id),c={isLastSU:n,canBeDeleted:o,permittedRoles:r,currentUser:s,currentUserRole:a,canBeEdited:i};e.collaborators.push(gn()({},t,c))})},deep:!0}}},Mn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"name",compare:"strings"},expression:"{sortKey: 'name', compare: 'strings'}"}]},[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"email",compare:"strings"},expression:"{sortKey: 'email', compare: 'strings'}"}]},[t._v(t._s(t.$t("Email")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"role.id",compare:"numbers"},expression:"{sortKey: 'role.id', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Role")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"isPending",compare:"bool"},expression:"{sortKey: 'isPending', compare: 'bool'}"}]},[t._v(t._s(t.$t("Status")))]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.collaborators,function(e){return a("row",{key:e.email,attrs:{collaborator:e},on:{reload:t.reloadCollaborators}})}))]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},kn={components:{CollaboratorForm:wn,CollaboratorsTable:a("VU/8")(Pn,Mn,!1,null,null,null).exports},mixins:[ye],created:function(){this.runAfterSCisSet(this.loadCollaborators)},data:function(){return{showForm:!1,loading:!1}},methods:{reloadCollaborators:function(){this.loadCollaborators(),this.showForm=!1},loadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").finally(function(){t.loading=!1})}}},Nn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collaborator-page"},[a("div",{staticClass:"collaborator-page-heading"},[a("h2",{staticClass:"collaborator-page-title"},[t._v(t._s(t.$t("Collaborators")))]),t._v(" "),t.showForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t.showForm?a("collaborator-form",{on:{cancel:function(e){t.showForm=!1},done:t.reloadCollaborators}}):t._e(),t._v(" "),a("collaborators-table",{staticClass:"mt-3"}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},An=a("VU/8")(kn,Nn,!1,null,null,null).exports;var Tn={removeNulls:function t(e){var a=gn()({},e);return Dt()(a).forEach(function(e){if(a[e]){if(a[e].constructor===Object){var n=t(a[e]);Dt()(n).length?a[e]=n:delete a[e]}}else delete a[e]}),Dt()(a).length?a:null},hasAnyData:function(t){return!!Dt()(t).find(function(e){return t[e]})},isObject:function(t){return!!t&&t.constructor===Object},isArray:function(t){return!!t&&t.constructor===Array}},En={name:null,regNum:null,country:null,currency:null,address:null,parent:null,logo:null},Un={components:{CompanySelect:dn,Multiselect:tn.a,CountrySelect:nn},created:function(){var t=this;this.loading=!0;var e=this.$store.dispatch("loadCurrencies"),a=this.$store.dispatch("loadMyCompanies");Ba.a.all([e,a]).finally(function(){t.loading=!1})},props:{company:{default:function(){return En}},logo:{default:function(){return{file:null,formData:null}}}},data:function(){return{formData:gn()({},this.company),editMode:!this.company.name,errMsg:null,loading:!1}},computed:{currentCompanyId:function(){return this.company.id?this.company.id:null},currencies:function(){return this.$store.getters.currencies?this.$store.getters.currencies:[]},myCompanies:function(){return this.$store.getters.myCompanies?this.$store.getters.myCompanies:[]}},methods:{currenciesLabel:function(t){return t.code+" - "+t.name},validate:function(){return this.$refs.myCompanyCountrySelect.validate(),this.$validator.validateAll()},submit:function(){var t=this,e="";this.loading=!0,this.validate().then(function(a){if(a){var n=t.company.name?"updateSelCompany":"createCompany";return e=t.company.name?"updated":"created",t.company.name||(t.formData.logoFile=t.logo.formData),t.$store.dispatch(n,t.formData)}return Ba.a.reject(new Error("Please, fill the required fields."))}).then(function(a){t.$customMsg.showSuccessMessage("Successfully "+e+" "+a.name+" company."),t.$emit("success",a)}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})},cancelEdit:function(){this.formData=gn()({},this.company),this.$emit("cancel"),this.editMode=!1,this.errMsg=null},edit:function(){this.editMode=!0}},watch:{company:function(t){this.editMode=!t.name,this.formData=gn()({},t),this.errMsg=null}}},On={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"my-company-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),t.logo.image&&t.logo.image.length>0?a("div",{staticClass:"image-preview"},[a("img",{staticClass:"preview",attrs:{src:t.logo.image,width:"200"}})]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v(t._s(t.$t("Company Name"))+":")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",id:"name",name:"name",disabled:!t.editMode},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"regId"}},[t._v(t._s(t.$t("Registration ID"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.regNum,expression:"formData.regNum"}],staticClass:"form-control",attrs:{type:"text",id:"regId",disabled:!t.editMode},domProps:{value:t.formData.regNum},on:{input:function(e){e.target.composing||t.$set(t.formData,"regNum",e.target.value)}}})]),t._v(" "),a("CountrySelect",{ref:"myCompanyCountrySelect",attrs:{disabled:!t.editMode,componentClass:"form-group"},model:{value:t.formData.country,callback:function(e){t.$set(t.formData,"country",e)},expression:"formData.country"}}),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"currency"}},[t._v(t._s(t.$t("Reporting Currency"))+":")]),t._v(" "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("currency")}],attrs:{id:"currency",name:"currency",plain:!0,disabled:!t.editMode,options:t.currencies,"custom-label":t.currenciesLabel},model:{value:t.formData.currency,callback:function(e){t.$set(t.formData,"currency",e)},expression:"formData.currency"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[t._v(t._s(t.$t("Address"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],staticClass:"form-control",attrs:{type:"text",id:"address",disabled:!t.editMode},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}})]),t._v(" "),a("CompanySelect",{attrs:{companies:t.myCompanies,disabled:!t.editMode,componentClass:"form-group",componentLabel:t.$t("Parent company")+":",currentCompanyId:t.currentCompanyId,allowNone:!0,noneLabel:t.$t("No parent")},model:{value:t.formData.parent,callback:function(e){t.$set(t.formData,"parent",e)},expression:"formData.parent"}}),t._v(" "),t.editMode?a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v(t._s(t.$t("Cancel")))])]):t._e(),t._v(" "),t.editMode?t._e():a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.edit}},[t._v(t._s(t.$t("Edit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Vn=a("VU/8")(Un,On,!1,null,null,null).exports,Ln={data:function(){return{cpModel:gn()({},this.cProp),editMode:!this.cProp.aname}},methods:{save:function(){var t=this;return(this.cProp.aname?this.$store.dispatch("updateSCAlias",{alias:this.cProp,updatedAname:this.cpModel.aname}):this.$store.dispatch("createSCAlias",this.cpModel.aname)).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCAlias",this.cProp).then(function(){t.$emit("remove")})}}},qn=xt()({},Cn,Ln),Kn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.aname},on:{edit:t.onEdit}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.cpModel.aname,expression:"cpModel.aname"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("aname")}],attrs:{type:"text",name:"aname",disabled:!t.editMode},domProps:{value:t.cpModel.aname},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"aname",e.target.value)}}})])},staticRenderFns:[]},zn=a("VU/8")(qn,Kn,!1,null,null,null).exports,Bn=function(t){var e={data:function(){return{cpModel:gn()({},this.cProp),editMode:!1,locales:{en:_t.b,bg:_t.a}}},computed:{hasAnyData:function(){var t=!!this.cProp&&Tn.hasAnyData(this.cProp);return this.editMode=!t,t}},methods:{validate:function(){return Tn.hasAnyData(this.cpModel)?Ba.a.resolve(!0):Ba.a.reject(new Error("Please, enter some data."))},save:function(){var e=this,a={};return a[t]=this.cpModel,this.$store.dispatch("updateSelCompany",a).then(function(){e.$emit("success")})},remove:function(){var e=this,a={};return a[t]=Dt()(this.cProp).reduce(function(t,e){return t[e]=null,t},{}),this.$store.dispatch("updateSelCompany",a).then(function(){e.$emit("remove")})}}};return xt()({},Cn,e)},jn={components:{Multiselect:tn.a},data:function(){return{toggle:!1,errMsg:null,formData:{date:"",months:[],output:"",id:null},options:[{name:"1st",value:1},{name:"2nd",value:2},{name:"3rd",value:3},{name:"4th",value:4},{name:"5th",value:5},{name:"6th",value:6},{name:"7th",value:7},{name:"8th",value:8},{name:"9th",value:9},{name:"10th",value:10},{name:"11th",value:11},{name:"12th",value:12},{name:"13th",value:13},{name:"14th",value:14},{name:"15th",value:15},{name:"16th",value:16},{name:"17th",value:17},{name:"18th",value:18},{name:"19th",value:19},{name:"20th",value:20},{name:"21th",value:21},{name:"22th",value:22},{name:"23th",value:23},{name:"24th",value:24},{name:"25th",value:25},{name:"26th",value:26},{name:"27th",value:27},{name:"28th",value:28},{name:"29th",value:29},{name:"30th",value:30},{name:"31th",value:31},{name:"Last day",value:0}],months:[{name:"January",value:"Jan"},{name:"February",value:"Feb",mark:!0},{name:"March",value:"Mar"},{name:"April",value:"Apr",mark:!0},{name:"May",value:"May"},{name:"June",value:"Jun",mark:!0},{name:"July",value:"Jul"},{name:"August",value:"Aug"},{name:"September",value:"Sep",mark:!0},{name:"October",value:"Oct"},{name:"November",value:"Nov",mark:!0},{name:"December",value:"Dec"}]}},props:{disabled:{type:Boolean,default:!1},value:{},singleMonth:{type:Boolean,default:!1}},created:function(){this.formData=this.objectToForm(this.value)},computed:{output:function(){var t="";return t+=this.formData.date?"Every "+this.formData.date.name+" of ":"No date selected",this.formData.date&&this.formData.months&&this.formData.months.length?(this.formData.months.forEach(function(e){t+=e.name+", "}),t=t.slice(0,-2)):this.singleMonth&&this.formData.date&&(t+=this.formData.months.name),t}},methods:{confirm:function(t){var e=this;t.preventDefault(),this.$validator.validateAll().then(function(t){return t?Ba.a.resolve():Ba.a.reject(new Error("Please, fill the required fields."))}).then(function(){e.toggle=!1,e.formData.output=e.formToObject(e.formData),e.$emit("input",e.formData.output)}).catch(function(){})},objectToForm:function(t){var e=this,a={months:[]};return t&&(this.singleMonth?t.months.split("").forEach(function(t,n){Number(t)&&(a.months=e.months[n])}):t.months.split("").forEach(function(t,n){Number(t)&&a.months.push(e.months[n])}),a.date=0===t.dayOfMonth?this.options[31]:this.options[t.dayOfMonth-1],a.id=t.id,a.companyId=t.companyId),a},formToObject:function(t){var e=this,a={};return a.id=t.id,a.companyId=t.companyId,a.dayOfMonth=t.date.value,a.months="",this.months.forEach(function(n){e.singleMonth?a.months+=t.months.name===n.name?"1":"0":a.months+=t.months.filter(function(t){return t.name===n.name}).length?"1":"0"}),a},open:function(){this.toggle=!0},close:function(){this.toggle=!1,this.$emit("close")}},watch:{formData:{handler:function(t){var e=!1;t.date&&31===t.date.value&&(e=!0),this.months.forEach(function(t){t.disabled=t.mark&&e}),!t.date||30!==t.date.value&&29!==t.date.value||(e=!0,this.months[1].disabled=!0),e&&(this.singleMonth?t.months=t.months.disabled?this.months[0]:t.months:t.months.forEach(function(e,a){e.disabled&&t.months.splice(a,1)}))},deep:!0},value:{handler:function(t){this.formData=this.objectToForm(t)},deep:!0}}},Yn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n\n  "+t._s(t.output)+"\n\n\n  "),t.disabled?t._e():a("b-button",{attrs:{variant:"outline-success",size:"sm"},on:{click:t.open}},[t._v("\n    Change\n  ")]),t._v(" "),a("b-modal",{attrs:{title:"Select recurring date"},on:{ok:t.confirm},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[t._v("\n\n    Select Date:\n    "),a("multiselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"deselect-label":"Can't remove this value",name:"date","track-by":"name",label:"name",placeholder:"Select one",options:t.options,searchable:!1,"allow-empty":!1},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var a=e.option;return[t._v(t._s(a.name))]}}]),model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("date"),expression:"errors.has('date')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")]),t._v(" "),a("br"),t._v(" "),t.singleMonth?a("b-form-group",{attrs:{label:"Select Month"}},[a("b-form-radio-group",{attrs:{stacked:""},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},t._l(t.months,function(e,n){return a("b-form-radio",{key:n,attrs:{value:e,disabled:e.disabled}},[t._v("\n          "+t._s(e.name)+"\n        ")])}))],1):a("div",[t._v("\n      Select Months:\n      "),t._l(t.months,function(e,n){return a("div",{key:n},[a("b-form-checkbox",{attrs:{value:e,disabled:e.disabled},model:{value:t.formData.months,callback:function(e){t.$set(t.formData,"months",e)},expression:"formData.months"}},[t._v("\n          "+t._s(e.name)+"\n        ")])],1)})],2)],1)],1)},staticRenderFns:[]},Hn=a("VU/8")(jn,Yn,!1,null,null,null).exports,Xn={components:{RecurringDateModal:Hn},mixins:[Bn("corpTax")]},Gn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.hasAnyData},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxId"}},[t._v(t._s(t.$t("Corporate Tax ID"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.num,expression:"cpModel.num"}],staticClass:"form-control",attrs:{id:"corpTaxId",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.num},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"num",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxFillingDate"}},[t._v(t._s(t.$t("Filing Deadline"))+":")]),t._v(" "),a("RecurringDateModal",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("corpTaxFillingDate"),inactive:!t.editMode}],attrs:{id:"corpTaxFillingDate",name:"corpTaxFillingDate",disabled:!t.editMode},model:{value:t.cpModel.fillingDate,callback:function(e){t.$set(t.cpModel,"fillingDate",e)},expression:"cpModel.fillingDate"}})],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxDueDate"}},[t._v(t._s(t.$t("Due Date"))+":")]),t._v(" "),a("RecurringDateModal",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("corpTaxDueDate"),inactive:!t.editMode}],attrs:{id:"corpTaxDueDate",name:"corpTaxDueDate",disabled:!t.editMode},model:{value:t.cpModel.dueDate,callback:function(e){t.$set(t.cpModel,"dueDate",e)},expression:"cpModel.dueDate"}})],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxAdvancedPayments"}},[t._v("Advanced Payments:")]),t._v(" "),a("RecurringDateModal",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("corpTaxAdvancedPayments"),inactive:!t.editMode}],attrs:{id:"corpTaxAdvancedPayments",name:"corpTaxAdvancedPayments",disabled:!t.editMode},model:{value:t.cpModel.advancedPayments,callback:function(e){t.$set(t.cpModel,"advancedPayments",e)},expression:"cpModel.advancedPayments"}})],1)])},staticRenderFns:[]},Wn=a("VU/8")(Xn,Gn,!1,null,null,null).exports,Qn={components:{RecurringDateModal:Hn},mixins:[Bn("audit")]},Jn={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.hasAnyData},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorName"}},[t._v(t._s(t.$t("Name"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"}],staticClass:"form-control",attrs:{id:"auditorName",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorEmail"}},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",attrs:{id:"auditorEmail",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorPhone"}},[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"}],staticClass:"form-control",attrs:{id:"auditorPhone",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorDdl"}},[t._v(t._s(t.$t("Deadline"))+":")]),t._v(" "),a("RecurringDateModal",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("auditorDdl"),inactive:!t.editMode}],attrs:{id:"auditorDdl",name:"auditorDdl",disabled:!t.editMode},model:{value:t.cpModel.auditDeadlineDate,callback:function(e){t.$set(t.cpModel,"auditDeadlineDate",e)},expression:"cpModel.auditDeadlineDate"}})],1)])},staticRenderFns:[]},Zn=a("VU/8")(Qn,Jn,!1,null,null,null).exports,to={components:{Multiselect:tn.a,RecurringDateModal:Hn,CountrySelect:nn},props:{cProp:{required:!1,default:function(){return{}}}},data:function(){return{cpModel:gn()({},this.cProp),editMode:!this.cProp.num}},methods:{save:function(){var t=this,e=this.cProp.num?"updateSCVat":"createSCVat";return this.loading=!0,this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCVat",this.cProp).then(function(){t.$emit("remove")})}},watch:{cProp:{handler:function(t){this.cpModel=gn()({},t),this.loading=!1},deep:!0}}},eo=xt()({},Cn,to),ao={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.num},on:{edit:t.onEdit}},[a("CountrySelect",{attrs:{disabled:!t.editMode,componentClass:"cp-row"},model:{value:t.cpModel.country,callback:function(e){t.$set(t.cpModel,"country",e)},expression:"cpModel.country"}}),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(1===t.cpModel.countryId?t.$t("VAT ID"):t.$t("Sales Tax ID"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.num,expression:"cpModel.num"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("num")}],attrs:{type:"text",name:"num",disabled:!t.editMode},domProps:{value:t.cpModel.num},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"num",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Reporting Regularity"))+":")]),t._v(" "),a("RecurringDateModal",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"form-control":!0,"is-invalid":t.errors.has("repReg"),inactive:!t.editMode}],attrs:{name:"repReg",disabled:!t.editMode},model:{value:t.cpModel.reportingRecurringDate,callback:function(e){t.$set(t.cpModel,"reportingRecurringDate",e)},expression:"cpModel.reportingRecurringDate"}})],1)],1)},staticRenderFns:[]},no=a("VU/8")(eo,ao,!1,null,null,null).exports,oo={$_veeValidate:{name:function(){return this.name},value:function(){return this.innerValue.value}},data:function(){return{innerValue:{value:null===this.value.key.id?"input":this.value.key.id,customValue:this.value.customKey},showInput:null===this.value.key.id}},props:{options:{default:function(){return[]}},name:{default:"customSelect"},value:{default:function(){return{}}},selectPlaceholderText:{default:"Please, choose..."},inputPlaceholderText:{default:"Enter value..."},valueKey:{default:"id"},labelKey:{default:"label"},inputLabel:{default:"Custom option"},hasError:{default:!1},errorClass:{default:"is-invalid"},disabled:{default:!1}},methods:{emitValue:function(){var t=this,e=this.options?this.options.filter(function(e){return e[t.valueKey]===Number(t.innerValue.value)}):[];e=0!==e.length?e[0][this.labelKey]:null,this.$emit("input",{key:{id:""===this.innerValue.value?null:this.innerValue.value,label:e},customKey:this.innerValue.customValue})},onSelect:function(t){var e=this;"input"===t.target.value&&(this.showInput=!0,this.$nextTick(function(){return e.$refs.input.focus()})),this.emitValue()},onInput:function(t){this.innerValue.customValue=t.target.value,this.emitValue()},onTriggerClick:function(){var t=this;this.innerValue.value="",this.showInput=!1,this.$nextTick(function(){return t.$refs.select.focus()})},onBlur:function(t){t&&this.$emit("blur")},onSelectBlur:function(){this.showInput||this.$emit("blur")}},watch:{value:{handler:function(t){this.innerValue={value:null===t.key.id?"input":t.key.id,customValue:this.value.customKey},this.showInput=null===t.key.id},deep:!0}}},so={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-relative"},[a("select",{directives:[{name:"show",rawName:"v-show",value:!t.showInput,expression:"!showInput"},{name:"model",rawName:"v-model",value:t.innerValue.value,expression:"innerValue.value"}],ref:"select",class:[t.hasError?t.errorClass:"","form-control"],attrs:{disabled:t.disabled},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.innerValue,"value",e.target.multiple?a:a[0])},function(e){t.onSelect(e)}],blur:function(e){t.onBlur(!t.showInput)},focus:function(e){t.$emit("focus")}}},[a("option",{attrs:{value:"",disabled:""}},[t._v(t._s(t.selectPlaceholderText))]),t._v(" "),t._l(t.options,function(e){return a("option",{key:e[t.valueKey],domProps:{value:e[t.valueKey]}},[t._v("\n            "+t._s(e[t.labelKey])+"\n    ")])}),t._v(" "),a("option",{attrs:{value:"input"}},[t._v(t._s(t.inputLabel))])],2),t._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:t.showInput,expression:"showInput"}],ref:"input",class:[t.hasError?t.errorClass:"","form-control"],attrs:{disabled:t.disabled,type:"text",placeholder:t.inputPlaceholderText},domProps:{value:t.innerValue.customValue},on:{input:function(e){t.onInput(e)},blur:function(e){t.onBlur(t.showInput)},focus:function(e){t.$emit("focus")}}}),t._v(" "),t.showInput&&!t.disabled?a("button",{staticClass:"btn btn-default close-custom-input-btn",attrs:{type:"button"},on:{click:function(e){t.onTriggerClick()}}},[t._v("×")]):t._e()])},staticRenderFns:[]};var ro=a("VU/8")(oo,so,!1,function(t){a("GNxC")},null,null).exports,io={components:{VueCustomSelect:ro},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadResponsibilityKeys").finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{key:{id:""}}}}},data:function(){return{cpModel:gn()({},this.cProp),editMode:!this.cProp.name}},computed:{responsibilityKeys:function(){return this.$store.getters.responsibilityKeys}},methods:{save:function(){var t=this,e=this.cProp.id?"updateSCPersonnel":"createSCPersonnel";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCPersonnel",this.cProp).then(function(){t.$emit("remove")})},onInput:function(t){this.cpModel.key=t.key,t.key.id="input"===t.key.id?null:t.key.id,this.cpModel.customKey=t.customKey}},watch:{cProp:{handler:function(){this.cpModel=gn()({},this.cProp)},deep:!0}}},co=xt()({},Cn,io),lo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.name},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Responsibility"))+":")]),t._v(" "),a("VueCustomSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("responsibility")}],attrs:{options:t.responsibilityKeys,value:t.cpModel,name:"customSelect",disabled:!t.editMode,loading:t.loading,hasError:t.fields.customSelect&&!t.fields.customSelect.valid&&t.fields.customSelect.touched},on:{input:t.onInput}})],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Name"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",name:"name",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",name:"email",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("phone")}],attrs:{type:"text",name:"phone",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})])])},staticRenderFns:[]},uo=a("VU/8")(co,lo,!1,null,null,null).exports;var mo={getFirstLetter:function(t){return t.slice(0,1)},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},po={components:{VueCustomSelect:ro},created:function(){var t=this;this.cProp.category||(this.cpModel.category={id:Pe[this.cat]}),this.loading=!0;var e="load"+mo.capitalizeFirstLetter(this.storeKeysName);this.$store.dispatch(e).finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{key:{}}}},cat:{required:!0},loadingProp:{default:!1}},data:function(){return{cpModel:gn()({},this.cProp),storeKeysName:this.cat+"Keys",editMode:!this.cProp.value,loading:!1}},computed:{keys:function(){return this.$store.getters[this.storeKeysName]}},methods:{save:function(){var t=this,e=this.cProp.value?"updateSCCPPair":"createSCCPPair";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success"),t.loading=!0})},remove:function(){var t=this;return this.$store.dispatch("deleteSCCPPair",this.cProp).then(function(){t.$emit("remove")})},onInput:function(t){this.cpModel.key=t.key,t.key.id="input"===t.key.id?null:t.key.id,this.cpModel.customKey=t.customKey}},watch:{cProp:{handler:function(){this.cpModel=gn()({},this.cProp),this.loading=!1},deep:!0},loadingProp:function(t){this.loading=t}}},vo=xt()({},Cn,po),fo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.value},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row cp-pair"},[a("VueCustomSelect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("key")}],attrs:{options:t.keys,value:t.cpModel,name:"customSelect",disabled:!t.editMode,loading:t.loading,hasError:t.fields.customSelect&&!t.fields.customSelect.valid&&t.fields.customSelect.touched},on:{input:t.onInput}}),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.value,expression:"cpModel.value"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("value")}],attrs:{name:"value",disabled:!t.editMode,rows:"3"},domProps:{value:t.cpModel.value},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"value",e.target.value)}}})],1)])},staticRenderFns:[]},ho=a("VU/8")(vo,fo,!1,null,null,null).exports,_o={data:function(){return{toggle:!1,avatarFile:null,imageData:""}},methods:{previewImage:function(t){var e=this,a=t.target;if(a.files&&a.files[0]){var n=new FileReader;n.onload=function(t){e.imageData=t.target.result},n.readAsDataURL(a.files[0])}},confirm:function(){if(this.toggle=!1,""!==this.imageData){var t=new FormData;t.append("file",this.avatarFile),this.$emit("file",t),this.$emit("image",{image:this.imageData,formData:t})}},open:function(){this.toggle=!0},close:function(){this.toggle=!1,this.$emit("close")}}},go={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{on:{ok:t.confirm},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("New picture"))+":")]),t._v(" "),a("b-form-file",{staticClass:"mt-3",attrs:{accept:"image/*",plain:""},on:{change:t.previewImage},model:{value:t.avatarFile,callback:function(e){t.avatarFile=e},expression:"avatarFile"}})],1),t._v(" "),t.imageData.length>0?a("div",{staticClass:"image-preview"},[a("img",{staticClass:"preview",attrs:{src:t.imageData,width:"200"}})]):t._e()])},staticRenderFns:[]},yo=a("VU/8")(_o,go,!1,null,null,null).exports,bo={name:"avatar",props:{username:{type:String},initials:{type:String},backgroundColor:{type:String},color:{type:String},customStyle:{type:Object},inline:{type:Boolean},size:{type:Number,default:50},src:{type:String},rounded:{type:Boolean,default:!0},lighten:{type:Number,default:80}},data:function(){return{backgroundColors:["#F44336","#FF4081","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"]}},mounted:function(){this.isImage||this.$emit("avatar-initials",this.username,this.userInitial)},computed:{background:function(){if(!this.isImage)return this.backgroundColor||this.randomBackgroundColor(this.username.length,this.backgroundColors)},fontColor:function(){if(!this.isImage)return this.color||this.lightenColor(this.background,this.lighten)},isImage:function(){return Boolean(this.src)},style:function(){var t={display:this.inline?"inline-flex":"flex",width:this.size+"px",height:this.size+"px",borderRadius:this.rounded?"50%":0,lineHeight:this.size+Math.floor(this.size/20)+"px",fontWeight:"bold",alignItems:"center",justifyContent:"center"},e={background:"transparent url('"+this.src+"') no-repeat scroll center center / cover content-box border-box"},a={backgroundColor:this.background,font:Math.floor(this.size/2.5)+"px/100px Helvetica, Arial, sans-serif",color:this.fontColor},n=this.isImage?e:a;return gn()(t,n),t},userInitial:function(){return this.isImage?"":this.initials||this.initial(this.username)}},methods:{initial:function(t){for(var e=t.split(/[ -]/),a="",n=0;n<e.length;n++)a+=e[n].charAt(0);return a.length>3&&-1!==a.search(/[A-Z]/)&&(a=a.replace(/[a-z]+/g,"")),a=a.substr(0,3).toUpperCase()},randomBackgroundColor:function(t,e){return e[t%e.length]},lightenColor:function(t,e){var a=!1;"#"===t[0]&&(t=t.slice(1),a=!0);var n=parseInt(t,16),o=(n>>16)+e;o>255?o=255:o<0&&(o=0);var s=(n>>8&255)+e;s>255?s=255:s<0&&(s=0);var r=(255&n)+e;return r>255?r=255:r<0&&(r=0),(a?"#":"")+(r|s<<8|o<<16).toString(16)}}},Co={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vue-avatar--wrapper",style:[this.style,this.customStyle]},[e("span",{directives:[{name:"show",rawName:"v-show",value:!this.isImage,expression:"!this.isImage"}]},[this._v(this._s(this.userInitial))])])},staticRenderFns:[]},Do=a("VU/8")(bo,Co,!1,null,null,null).exports,$o={components:{MyCompanyForm:Vn,Alias:zn,CorpTax:Wn,Audit:Zn,Vat:no,Personnel:uo,CpPair:ho,AvatarChangeModal:yo,Avatar:Do},data:function(){return{showAliasForm:!1,showCorpTax:!1,showAudit:!1,showVatForm:!1,showPersonnelForm:!1,showTaxForm:!1,showSoftwareForm:!1,showMiscForm:!1,loading:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}},hasAnyCorpTaxData:function(){return!!this.company.corpTax&&Tn.hasAnyData(this.company.corpTax)},hasAnyAuditData:function(){return!!this.company.audit&&Tn.hasAnyData(this.company.audit)}},methods:{reloadSelCompany:function(){var t=this;this.loading=!0,this.$store.dispatch("reloadSelCompany",this.company.id).then(function(){t.loading=!1})},deleteCompany:function(){var t=this;this.loading=!0,this.$store.dispatch("deleteSelCompany",this.company.id).then(function(){t.loading=!1,t.$router.push("Home")})},openChangeLogoModal:function(){this.$refs.logoModal.open()},uploadNewLogo:function(t){var e=this;this.loading=!0,this.$store.dispatch("uploadSCLogo",t).then(function(){e.$customMsg.showSuccessMessage(e.$t("Successfully changed company logo"))}).catch(function(t){e.$customMsg.showErrorMessage(e.$t(t.messageDetail))}).finally(function(){e.$store.dispatch("reloadSelCompany",e.company.id).then(function(){e.loading=!1})})},deleteLogo:function(){var t=this;this.loading=!0,this.$store.dispatch("deleteCSLogo").then(function(){t.$customMsg.showSuccessMessage(t.$t("Successfully deleted company logo"))}).catch(function(e){t.$customMsg.showErrorMessage(t.$t(e.messageDetail))}).finally(function(){t.$store.dispatch("reloadSelCompany",t.company.id).then(function(){t.loading=!1})})}}},xo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"company-profile"},[a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"custom-avatar-container"},[a("div",{staticClass:"d-inline-block custom-avatar",on:{click:t.openChangeLogoModal}},[a("Avatar",{attrs:{username:t.company.name?t.company.name:"",initials:t.company.logo&&t.company.logo.initials?t.company.logo.initials:null,src:t.company.logo&&t.company.logo.URL?t.company.logo.URL:"",size:145,rounded:!1}}),t._v(" "),t._m(0)],1),t._v(" "),a("h2",[t._v(t._s(t.company.name))]),t._v(" "),a("AvatarChangeModal",{ref:"logoModal",on:{file:t.uploadNewLogo}})],1),t._v(" "),a("my-company-form",{attrs:{company:t.company}}),t._v(" "),t.company.userRole&&1===t.company.userRole.id?a("div",[a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Admin")))]),t._v(" "),a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.delete-modal",modifiers:{"delete-modal":!0}}],attrs:{size:"sm",variant:"danger"}},[t._v(t._s(t.$t("Delete Company")))])],1),t._v(" "),a("b-modal",{attrs:{id:"delete-modal",size:"sm",title:t.$t("Delete Company")},on:{ok:t.deleteCompany}},[t._v("\n        "+t._s(t.$t("Are you really sure you want to delete this company ?"))+"\n      ")])],1):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Aliases")))]),t._v(" "),t.showAliasForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAliasForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.aliases,function(t){return a("alias",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showAliasForm?a("alias",{attrs:{"c-prop":{companyId:t.company.id,refCompanyId:t.company.id}},on:{cancel:function(e){t.showAliasForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Corporate Tax")))]),t._v(" "),t.hasAnyCorpTaxData||t.showCorpTax?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showCorpTax=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t.hasAnyCorpTaxData||!t.hasAnyCorpTaxData&&t.showCorpTax?a("corp-tax",{attrs:{"c-prop":t.company.corpTax},on:{cancel:function(e){t.showCorpTax=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Audit")))]),t._v(" "),t.hasAnyAuditData||t.showAudit?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAudit=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t.hasAnyAuditData||!t.hasAnyAuditData&&t.showAudit?a("audit",{attrs:{"c-prop":t.company.audit},on:{cancel:function(e){t.showAudit=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("VAT / Sales Tax ID")))]),t._v(" "),t.showVatForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showVatForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.vats,function(e){return a("vat",{key:e.id,attrs:{"c-prop":e},on:{success:t.reloadSelCompany}})}),t._v(" "),t.showVatForm?a("vat",{on:{success:t.reloadSelCompany,cancel:function(e){t.showVatForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Personnel")))]),t._v(" "),t.showPersonnelForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showPersonnelForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.personnel,function(e){return a("personnel",{key:e.id,attrs:{"c-prop":e},on:{success:t.reloadSelCompany}})}),t._v(" "),t.showPersonnelForm?a("personnel",{on:{cancel:function(e){t.showPersonnelForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Taxes")))]),t._v(" "),t.showTaxForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showTaxForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.taxes,function(e){return a("cp-pair",{key:e.id,attrs:{"c-prop":e,cat:"tax",loadingProp:t.loading},on:{success:t.reloadSelCompany}})}),t._v(" "),t.showTaxForm?a("cp-pair",{attrs:{cat:"tax","c-prop":{key:{id:""},category:{id:1}}},on:{cancel:function(e){t.showTaxForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Software")))]),t._v(" "),t.showSoftwareForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showSoftwareForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.software,function(e){return a("cp-pair",{key:e.id,attrs:{"c-prop":e,cat:"software",loadingProp:t.loading},on:{success:t.reloadSelCompany}})}),t._v(" "),t.showSoftwareForm?a("cp-pair",{attrs:{cat:"software","c-prop":{key:{id:""},category:{id:2}}},on:{cancel:function(e){t.showSoftwareForm=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("h2",[t._v(t._s(t.$t("Misc")))]),t._v(" "),t.showMiscForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showMiscForm=!0}}},[t._v("+ "+t._s(t.$t("Add")))])]),t._v(" "),t._l(t.company.misc,function(e){return a("cp-pair",{key:e.id,attrs:{"c-prop":e,cat:"misc",loadingProp:t.loading},on:{success:t.reloadSelCompany}})}),t._v(" "),t.showMiscForm?a("cp-pair",{attrs:{cat:"misc","c-prop":{key:{id:""},category:{id:0}}},on:{cancel:function(e){t.showMiscForm=!1}}}):t._e()],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"custom-avatar-overlay"},[e("i",{staticClass:"fa fa-edit fa-lg"})])}]},wo=a("VU/8")($o,xo,!1,null,null,null).exports,Ro={components:{Datepicker:ht.a,CompanySelect:dn},data:function(){return{locales:{en:_t.b,bg:_t.a},initialDataFilled:!1,formData:{},statementTypes:Ie}},computed:{CompanyList:function(){return this.$store.getters.getRecordCompanyList},CompanyListLength:function(){return this.CompanyList.length}},methods:{loadCompanyList:function(){this.$store.dispatch("loadRecordCompanyList",this.formData)},reValidateOnChange:function(){var t=this;this.initialDataFilled=this.formData.statementType&&this.formData.toDate&&(1===this.formData.statementType.id||this.formData.fromDate),this.initialDataFilled&&(this.checkToDate(),setTimeout(function(){t.$validator.validateAll().then(function(e){e&&t.loadCompanyList()})},100))},checkToDate:function(){if(this.formData.statementType&&1===this.formData.statementType.id)return!0;this.$validator.errors.remove("toDate"),Date.parse(this.formData.fromDate)>Date.parse(this.formData.toDate)&&this.$validator.errors.add({field:"toDate",msg:this.$t("To(date) must be greater than From(date)")}),this.$validator.validate("toDate")||this.$validator.errors.add({field:"toDate",msg:this.$t("Please, select a date")})},validateBeforeSubmit:function(){var t=this;this.checkToDate(),this.initialDataFilled=!0,this.$refs.recordsCompanySelect.validate(),this.$validator.validateAll().then(function(e){t.$refs.recordsCompanySelect.validate().then(function(a){e&&a&&(t.loading=!0,t.$emit("success",t.formData))})})}}},So=xt()({},Ro),Fo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-row record-form"},[a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("Statement type")+":","label-for":"statementType"}},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("statementType")},attrs:{id:"statementType",name:"statementType"},on:{input:t.reValidateOnChange},model:{value:t.formData.statementType,callback:function(e){t.$set(t.formData,"statementType",e)},expression:"formData.statementType"}},t._l(t.statementTypes,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.label))])})),t._v(" "),t.errors.has("statementType")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a statement type"))+".")]):t._e()],1),t._v(" "),!t.formData.statementType||t.formData.statementType.id>1?a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("From")+":","label-for":"fromDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("fromDate")},attrs:{"bootstrap-styling":!0,id:"fromDate",name:"fromDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{input:t.reValidateOnChange},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t._v(" "),t.errors.has("fromDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")]):t._e()],1):t._e(),t._v(" "),a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("To")+":","label-for":"toDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"is-invalid":t.errors.has("toDate")},attrs:{"bootstrap-styling":!0,id:"toDate",name:"toDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},on:{input:t.reValidateOnChange},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t._v(" "),t.errors.has("toDate")?a("div",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("toDate"))+".")]):t._e()],1),t._v(" "),a("CompanySelect",{ref:"recordsCompanySelect",staticClass:"mr-4 record-select",attrs:{companies:t.CompanyList,componentClass:"form-group",componentLabel:t.$t("Company:")},model:{value:t.formData.selectedContact,callback:function(e){t.$set(t.formData,"selectedContact",e)},expression:"formData.selectedContact"}}),t._v(" "),a("b-form-group",{attrs:{label:"&nbsp;","label-for":"submitButton"}},[a("b-button",{attrs:{id:"submitButton",variant:"primary"},on:{click:t.validateBeforeSubmit}},[t._v("\n      "+t._s(t.$t("Submit"))+"\n    ")])],1)],1)},staticRenderFns:[]},Io=a("VU/8")(So,Fo,!1,null,null,null).exports,Po={},Mo=function(t){return Po.name="RecordsTable",Po.mixins=[ge()(t)],Po.directives={Sort:fe.SortDirective(t)},Po.props={inputData:{}},Po.components={InputFilter:fe.InputFilter(t),SelectFilter:fe.SelectFilter(t),DateFilter:fe.DateFilter(t)},Po.data=function(){return{loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},Po.computed={currentRecords:function(){return this.$store.getters.getCurrentRecords},selectedCompany:function(){return this.$store.getters.selectedCompany}},Po.methods={loadCurrentRecords:function(){this.$store.dispatch("loadCurrentRecords",this.inputData)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")}},Po.mounted=function(){this.loadCurrentRecords()},Po.watch={currentRecords:function(e){t.commit("setItems",e)},inputData:{handler:function(){this.loadCurrentRecords()},deep:!0}},Po};Mo.options=Po;var ko=Mo(fe.tableStore),No={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-condensed table-bordered"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"accType",compare:"strings"},expression:"{sortKey: 'accType', compare: 'strings'}"}]},[t._v(t._s(t.$t("Acc. Type")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"ref",compare:"strings"},expression:"{sortKey: 'ref', compare: 'strings'}"}]},[t._v(t._s(t.$t("Ref #")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"viewDocDate",compare:"dates"},expression:"{sortKey: 'viewDocDate', compare: 'dates'}"}]},[t._v(t._s(t.$t("Doc. Date")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Posting Date")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docCurrency",compare:"strings"},expression:"{sortKey: 'docCurrency', compare: 'strings'}"}]},[t._v(t._s(t.$t("Doc. Currency")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docAmountStr",compare:"numbers"},expression:"{sortKey: 'docAmountStr', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Amount in doc. currency")))]),t._v(" "),a("th",[t._v(t._s(t.$t("FX Rate")))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"amountInRepCurrencyStr",compare:"numbers"},expression:"{sortKey: 'amountInRepCurrencyStr', compare: 'numbers'}"}]},[t._v(t._s(t.$t("Amount in"))+" "+t._s(t.selectedCompany.currency.code))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"description",compare:"strings"},expression:"{sortKey: 'description', compare: 'strings'}"}]},[t._v(t._s(t.$t("Description")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Creator")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("input-filter",{attrs:{filterKey:"accType",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[a("input-filter",{attrs:{filterKey:"ref",compare:t.compare.numAsString}})],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th",[a("select-filter",{attrs:{filterKey:"docCurrency",compare:t.compare.string,items:t.currentRecords}})],1),t._v(" "),a("th",[a("input-filter",{attrs:{filterKey:"docAmountStr",compare:t.compare.number}})],1),t._v(" "),a("th"),t._v(" "),a("th",[a("input-filter",{attrs:{filterKey:"amountInRepCurrencyStr",compare:t.compare.number}})],1),t._v(" "),a("th",[a("input-filter",{attrs:{filterKey:"description",compare:t.compare.numAsString}})],1),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.accType))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.viewDocDate)))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.viewPostingDate)))]),t._v(" "),a("td",[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",[t._v(t._s(e.docAmountStr))]),t._v(" "),a("td",[t._v(t._s(e.fxRate||"-"))]),t._v(" "),a("td",[t._v(t._s(e.amountInRepCurrencyStr||t.$t("require FX rate")))]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),a("td",[t._v(t._s(e.isOwn?t.$t("Own"):t.$t("Opposite")))])])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ao={components:{RecordsForm:Io,RecordsTable:a("VU/8")(ko,No,!1,null,null,null).exports},data:function(){return{formData:{},showTable:!1,loading:!1}},methods:{formSubmitted:function(t){this.showTable=!0,this.formData=xt()({},t)}}},To={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v(t._s(t.$t("Records")))]),t._v(" "),a("RecordsForm",{on:{success:t.formSubmitted}}),t._v(" "),t.showTable?a("RecordsTable",{attrs:{inputData:t.formData}}):t._e(),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Eo=a("VU/8")(Ao,To,!1,null,null,null).exports,Uo=fe.tableStore,Oo={name:"OpenReconciliationsTable",mixins:[ye,ge()(Uo)],directives:{Sort:fe.SortDirective(Uo)},components:{CompanyCard:wa.a,InputFilter:fe.InputFilter(Uo),SelectFilter:fe.SelectFilter(Uo),DateFilter:fe.DateFilter(Uo),BulkSelector:fe.BulkSelector(Uo),CheckboxSelect:fe.CheckboxSelect(Uo),MarkedFilter:fe.MarkedFilter(Uo)},props:{recType:{}},created:function(){this.runAfterSCisSet(this.loadOpenReconciliations)},computed:{allItems:function(){return Uo.getters.getItems},selectedReconciliations:function(){return Uo.getters.selectedItems}},data:function(){return{reconciliations:null,editActiveForId:null,loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},methods:{startUpload:function(t){var e={statementID:t.statement.id,startDate:t.startDate,endDate:t.endDate},a=this.$route.path;this.$router.push({name:"Upload",params:{uploadData:e,historyComponent:a}})},loadOpenReconciliations:function(){var t=this;this.loading=!0,this.$store.dispatch("load"+this.recType+"Reconciliations").then(function(){t.reconciliations=t.$store.getters[t.recType+"Reconciliations"],t.loading=!1})},deleteReconciliation:function(t){var e=this;this.loading=!0,this.$store.dispatch("deleteReconciliation",t).then(function(){e.$customMsg.showSuccessMessage(e.$t("Successfully deleted reconciliation."))}).catch(function(t){e.$customMsg.showErrorMessage(e.$t("Error")+" : "+t.messageDetail)}).finally(function(){e.loadOpenReconciliations()})},deleteSelectedReconciliations:function(){var t=this;this.loading=!0,this.$store.dispatch("deleteMultipleReconciliation",this.selectedReconciliations).then(function(){t.$customMsg.showSuccessMessage(t.$t("Successfully deleted reconciliation."))}).catch(function(e){t.$customMsg.showErrorMessage(t.$t("Error")+" : "+e.messageDetail)}).finally(function(){t.loadOpenReconciliations()})},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||Uo.commit("removeAllFilters")}},watch:{reconciliations:function(t){Uo.commit("setItems",t)}}},Vo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelectedReconciliations(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table text-center table-striped"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v(t._s(t.$t("Company")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Dates")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Matched")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Unmatched")))]),t._v(" "),a("th")]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),t._v(" "),a("td",[a("router-link",{attrs:{to:"reconciliation/"+e.id}},[e.refCompany?a("CompanyCard",{attrs:{company:e.refCompany,size:"s"}}):t._e()],1)],1),t._v(" "),a("td",[t._v(t._s(e.statement?e.statement.code:""))]),t._v(" "),a("td",[e.statement&&1!==e.statement.id?a("span",[t._v(t._s(t._f("bsDate")(e.startDate))+" - ")]):t._e(),t._v(t._s(t._f("bsDate")(e.endDate)))]),t._v(" "),a("td",[t._v(t._s(e.matchedAmount))]),t._v(" "),a("td",[t._v(t._s(e.unMatchedAmount))]),t._v(" "),a("td",[a("b-dropdown",{attrs:{text:"...","no-caret":""}},[a("b-dropdown-item",{on:{click:function(a){t.startUpload(e)}}},[t._v(t._s(t.$t("Upload")))]),t._v(" "),a("b-dropdown-item",{on:{click:function(a){t.deleteReconciliation(e)}}},[t._v(t._s(t.$t("Delete")))])],1)],1)])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Lo=a("VU/8")(Oo,Vo,!1,null,null,null).exports,qo=a("sUu7");qo.a.extend("checkSelect",{validate:function(t){return!!t.length}});var Ko={selectedCompanies:[],selectedStatements:[],fromDate:"",toDate:""},zo={name:"CreateReconciliationForm",components:{Datepicker:ht.a,CompanySelect:dn},mixins:[ye],props:{startRCForId:{}},created:function(){this.runAfterSCisSet(this.loadContacts),this.resetForm()},data:function(){return{locales:{en:_t.b,bg:_t.a},loading:!0,statementTypes:Ie,formData:{},lastSelectItem:{},show:!0,formSubmittedOnce:!1}},computed:{hideFromDate:function(){return 1===this.formData.selectedStatements.length&&1===this.formData.selectedStatements[0].id},contacts:function(){return this.$store.getters.contacts},haveContacts:function(){return!!this.contacts.length}},methods:{selectCompany:function(){var t=this;this.startRCForId&&this.contacts.forEach(function(e){e.id===t.startRCForId&&t.formData.selectedCompanies.push(e)})},resetForm:function(){this.formData=xt()({},Ko)},onSubmit:function(t){var e=this;this.formSubmittedOnce=!0,t.preventDefault(),this.$refs.reconciliationCompanySelect.validate().then(function(t){e.$validator.validateAll().then(function(a){a&&t&&e.$emit("formSubmitted",e.formData)})})},reValidateOnChange:function(){var t=this;this.formSubmittedOnce&&setTimeout(function(){t.$refs.reconciliationCompanySelect.validate(),t.$validator.validateAll()},50)},onReset:function(t){var e=this;t.preventDefault(),this.resetForm(),this.show=!1,this.$nextTick(function(){e.show=!0})},loadContacts:function(){this.loadStore("loadSCContacts")},loadStore:function(t){var e=this;this.loading=!0,this.$store.dispatch(t).finally(function(){e.loading=!1,e.selectCompany()})}}},Bo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[t.haveContacts?a("div",[a("CompanySelect",{ref:"reconciliationCompanySelect",attrs:{companies:t.contacts,componentLabel:"Companies:",componentClass:"b-form-group form-group",multiple:""},on:{change:t.reValidateOnChange},model:{value:t.formData.selectedCompanies,callback:function(e){t.$set(t.formData,"selectedCompanies",e)},expression:"formData.selectedCompanies"}}),t._v(" "),a("b-form-group",{attrs:{label:t.$t("Statement types"),"label-for":"statements"}},[a("b-form-checkbox-group",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"statements",id:"statements"},model:{value:t.formData.selectedStatements,callback:function(e){t.$set(t.formData,"selectedStatements",e)},expression:"formData.selectedStatements"}},t._l(t.statementTypes,function(e){return a("b-form-checkbox",{key:e.id,attrs:{value:e},on:{change:t.reValidateOnChange}},[t._v("\n          "+t._s(e.code)+"\n        ")])})),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("statements"),expression:"errors.has('statements')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select at least one statement"))+".")])],1),t._v(" "),t.hideFromDate?t._e():a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("From")+":","label-for":"fromDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"bootstrap-styling":!0,id:"fromDate",name:"fromDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},on:{selected:t.reValidateOnChange},model:{value:t.formData.fromDate,callback:function(e){t.$set(t.formData,"fromDate",e)},expression:"formData.fromDate"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("fromDate"),expression:"errors.has('fromDate')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1),t._v(" "),a("b-form-group",{staticClass:"mr-2",attrs:{label:t.$t("To")+":","label-for":"toDate"}},[a("datepicker",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"bootstrap-styling":!0,id:"toDate",name:"toDate",language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar"},on:{selected:t.reValidateOnChange},model:{value:t.formData.toDate,callback:function(e){t.$set(t.formData,"toDate",e)},expression:"formData.toDate"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("toDate"),expression:"errors.has('toDate')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("Please, select a date"))+".")])],1),t._v(" "),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v(t._s(t.$t("Next")))]),t._v(" "),a("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v(t._s(t.$t("Reset")))])],1):a("div",[t._v("\n    "+t._s(t.$t("You need to have contact companies in order to reconcile with them. You can invite companies in "))+"\n    "),a("router-link",{attrs:{to:"contacts"}},[t._v(t._s(t.$t("Contacts page.")))])],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1):t._e()},staticRenderFns:[]},jo=a("VU/8")(zo,Bo,!1,null,null,null).exports,Yo=fe.tableStore,Ho={name:"CreateReconciliationTable",components:{CompanyCard:wa.a,Datepicker:ht.a,InputFilter:fe.InputFilter(Yo),SelectFilter:fe.SelectFilter(Yo),DateFilter:fe.DateFilter(Yo),BulkSelector:fe.BulkSelector(Yo),CheckboxSelect:fe.CheckboxSelect(Yo),MarkedFilter:fe.MarkedFilter(Yo)},mixins:[ye,ge()(Yo)],created:function(){this.runAfterSCisSet(this.loadCollaborators),this.setTableItems(),Yo.commit("setItems",this.tableItems)},props:{formData:{}},data:function(){return{locales:{en:_t.b,bg:_t.a},loading:!1,itemsPerPage:5,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day},tableItems:[],exportData:{disclosed:{},assignee:{},ddl:{}}}},computed:{collaborators:function(){return this.$store.getters.collaborators},selectAssigneeOptions:function(){return this.collaborators.map(function(t){return{text:t.name,value:t}})}},methods:{setTableItems:function(){var t=this,e=[],a=0;this.formData.selectedCompanies.forEach(function(n){t.formData.selectedStatements.forEach(function(o){e.push({id:a,company:n,statement:o,fromDate:t.formData.fromDate,toDate:t.formData.toDate}),a++})}),this.tableItems=e},loadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").then(function(){t.loading=!1})},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||Yo.commit("removeAllFilters")},deleteItem:function(t){this.tableItems=this.tableItems.filter(function(e){return e.id!==t}),Yo.commit("setItems",this.tableItems)},goStepBack:function(){this.$emit("back")},CreateReconciliations:function(){var t=this,e=[];this.tableItems.forEach(function(a){e.push({id:a.id,company:a.company,statement:a.statement,fromDate:a.fromDate,toDate:a.toDate,disclosed:t.exportData.disclosed[a.id]||!1,assignee:t.exportData.assignee[a.id]||null,ddl:t.exportData.ddl[a.id]||null})}),this.$store.dispatch("createReconciliation",e).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Successfully created ")+e.length+" "+t.$t(1===e.length?"reconciliation":"reconciliations"))}).catch(function(e){t.$customMsg.showErrorMessage(t.$t("Error")+" : "+e.messageDetail)}).finally(function(){t.$emit("close")})}}},Xo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar mt-3 mb-3",attrs:{role:"toolbar"}},[a("BulkSelector",{attrs:{items:t.pageItems}},[a("b-dropdown-item",[a("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deleteSelected(e)}}},[t._v(t._s(t.$t("Delete")))])])],1),t._v(" "),a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Statement Type")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Dates")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Assignee")))]),t._v(" "),a("th",[t._v(t._s(t.$t("Disclose")))]),t._v(" "),a("th",[t._v(t._s(t.$t("DDL")))])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e}})],1),t._v(" "),a("th",[a("company-card",{attrs:{company:e.company,size:"m"}})],1),t._v(" "),a("td",[t._v(t._s(e.statement.code))]),t._v(" "),a("td",[1===e.statement.id?a("span",[t._v(t._s(t._f("bsDate")(e.toDate)))]):a("span",[t._v(t._s(t._f("bsDate")(e.fromDate))+" - "+t._s(t._f("bsDate")(e.toDate)))])]),t._v(" "),a("td",[a("b-form-select",{staticClass:"mb-3",attrs:{options:t.selectAssigneeOptions,size:"sm"},model:{value:t.exportData.assignee[e.id],callback:function(a){t.$set(t.exportData.assignee,e.id,a)},expression:"exportData.assignee[item.id]"}})],1),t._v(" "),a("td",[a("b-form-checkbox",{model:{value:t.exportData.disclosed[e.id],callback:function(a){t.$set(t.exportData.disclosed,e.id,a)},expression:"exportData.disclosed[item.id]"}})],1),t._v(" "),a("td",[a("datepicker",{attrs:{"bootstrap-styling":!0,language:t.locales[t.$i18n.locale],"calendar-button":!0,"calendar-button-icon":"fa fa-calendar",required:!0},model:{value:t.exportData.ddl[e.id],callback:function(a){t.$set(t.exportData.ddl,e.id,a)},expression:"exportData.ddl[item.id]"}})],1),t._v(" "),a("td",[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){t.deleteItem(e.id)}}},[t._v("X")])],1)])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("b-button",{attrs:{variant:"secondary"},on:{click:t.goStepBack}},[t._v(t._s(t.$t("Back")))]),t._v(" "),a("b-button",{attrs:{variant:"primary"},on:{click:t.CreateReconciliations}},[t._v(t._s(t.$t("Create")))]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Go={name:"CreateReconciliationModal",components:{CreateReconciliationForm:jo,CreateReconciliationTable:a("VU/8")(Ho,Xo,!1,null,null,null).exports},props:{startRCForId:{}},mixins:[Xe],data:function(){return{formActive:!0,formData:{}}},methods:{load:function(){return Ba.a.resolve()},close:function(){this.formActive=!0,this.$refs.CrRecForm.resetForm(),this.$emit("input",null)},closeModal:function(){this.formActive=!1,this.$emit("input",null),this.$refs.modal.close()},backToForm:function(){this.formActive=!0},formSubmitted:function(t){this.formData=t,this.formActive=!1}}},Wo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("full-page-modal",{ref:"modal",on:{close:t.close}},[a("CreateReconciliationForm",{directives:[{name:"show",rawName:"v-show",value:t.formActive,expression:"formActive"}],ref:"CrRecForm",attrs:{startRCForId:t.startRCForId},on:{formSubmitted:t.formSubmitted}}),t._v(" "),t.formActive?t._e():a("CreateReconciliationTable",{attrs:{formData:t.formData},on:{back:t.backToForm,close:t.closeModal}})],1)},staticRenderFns:[]},Qo={name:"ReconciliationsPage",components:{ReconciliationsTable:Lo,CreateReconciliationModal:a("VU/8")(Go,Wo,!1,null,null,null).exports},data:function(){return{loading:!1,activeTabId:0,createModalOpened:!1,startRCForId:null}},created:function(){var t=this;this.$route.params.startReconciliationFor&&(this.startRCForId=this.$route.params.startReconciliationFor,setTimeout(function(){t.createModalOpened=!0},500))},methods:{onTabChange:function(t){this.activeTabId=t}}},Jo={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reconciliations-page"},[a("div",{staticClass:"reconciliations-page-heading"},[a("h2",{staticClass:"reconciliations-page-title"},[t._v(t._s(t.$t("Reconciliations")))]),t._v(" "),a("b-button",{staticClass:"btn btn-success btn-sm mb-3",attrs:{variant:"primary",size:"sm"},on:{click:function(e){t.createModalOpened=!0}}},[t._v("\n      "+t._s(t.$t("Create Reconciliation"))+"\n    ")])],1),t._v(" "),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:t.$t("Open"),active:""}},[0!==t.activeTabId||t.createModalOpened?t._e():a("ReconciliationsTable",{attrs:{recType:"Open"}})],1),t._v(" "),a("b-tab",{attrs:{title:t.$t("Finished")}},[1!==t.activeTabId||t.createModalOpened?t._e():a("ReconciliationsTable",{attrs:{recType:"Finished"}})],1),t._v(" "),a("b-tab",{attrs:{title:t.$t("Rejected")}},[2!==t.activeTabId||t.createModalOpened?t._e():a("ReconciliationsTable",{attrs:{recType:"Rejected"}})],1)],1),t._v(" "),a("CreateReconciliationModal",{attrs:{startRCForId:t.startRCForId},model:{value:t.createModalOpened,callback:function(e){t.createModalOpened=e},expression:"createModalOpened"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Zo=a("VU/8")(Qo,Jo,!1,null,null,null).exports,ts={props:{inputValue:{required:!0,type:[String,Number]},placeholder:{},onSubmit:{required:!0,type:Function},formatter:{type:Function,default:function(t){return t}},editMode:{default:!1},id:{}},data:function(){return{edit:this.editMode}},computed:{showValue:function(){return this.formatter(this.inputValue)},modelValue:function(){return this.inputValue}},methods:{submit:function(t){var e=this,a=t.target.elements.eInput.value;if(this.inputValue!==a){var n=e.onSubmit(t,a,e.id);Ba.a.resolve(n).then(function(){return e.edit=!1,!0}).catch(function(t){return e.edit=!0,t})}else e.edit=!1},cancel:function(){this.edit=!1}}},es={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.edit?t._e():a("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit=!0}}},[t._v(t._s(t.showValue))]),t._v(" "),t.edit?a("form",{on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.modelValue,expression:"modelValue"}],staticClass:"form-control",attrs:{type:"type",name:"eInput",placeholder:t.placeholder},domProps:{value:t.modelValue},on:{input:function(e){e.target.composing||(t.modelValue=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit"}},[t._v("Ok")]),t._v(" "),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancel}},[t._v("Cancel")])]):t._e()])},staticRenderFns:[]},as=a("VU/8")(ts,es,!1,null,null,null).exports,ns={},os=function(t){return ns.name="ExceptionsTable",ns.mixins=[ge()(t)],ns.directives={Sort:fe.SortDirective(t)},ns.components={InputFilter:fe.InputFilter(t),SelectFilter:fe.SelectFilter(t),DateFilter:fe.DateFilter(t),BulkSelector:fe.BulkSelector(t),CheckboxSelect:fe.CheckboxSelect(t),MarkedFilter:fe.MarkedFilter(t),EditInput:as},ns.data=function(){return{itemsPerPage:10,showFilters:!1,loading:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},ns.created=function(){var t=this;t.loading=!0,t.$store.dispatch("loadCurrencies").finally(function(){t.loading=!1})},ns.computed={allItems:function(){return this.$store.getters.exceptions},selectedCompany:function(){return this.$store.getters.selectedCompany},isBalanceSheet:function(){return 1===this.$store.getters.selectedReconciliation.statement.id}},ns.methods={deleteSelected:function(){var e=this;if(!0===confirm("Are you shure?")){var a=t.getters.selectedItems;e.loading=!0,e.$store.dispatch("deleteExceptions",a).then(function(){e.showSuccess()}).catch(function(){e.showError()}).finally(function(){e.loading=!1})}},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},setFxRate:function(e,a,n){var o=this;o.loading=!0;var s={rate:a,record:n};o.$store.dispatch("setRecordFxRate",s).then(function(){return o.showSuccess(),o.$store.dispatch("reloadExceptions")}).then(function(e){t.commit("setItems",e)}).catch(function(t){return o.showError(),t}).finally(function(){o.loading=!1})}},ns};os.options=ns;var ss=os,rs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive exceptions-cmp"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-condensed table-bordered"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"accType",compare:"strings"},expression:"{sortKey: 'accType', compare: 'strings'}"}]},[t._v("Acc. Type")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"ref",compare:"strings"},expression:"{sortKey: 'ref', compare: 'strings'}"}]},[t._v("Ref #")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docDate",compare:"dates"},expression:"{sortKey: 'docDate', compare: 'dates'}"}]},[t._v("Doc. Date")]),t._v(" "),t.isBalanceSheet?t._e():a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"postingDate",compare:"dates"},expression:"{sortKey: 'postingDate', compare: 'dates'}"}]},[t._v("Posting Date")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docCurrency",compare:"strings"},expression:"{sortKey: 'docCurrency', compare: 'strings'}"}]},[t._v("Doc. Currency")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"docAmount",compare:"numbers"},expression:"{sortKey: 'docAmount', compare: 'numbers'}"}]},[t._v("Amount in doc. currency")]),t._v(" "),a("th",[t._v("FX Rate")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"amountInRepCurrency",compare:"numbers"},expression:"{sortKey: 'amountInRepCurrency', compare: 'numbers'}"}]},[t._v("Amount in "+t._s(t.selectedCompany.currency.code))]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"description",compare:"strings"},expression:"{sortKey: 'description', compare: 'strings'}"}]},[t._v("Description")]),t._v(" "),a("th",[t._v("Creator")])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("MarkedFilter")],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"accType",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"ref",compare:t.compare.numAsString}})],1),t._v(" "),a("th"),t._v(" "),t.isBalanceSheet?t._e():a("th"),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"docAmount",compare:t.compare.number}})],1),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"amountInRepCurrency",compare:t.compare.number}})],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"description",compare:t.compare.numAsString}})],1),t._v(" "),a("th")]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"text-center"},[a("CheckboxSelect",{attrs:{item:e,disable:e.needFxRate&&!e.amountInRepCurrencyStr}})],1),t._v(" "),a("td",[t._v(t._s(e.accType))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(t._f("bsDate")(e.viewDocDate)))]),t._v(" "),t.isBalanceSheet?t._e():a("td",[t._v(t._s(t._f("bsDate")(e.viewPostingDate)))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.docAmountStr))]),t._v(" "),a("td",{staticClass:"fx-cell",class:{"text-danger":e.needFxRate&&!e.fxRate.value}},[e.needFxRate?a("edit-input",{attrs:{"input-value":e.fxRate.value||"0.00",formatter:t.formatFx,placeholder:0,"on-submit":t.setFxRate,id:e}}):t._e(),t._v(" "),e.needFxRate?t._e():a("span",{staticClass:"text-center"},[t._v("-")])],1),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.amountInRepCurrencyStr||"require FX rate"))]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),a("td",[t._v(t._s(e.isOwn?"Own":"Opposite"))])])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},is=a("VU/8")(ss,rs,!1,null,null,null).exports,cs={},ls=function(t){return cs.name="ExceptionsCalcTable",cs.mixins=[ge()(t)],cs.props={exceptions:{required:!0,default:[]},ownCompany:{required:!0},oppCompanyName:{required:!0}},cs.computed={stats:function(){var t={own:{count:0,amount:0},opp:{count:0,amount:0}};return this.exceptions.reduce(function(e,a){var n=t[a.isOwn?"own":"opp"];return n.count++,n.amount+=+a.amountInRepCurrency,n.amountStr=n.amount.toLocaleString("en-US",{minimumFractionDigits:2}),t},t)},balance:function(){return this.stats.own.amount-this.stats.opp.amount},disableMatch:function(){return this.balance||!this.exceptions||!this.exceptions.length}},cs.methods={match:function(){this.disableMatch||this.$emit("match")}},cs};ls.options=cs;var us=ls,ds={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"table table-striped table-condensed table-bordered"},[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("Selected Records")]),t._v(" "),a("th",[t._v("Amount ("+t._s(t.ownCompany.currency.code)+")")])])]),t._v(" "),a("tbody",[a("tr",[a("th",[t._v(t._s(t.ownCompany.name))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(t.stats.own.count))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t.stats.own.amountStr))])]),t._v(" "),a("tr",[a("th",[t._v(t._s(t.oppCompanyName))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(t.stats.opp.count))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t.stats.opp.amountStr))])])]),t._v(" "),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"2"}},[a("button",{staticClass:"btn btn-success",attrs:{disabled:t.disableMatch},on:{click:t.match}},[t._v("Match")])]),t._v(" "),a("td",{staticClass:"text-right"},[a("strong",[t._v(t._s(t._f("numToDec2")(t.balance)))])])])])])},staticRenderFns:[]},ms=a("VU/8")(us,ds,!1,null,null,null).exports,ps=fe.tableStore,vs={name:"ExceptionsModal",components:{FullPageModal:je,ExceptionsTable:is(ps),ExceptionsCalcTable:ms(ps)},props:{IN:{type:Boolean,required:!0},OUT:{type:Boolean,required:!0},open:{type:Boolean,required:!0}},data:function(){return{hasExceptions:!1,loading:!1}},computed:{selectedCompany:function(){return this.$store.getters.selectedCompany},exceptionsRecords:function(){return this.$store.getters.exceptionsRecords},periodStr:function(){var t=this.$store.getters.selectedReconciliation,e=t.startDate?new Date(t.startDate):null,a=t.endDate?new Date(t.endDate):null;return f.beautifyDates(e,a)},selectedReconciliation:function(){return this.$store.getters.selectedReconciliation},selectedExceptions:function(){return ps.getters.selectedItems},title:function(){var t=[];return this.IN&&t.push("Receivables"),this.OUT&&t.push("Payables"),t.join(", ")}},methods:{close:function(){this.$emit("close")},onMatch:function(){var t=this;t.loading=!0;var e={selectedExceptions:t.selectedExceptions,selectedReconciliation:t.selectedReconciliation};t.$store.dispatch("manualMatch",e).then(function(){t.loadExceptions()}).finally(function(){t.loading=!1})},autoMatch:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,selectedReconciliation:this.selectedReconciliation};t.$store.dispatch("matchAuto",e).then(function(){t.loadExceptions()}).finally(function(){t.loading=!1})},exportFile:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,areMatched:!1};t.$store.dispatch("exportRecords",e).finally(function(){t.loading=!1})},loadExceptions:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:t.OUT,selectedReconciliation:this.selectedReconciliation};t.$store.dispatch("loadExceptionsRecords",e).then(function(e){ps.commit("setItems",e),t.hasExceptions=!!e.length}).finally(function(){t.loading=!1})}},watch:{open:function(t){t?(this.$refs.modal.open(),this.loadExceptions()):(this.$refs.modal.close(),this.hasExceptions=!1)}}},fs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FullPageModal",{ref:"modal",on:{close:t.close}},[t.hasExceptions?a("div",[a("h1",[t._v("Exceptions - "+t._s(t.title))]),t._v(" "),a("div",{staticClass:"modal-top-info-wrapper"},[a("p",{staticClass:"info-text"},[t._v("\n\t\t\t\t"+t._s(t.selectedCompany.name)+" - "+t._s(t.selectedReconciliation.refCompany.name)),a("br"),t._v("\n\t\t\t\t"+t._s(t.selectedReconciliation.statement.label)+", "+t._s(t.periodStr)+"\n\t\t\t")]),t._v(" "),t.hasExceptions?a("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar"}},[a("b-button",{staticClass:"mr-2",attrs:{variant:"success",size:"sm"},on:{click:t.exportFile}},[t._v("Export")]),t._v(" "),a("b-button",{staticClass:"mr-2",attrs:{variant:"warning",size:"sm"},on:{click:t.autoMatch}},[t._v("Auto Match")]),t._v(" "),a("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:t.loadExceptions}},[t._v("Refresh")])],1):t._e()])]):t._e(),t._v(" "),t.hasExceptions?a("ExceptionsCalcTable",{attrs:{exceptions:t.selectedExceptions,"own-company":t.selectedCompany,"opp-company-name":t.selectedReconciliation.refCompany.name},on:{match:t.onMatch}}):t._e(),t._v(" "),t.hasExceptions?a("ExceptionsTable"):t._e(),t._v(" "),t.hasExceptions||t.loading?t._e():a("div",[a("p",[t._v("There are no any records for these parameters.")])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},hs=a("VU/8")(vs,fs,!1,null,null,null).exports,_s={},gs=function(t){return _s.name="MatchedTable",_s.mixins=[ge()(t)],_s.data=function(){return{itemsPerPage:10,showFilters:!1,loading:!1}},_s.computed={allItems:function(){return this.$store.getters.matchedSets},selectedCompany:function(){return this.$store.getters.selectedCompany}},_s.methods={toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},unmatch:function(t){this.$emit("unmatch",t.id)}},_s.watch={records:function(e){t.commit("setItems",e)}},_s};gs.options=_s;var ys=gs,bs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive matched-cmp"},[a("div",{staticClass:"btn-toolbar table-btn-bar",attrs:{role:"toolbar"}},[a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-condensed table-bordered"},[a("thead",[a("tr",[a("th",[t._v("Acc. Type")]),t._v(" "),a("th",[t._v("Ref #")]),t._v(" "),a("th",[t._v("Doc. Date")]),t._v(" "),a("th",[t._v("Posting Date")]),t._v(" "),a("th",[t._v("Doc. Currency")]),t._v(" "),a("th",[t._v("Amount in doc. currency")]),t._v(" "),a("th",[t._v("FX Rate")]),t._v(" "),a("th",[t._v("Amount in "+t._s(t.selectedCompany.currency.code))]),t._v(" "),a("th",[t._v("Description")]),t._v(" "),a("th",[t._v("Creator")])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("InputFilter",{attrs:{filterKey:"accType",compare:t.compare.numAsString}})],1),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"ref",compare:t.compare.numAsString}})],1),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"docAmount",compare:t.compare.number}})],1),t._v(" "),a("th"),t._v(" "),a("th",[a("InputFilter",{attrs:{filterKey:"description",compare:t.compare.numAsString}})],1),t._v(" "),a("th"),t._v(" "),a("th")]):t._e()]),t._v(" "),t._l(t.pageItems,function(e){return a("tbody",{key:e.id},[a("tr",[a("th",[t._v("#"+t._s(e.id))]),t._v(" "),a("th",{attrs:{colspan:"2"}},[t._v(t._s(e.matchingType.label))]),t._v(" "),a("th",{attrs:{colspan:"7"}},[a("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(a){t.unmatch(e)}}},[t._v("Unmatch")])])]),t._v(" "),t._l(e.transactions,function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.accType))]),t._v(" "),a("td",[t._v(t._s(e.ref))]),t._v(" "),a("td",[t._v(t._s(e.viewDocDate))]),t._v(" "),a("td",[t._v(t._s(e.viewPostingDate))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.docCurrency))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.docAmountStr))]),t._v(" "),a("td",{staticClass:"text-right fx-cell"},[e.needFxRate?a("span",[t._v(t._s(e.fxRate.value||"0.00"))]):t._e(),t._v(" "),e.needFxRate?t._e():a("span",[t._v("-")])]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.amountInRepCurrencyStr))]),t._v(" "),a("td",[t._v(t._s(e.description))]),t._v(" "),a("td",[t._v(t._s(e.isOwn?"Own":"Opposite"))])])})],2)})],2),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Cs=a("VU/8")(ys,bs,!1,null,null,null).exports,Ds=fe.tableStore,$s={name:"matchedModal",components:{FullPageModal:je,MatchedTable:Cs(Ds)},props:{IN:{type:Boolean,required:!0},open:{type:Boolean,required:!0}},data:function(){return{hasSets:!1,loading:!1}},computed:{selectedCompany:function(){return this.$store.getters.selectedCompany},selectedReconciliation:function(){return this.$store.getters.selectedReconciliation},periodStr:function(){var t=this.$store.getters.selectedReconciliation,e=t.startDate?new Date(t.startDate):null,a=t.endDate?new Date(t.endDate):null;return f.beautifyDates(e,a)}},methods:{close:function(){this.$emit("close")},exportFile:function(){var t=this;t.loading=!0;var e={areIN:t.IN,areOUT:!t.IN,areMatched:!0};t.$store.dispatch("exportRecords",e).then(function(){t.showSuccess()}).catch(function(){t.showError()}).finally(function(){t.loading=!1})},onUnmatch:function(t){var e=this;this.loading=!0,this.$store.dispatch("unmatchSet",t).then(function(){e.loadSets()}).finally(function(){e.loading=!1})},loadSets:function(){var t=this;t.loading=!0;var e={areIN:t.IN,selectedReconciliation:this.selectedReconciliation};t.$store.dispatch("loadMatchedSets",e).then(function(e){t.hasSets=!!e.length,t.hasSets&&Ds.commit("setItems",e)}).finally(function(){t.loading=!1})}},watch:{open:function(t){t?(this.$refs.modal.open(),this.loadSets()):(this.$refs.modal.close(),this.hasSets=!1)}}},xs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("FullPageModal",{ref:"modal",on:{close:t.close}},[t.hasSets?a("div",[a("h1",[t._v("Matched - "+t._s(this.IN?"Receivables":"Payables"))]),t._v(" "),a("div",{staticClass:"modal-top-info-wrapper"},[a("p",{staticClass:"info-text"},[t._v("\n\t\t\t\t"+t._s(t.selectedCompany.name)+" - "+t._s(t.selectedReconciliation.refCompany.name)),a("br"),t._v("\n\t\t\t\t"+t._s(t.selectedReconciliation.statement.label)+", "+t._s(t.periodStr)+"\n\t\t\t")]),t._v(" "),t.hasSets?a("div",{staticClass:"btn-toolbar",attrs:{role:"toolbar"}},[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"success"},on:{click:t.exportFile}},[t._v("Export")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.loadSets}},[t._v("Refresh")])],1):t._e()])]):t._e(),t._v(" "),t.hasSets?a("MatchedTable",{on:{unmatch:t.onUnmatch}}):t._e(),t._v(" "),t.hasSets||t.loading?t._e():a("div",[a("p",[t._v("There are no any records for these parameters.")])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},ws={name:"ReconciliationSummaryTable",components:{ExceptionsModal:hs,MatchedModal:a("VU/8")($s,xs,!1,null,null,null).exports},data:function(){return{openExceptionsModal:!1,openMatchedModal:!1,isIN:!1,isOUT:!1,loading:!1}},props:["recId"],computed:{selectedReconciliation:function(){return this.$store.getters.selectedReconciliation},company:function(){return this.$store.getters.selectedCompany||{}},summary:function(){return this.$store.getters.selectedReconciliationSummary},statementContext:function(){return{IN:this.selectedReconciliation.context?this.selectedReconciliation.context.IN:"",OUT:this.selectedReconciliation.context?this.selectedReconciliation.context.OUT:""}}},methods:{autoMatch:function(t,e){var a=this,n=this;n.loading=!0;var o={areIN:t,areOUT:e,selectedReconciliation:this.selectedReconciliation};n.$store.dispatch("matchAuto",o).then(function(){a.loadReconciliation()}).finally(function(){n.loading=!1})},showExceptions:function(t,e){this.isIN=!!t,this.isOUT=!!e,this.openExceptionsModal=!0},showMatched:function(t){this.isIN=!!t,this.openMatchedModal=!0},onClose:function(){this.loading||(this.loadReconciliation(),this.openExceptionsModal=!1,this.openMatchedModal=!1)},loadReconciliation:function(){var t=this;return this.loading=!0,Ba.a.all([this.$store.dispatch("loadSelReconciliation",this.recId),this.$store.dispatch("loadSelReconciliationSummary",this.recId)]).finally(function(){t.loading=!1})}}},Rs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pt-3"},[t.summary.in?a("table",{staticClass:"table table-bordered text-center records-summary-table"},[a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v(t._s(t.statementContext.IN))]),t._v(" "),a("th",{staticClass:"text-center",attrs:{colspan:"2"}},[t._v(t._s(t.statementContext.OUT))]),t._v(" "),a("th",[t._v("All")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("Exceptions:")]),a("br"),t._v("\n        Total Amount in "+t._s(t.company.currency.code)+": "+t._s(t.summary.in.exceptions.me.amount)+" / "+t._s(t.summary.in.exceptions.they.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.in.exceptions.me.count)+" / "+t._s(t.summary.in.exceptions.they.count)+"\n        "),t.summary.in.exceptions.me.count||t.summary.in.exceptions.they.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){t.autoMatch(1,0)}}},[t._v("Auto Match")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){t.showExceptions(1,0)}}},[t._v("Show Records")])]):t._e()]),t._v(" "),a("td",[a("strong",[t._v("Matched:")]),a("br"),t._v("\n        Total Amount in "+t._s(t.company.currency.code)+": "+t._s(t.summary.in.matched.me.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.in.matched.me.count)+"\n        "),t.summary.in.matched.me.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){t.showMatched(!0)}}},[t._v("Show Records")])]):t._e()]),t._v(" "),a("td",[a("strong",[t._v("Exceptions:")]),a("br"),t._v("\n        Total Amount in "+t._s(t.company.currency.code)+": "+t._s(t.summary.out.exceptions.me.amount)+" / "+t._s(t.summary.out.exceptions.they.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.out.exceptions.me.count)+" / "+t._s(t.summary.out.exceptions.they.count)+"\n        "),t.summary.out.exceptions.me.count||t.summary.out.exceptions.they.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){t.autoMatch(0,1)}}},[t._v("Auto Match")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){t.showExceptions(0,1)}}},[t._v("Show Records")])]):t._e()]),t._v(" "),a("td",[a("strong",[t._v("Matched:")]),a("br"),t._v("\n        Total Amount in "+t._s(t.company.currency.code)+": "+t._s(t.summary.out.matched.me.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.out.matched.me.count)+"\n        "),t.summary.out.matched.me.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){t.showMatched(!1)}}},[t._v("Show Records")])]):t._e()]),t._v(" "),a("td",[a("strong",[t._v("Exceptions:")]),a("br"),t._v("\n        Total Amount in "+t._s(t.company.currency.code)+": "+t._s(t.summary.in.exceptions.me.amount+t.summary.out.exceptions.me.amount)+"/"+t._s(t.summary.in.exceptions.they.amount+t.summary.out.exceptions.they.amount)),a("br"),t._v("\n        Total Count: "+t._s(t.summary.in.exceptions.me.count+t.summary.out.exceptions.me.count)+"/"+t._s(t.summary.in.exceptions.they.count+t.summary.out.exceptions.they.count)+"\n        "),t.summary.in.exceptions.me.count||t.summary.out.exceptions.me.count||t.summary.in.exceptions.they.count||t.summary.out.exceptions.they.count?a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-warning",attrs:{type:"button"},on:{click:function(e){t.autoMatch(1,1)}}},[t._v("Auto Match")]),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){t.showExceptions(1,1)}}},[t._v("Show Records")])]):t._e()])])])]):t._e(),t._v(" "),a("ExceptionsModal",{attrs:{open:t.openExceptionsModal,IN:!!t.isIN,OUT:!!t.isOUT},on:{close:t.onClose}}),t._v(" "),a("MatchedModal",{attrs:{open:t.openMatchedModal,IN:!!t.isIN},on:{close:t.onClose}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Ss=a("VU/8")(ws,Rs,!1,null,null,null).exports,Fs={name:"ReconciliationMessageRow",components:{Avatar:Do},data:function(){return{editActive:!1,internalMessage:this.message.body}},props:{message:{}},computed:{user:function(){return this.$store.getters.user},selfLiveMessage:function(){if(!this.message.from||!this.message.date)return!1;var t=Date.parse(this.message.date),e=Date.now();return this.message.from.email===this.user.email&&t>e-9e5}},methods:{deleteMessage:function(){var t=this;this.$store.dispatch("deleteMessage",this.message).then(function(){t.$emit("reload")})},switchEditMessage:function(){this.editActive=!this.editActive},saveMessage:function(){var t=this;this.editActive=!1;var e=gn()({},this.message);e.body=this.internalMessage,this.$store.dispatch("editMessage",e).then(function(){t.$emit("reload")})}}},Is={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message"},[a("Avatar",{attrs:{size:70,username:t.message.from?t.message.from.fullName:"",src:t.message.from&&t.message.from.profileImageUrl?t.message.from.profileImageUrl:""}}),t._v(" "),a("div",{staticClass:"message-content"},[a("div",{staticClass:"message-heading"},[a("div",{staticClass:"full-name"},[t._v("\n        "+t._s(t.message.from?t.message.from.fullName:"")+t._s(t.selfLiveMessage?"(me)":"")+"\n      ")]),t._v(" "),a("div",{staticClass:"message-date"},[t._v("\n        "+t._s(t._f("bsDateTime")(t.message.date))+"\n      ")]),t._v(" "),a("div",{staticClass:"message-buttons"},[!t.editActive&&t.selfLiveMessage?a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:t.switchEditMessage}},[t._v("edit")]):t._e(),t._v(" "),!t.editActive&&t.selfLiveMessage?a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.deleteMessage}},[t._v("x")]):t._e(),t._v(" "),t.editActive?a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:t.saveMessage}},[t._v("\n          save\n        ")]):t._e(),t._v(" "),t.editActive?a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.switchEditMessage}},[t._v("\n          cancel\n        ")]):t._e()],1)]),t._v(" "),a("div",{staticClass:"message-text"},[t.editActive?t._e():a("div",[t._v("\n        "+t._s(t.message.body)+"\n      ")]),t._v(" "),t.editActive?a("div",{staticClass:"message-edit"},[a("b-form-textarea",{attrs:{placeholder:"Enter message","no-resize":!0,rows:3,"max-rows":6},model:{value:t.internalMessage,callback:function(e){t.internalMessage=e},expression:"internalMessage"}})],1):t._e()])])],1)},staticRenderFns:[]},Ps=a("VU/8")(Fs,Is,!1,null,null,null).exports,Ms={name:"ReconciliationMessageRow",components:{Avatar:Do},data:function(){return{messageText:""}},props:{recId:{}},computed:{user:function(){return this.$store.getters.user}},methods:{submit:function(){var t=this,e={recId:this.recId,message:this.messageText};this.$store.dispatch("sendReconciliationMessage",e).then(function(){t.messageText="",t.$emit("reload")})}}},ks={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"message-form"},[a("div",{staticClass:"message-form-content "},[a("b-form-textarea",{staticClass:"message-form-text mt-3 mb-3",attrs:{placeholder:"Enter message","no-resize":!0,rows:3,"max-rows":6},model:{value:t.messageText,callback:function(e){t.messageText=e},expression:"messageText"}})],1),t._v(" "),a("b-button",{attrs:{size:"small",variant:"primary"},on:{click:t.submit}},[t._v("\n    SEND\n  ")])],1)},staticRenderFns:[]},Ns=a("VU/8")(Ms,ks,!1,null,null,null).exports,As=fe.tableStore,Ts={name:"ReconciliationMessages",components:{MessageRow:Ps,MessageForm:Ns},mixins:[ye,ge()(As)],created:function(){this.runAfterSCisSet(this.loadSRMessages)},computed:{thread:function(){return this.$store.getters.SRMessages},messages:function(){return this.thread.messages?this.thread.messages:[]}},props:["recId"],data:function(){return{itemsPerPage:5,loading:!0}},methods:{loadSRMessages:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSRMessages",this.recId).then(function(){t.loading=!1})}},watch:{messages:function(t){As.commit("setItems",t)}}},Es={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("b-input-group",{staticClass:"w-25 mx-1 mt-3 mb-3",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})]),t._v(" "),t._l(t.pageItems,function(e){return a("MessageRow",{key:e.id,attrs:{message:e},on:{reload:t.loadSRMessages}})}),t._v(" "),a("MessageForm",{attrs:{recId:t.recId},on:{reload:t.loadSRMessages}}),t._v(" "),a("br"),t._v(" "),a("div",[a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],2)},staticRenderFns:[]},Us={name:"ReconciliationsPage",components:{ReconciliationSummaryTable:Ss,ReconciliationMessages:a("VU/8")(Ts,Es,!1,null,null,null).exports},mixins:[ye],props:["recId"],data:function(){return{loading:!1,activeTabId:0,options:[{text:"Open",value:1},{text:"Finished",value:2},{text:"Rejected",value:3}]}},computed:{selectedReconciliation:function(){return this.$store.getters.selectedReconciliation}},created:function(){this.runAfterSCisSet(this.loadReconciliation)},methods:{loadReconciliation:function(){var t=this;this.loading=!0,Ba.a.all([this.$store.dispatch("loadSelReconciliation",this.recId),this.$store.dispatch("loadSelReconciliationSummary",this.recId)]).finally(function(){t.loading=!1})},goToUpload:function(){var t={statementID:this.selectedReconciliation.statement.id,startDate:this.selectedReconciliation.startDate,endDate:this.selectedReconciliation.endDate},e=this.$route.path;this.$router.push({name:"Upload",params:{uploadData:t,historyComponent:e}})},goBack:function(){this.$router.go(-1)},changeRecStatus:function(t){this.selectedReconciliation.statusId=t,this.$store.dispatch("editSelReconciliationStatus",this.selectedReconciliation)},onTabChange:function(t){this.activeTabId=t}}},Os={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reconciliation-page"},[a("h2",[t._v("Reconciliation")]),t._v(" "),a("div",{staticClass:"modal-top-info-wrapper"},[t.selectedReconciliation?a("span",[t._v("\n      "+t._s(t.$t("With"))+": "+t._s(t.selectedReconciliation.refCompany?t.selectedReconciliation.refCompany.name:"")),a("br"),t._v("\n      "+t._s(t.$t("Type"))+": "+t._s(t.selectedReconciliation.statement?t.selectedReconciliation.statement.label:"")),a("br"),t._v("\n      "+t._s(t.$t("For period"))+": "+t._s(t._f("bsDate")(t.selectedReconciliation.startDate))+" - "+t._s(t._f("bsDate")(t.selectedReconciliation.endDate))+"\n    ")]):t._e(),t._v(" "),a("div",[a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:t.goToUpload}},[t._v(t._s(t.$t("Upload")))]),t._v(" "),a("b-button",{attrs:{variant:"warning",size:"sm"},on:{click:t.goBack}},[t._v(t._s(t.$t("Back")))])],1)]),t._v(" "),a("b-form-select",{staticClass:"w-25 mt-3 mb-3",attrs:{options:t.options},on:{change:t.changeRecStatus},model:{value:t.selectedReconciliation.statusId,callback:function(e){t.$set(t.selectedReconciliation,"statusId",e)},expression:"selectedReconciliation.statusId"}}),t._v(" "),a("br"),t._v(" "),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:"Summary",active:""}},[t.loading||0!==t.activeTabId?t._e():a("ReconciliationSummaryTable",{attrs:{recId:t.recId}})],1),t._v(" "),a("b-tab",{attrs:{title:"Messages"}},[1===t.activeTabId?a("ReconciliationMessages",{attrs:{recId:t.recId}}):t._e()],1)],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Vs=[{path:"reconciliations",name:"Reconciliations",component:Zo,meta:{pageId:"reconciliations-page",pageClass:""},beforeEnter:X},{path:"reconciliation/:recId",name:"Reconciliation",component:a("VU/8")(Us,Os,!1,null,null,null).exports,props:!0,meta:{pageId:"reconciliation-page",pageClass:""},beforeEnter:X},{path:"upload",name:"Upload",component:xa,meta:{pageId:"upload-page",pageClass:""},beforeEnter:X},{path:"contacts",name:"Contacts",component:hn,meta:{pageId:"contacts-page",pageClass:""},beforeEnter:X},{path:"fx",name:"FX",component:Ve,meta:{pageId:"fx-page",pageClass:""},beforeEnter:X},{path:"profile",name:"CompanyProfile",component:wo,meta:{pageId:"profile-page",pageClass:""},beforeEnter:X},{path:"collaborators",name:"Collaborators",component:An,meta:{pageId:"collaborators-page",pageClass:""},beforeEnter:X},{path:"records",name:"Records",component:Eo,meta:{pageId:"records-page",pageClass:""},beforeEnter:X}];function Ls(t){return{id:t.id,name:t.name,code:t.code,order:t.sortOrder}}function qs(t){return{id:t.id,name:t.name,code:t.isoCode,order:t.sortOrder}}var Ks={};[{name:"countries",converter:"apiToCountry"},{name:"currencies",converter:"apiToCurrency"}].reduce(function(t,e){return t[e.name]=function(){var t=e.endpoint||e.name,a=I.a.get("/"+t);return e.converter?a.then(function(t){return t.map(n[e.converter])}):a},t},Ks),Dt()(Pe).reduce(function(t,e){return t[e+"Keys"]=function(){return t=Pe[e],I.a.get("/CompanyPropertyTypes/"+t+"/keys");var t},t},Ks);var zs=Ks,Bs={},js={},Ys={},Hs={};Dt()(zs).forEach(function(t){var e,a;a=zs[t],Bs[e=t]=null,js[e]=function(t){return t[e]},Ys[e]=function(t,a){t[e]=a},Hs["load"+mo.capitalizeFirstLetter(e)]=function(t){var n=t.commit,o=t.state;return o[e]?Ba.a.resolve(o[e]):a().then(function(t){return n(e,t),t})}});var Xs={state:Bs,getters:js,mutations:Ys,actions:Hs},Gs={created:function(){var t=this;this.loading=!0;var e=Dt()(Xs.state).map(function(e){var a=Xs.state[e];a?t.nomenclatures.push({name:e,items:a}):t.$store.dispatch("load"+mo.capitalizeFirstLetter(e)).then(function(a){t.nomenclatures.push({name:e,items:a})})});Ba.a.all(e).finally(function(){t.loading=!1})},data:function(){return{nomenclatures:[],loading:!1}},methods:{count:function(t){return Tn.isObject(t)?Dt()(t).length:t.length}}},Ws={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[t._l(t.nomenclatures,function(e){return a("div",{key:e.name,staticClass:"m-4"},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.name,expression:"nomenclature.name"}],staticClass:"mb-2"},[t._v(t._s(e.name)+" ("+t._s(t.count(e.items))+")")]),t._v(" "),a("b-collapse",{attrs:{id:e.name}},[a("b-card",[a("pre",[t._v(t._s(e.items))])])],1)],1)}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],2)},staticRenderFns:[]},Qs=[{path:"nomenclatures",name:"Nomenclatures",component:a("VU/8")(Gs,Ws,!1,null,null,null).exports,meta:{pageId:"nomenclatures-page",pageClass:""},beforeEnter:X}],Js={components:{Avatar:Do},props:{toggleFunc:{},current:{}}},Zs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{"notification-panel-body-wrapper":!0,"notification-not-read":!t.current.isRead}},[a("Avatar",{attrs:{username:t.current.userFullName?t.current.userFullName:"",src:t.current.profileImageUrl?t.current.profileImageUrl:"",size:50,customStyle:{border:"1px solid lightgray","flex-shrink":"0"}}}),t._v(" "),a("div",{staticClass:"notifications-text"},[a("h3",[t._v(t._s(t.current.userFullName))]),t._v(" "),a("p",[t._v(t._s(t.current.description))])]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.current.isRead,expression:"current.isRead"}],class:{"notification-checkbox":!0," checked":t.current.isRead},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.current.isRead)?t._i(t.current.isRead,null)>-1:t.current.isRead},on:{click:function(e){t.toggleFunc(t.current)},change:function(e){var a=t.current.isRead,n=e.target,o=!!n.checked;if(Array.isArray(a)){var s=t._i(a,null);n.checked?s<0&&t.$set(t.current,"isRead",a.concat([null])):s>-1&&t.$set(t.current,"isRead",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.current,"isRead",o)}}})])],1)},staticRenderFns:[]},tr={components:{NotificationBlock:a("VU/8")(Js,Zs,!1,null,null,null).exports},props:{notifications:{},panel_style:{},loading:{},handleScroll:{},finalResult:{},goToFunc:{},markAllFunc:{},toggleFunc:{}}},er={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notification-panel",style:[t.panel_style]},[a("loading",{attrs:{loading:t.loading}}),t._v(" "),a("div",{staticClass:"notification-heading"},[a("h6",{staticClass:"notification-heading-title"},[t._v(t._s(t.$t("Notifications")))]),t._v(" "),a("a",{staticClass:"notification-link",on:{click:t.markAllFunc}},[t._v(t._s(t.$t("Mark all as read")))]),t._v(" "),a("a",{staticClass:"notification-link",on:{click:t.goToFunc}},[t._v(t._s(t.$t("See all")))])]),t._v(" "),a("div",{staticClass:"notification-panel-body",on:{scroll:t.handleScroll}},[t._l(t.notifications,function(e){return a("NotificationBlock",{key:e.id,attrs:{current:e,toggleFunc:t.toggleFunc}})}),t._v(" "),t.finalResult?a("div",{staticClass:"text-center"},[a("p",[t._v(" No more results.")])]):t._e()],2)],1)},staticRenderFns:[]},ar=a("VU/8")(tr,er,!1,null,null,null).exports,nr={components:{NotificationPanel:ar},data:function(){return{loading:!1,companyId:null,currentTime:null,currentNotification:1,notificationsPerLoad:10}},computed:{notifications:function(){return this.$store.getters.companyNotifications},nextCompanyNotifications:function(){return this.$store.getters.nextCompanyNotifications},finalResult:function(){return 0===this.nextCompanyNotifications.length},payload:function(){var t=new Date(this.currentTime);return{companyId:this.companyId,currentTime:t.toISOString(),startIndex:this.currentNotification,endIndex:this.currentNotification+this.notificationsPerLoad-1}},panel_style:function(){return{height:this.windowHeight/2+"px"}}},methods:{showModal:function(t){this.currentNotification=1,this.companyId=t,this.currentTime=Date.now(),this.loadCompanyNotification(),this.$refs.NotificationModalRef.show()},reloadCompanies:function(){this.$store.dispatch("loadMyCompanies"),this.$store.dispatch("loadUserNotificationsCount")},loadMore:function(){var t=this;this.currentNotification+=this.notificationsPerLoad,this.$store.dispatch("loadNextCompanyNotifications",this.payload).then(function(){t.loading=!1})},loadCompanyNotification:function(){var t=this;this.loading=!0,this.$store.dispatch("loadCompanyNotifications",this.payload).then(function(){t.$store.dispatch("markCompanyNotificationsOld",t.payload),t.loadMore()})},markCompanyNotificationsRead:function(){var t=this;this.loading=!0,this.$store.dispatch("markCompanyNotificationsRead",this.payload).then(function(){t.loading=!1})},loadNextCompanyNotification:function(){var t=this;this.loading=!0,this.finalResult||this.$store.dispatch("addCompanyNotifications",this.nextCompanyNotifications).then(function(){t.loadMore()})},handleScroll:function(t){t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<100&&!this.loading&&!this.finalResult&&this.loadNextCompanyNotification()},goToCompanyNotifications:function(){this.showPanel=!this.showPanel,this.currentNotification=1,this.$router.push({name:"Notifications",params:{type:this.companyId}})},toggleCompanyNotification:function(t){this.$store.dispatch("switchCompanyNotificationReadStatus",t.id)}}},or={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"NotificationModalRef",staticClass:"company-notifications",attrs:{"hide-footer":"",title:"Company Notifications"},on:{hide:t.reloadCompanies}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(" ID: "+t._s(t.companyId))])]),t._v(" "),a("NotificationPanel",{attrs:{notifications:t.notifications,loading:t.loading,panel_style:t.panel_style,handleScroll:t.handleScroll,finalResult:t.finalResult,goToFunc:t.goToCompanyNotifications,markAllFunc:t.markCompanyNotificationsRead,toggleFunc:t.toggleCompanyNotification}})],1)},staticRenderFns:[]},sr=a("VU/8")(nr,or,!1,null,null,null).exports,rr={components:{CompanyCard:wa.a,NotificationModal:sr},props:["companies"],methods:{showCompanyNotifications:function(t){this.$refs.NotificationModal.showModal(t)},goToUploads:function(t){this.$router.push({path:"/companies/"+t+"/upload"})},goToReconciliations:function(t){this.$router.push({path:"/companies/"+t+"/reconciliations"})}}},ir={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Name")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Aliases")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Reg Number")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Reporting Currency")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Direct Parent")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Top Parent")))]),t._v(" "),t._m(0),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),a("tbody",t._l(t.companies,function(e){return a("tr",[a("th",[a("router-link",{attrs:{to:"/companies/"+e.id}},[a("company-card",{attrs:{company:e,size:"m"}})],1)],1),t._v(" "),a("td",[t._v(t._s(e.aliases.map(function(t){return t.aname}).join(", ")))]),t._v(" "),a("td",[t._v(t._s(e.regNum))]),t._v(" "),a("td",[t._v(t._s(e.currency.code))]),t._v(" "),a("td",[t._v(t._s(e.parent.name))]),t._v(" "),a("td",[t._v(t._s(e.topParent))]),t._v(" "),a("td",[a("a",{on:{click:function(a){t.showCompanyNotifications(e.id)}}},[t._v(t._s(e.notificationsCount))])]),t._v(" "),a("td",[a("b-dropdown",{staticClass:"companies-list-actions",attrs:{text:"...",right:"","no-caret":""}},[a("b-dropdown-item",{on:{click:function(a){t.goToUploads(e.id)}}},[t._v(t._s(t.$t("Upload")))]),t._v(" "),a("b-dropdown-item",{on:{click:function(a){t.goToReconciliations(e.id)}}},[t._v(t._s(t.$t("Start Reconciliation")))])],1)],1)])}))]),t._v(" "),a("NotificationModal",{ref:"NotificationModal"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("th",{attrs:{scope:"col"}},[e("i",{staticClass:"fa fa-bell"})])}]},cr={components:{CompaniesTable:a("VU/8")(rr,ir,!1,null,null,null).exports},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadMyCompanies").finally(function(){t.loading=!1})},data:function(){return{loading:!1}},computed:{myCompanies:function(){return this.$store.getters.myCompanies}}},lr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h1",[t._v(t._s(t.$t("Companies")))]),t._v(" "),t.myCompanies.length?a("div",{staticClass:"companies-list"},[a("router-link",{staticClass:"btn btn-success btn-sm absolute-right",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))]),t._v(" "),a("companies-table",{attrs:{companies:t.myCompanies}})],1):t._e(),t._v(" "),t.myCompanies.length||t.loading?t._e():a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Add your first company :")))]),t._v(" "),a("router-link",{staticClass:"btn btn-success btn-lg",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))])],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)])])},staticRenderFns:[]},ur=a("VU/8")(cr,lr,!1,null,null,null).exports,dr={name:"AddCompany",components:{MyCompanyForm:Vn,AvatarChangeModal:yo},data:function(){return{companyLogo:{image:null,formData:null}}},methods:{onAddedCompany:function(t){this.$router.push({name:"CompanyProfile",params:{id:t.id}})},cancel:function(){this.$router.go(-1)},setLogo:function(t){this.companyLogo=t},deleteLogo:function(){this.companyLogo={image:null,formData:null}}}},mr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 mx-auto pt-5"},[a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("Add Company")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.$refs.logoModal.open()}}},[t._v(t._s(t.$t("Select Logo")))]),t._v(" "),null!==t.companyLogo.image?a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.deleteLogo}},[t._v("X")]):t._e(),t._v(" "),a("AvatarChangeModal",{ref:"logoModal",on:{image:t.setLogo}}),t._v(" "),a("my-company-form",{attrs:{logo:t.companyLogo},on:{success:t.onAddedCompany,cancel:t.cancel}})],1)])])])])},staticRenderFns:[]},pr=a("VU/8")(dr,mr,!1,null,null,null).exports,vr={},fr=function(t){return vr.name="ReceivedInvitationsTable",vr.mixins=[ge()(t)],vr.props=["invitations"],vr.directives={Sort:fe.SortDirective(t)},vr.components={CompanyCard:wa.a,CompanySelect:dn,InputFilter:fe.InputFilter(t),SelectFilter:fe.SelectFilter(t),DateFilter:fe.DateFilter(t)},vr.data=function(){return{companiesModels:[],loading:!1,itemsPerPage:10,showFilters:!1,compare:{string:he.a.string,numAsString:he.a.numAsString,number:he.a.number,day:he.a.day}}},vr.mounted=function(){this.setStore()},vr.computed={myCompanies:function(){return this.$store.getters.myCompanies}},vr.methods={setStore:function(){t.commit("setItems",this.invitations)},toggleFilters:function(){this.showFilters=!this.showFilters,this.showFilters||t.commit("removeAllFilters")},accept:function(t){var e=this.invitations[t],a=this.companiesModels[t];a?this.loadStore("acceptContactInvitation",{company:a,invitation:e}):this.$customMsg.showErrorMessage("Please select company")},reject:function(t){var e=this.invitations[t];this.loadStore("rejectContactInvitation",e)},loadStore:function(t,e){var a=this;this.loading=!0,this.$store.dispatch(t,e).catch(function(t){a.$customMsg.showErrorMessage(t.messageDetail)}).finally(function(){a.loading=!1,a.$emit("reload")})}},vr.watch={invitations:function(){this.setStore()}},vr};fr.options=vr;var hr=fr,_r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("div",{staticClass:"btn-toolbar table-btn-bar  mb-4",attrs:{role:"toolbar"}},[a("div",{staticClass:"btn-group btn-group-sm mx-1",attrs:{role:"group"}},[a("button",{class:t.showFilters?"btn btn-danger":"btn btn-default",on:{click:t.toggleFilters}},[t._v(t._s(t.showFilters?t.$t("[x] Remove Filters"):t.$t("Filter")))])]),t._v(" "),a("b-input-group",{staticClass:"w-25 mx-1",attrs:{size:"sm",prepend:t.$t("Items per page")+":"}},[a("input",{staticClass:"form-control input-sm",attrs:{type:"text",id:"ipp"},domProps:{value:t.itemsPerPage},on:{input:t.setItemsPerPage}})])],1),t._v(" "),a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"sender.company.name",compare:"strings"},expression:"{sortKey: 'sender.company.name', compare: 'strings'}"}]},[t._v("From Company")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"receiver.name",compare:"strings"},expression:"{sortKey: 'receiver.name', compare: 'strings'}"}]},[t._v("To Company")]),t._v(" "),a("th",[t._v("Actions")])]),t._v(" "),t.showFilters?a("tr",[a("th",[a("SelectFilter",{attrs:{filterKey:"sender.company.country.name",items:t.invitations,compare:t.compare.string}})],1),t._v(" "),a("th",[a("SelectFilter",{attrs:{filterKey:"receiver.name",items:t.invitations,compare:t.compare.string}})],1),t._v(" "),a("th",[t._v("Actions")])]):t._e()]),t._v(" "),a("tbody",t._l(t.pageItems,function(e,n){return a("tr",{key:e.id},[a("td",[a("company-card",{attrs:{company:e.sender.company,size:"m"}}),t._v(" "),a("div",[a("strong",[t._v("Country: ")]),t._v(t._s(e.sender.company.country.name))]),t._v(" "),a("div",[a("strong",[t._v("Reg #: ")]),t._v(t._s(e.sender.company.regNum))])],1),t._v(" "),a("td",[a("company-card",{attrs:{company:e.receiver,size:"m"}}),t._v(" "),a("div",[a("strong",[t._v("Country: ")]),t._v(t._s(e.receiver.country.name))]),t._v(" "),a("div",[a("strong",[t._v("Reg #: ")]),t._v(t._s(e.receiver.regNum))])],1),t._v(" "),a("td",[a("form",{on:{submit:function(e){e.preventDefault(),t.accept(n)}}},[a("div",{staticClass:"form-group"},[a("CompanySelect",{attrs:{ID:"myCompany",name:"myCompany",companies:t.myCompanies,componentClass:"form-group",componentLabel:t.$t("Company")+":",allowNone:!1},model:{value:t.companiesModels[n],callback:function(e){t.$set(t.companiesModels,n,e)},expression:"companiesModels[index]"}})],1),t._v(" "),a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){t.accept(n)}}},[t._v("Accept")]),t._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){t.reject(n)}}},[t._v("Reject")])])])])}))]),t._v(" "),a("b-pagination",{attrs:{size:"md","total-rows":t.totalRows,"per-page":t.itemsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},gr={components:{ReceivedInvitationsTable:(0,a("VU/8")(hr,_r,!1,null,null,null).exports)(fe.tableStore)},created:function(){this.loadData()},data:function(){return{loading:!1}},computed:{receivedInvitations:function(){return this.$store.getters.receivedInvitations}},methods:{goToHome:function(){this.$router.push("Home")},loadData:function(){var t=this;this.loading=!0,this.$store.dispatch("loadReceivedInvitations").then(function(){t.$store.dispatch("loadMyCompanies").finally(function(){t.loading=!1})})}}},yr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pl-4 pr-4"},[a("h2",{staticClass:"text-center mt-5"},[t._v("Received Invitations")]),t._v(" "),t.receivedInvitations.length?a("ReceivedInvitationsTable",{attrs:{invitations:t.receivedInvitations},on:{reload:t.loadData}}):t._e(),t._v(" "),t.receivedInvitations.length||t.loading?t._e():a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Currently there are no invitations.")))]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:t.goToHome}},[t._v("\n      "+t._s(t.$t("Go to my companies"))+"\n    ")])],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},br=a("VU/8")(gr,yr,!1,null,null,null).exports,Cr={data:function(){return{formData:{statement:1}}},methods:{submit:function(){alert("Bai Hui")}}},Dr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h1",[t._v("Matching Tool")]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"country"}},[t._v("Statement type:")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.statement,expression:"formData.statement"}],staticClass:"form-control",attrs:{id:"country",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"statement",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1",selected:""}},[t._v("Balance Sheet")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Income Statement")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("Cash Flow Statement")])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"from"}},[t._v("From:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.from,expression:"formData.from"}],staticClass:"form-control",attrs:{type:"text",id:"from",required:""},domProps:{value:t.formData.from},on:{input:function(e){e.target.composing||t.$set(t.formData,"from",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"to"}},[t._v("To:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.to,expression:"formData.to"}],staticClass:"form-control",attrs:{type:"text",id:"to",required:""},domProps:{value:t.formData.to},on:{input:function(e){e.target.composing||t.$set(t.formData,"to",e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"file1"}},[this._v("Own Company File:")]),this._v(" "),e("div",{staticClass:"custom-file"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file1"}}),this._v(" "),e("label",{staticClass:"custom-file-label",attrs:{for:"file1"}},[this._v("Choose file")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"file2"}},[this._v("Opposite Company File:")]),this._v(" "),e("div",{staticClass:"custom-file"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file2"}}),this._v(" "),e("label",{staticClass:"custom-file-label",attrs:{for:"file2"}},[this._v("Choose file")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mt-4"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Submit")])])}]},$r=a("VU/8")(Cr,Dr,!1,null,null,null).exports,xr={components:{CompanyCard:wa.a},props:["id"],created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSelCompany",this.id).finally(function(){t.loading=!1})},data:function(){return{loading:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}}}},wr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-section"},[a("div",{staticClass:"left-side"},[a("div",{staticClass:"left-side-company-info"},[a("CompanyCard",{attrs:{company:t.company,size:"m",extend:"true"}})],1),t._v(" "),a("nav",{staticClass:"nav flex-column nav-pills"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/upload"}},[a("i",{staticClass:"fas fa-cloud-upload-alt"}),t._v(" "),a("span",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Upload")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/contacts"}},[a("i",{staticClass:"far fa-address-book"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Contacts")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/profile"}},[a("i",{staticClass:"fas fa-user"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Profile")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/collaborators"}},[a("i",{staticClass:"fas fa-users"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Collaborators")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/records"}},[a("i",{staticClass:"fas fa-save"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Records")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/fx"}},[a("i",{staticClass:"fas fa-chart-line"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Fx Rates")))])]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/reconciliations"}},[a("i",{staticClass:"fas fa-exchange-alt fa-rotate-90"}),t._v(" "),a("div",{staticClass:"nav-link-text"},[t._v(t._s(t.$t("Reconciliations")))])])],1)]),t._v(" "),a("div",{staticClass:"right-side"},[a("router-view")],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Rr=a("VU/8")(xr,wr,!1,null,null,null).exports,Sr={data:function(){return{loading:!1,internalData:{},editActive:!1,uploadedFile:null}},components:{Avatar:Do,AvatarChangeModal:yo},computed:{user:function(){return this.$store.getters.user}},mounted:function(){this.resetInternalData()},methods:{reloadUser:function(){var t=this;setTimeout(function(){t.$store.dispatch("reloadUser").then(function(){t.resetInternalData(),t.loading=!1})},500)},openChangeAvatarModal:function(){this.$refs.modal.open()},uploadNewAvatar:function(t){var e=this;this.loading=!0,q(t).then(function(){e.$customMsg.showSuccessMessage(e.$t("Successfully changed user avatar"))}).catch(function(t){e.$customMsg.showErrorMessage(t.messageDetail)}).finally(function(){e.reloadUser()})},deleteAvatar:function(t){var e=this;this.loading=!0,K().then(function(){e.$customMsg.showSuccessMessage(e.$t("Successfully deleted user avatar"))}).catch(function(t){e.$customMsg.showErrorMessage(t.messageDetail)}).finally(function(){e.reloadUser()})},resetInternalData:function(){this.internalData=gn()({},this.$store.getters.user)},switchEdit:function(){this.editActive&&this.resetInternalData(),this.editActive=!this.editActive},submit:function(){var t=this,e={firstName:this.internalData.firstName,lastName:this.internalData.lastName,phone:this.internalData.phone};this.loading=!0,N(e).then(function(e){t.$customMsg.showSuccessMessage(t.$t("Updated account info for")+": "+e.email)}).catch(function(e){t.$customMsg.showErrorMessage(e.messageDetail)}).finally(function(){t.reloadUser(),t.editActive=!t.editActive})}}},Fr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"user-profile-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"custom-avatar-wrapper"},[a("div",{staticClass:"d-inline-block custom-avatar",on:{click:t.openChangeAvatarModal}},[a("Avatar",{attrs:{username:t.internalData.fullName?t.internalData.fullName:"",src:t.internalData.profileImageUrl?t.internalData.profileImageUrl:"",size:145,rounded:!1}}),t._v(" "),t._m(0)],1),t._v(" "),a("AvatarChangeModal",{ref:"modal",on:{file:t.uploadNewAvatar}})],1),t._v(" "),a("div",{staticClass:"form-group inline-form-group email"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v("\n    "+t._s(t.internalData.email)+"\n\n  ")]),t._v(" "),a("div",[a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("First Name"))+":")]),t._v(" "),a("b-form-input",{attrs:{disabled:!t.editActive},model:{value:t.internalData.firstName,callback:function(e){t.$set(t.internalData,"firstName",e)},expression:"internalData.firstName"}})],1),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Last Name"))+":")]),t._v(" "),a("b-form-input",{attrs:{disabled:!t.editActive},model:{value:t.internalData.lastName,callback:function(e){t.$set(t.internalData,"lastName",e)},expression:"internalData.lastName"}})],1),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("b-form-input",{attrs:{disabled:!t.editActive},model:{value:t.internalData.phone,callback:function(e){t.$set(t.internalData,"phone",e)},expression:"internalData.phone"}})],1)]),t._v(" "),t.editActive?a("div",{staticClass:"text-center py-3"},[a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:t.submit}},[t._v(t._s(t.$t("Save")))]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.switchEdit}},[t._v(t._s(t.$t("Cancel")))])],1):t._e(),t._v(" "),t.editActive?t._e():a("div",{staticClass:"text-center py-3"},[a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:t.switchEdit}},[t._v(t._s(t.$t("Edit")))])],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"custom-avatar-overlay"},[e("i",{staticClass:"fa fa-edit fa-lg"})])}]},Ir=a("VU/8")(Sr,Fr,!1,null,null,null).exports,Pr={data:function(){return{loading:!1,userLanguage:this.$t("lang"),options:[{value:null,disabled:!0,text:"Please select language"},{value:"EN",text:"English"},{value:"БГ",text:"Български"}]}},methods:{submit:function(){var t=this;this.loading=!0;var e=[{key:"language",value:this.$i18n.locale}];A(e).then(function(e){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1})},languageChange:function(t){switch(t){case"EN":this.$i18n.locale="en";break;case"БГ":this.$i18n.locale="bg";break;default:this.$i18n.locale="en"}}},watch:{"$i18n.locale":function(){this.userLanguage=this.$t("lang")}}},Mr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"user-settings-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Language"))+":")]),t._v(" "),a("div",[a("b-form-select",{staticClass:"mb-3 form-control",attrs:{options:t.options},on:{change:t.languageChange},model:{value:t.userLanguage,callback:function(e){t.userLanguage=e},expression:"userLanguage"}})],1)]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v(t._s(t.$t("Save")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},kr=a("VU/8")(Pr,Mr,!1,null,null,null).exports,Nr={validations:{formData:{oldPassword:{required:G.required},password:{required:G.required,minLength:Object(G.minLength)(8)},repPassword:{required:G.required,minLength:Object(G.minLength)(8),sameAsPass:Object(G.sameAs)("password")}}},data:function(){return{formData:{oldPassword:null,password:null,repPassword:null},errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,L(this.formData.oldPassword,this.formData.password).then(function(e){t.$customMsg.showSuccessMessage("Password succesfuly updated for account: "+e.email),t.formData.oldPassword=null,t.formData.password=null,t.formData.repPassword=null,t.$emit("success")}).catch(function(e){console.log(e),t.errMsg=t.$t(e.messageDetail)}).finally(function(){t.loading=!1}))}}},Ar={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"password-change-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Old Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.oldPassword,expression:"formData.oldPassword"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.oldPassword.required&&t.$v.formData.oldPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.oldPassword},on:{blur:function(e){t.$v.formData.oldPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"oldPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter your old password")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.password.required||!t.$v.formData.password.minLength)&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.repPassword.sameAsPass||!t.$v.formData.repPassword.minLength)&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.sameAsPass?t.$v.formData.repPassword.minLength?"":t.$t("Password must me 8 chars"):t.$t("Please, repeat the password"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("Change Password")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Tr={components:{UserProfileForm:Ir,UserSettings:kr,PasswordChangeForm:a("VU/8")(Nr,Ar,!1,null,null,null).exports},data:function(){return{tabIndex:0}},created:function(){this.switchTab()},methods:{changeRoute:function(t){switch(t){case 0:this.$router.push({hash:"#profile"});break;case 1:this.$router.push({hash:"#settings"});break;case 2:this.$router.push({hash:"#password"})}},switchTab:function(){switch(this.$route.hash){case"#profile":this.tabIndex=0;break;case"#settings":this.tabIndex=1;break;case"#password":this.tabIndex=2;break;default:this.tabIndex=0}},reset:function(){this.tabIndex=0}},watch:{$route:function(){this.switchTab()}}},Er={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-tabs",{staticClass:"user-profile",attrs:{pills:"",card:"",vertical:""},on:{input:t.changeRoute},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[a("b-tab",{attrs:{title:"Profile"}},[0===t.tabIndex?a("UserProfileForm"):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:"Settings"}},[1===t.tabIndex?a("UserSettings",{on:{success:t.reset}}):t._e()],1),t._v(" "),a("b-tab",{attrs:{title:"Change Password"}},[2===t.tabIndex?a("PasswordChangeForm",{on:{success:t.reset}}):t._e()],1)],1)},staticRenderFns:[]},Ur=a("VU/8")(Tr,Er,!1,null,null,null).exports,Or={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},Vr=a("VU/8")({name:"Prototype"},Or,!1,null,null,null).exports,Lr={components:{Avatar:Do},props:{type:{}},data:function(){return{userNotification:!1,companyId:null}},mounted:function(){this.$store.dispatch("loadAllUserNotifications")},computed:{userNotifications:function(){return this.$store.getters.userNotifications},companyNotifications:function(){return this.$store.getters.companyNotifications},notifications:function(){return this.userNotification?this.userNotifications:this.companyNotifications},notificationTypeText:function(){return"user"===this.type?(this.userNotification=!0,"User Notifications"):(this.companyId=this.type,this.userNotification=!1,"Company Notifications (for company id:"+this.type+")")}},methods:{}},qr={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h2",{staticClass:"text-center mt-5"},[t._v(t._s(t.notificationTypeText)+" :")]),t._v(" "),t._l(t.notifications,function(e){return a("div",{class:{"notification-panel-body-wrapper page":!0,"notification-not-read":!e.isRead}},[a("Avatar",{attrs:{username:e.userFullName?e.userFullName:"",src:e.profileImageUrl?e.profileImageUrl:"",size:50,customStyle:{border:"1px solid lightgray","flex-shrink":"0"}}}),t._v(" "),a("div",{staticClass:"notifications-text"},[a("h3",[t._v(t._s(e.userFullName))]),t._v(" "),a("p",[t._v(t._s(e.description))])])],1)})],2)},staticRenderFns:[]},Kr=a("VU/8")(Lr,qr,!1,null,null,null).exports,zr={beforeMount:function(){this.$route.query&&void 0!==this.$route.query.c&&this.makeApiCall(),this.afterConfirmation()},methods:{makeApiCall:function(){var t=this,e=this.$route.query;this.$store.dispatch("confirmAccount",e).then(this.$customMsg.showSuccessMessage("Success")).catch(function(e){return t.$customMsg.showErrorMessage(e.messageDetail)})},afterConfirmation:function(){this.$router.push("/")}}},Br={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-5 mx-auto pt-5"},[this._v("\n      Confirming account ....\n    ")])])])}]},jr=a("VU/8")(zr,Br,!1,null,null,null).exports;o.a.use(Y.a);var Yr=new Y.a({routes:[{path:"/",name:"Home",component:ur,meta:{pageId:"home-page",pageClass:""},beforeEnter:X},{path:"/ConfirmAccount",name:"ConfirmAccount",component:jr,meta:{pageId:"confirm-account-page",pageClass:""}}].concat(j()(ft),[{path:"/user",name:"UserPage",component:Ur,meta:{pageId:"user-page",pageClass:""},beforeEnter:X},{path:"/companies/:id",name:"CompanyPage",component:Rr,props:!0,redirect:"/companies/:id/profile",meta:{pageId:"company-page",pageClass:""},beforeEnter:X,children:Vs},{path:"/add-company",name:"AddCompany",component:pr,meta:{pageId:"add-company-page",pageClass:""},beforeEnter:X},{path:"/received-invitations",name:"ReceivedInvitations",component:br,meta:{pageId:"received-invitations-page",pageClass:""},beforeEnter:X},{path:"/notifications/:type",name:"Notifications",props:!0,component:Kr,meta:{pageId:"notifications-page",pageClass:""},beforeEnter:X},{path:"/matching-tool",name:"MatchingTool",component:$r,meta:{pageId:"matching-tool-page",pageClass:""},beforeEnter:X},{path:"/prototype",name:"Prototype",component:Vr,redirect:"/prototype/company",meta:{pageId:"",pageClass:"prototype-page"},beforeEnter:X,children:Qs},{path:"*",redirect:"/"}]),mode:"history",linkExactActiveClass:"active"}),Hr={state:{user:null,token:null},getters:{user:function(t){return t.user},token:function(t){return t.token}},mutations:{setToken:function(t,e){t.token=e},setUser:function(t,e){t.user=e},clearUser:function(t){t.user=null,t.token=null}},actions:{loadUserCash:function(t){var e=t.commit,a=t.dispatch,n=sessionStorage.getItem("at");n&&e("setToken",n);var o=JSON.parse(sessionStorage.getItem("ud"));o&&(e("setUser",o),a("userNotificationsCountTimer",!0))},register:function(t,e){t.commit;return T(e)},login:function(t,e){var a=t.commit,n=t.dispatch;return E(e).then(function(t){n("resetCompanyStore"),n("userNotificationsCountTimer",!0),sessionStorage.setItem("ud",S()(t)),a("setUser",t)})},logout:function(t){var e=t.dispatch;return U().finally(function(){e("clearout"),e("userNotificationsCountTimer",!1)})},clearout:function(t){var e=t.commit;e("clearUser"),e("clearInvitations"),Yr.push("/login"),sessionStorage.clear()},setToken:function(t,e){(0,t.commit)("setToken",e),sessionStorage.setItem("at",e)},reloadUser:function(t){var e=t.commit;return k().then(function(t){e("setUser",t),sessionStorage.setItem("ud",S()(t))})},confirmAccount:function(t,e){t.commit;var a=e.c||"";return z(a)}}};function Xr(t){return{id:t.id,name:t.name,country:{id:t.country.id,code:t.country.code,name:t.country.name},regNum:t.registrationNumber,logo:ii(t.name,t.logoUrl)}}function Gr(t){return w()({},Xr(t),{aliases:t.companyAliases.map(Jr)})}function Wr(t){return w()({},Xr(t),{currency:{id:t.currency.id,code:t.currency.code,name:t.currency.name},address:t.addressText,parent:{id:t.parent.id,name:t.parent.name},aliases:t.ownCompanyAliases?t.ownCompanyAliases.map(Jr):[],userSettings:t.userSettings,userRole:{id:t.userRole.id,label:t.userRole.label},notificationsCount:t.notificationsCount})}function Qr(t){var e=w()({},Wr(t),{corpTax:{num:t.taxNumber},audit:{name:t.auditorName,email:t.auditorEmail,phone:t.auditorPhone},personnel:t.companyPersonnels.map(ti),vats:t.companyVatNumbers.map(Zr),taxes:[],software:[],misc:[]});return t.companyPropertyValues.reduce(function(t,e){var a=ei(e);switch(a.category.id){case Pe.tax:t.taxes.push(a);break;case Pe.software:t.software.push(a);break;default:t.misc.push(a)}return t},e),t.recurringDates.forEach(function(t){switch(t.typeId){case 2:e.corpTax.fillingDate=t;break;case 3:e.corpTax.dueDate=t;break;case 4:e.corpTax.advancedPayments=t;break;case 5:e.audit.auditDeadlineDate=t}}),console.log("* api-to-company: ",e),e}function Jr(t){return{id:t.id,companyid:t.companyId,refCompanyid:t.refCompanyId,aname:t.aliasText}}function Zr(t){return{id:t.id,num:t.vatNumber,country:{id:t.countryId,name:t.countryName,code:t.countryCode},reportingRecurringDate:t.reportingRecurringDate}}function ti(t){return{id:t.id,key:{id:t.typeKeyId,label:t.typeKeyText},customKey:t.customKeyValue,name:t.name,email:t.email,phone:t.phone}}function ei(t){return{id:t.id,category:{id:t.typeId,name:t.typeName},key:{id:t.keyId,label:t.keyName},customKey:t.customKey,value:t.value}}function ai(t,e,a,n){void 0!==a[n]&&(t[e]=a[n])}function ni(t){return{id:t.id,companyid:t.companyId,refCompanyid:t.refCompanyId,aliasText:t.aname}}function oi(t){var e={id:t.id,typeKeyid:t.key.id,customKeyValue:t.customKey,name:t.name,email:t.email,phone:t.phone};return t.company&&(e.companyId=t.company.id),e}function si(t){var e={vatNumber:t.num,countryId:t.country.id,reportingRecurringDate:{typeId:1,months:t.reportingRecurringDate.months,dayOfMonth:t.reportingRecurringDate.dayOfMonth}};return t.id&&(e.id=t.id,e.reportingRecurringDate.targetId=t.id),t.company&&(e.companyId=t.company.id,e.reportingRecurringDate.companyId=t.company.id),e}function ri(t){var e={typeid:t.category.id,value:t.value,customKey:t.customKey,keyId:t.key.id};return t.company&&(e.companyId=t.company.id),t.id&&(e.id=t.id),console.log(e),e}function ii(t,e){var a=Math.floor(10001*Math.random()),n={};return e?n.URL=e+"?rand="+a:n.initials=t?mo.getFirstLetter(t):"",n}function ci(t){var e=ui(t);return e.sender=function(t){return{company:{id:t.companyId,name:t.companyName,regNum:t.companyRegistrationNumber,country:{id:t.companyCountry.id,code:t.companyCountry.code,name:t.companyCountry.name},logo:ii(t.companyName,t.companyLogoUrl)},user:mi(t)}}(t),e.receiver=di(t),e}function li(t){var e=ui(t);return e.sender={user:mi(t)},e.receiver=di(t),e}function ui(t){return{id:t.id,ddl:new Date(t.expirationDate)}}function di(t){return{email:t.invitedUserEmail,name:t.invitedCompanyName,regNum:t.invitedCompanyRegistrationNumber,country:{id:t.invitedCompanyCountry?t.invitedCompanyCountry.id:"",code:t.invitedCompanyCountry?t.invitedCompanyCountry.code:"",name:t.invitedCompanyCountry?t.invitedCompanyCountry.name:""},logo:ii(t.invitedCompanyName)}}function mi(t){return{name:t.inviterName,email:t.inviterEmail}}function pi(t){return{name:t.name,id:t.id,country:t.country,addressText:t.addressText,currency:t.currency,ownCompanyAliases:t.ownCompanyAliases,regNum:t.registrationNumber,parent:t.parent,children:t.children.map(pi),logo:ii(t.name,t.logoUrl)}}var vi=function(t){return I.a.get("/Contacts/Companies/"+t.id).then(function(t){return t.map(Gr)})},fi=function(t){return I.a.get("/CompaniesTree/"+t.id).then(function(t){return t.map(pi)})},hi=function(t){return I.a.get("/Contacts/Companies/"+t.id+"/PendingSentInvitations").then(function(t){return t.map(li)})},_i=function(t,e){var a,n={invitedCompanyName:(a=e).name,invitedCompanyCountryId:a.country.id,invitedCompanyRegistrationNumber:a.regNum,collaboratorEmail:a.email,message:a.message};return I.a.post("/Contacts/Companies/"+t.id,n).then(li)},gi=function(t,e){return I.a.post("/Contacts/Companies/"+t.id+"/OwnCompanies",e)},yi=function(t){return I.a.delete("/Contacts/Invitations/"+t.id)},bi=function(){return I.a.get("/Contacts/PendingReceivedInvitations").then(function(t){return t.map(ci)})},Ci=function(t,e){return I.a.post("/Contacts/Invitations/"+e.id+"/Companies/"+t.id+"/Acceptance")},Di=function(t){return I.a.post("/Contacts/Invitations/"+t.id+"/Rejection")};function $i(t,e){return function(a){return t(e,a),a}}var xi=a("etT0"),wi=a.n(xi),Ri={state:{invitations:[]},getters:{receivedInvitations:function(t){return t.invitations}},mutations:{setUserReceivedInvitations:function(t,e){t.invitations=e},removeInvitation:function(t,e){var a=wi()(t.invitations,function(t){return t.id===e.id});t.invitations.splice(a,1)},clearInvitations:function(t){t.invitations=[]}},actions:{loadReceivedInvitations:function(t){var e=t.commit;return bi().then($i(e,"setUserReceivedInvitations"))},acceptContactInvitation:function(t,e){var a=t.commit,n=e.company,o=e.invitation;return Ci(n,o).then($i(a,"removeInvitation"))},rejectContactInvitation:function(t,e){var a=t.commit;return Di(e).then($i(a,"removeInvitation"))}}},Si={state:w()({},Hr.state,Ri.state),getters:w()({},Hr.getters,Ri.getters),mutations:w()({},Hr.mutations,Ri.mutations),actions:w()({},Hr.actions,Ri.actions)};function Fi(t,e){return{name:t.userFullName||"",role:{id:t.roleId,label:t.roleLabel},company:{id:t.companyId},email:t.userEmail,isPending:t.isPending,isInherited:t.isInherited,isCurrent:e&&t.userEmail===e.email}}function Ii(t){var e={roleid:t.role.id,userEmail:t.email};return t.isInherited&&(e.isInherited=t.isInherited),t.name&&(e.userFullName=t.name),t.company&&(e.companyId=t.company.id),e}var Pi=function(t,e){return I.a.get("/Collaborators/Companies/"+t.id).then(function(t){return t.map(function(t){return Fi(t,e)})})},Mi=function(t,e,a){e.company=t;var n=Ii(e);return I.a.post("/Collaborators/",n).then(function(t){return Fi(t,a)})},ki=function(t){var e=Ii(t);return I.a.put("/Collaborators/",e)},Ni=function(t){return I.a.delete("/Collaborators/Companies/"+t.company.id+"?userEmail="+encodeURIComponent(t.email))},Ai={collaborators:[]},Ti={state:w()({},Ai),mutations:{setCollaborators:function(t,e){t.collaborators=e},addCollaborator:function(t,e){t.collaborators.push(e)},updateCollaborator:function(t,e){var a=wi()(t.collaborators,function(t){return t.id===e.id});t.collaborators[a]=e},removeCollaborator:function(t,e){var a=t.collaborators.indexOf(e);t.collaborators.splice(a,1)}},actions:{resetCollaborators:function(t){var e=t.state;gn()(e,Ai)},loadSCCollaborators:function(t){var e=t.commit,a=t.getters;return Pi(a.selectedCompany,a.user).then($i(e,"setCollaborators"))},addSCCollaborator:function(t,e){var a=t.commit,n=t.getters;return Mi(n.selectedCompany,e,n.user).then($i(a,"addCollaborator"))},updateCollaborator:function(t,e){var a=t.commit;return ki(e).then(function(){return a("updateCollaborator",e),!0})},removeCollaborator:function(t,e){var a=t.commit;return Ni(e).then(function(){a("removeCollaborator",e)})}},getters:{collaborators:function(t){return t.collaborators}}},Ei=function(){return I.a.get("/Companies/").then(function(t){return t.map(Wr)})},Ui=function(t){var e={name:t.name,addressText:t.address,countryId:t.country.id,currencyId:t.currency.id};return t.regNum&&(e.registrationNumber=t.regNum),t.parent&&(e.parentId=t.parent.id),I.a.post("/Companies/",e).then(Qr)},Oi=function(t){return I.a.get("/Companies/"+t.id).then(Qr)},Vi=function(t,e){var a=function(t){var e={};ai(e,"id",t,"id"),ai(e,"name",t,"name"),ai(e,"registrationNumber",t,"regNum"),ai(e,"addressText",t,"address"),t.aliases&&(e.ownCompanyAliases=t.aliases.map(ni)),t.personnel&&(e.companyPersonnels=t.personnel.map(oi)),t.vats&&(e.companyVatNumbers=t.vats.map(si)),t.taxes&&(e.taxes=t.taxes.map(ri)),t.software&&(e.software=t.software.map(ri)),t.misc&&(e.companyPropertyValues=t.misc.map(ri)),t.country&&(e.countryId=t.country.id),t.currency&&(e.currencyId=t.currency.id),t.parent&&(e.parentId=t.parent.id);var a=[];if(t.corpTax&&null!==t.corpTax.num){e.taxNumber=t.corpTax.num;var n={months:t.corpTax.fillingDate.months,typeId:2},o={months:t.corpTax.dueDate.months,typeId:3},s={months:t.corpTax.advancedPayments.months,typeId:4};null!==t.corpTax.fillingDate&&(n.dayOfMonth=t.corpTax.fillingDate.dayOfMonth),null!==t.corpTax.dueDate&&(o.dayOfMonth=t.corpTax.dueDate.dayOfMonth),null!==t.corpTax.advancedPayments&&(s.dayOfMonth=t.corpTax.advancedPayments.dayOfMonth),a.push(n),a.push(o),a.push(s)}else t.corpTax&&null===t.corpTax.num&&(e.taxNumber=null,a.push({months:"000000000000",typeId:2}),a.push({months:"000000000000",typeId:3}),a.push({months:"000000000000",typeId:4}));if(t.audit&&null!==t.audit.name&&null!==t.audit.email&&null!==t.audit.phone){e.auditorName=t.audit.name,e.auditorEmail=t.audit.email,e.auditorPhone=t.audit.phone;var r={months:t.audit.auditDeadlineDate.months,typeId:5};null!==t.audit.auditDeadlineDate&&(r.dayOfMonth=t.audit.auditDeadlineDate.dayOfMonth),a.push(r)}else t.audit&&null===t.audit.name&&null===t.audit.email&&null===t.audit.phone&&(e.auditorName=null,e.auditorEmail=null,e.auditorPhone=null,a.push({months:"000000000000",typeId:5}));return 0!==a.length&&(e.recurringDates=a),e}(e);return I.a.patch("/Companies/"+t.id,a).then(Qr)},Li=function(t){return I.a.delete("/Companies/"+t.id)},qi=function(t,e){return I.a.post("/Companies/"+t.id+"/Logo",e)},Ki=function(t){return I.a.delete("/Companies/"+t.id+"/Logo")},zi=function(t,e,a){var n={companyId:t.id,refCompanyId:e.id,aliasText:a};return I.a.post("/Aliases/",n).then(Jr)},Bi=function(t,e){var a={aliasText:e};return I.a.patch("/Aliases/"+t.id,a)},ji=function(t){return I.a.delete("/Aliases/"+t.id)},Yi={create:function(t,e){e.company=t;var a=oi(e);return I.a.post("/Personnel/",a).then(ti)},update:function(t){var e=oi(t);return I.a.patch("/Personnel/"+e.id,e)},delete:function(t){return I.a.delete("/Personnel/"+t.id)}},Hi={create:function(t,e){e.company=t;var a=si(e);return I.a.post("/Vats/",a).then(Zr)},update:function(t){var e=si(t);return I.a.patch("/Vats/"+e.id,e)},delete:function(t){return I.a.delete("/Vats/"+t.id)}},Xi={create:function(t,e){e.company=t;var a=ri(e);return I.a.post("/CompanyPropertyValues/",a).then(ei)},update:function(t){var e=ri(t);return I.a.patch("/CompanyPropertyValues/"+e.id,e)},delete:function(t){return I.a.delete("/CompanyPropertyValues/"+t.id)}},Gi={myCompanies:[],selectedCompany:null},Wi=w()({},Gi),Qi={};Dt()(Wi).reduce(function(t,e){return t[e]=function(t){return t[e]},t},Qi);var Ji={setMyCompanies:function(t,e){t.myCompanies=e},addCompany:function(t,e){t.myCompanies.push(e)},setSelectedCompany:function(t,e){if(t.selectedCompany=e,t.myCompanies){var a=wi()(t.myCompanies,function(t){return t.id===e.id});a>-1&&(t.myCompanies[a]=e)}},deleteSelCompany:function(t){if(t.myCompanies){var e=t.myCompanies.indexOf(t.selectedCompany);e>-1&&t.myCompanies.splice(e,1)}t.selectedCompany=null},setSCLogo:function(t,e){t.selectedCompany.logo.URL=e},addSCAlias:function(t,e){t.selectedCompany.aliases.push(e)},updateSCAlias:function(t,e){var a=e.alias,n=e.updatedAname,o=t.selectedCompany.aliases;o[o.indexOf(a)].aname=n},deleteSCAlias:function(t,e){var a=t.selectedCompany.aliases,n=a.indexOf(e);a.splice(n,1)},addSCVat:function(t,e){t.selectedCompany.vats.push(e)},updateSCVat:function(t,e){var a=t.selectedCompany.vats;a[wi()(a,function(t){return t.id===e.id})]=e},deleteSCVat:function(t,e){var a=t.selectedCompany.vats,n=a.indexOf(e);a.splice(n,1)},addSCPersonnel:function(t,e){t.selectedCompany.personnel.push(e)},updateSCPersonnel:function(t,e){var a=t.selectedCompany.personnel;a[wi()(a,function(t){return t.id===e.id})]=e},deleteSCPersonnel:function(t,e){var a=t.selectedCompany.personnel,n=a.indexOf(e);a.splice(n,1)},addSCCPPair:function(t,e){var a=Zi(e);t.selectedCompany[a].push(e)},updateSCCPPair:function(t,e){var a=Zi(e),n=t.selectedCompany[a];n[wi()(n,function(t){return t.id===e.id})]=e},deleteSCCPPair:function(t,e){var a=Zi(e),n=t.selectedCompany[a],o=n.indexOf(e);n.splice(o,1)}};function Zi(t){var e=Dt()(Pe).find(function(e){return Pe[e]===t.category.id});return"tax"===e&&(e="taxes"),e}function tc(t,e){return function(a){return t(e,a),a}}var ec={resetCompanies:function(t){var e=t.state;gn()(e,Gi)},loadMyCompanies:function(t){var e=t.commit;t.state;return Ei().then(tc(e,"setMyCompanies"))},createCompany:function(t,e){var a=t.commit;t.state;return Ui(e).then(function(t){return null!==e.logoFile&&qi(t,e.logoFile),t}).then(tc(a,"addCompany"))},loadSelCompany:function(t,e){var a=t.commit,n=t.state;return n.selectedCompany&&n.selectedCompany.id===e?Ba.a.resolve(n.selectedCompany):Oi({id:e}).then(tc(a,"setSelectedCompany"))},reloadSelCompany:function(t,e){var a=t.commit;t.state;return Oi({id:e}).then(tc(a,"setSelectedCompany"))},updateSelCompany:function(t,e){var a=t.commit,n=t.state;return Vi(n.selectedCompany,e).then(function(t){return a("setSelectedCompany",t),t})},deleteSelCompany:function(t){var e=t.commit,a=t.state;return Li(a.selectedCompany).then(function(){e("deleteSelCompany")})},uploadSCLogo:function(t,e){var a=t.commit,n=t.state;return qi(n.selectedCompany,e).then(tc(a,"setSCLogo"))},deleteCSLogo:function(t){t.commit;var e=t.state;return Ki(e.selectedCompany).then()},createAlias:function(t,e){t.commit;var a=t.state,n=e.refCompany,o=e.aname;return zi(a.selectedCompany,n,o)},createSCAlias:function(t,e){var a=t.commit,n=t.state;return zi(n.selectedCompany,n.selectedCompany,e).then(tc(a,"addSCAlias"))},updateSCAlias:function(t,e){var a=t.commit,n=e.alias,o=e.updatedAname;return Bi(n,o).then(function(){return a("updateSCAlias",{alias:n,updatedAname:o}),!0})},deleteSCAlias:function(t,e){var a=t.commit;return ji(e).then(function(){a("deleteSCAlias",e)})}};[{name:"Vat",service:Hi},{name:"Personnel",service:Yi},{name:"CPPair",service:Xi}].reduce(function(t,e){t["createSC"+e.name]=function(t,a){var n=t.commit,o=t.state;return e.service.create(o.selectedCompany,a).then(tc(n,"addSC"+e.name))};var a="updateSC"+e.name;t[a]=function(t,n){var o=t.commit;return e.service.update(n).then(function(){return o(a,n),!0})};var n="deleteSC"+e.name;return t[n]=function(t,a){var o=t.commit;return e.service.delete(a).then(function(){o(n,a)})},t},ec);var ac={state:Wi,getters:Qi,mutations:Ji,actions:ec};var nc=function(t,e){return I.a.get("/RelatedParties/Companies/"+t.id+function(t){var e=null!==t.startDate?"startDate="+f.formatDate(t.startDate)+"&":"";return e+=null!==t.endDate?"endDate="+f.formatDate(t.endDate)+"&":"",e+=null!==t.startIndex?"startIndex="+t.startIndex+"&":"",e+=null!==t.endIndex?"endIndex="+t.endIndex+"&":"",e+=null!==t.sort?"sort="+t.sort+"&":"",""!=(e+=null!==t.isSortDescending?"isSortDescending="+t.isSortDescending+"&":"")?"?"+(e=e.slice(0,-1)):""}(e)).then(function(t){return function(t){var e=[];return t.relatedParties.forEach(function(t){var a="";t.companyAliases.forEach(function(t){a+=t.aliasText+", "}),a=a.slice(0,-2),e.push({detailId:t.detailId,typeId:t.typeId,typeName:t.typeName,fromDate:new Date(t.fromDate),toDate:null!==t.toDate?new Date(t.toDate):null,name:t.name,country:t.country,description:t.description,registrationNumber:t.registrationNumber,companyAliases:a,logo:ii(t.name,t.logoUrl)})}),{relatedParties:e,totalCount:t.totalCount}}(t)})},oc=function(t,e){var a=function(t,e){return{companyId:t.id,refCompanyId:e.contact,fromDate:e.fromDate,toDate:e.toDate,description:e.description}}(t,e);return I.a.post("/RelatedParties",a)},sc=function(t){return I.a.delete("/RelatedParties/"+t)},rc=function(t){var e=function(t){return{fromDate:t.fromDate,toDate:t.toDate?t.toDate:null,description:t.description}}(t);return I.a.patch("/RelatedParties/Details/"+t.id,e)},ic={contacts:[],holdingTree:[],companyRelatedParties:[],companySentInvitations:[]},cc=w()({},ic),lc={},uc={addInvitation:function(t,e){t.companySentInvitations.push(e)},removeInvitation:function(t,e){var a=t.companySentInvitations.indexOf(e);a>-1&&t.companySentInvitations.splice(a,1)}};Dt()(cc).forEach(function(t){lc[t]=function(e){return e[t]},uc["set"+mo.capitalizeFirstLetter(t)]=function(e,a){e[t]=a}});var dc={state:cc,mutations:uc,actions:{resetContacts:function(t){var e=t.state;gn()(e,ic)},loadSCContacts:function(t){var e=t.commit,a=t.getters;return vi(a.selectedCompany).then($i(e,"setContacts"))},loadSCSentInvitations:function(t){var e=t.commit,a=t.getters;return hi(a.selectedCompany).then($i(e,"setCompanySentInvitations"))},inviteContact:function(t,e){var a=t.commit,n=t.getters;return _i(n.selectedCompany,e).then($i(a,"addInvitation"))},inviteMyCompanyContacts:function(t,e){t.commit;var a=t.getters;return gi(a.selectedCompany,e)},cancelInvitation:function(t,e){var a=t.commit;return yi(e).then(function(){a("removeInvitation",e)})},loadSCRelatedParties:function(t,e){var a=t.commit,n=t.getters;return nc(n.selectedCompany,e).then($i(a,"setCompanyRelatedParties"))},addRelatedParty:function(t,e){t.commit;var a=t.getters;return oc(a.selectedCompany,e)},editRelatedParty:function(t,e){t.commit;return rc(e)},deleteRelatedParty:function(t,e){t.commit;return sc(e)},loadHoldingTree:function(t){var e=t.commit,a=t.getters;return fi(a.selectedCompany).then($i(e,"setHoldingTree"))}},getters:lc};function mc(t){return{id:t.id,statementType:{id:t.statementTypeId},fromDate:new Date(t.startDate),toDate:new Date(t.endDate)}}function pc(t){var e={recordsCount:{}};return e.recognizedCompaniesSets=t.validTransactionsSummary.map(fc),e.recordsCount.validRecognizedCompany=vc(e.recognizedCompaniesSets),e.unrecognizedCompaniesSets=t.unknownRefCompanyTransactionsSummary.map(hc),e.recordsCount.validUnrecognizedCompany=vc(e.unrecognizedCompaniesSets),e.recordsCount.invalid=t.invalidTransactionsCount?t.invalidTransactionsCount:0,e.recordsCount.outOfScope=t.outOfScopeTransactionsCount?t.outOfScopeTransactionsCount:0,e.recordsCount.removed=t.userCanceledTransactionsCount?t.userCanceledTransactionsCount:0,e}function vc(t){return t.reduce(function(t,e){return t+e.payables.count+e.receivables.count},0)}function fc(t){return w()({},hc(t),{currency:{id:t.docCurrencyId,code:t.docCurrencyISOCode}})}function hc(t){return{company:{id:t.companyId,name:t.companyName},receivables:{amount:+t.receivablesAmount,count:+t.receivablesCount},payables:{amount:+t.payablesAmount,count:+t.payablesCount}}}function _c(t){return w()({},(e=t.errors,a=0,n=e.map(function(t){return a=t.level>a?t.level:a,{level:{id:t.level,label:t.levelName},type:{id:t.typeId,label:t.typeName},desc:t.description}}).sort(function(t,e){return t.level.id-e.level.id}),{highestErrorLevel:a,errors:n}),{line:t.fileRowIndex,account:t.accountText,ref:t.referenceText,isReceivable:t.isReceivable,payer:t.payerName,receiver:t.receiverName,docDate:new Date(t.documentDate),postingDate:new Date(t.postingDate),dueDate:new Date(t.dueDate),currency:{id:t.currencyId,code:t.currencyCode},docAmount:t.documentAmount,desc:t.description});var e,a,n}var gc={importExcel:function(t,e){e.company=t;var a=function(t){var e={companyid:t.company.id,statementTypeid:t.statementType.id,startDate:t.fromDate?f.prepareForUTCString(t.fromDate):null,endDate:t.toDate?f.prepareForUTCString(t.toDate):null},a=new FormData;return a.append("data",S()(e)),a.append("file",t.file),a}(e);return I.a.post("/Imports/ExcelTransactions",a).then(mc)},saveValidRecords:function(t){return I.a.post("/Imports/"+t.id+"/ValidRecords")},removeValidSet:function(t,e){return I.a.delete("/Imports/"+t.id+"/RefCompanies/"+e.company.id+"/Currencies/"+e.currency.id)},removeValidRecord:function(t,e){return I.a.delete("/Imports/"+t.id+"/RowIndex/"+e.line)},getSummary:function(t){return I.a.get("/Imports/"+t.id+"/Records/Summary").then(pc)},getRecognizedCompanyRecords:function(t,e){return I.a.get("/Imports/"+t.id+"/ValidRecords/RefCompanies/"+e.company.id+"/Currencies/"+e.currency.id).then(function(t){return t.map(_c)})},getUnrecognizedCompanyRecords:function(t,e){return I.a.get("/Imports/"+t.id+"/ValidRecords/UnknownRefCompanies/"+e.company.name).then(function(t){return t.map(_c)})},getInvalidRecords:function(t,e){return I.a.get("/Imports/"+t.id+"/InvalidRecords").then(function(t){return t.map(_c)})},getOutOfScopeRecords:function(t,e){return I.a.get("/Imports/"+t.id+"/OutOfScopeRecords").then(function(t){return t.map(_c)})}},yc={importReceipt:null,summary:null,rcSetsRecords:{},ucSetsRecords:{},invalidRecords:null,outOfScopeRecords:null};function bc(t,e,a,n,o){var s=t.commit,r=t.getters,i=r[e](o);if(i)return Ba.a.resolve(i);var c=r.importReceipt;return gc[a](c,o).then(function(t){s(n,{set:o,records:t})})}function Cc(t,e,a,n){var o=t.commit,s=t.getters.importReceipt;return gc[a](s).then($i(o,n))}var Dc={state:w()({},yc),mutations:{setImportReceipt:function(t,e){t.importReceipt=e},setSummary:function(t,e){t.summary=e},setUCRecords:function(t,e){var a=t.summary.unrecognizedCompaniesSets.find(function(t){return t.company.name===e.set.company.name}),n=w()({},t.ucSetsRecords);n[a.company.name]=e.records,t.ucSetsRecords=n},setRCRecords:function(t,e){var a=t.summary.recognizedCompaniesSets.find(function(t){return t.company.name===e.set.company.name}),n=w()({},t.rcSetsRecords);n[a.company.name]=e.records,t.rcSetsRecords=n},setInvalidRecords:function(t,e){t.invalidRecords=e},setOutOfScopeRecords:function(t,e){t.outOfScopeRecords=e},clearImport:function(t){gn()(t,yc)}},actions:{resetImports:function(t){var e=t.state;gn()(e,yc)},uploadExcel:function(t,e){var a=t.commit,n=t.getters;return gc.importExcel(n.selectedCompany,e).then($i(a,"setImportReceipt"))},saveValid:function(t){t.commit;var e=t.getters;return gc.saveValidRecords(e.importReceipt)},removeValidSet:function(t,e){t.commit;var a=t.getters;return gc.removeValidSet(a.importReceipt,e)},removeValidRecord:function(t,e){t.commit;var a=t.getters;return gc.removeValidRecord(a.importReceipt,e)},loadSummary:function(t){var e=t.commit,a=t.getters.importReceipt;return a?gc.getSummary(a).then($i(e,"setSummary")):Ba.a.resolve()},loadRecognizedCompanyRecords:function(t,e){return bc(t,"recognizedCompanyRecords","getRecognizedCompanyRecords","setRCRecords",e)},loadUnrecognizedCompanyRecords:function(t,e){return bc(t,"unrecognizedCompanyRecords","getUnrecognizedCompanyRecords","setUCRecords",e)},loadInvalidRecords:function(t){return Cc(t,0,"getInvalidRecords","setInvalidRecords")},loadOutOfScopeRecords:function(t){return Cc(t,0,"getOutOfScopeRecords","setOutOfScopeRecords")}},getters:{importReceipt:function(t){return t.importReceipt},importSummary:function(t){return t.summary},recognizedCompaniesSets:function(t){if(t.summary)return t.summary.recognizedCompaniesSets},recognizedCompanyRecords:function(t){return function(e){if(t.rcSetsRecords&&e)return t.rcSetsRecords[e.company.name]}},unrecognizedCompaniesSets:function(t){if(t.summary)return t.summary.unrecognizedCompaniesSets},unrecognizedCompanyRecords:function(t){return function(e){if(t.ucSetsRecords&&e)return t.ucSetsRecords[e.company.name]}},recordsCount:function(t){if(t.summary)return t.summary.recordsCount},invalidRecords:function(t){return t.invalidRecords},outOfScopeRecords:function(t){return t.outOfScopeRecords},statementType:function(t){if(t.importReceipt)return Ie[t.importReceipt.statementType.id]},statementTypeContext:function(t){if(t.importReceipt)return Ie[t.importReceipt.statementType.id].context}}};function $c(t){return{id:t.id,accType:t.accountText,setId:t.setId,ref:t.referenceText,viewDocDate:new Date(t.documentDate),viewPostingDate:new Date(t.postingDate),fxRate:t.currentReportFxRate,docCurrency:t.currencyCode,docAmountStr:t.documentAmount,amountInRepCurrencyStr:t.amountInReportCurrency,description:t.description,isOwn:t.isOwn}}var xc=function(t,e){var a=function(t,e){return{companyId:e.id,statementTypeId:t.statementType.id,refCompanyId:t.selectedContact.id,startDate:t.fromDate?f.formatDate(t.fromDate):"1900-01-01",endDate:t.toDate?f.formatDate(t.toDate):null}}(t,e);return I.a.get("/ReportTransactions/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId+"/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/"+a.endDate+"?payables=true&receivables=true&matched=true&unmatched=true").then(function(t){return t.map($c)})},wc=function(t,e){var a=function(t,e){return{companyId:e.id,statementTypeId:t.statementType.id,startDate:t.fromDate?f.formatDate(t.fromDate):null,endDate:t.toDate?f.formatDate(t.toDate):null}}(t,e);return I.a.get("/ReportingOppositeCompanies/"+a.companyId+"/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/"+a.endDate).then(function(t){return t.map(Gr)})},Rc={currentRecords:[],recordCompanyList:[]};function Sc(t,e){return function(a){return t(e,a),a}}var Fc={state:w()({},Rc),getters:{getCurrentRecords:function(t){return t.currentRecords},getRecordCompanyList:function(t){return t.recordCompanyList}},mutations:{setCurrentRecords:function(t,e){t.currentRecords=e},setRecordCompanyList:function(t,e){t.recordCompanyList=e}},actions:{resetRecords:function(t){var e=t.state;gn()(e,Rc)},loadCurrentRecords:function(t,e){var a=t.commit,n=t.state;return xc(e,n.selectedCompany).then(Sc(a,"setCurrentRecords"))},loadRecordCompanyList:function(t,e){var a=t.commit,n=t.state;return wc(e,n.selectedCompany).then(Sc(a,"setRecordCompanyList"))}}};function Ic(t){var e={};Dt()(Fe).map(function(a){t.typeId===Fe[a].id&&(e=Fe[a])});var a=null===t.manualRate?null:{units:t.manualRate.units,rate:t.manualRate.value},n=null===t.autoRate?null:{units:t.autoRate.units,rate:t.autoRate.value};return{id:null===t.manualRate?null:t.manualRate.id,rateType:e,date:new Date(t.date),manual:a,auto:n,toCurrency:{id:t.refCurrencyId,code:t.refCurrencyIsoCode}}}function Pc(t){return{sourceID:t.usedSourceFxRateSourceId,oldSourceID:t.usedSourceFxRateSourceId,date:t.usedSourceFromDate?new Date(t.usedSourceFromDate):null,usedSourceId:t.usedSourceId,usedSourceFxRateSourceId:t.usedSourceFxRateSourceId,usedSourceFromDate:t.usedSourceFromDate,currency:{id:t.currency.id,isoCode:t.currency.isoCode,name:t.currency.name},sources:t.sources}}var Mc=function(t,e){var a=function(t,e){return{companyId:e.id,periodMonth:f.formatDate(t.data),parameter:"?get"+(t.average?"Average":"Daily")+"=true"}}(t,e);return I.a.get("/FxRates/Companies/"+a.companyId+"/periodMonth/"+a.periodMonth+a.parameter).then(function(t){return t.map(Ic)})},kc=function(t){return I.a.delete("/ManualFxRates/"+t.id)},Nc=function(t,e){var a=function(t,e){return{companyId:e.id,refCurrencyId:t.currencyId,typeId:t.recordType,date:t.recordDate,value:t.recordRate,units:1}}(t,e);return I.a.post("/ManualFxRates/",a).catch(function(t){return Ba.a.reject(t)})},Ac=function(t){var e,a={id:(e=t).id,value:e.manual.rate};return I.a.patch("/ManualFxRates/"+a.id,a).catch(function(t){return Ba.a.reject(t)})},Tc=function(t){return I.a.get("/AutoFxRates/CompanyCurrencies/"+t.id).then(function(t){return t.map(Pc)})},Ec=function(t,e){var a=function(t,e){return{companyId:e.id,refCurrencyId:t.currency.id,dateFrom:t.date.toISOString(),fxRateSourceId:t.sourceID}}(t,e);return I.a.post("/AutoFxRates/UsedSources/",a)},Uc=function(t){var e=t.usedSourceId;return I.a.delete("/AutoFxRates/UsedSources/"+e)},Oc=function(t){var e,a={id:(e=t).usedSourceId,dateFrom:e.date.toISOString(),fxRateSourceId:e.sourceID};return I.a.patch("/AutoFxRates/UsedSources/"+a.id,a)},Vc=function(t){var e=function(t){var e="";return t.forEach(function(t){null!==t.usedSourceId&&(e+=(0===e.length?"?":"&")+"ids="+t.usedSourceId)}),e}(t);return I.a.delete("/AutoFxRates/UsedSources"+e)},Lc={currentFxRates:[],autoFxRates:[]};function qc(t,e){return function(a){return t(e,a),a}}var Kc={state:w()({},Lc),getters:{getCurrentFxRates:function(t){return t.currentFxRates},getAutoFxRates:function(t){return t.autoFxRates}},mutations:{setCurrentFxRates:function(t,e){t.currentFxRates=e},setAutoFxRates:function(t,e){t.autoFxRates=e}},actions:{resetFxRates:function(t){var e=t.state;gn()(e,Lc)},loadCurrentFxRates:function(t,e){var a=t.commit,n=t.state;return Mc(e,n.selectedCompany).then(qc(a,"setCurrentFxRates"))},removeFxRate:function(t,e){t.commit,t.getters;return kc(e)},addFxRate:function(t,e){t.commit;var a=t.state;return Nc(e,a.selectedCompany)},editFxRate:function(t,e){t.commit,t.state;return Ac(e)},loadCSAutoFxRates:function(t){var e=t.commit,a=t.state;return Tc(a.selectedCompany).then(qc(e,"setAutoFxRates"))},activateAutoFxRate:function(t,e){t.commit;var a=t.state;return Ec(e,a.selectedCompany)},deactivateAutoFxRate:function(t,e){t.commit,t.state;return Uc(e)},switchAutoFxRate:function(t,e){t.commit,t.state;return Oc(e)},massDeactivateAutoFxRate:function(t,e){t.commit,t.state;return Vc(e)}}};function zc(t,e){return{companyId:e.id}}function Bc(t,e){return{id:t,companyId:e.id}}function jc(t,e,a){return{companyId:e.id,refCompanyId:t.selectedReconciliation.refCompany.id,statementTypeId:t.selectedReconciliation.statement.id,startDate:t.selectedReconciliation.startDate?f.formatDate(t.selectedReconciliation.startDate):"1900-01-01",endDate:t.selectedReconciliation.endDate?f.formatDate(t.selectedReconciliation.endDate):null,queryString:a}}function Yc(t){return{id:t.id,accType:t.accountText,ref:t.referenceText,viewDocDate:new Date(t.documentDate),viewPostingDate:new Date(t.dueDate),docCurrency:t.currencyCode,docAmountStr:t.documentAmount,fxRate:t.currentReportFxRate,amountInRepCurrency:Number(t.amountInReportCurrency),amountInRepCurrencyStr:t.amountInReportCurrency,description:t.description,isOwn:t.isOwn}}function Hc(t){var e=[];return t.forEach(function(t){e[t.setId]?e[t.setId].transactions.push(Yc(t)):e[t.setId]={id:t.setId,matchingType:{id:t.statusId,label:t.statusDescription},transactions:[Yc(t)]}}),e.filter(function(){return!0})}function Xc(t){return{id:t.id,refCompany:{id:t.refCompanyId,name:t.refCompanyName,logo:ii(t.refCompanyName,t.oppositeCompanyProfileImageUrl),country:{code:t.oppositeCompanyCountryCode}},statusId:t.statusId,status:{id:t.statusId,description:t.statusDescription},context:Ie.filter(function(e){return e.id===t.statusId})[0].context,refCompanyStatus:{id:t.refCompanyStatusId,description:t.refCompanyStatusDescription},isInitiatorCompany:t.isInitiatorCompany,startDate:new Date(t.startDate),endDate:new Date(t.endDate),dld:new Date(t.deadlineDate),statement:Ie.filter(function(e){return e.id===t.statementTypeId})[0],isDisclosed:t.isDisclosed,matchedAmount:t.matchedAmount,unMatchedAmount:t.unMatchedAmount}}function Gc(t){return{in:{exceptions:{me:{amount:t.receivables.unMatched.amount,count:t.receivables.unMatched.transactionsCount},they:{amount:t.receivables.unMatched.refAmount,count:t.receivables.unMatched.refTransactionsCount}},matched:{me:{amount:t.receivables.matched.amount,count:t.receivables.matched.transactionsCount},they:{amount:t.receivables.matched.refAmount,count:t.receivables.matched.refTransactionsCount}}},out:{exceptions:{me:{amount:t.payables.unMatched.amount,count:t.payables.unMatched.transactionsCount},they:{amount:t.payables.unMatched.refAmount,count:t.payables.unMatched.refTransactionsCount}},matched:{me:{amount:t.payables.matched.amount,count:t.payables.matched.transactionsCount},they:{amount:t.payables.matched.refAmount,count:t.payables.matched.refTransactionsCount}}}}}function Wc(t){var e=[];return t.messages&&0!==t.messages.length&&t.messages.forEach(function(t){e.push({id:t.id,date:new Date(t.createdOn),from:{fullName:t.user.fullName,profileImageUrl:t.user.profileImageUrl,email:t.user.email},body:t.body,isRead:t.isRead})}),{thread:{id:t.id,name:t.title},messages:e}}var Qc=function(t,e){var a=function(t,e){var a=[];return t.forEach(function(t){a.push({companyId:e.id,refCompanyId:t.company.id,assignedUserEmail:t.assignee?t.assignee.email:"",statementTypeId:t.statement.id,startDate:t.fromDate,endDate:t.toDate,isDisclosed:t.disclosed,deadlineDate:t.ddl})}),a}(t,e);return I.a.post("/Reconciliations/",a)},Jc=function(t,e){var a=Bc(t,e);return I.a.get("/Reconciliations/"+a.id+"/Companies/"+a.companyId).then(Xc)},Zc=function(t,e){var a=function(t,e){return{data:{statusId:t.statusId},companyId:e.id,id:t.id}}(t,e);return I.a.patch("/Reconciliations/"+a.id+"/Companies/"+a.companyId,a.data)},tl=function(t,e){var a=Bc(t,e);return I.a.get("/ReconciliationSummary/"+a.id+"/Companies/"+a.companyId).then(Gc)},el=function(t,e){var a=zc(0,e);return I.a.get("/Reconciliations/Companies/"+a.companyId+"?statusId=1").then(function(t){return t.map(Xc)})},al=function(t,e){var a=zc(0,e);return I.a.get("/Reconciliations/Companies/"+a.companyId+"?statusId=2").then(function(t){return t.map(Xc)})},nl=function(t,e){var a=zc(0,e);return I.a.get("/Reconciliations/Companies/"+a.companyId+"?statusId=3").then(function(t){return t.map(Xc)})},ol=function(t){return I.a.delete("/Reconciliations/"+t.id)},sl=function(t){var e=function(t){var e="";return t.forEach(function(t){e+=(0===e.length?"?":"&")+"ids="+t.id}),e}(t);return I.a.delete("/Reconciliations/"+e)},rl={selectedReconciliation:[],selectedReconciliationSummary:[],OpenReconciliations:[],FinishedReconciliations:[],RejectedReconciliations:[]},il=w()({},rl),cl={};Dt()(il).reduce(function(t,e){return t[e]=function(t){return t[e]},t},cl);function ll(t,e){return function(a){return t(e,a),a}}var ul={state:il,getters:cl,mutations:{setSelectedReconciliation:function(t,e){t.selectedReconciliation=e},setSelectedReconciliationSummary:function(t,e){t.selectedReconciliationSummary=e},setOpenReconciliations:function(t,e){t.OpenReconciliations=e},setFinishedReconciliations:function(t,e){t.FinishedReconciliations=e},setRejectedReconciliations:function(t,e){t.RejectedReconciliations=e}},actions:{resetReconciliations:function(t){var e=t.state;gn()(e,rl)},createReconciliation:function(t,e){t.commit;var a=t.state;return Qc(e,a.selectedCompany)},loadSelReconciliation:function(t,e){var a=t.commit,n=t.state;return n.selectedReconciliation&&n.selectedReconciliation.id===e?Ba.a.resolve(n.selectedReconciliation):Jc(e,n.selectedCompany).then(ll(a,"setSelectedReconciliation"))},editSelReconciliationStatus:function(t,e){t.commit;var a=t.state;return Zc(e,a.selectedCompany)},loadSelReconciliationSummary:function(t,e){var a=t.commit,n=t.state;return tl(e,n.selectedCompany).then(ll(a,"setSelectedReconciliationSummary"))},loadOpenReconciliations:function(t,e){var a=t.commit,n=t.state;return el(e,n.selectedCompany).then(ll(a,"setOpenReconciliations"))},loadFinishedReconciliations:function(t,e){var a=t.commit,n=t.state;return al(e,n.selectedCompany).then(ll(a,"setFinishedReconciliations"))},loadRejectedReconciliations:function(t,e){var a=t.commit,n=t.state;return nl(e,n.selectedCompany).then(ll(a,"setRejectedReconciliations"))},deleteReconciliation:function(t,e){t.commit;return ol(e)},deleteMultipleReconciliation:function(t,e){t.commit;return sl(e)}}},dl=function(t,e){var a=function(t,e){var a="?unmatched=true";return t.areOUT&&(a+="&payables=true"),t.areIN&&(a+="&receivables=true"),jc(t,e,a)}(t,e),n="/ReportTransactions/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId;return n+="/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/",n+=a.endDate+a.queryString,I.a.get(n).then(function(t){return t.map(Yc)})},ml=function(t){return I.a.get("/Conversations/Reconciliations/"+t).then(Wc)},pl=function(t){var e={body:t.message};return I.a.post("/Conversations/Reconciliations/"+t.recId+"/Messages",e).then()},vl=function(t){return I.a.delete("/Conversations/Messages/"+t.id).then()},fl=function(t){console.log(t);var e={body:t.body};return I.a.patch("/Conversations/Messages/"+t.id,e).then()},hl=function(t,e){var a=function(t,e){var a="?matched=true";return jc(t,e,a+=t.areIN?"&receivables=true":"&payables=true")}(t,e),n="/ReportTransactions/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId;return n+="/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/",n+=a.endDate+a.queryString,I.a.get(n).then(Hc)},_l=function(t,e){var a=function(t,e){var a="?";return t.areOUT&&(a+="payables=true"),t.areIN&&("?"!==a&&(a+="&"),a+="receivables=true"),jc(t,e,a)}(t,e),n="/MatchingSets/AutoMatching/Companies/"+a.companyId+"/RefCompanies/"+a.refCompanyId;return n+="/StatementTypes/"+a.statementTypeId+"/StartDate/"+a.startDate+"/EndDate/",n+=a.endDate+a.queryString,I.a.post(n).then()},gl=function(t,e){var a=function(t,e){var a=[];return t.selectedExceptions.forEach(function(t){a.push(t.id)}),{companyId:e.id,statementTypeId:t.selectedReconciliation.statement.id,payload:{ids:a},queryString:1===t.selectedReconciliation.statement.id?"?endDate="+f.formatDate(t.selectedReconciliation.endDate):""}}(t,e),n="/MatchingSets/ManualMatching/Companies/"+a.companyId+"/StatementTypes/"+a.statementTypeId+a.queryString;return I.a.post(n,a.payload).then()},yl=function(t){return I.a.delete(/MatchingSets/+t).then()},bl={exceptionsRecords:[],matchedSets:[],SRMessages:[]},Cl=w()({},bl),Dl={};Dt()(Cl).reduce(function(t,e){return t[e]=function(t){return t[e]},t},Dl);function $l(t,e){return function(a){return t(e,a),a}}var xl={state:Cl,getters:Dl,mutations:{setMatchedSets:function(t,e){t.matchedSets=e},setExceptionsRecords:function(t,e){t.exceptionsRecords=e},setSRMessages:function(t,e){t.SRMessages=e}},actions:{resetReconciliation:function(t){var e=t.state;gn()(e,bl)},loadMatchedSets:function(t,e){var a=t.commit,n=t.state;return hl(e,n.selectedCompany).then($l(a,"setMatchedSets"))},loadSRMessages:function(t,e){var a=t.commit;t.state;return ml(e).then($l(a,"setSRMessages"))},sendReconciliationMessage:function(t,e){t.commit,t.state;return pl(e).then()},deleteMessage:function(t,e){t.commit,t.state;return vl(e).then()},editMessage:function(t,e){t.commit,t.state;return fl(e).then()},loadExceptionsRecords:function(t,e){var a=t.commit,n=t.state;return dl(e,n.selectedCompany).then($l(a,"setExceptionsRecords"))},matchAuto:function(t,e){t.commit;var a=t.state;return _l(e,a.selectedCompany).then()},manualMatch:function(t,e){t.commit;var a=t.state;return gl(e,a.selectedCompany).then()},unmatchSet:function(t,e){t.commit,t.state;return yl(e).then()}}},wl={state:w()({},Ti.state,ac.state,dc.state,Dc.state,Fc.state,Kc.state,ul.state,xl.state),getters:w()({},Ti.getters,ac.getters,dc.getters,Dc.getters,Fc.getters,Kc.getters,ul.getters,xl.getters),mutations:w()({},Ti.mutations,ac.mutations,dc.mutations,Dc.mutations,Fc.mutations,Kc.mutations,ul.mutations,xl.mutations),actions:w()({},Ti.actions,ac.actions,dc.actions,Dc.actions,Fc.actions,Kc.actions,ul.actions,xl.actions)};function Rl(t){return t}function Sl(t){return{id:t.companyId,data:"currentTime="+t.currentTime+"&startIndex="+t.startIndex+"&endIndex="+t.endIndex}}var Fl=function(t){var e=function(t){return"currentTime="+t.currentTime+"&startIndex="+t.startIndex+"&endIndex="+t.endIndex}(t);return I.a.get("/Log?"+e).then(function(t){return t.map(Rl)})},Il=function(t){var e=Sl(t);return I.a.get("/Log/Companies/"+e.id+"?"+e.data).then(function(t){return t.map(Rl)})},Pl=function(){return I.a.get("/Log").then(function(t){return t.map(Rl)})},Ml=function(t){return I.a.post("/Log/ReadStatus/"+t)},kl=function(){return I.a.post("/Log/MarkAllAsOld")},Nl=function(){return I.a.post("/Log/MarkAllAsRead")},Al=function(t){var e=Sl(t);return I.a.post("/Log/Companies/"+e.id+"/MarkAllAsRead")},Tl=function(t){var e=Sl(t);return I.a.post("/Log/Companies/"+e.id+"/MarkAllAsOld")},El=function(){return I.a.get("/Log/Count").then()};function Ul(t,e,a){t.id===e&&(t.isRead=!t.isRead),a&&(t.isRead=!0)}var Ol={state:{userNotifications:[],nextUserNotifications:[],userNotificationsCount:null,userNotificationsCountTimerActive:!1,companyNotifications:[],nextCompanyNotifications:[],notificationTimer:null},getters:{userNotifications:function(t){return t.userNotifications},nextUserNotifications:function(t){return t.nextUserNotifications},userNotificationsCount:function(t){return t.userNotificationsCount},companyNotifications:function(t){return t.companyNotifications},nextCompanyNotifications:function(t){return t.nextCompanyNotifications}},mutations:{setUserNotifications:function(t,e){t.userNotifications=e},addUserNotifications:function(t,e){t.userNotifications=t.userNotifications.concat(e)},setNextUserNotifications:function(t,e){t.nextUserNotifications=e},setNextCompanyNotifications:function(t,e){t.nextCompanyNotifications=e},setUserNotificationsCount:function(t,e){t.userNotificationsCount=e},setCompanyNotifications:function(t,e){t.companyNotifications=e},setUserNotificationsCountTimerActive:function(t,e){t.userNotificationsCountTimerActive=e},addCompanyNotifications:function(t,e){t.companyNotifications=t.companyNotifications.concat(e)},switchUserNotificationStatus:function(t,e){t.userNotifications.forEach(function(t){return Ul(t,e[0],e[1])}),t.nextUserNotifications.forEach(function(t){return Ul(t,e[0],e[1])})},switchCompanyNotificationStatus:function(t,e){t.companyNotifications.forEach(function(t){return Ul(t,e[0],e[1])}),t.nextCompanyNotifications.forEach(function(t){return Ul(t,e[0],e[1])})}},actions:{loadUserNotifications:function(t,e){var a=t.commit;return Fl(e).then(function(t){return a("setUserNotifications",t)})},loadCompanyNotifications:function(t,e){var a=t.commit;return Il(e).then(function(t){return a("setCompanyNotifications",t)})},loadAllUserNotifications:function(t){var e=t.commit;return Pl().then(function(t){return e("setUserNotifications",t)})},switchUserNotificationReadStatus:function(t,e){var a=t.commit;return Ml(e).then(a("switchUserNotificationStatus",[e,!1]))},switchCompanyNotificationReadStatus:function(t,e){var a=t.commit;return Ml(e).then(a("switchCompanyNotificationStatus",[e,!1]))},markUserNotificationsRead:function(t){var e=t.commit;return Nl().then(e("switchUserNotificationStatus",[0,!0]))},markUserNotificationsOld:function(){return kl()},markCompanyNotificationsRead:function(t,e){var a=t.commit;return Al(e).then(a("switchCompanyNotificationStatus",[0,!0]))},markCompanyNotificationsOld:function(t,e){t.commit;return Tl(e)},loadNextUserNotifications:function(t,e){var a=t.commit;return Fl(e).then(function(t){return a("setNextUserNotifications",t)})},loadNextCompanyNotifications:function(t,e){var a=t.commit;return Il(e).then(function(t){return a("setNextCompanyNotifications",t)})},addUserNotifications:function(t,e){(0,t.commit)("addUserNotifications",e)},addCompanyNotifications:function(t,e){(0,t.commit)("addCompanyNotifications",e)},loadUserNotificationsCount:function(t){var e=t.commit;return El().then(function(t){return e("setUserNotificationsCount",t)})},userNotificationsCountTimer:function(t,e){var a=t.commit,n=t.dispatch,o=t.state;a("setUserNotificationsCountTimerActive",e),null===o.notificationTimer&&(o.notificationTimer=setInterval(function(){console.log(o.userNotificationsCountTimerActive?"User Notifications Timer IS active.":"Timer is Deactivating ..."),o.userNotificationsCountTimerActive?n("loadUserNotificationsCount"):clearInterval(o.notificationTimer)},3e4))}}},Vl={actions:{resetCompanyStore:function(t){var e=t.dispatch;return Ba.a.all([e("resetRecords"),e("resetReconciliation"),e("resetReconciliations"),e("resetImports"),e("resetFxRates"),e("resetContacts"),e("resetCompanies"),e("resetCollaborators")])}}};o.a.use($.a);var Ll=new $.a.Store({modules:{userStore:Si,companyStore:wl,notificationsStore:Ol,nomenclatureStore:Xs,resetCompanyStore:Vl}});I.a.defaults.baseURL="http://dev2.api.balanceshare.com",I.a.interceptors.request.use(function(t){t.headers=t.headers||{};var e=Ll.getters.token;return e&&(t.headers.Token=e),t}),I.a.interceptors.response.use(function(t){var e=t.headers;return e.token&&Ll.dispatch("setToken",e.token),t.data.data},function(t){var e=t.response;if(401===e.status)return Ll.dispatch("clearout"),Ba.a.reject(e.data.errors[0]);if(e.data&&e.data.errors){var a=e.data.errors[0];return Ba.a.reject(a)}return Ba.a.reject(t)});o.a.use(qo.b,{events:"blur"});var ql={render:function(){var t=this.$createElement,e=this._self._c||t;return this.loading?e("div",{staticClass:"loading"},[e("img",{attrs:{src:"/static/images/loading.gif"}})]):this._e()},staticRenderFns:[]},Kl=a("VU/8")({props:["loading"]},ql,!1,null,null,null).exports,zl=a("OfYj"),Bl={props:{options:{type:[Array],default:function(){return[]}},valueField:{type:String,default:"id"},textField:{type:String,default:"label"},disabledField:{type:String,default:"disabled"}},computed:{formOptions:function(){var t=this.options||[],e=this.valueField,a=this.textField,n=this.disabledField;return t.map(function(t){return Tn.isObject(t)?{value:t[e],text:String(t[a]),disabled:t[n]||!1}:{text:String(t),value:t,disabled:!1}})}}},jl=a("/gqF"),Yl=a("60E9"),Hl=a("TMTb"),Xl=a("dfnb"),Gl=a("GnGf"),Wl={mixins:[zl.a,jl.a,Yl.a,Hl.a,Xl.a,Bl],render:function(t){var e=this,a=e.$slots,n=e.formOptions.map(function(e,a){return t("option",{key:"option_"+a+"_opt",attrs:{disabled:Boolean(e.disabled)},domProps:{innerHTML:e.text,value:e.value}})});return t("select",{ref:"input",class:e.inputClass,directives:[{name:"model",rawName:"v-model",value:e.localValue?e.localValue[this.valueField]:e.localValue,expression:"localValue"}],attrs:{id:e.safeId(),name:e.name,multiple:e.multiple||null,size:e.isMultiple?e.selectSize:null,disabled:e.disabled,required:e.required,"aria-required":e.required?"true":null,"aria-invalid":e.computedAriaInvalid},on:{change:function(t){var a=t.target,n=Object(Gl.c)(a.options).reduce(function(t,e,a){return e.selected&&t.push(a),t},[]);e.localValue=a.multiple?n:e.allOptions[n[0]],e.$emit("change",e.localValue)}}},[a.first,n,a.default])},data:function(){return{localValue:this.value}},watch:{value:function(t,e){this.localValue=t},localValue:function(t,e){this.$emit("input",this.localValue)}},props:{value:{},multiple:{type:Boolean,default:!1},selectSize:{type:Number,default:0},ariaInvalid:{type:[Boolean,String],default:!1},slotOptions:{type:[Array],default:function(){return[]}}},computed:{inputClass:function(){return["form-control",this.stateClass,this.sizeFormClass,this.isPlain?null:"custom-select",this.isPlain||!this.size?null:"custom-select-"+this.size]},isPlain:function(){return this.plain||this.isMultiple},isMultiple:function(){return Boolean(this.multiple&&this.selectSize>1)},computedAriaInvalid:function(){return!0===this.ariaInvalid||"true"===this.ariaInvalid?"true":"is-invalid"===this.stateClass?"true":null},allOptions:function(){return this.options.concat(this.slotOptions)}}},Ql=a("IZMb"),Jl=a.n(Ql),Zl={duration:2500,action:{text:"X",onClick:function(t,e){e.goAway(0)}}},tu=function(t,e){o.a.toasted.show(t,e)},eu={install:function(t){t.prototype.$customMsg={showErrorMessage:function(t){var e=gn()({},Zl,{type:"error",duration:5e3});tu(t,e)},showSuccessMessage:function(t){var e=gn()({},Zl,{type:"success"});tu(t,e)},showInfoMessage:function(t){var e=gn()({},Zl,{type:"info"});tu(t,e)}}}},au={components:{NotificationPanel:ar},data:function(){return{showPanel:!1,loading:!1,currentTime:null,currentNotification:1,notificationsPerLoad:10,windowHeight:0}},computed:{notifications:function(){return this.$store.getters.userNotifications},nextUserNotifications:function(){return this.$store.getters.nextUserNotifications},finalResult:function(){return 0===this.nextUserNotifications.length},notificationsCount:function(){return this.$store.getters.userNotificationsCount},payload:function(){return{currentTime:new Date(this.currentTime).toISOString(),startIndex:this.currentNotification,endIndex:this.currentNotification+this.notificationsPerLoad-1}},panel_style:function(){return{height:this.windowHeight/2+"px"}}},created:function(){this.$store.dispatch("loadUserNotificationsCount")},mounted:function(){this.$nextTick(function(){window.addEventListener("resize",this.getWindowHeight),this.getWindowHeight()})},beforeDestroy:function(){window.removeEventListener("resize",this.getWindowHeight)},methods:{getWindowHeight:function(){this.windowHeight=document.documentElement.clientHeight},switchUserNotification:function(){this.showPanel=!this.showPanel,this.showPanel?(this.currentTime=Date.now(),this.loadUserNotification()):this.currentNotification=1},loadMore:function(){var t=this;this.currentNotification+=this.notificationsPerLoad,this.$store.dispatch("loadNextUserNotifications",this.payload).then(function(){t.loading=!1})},loadUserNotification:function(){var t=this;this.loading=!0,this.$store.dispatch("loadUserNotifications",this.payload).then(function(){t.$store.dispatch("markUserNotificationsOld"),t.loadMore()})},markUserNotificationsRead:function(){var t=this;this.loading=!0,this.$store.dispatch("markUserNotificationsRead").then(function(){t.loading=!1})},loadNextUserNotifications:function(){var t=this;this.loading=!0,this.finalResult||this.$store.dispatch("addUserNotifications",this.nextUserNotifications).then(function(){t.loadMore()})},goToUserNotifications:function(){this.showPanel=!this.showPanel,this.currentNotification=1,this.$router.push({name:"Notifications",params:{type:"user"}})},handleScroll:function(t){t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<100&&!this.loading&&!this.finalResult&&this.loadNextUserNotifications()},toggleUserNotification:function(t){this.$store.dispatch("switchUserNotificationReadStatus",t.id)}},watch:{showPanel:function(t){t?document.body.classList.add("notification_open"):document.body.classList.remove("notification_open")}}},nu={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-nav-item",[a("div",{staticClass:"tooltip-bell",on:{click:t.switchUserNotification}},[a("i",{staticClass:"far fa-bell"}),t._v(" "),t.notificationsCount&&t.notificationsCount.count>0?a("span",{staticClass:"notifications-count"},[t._v(t._s(t.notificationsCount?t.notificationsCount.count:""))]):t._e()]),t._v(" "),t.showPanel?a("div",[a("div",{staticClass:"background-panel",on:{click:t.switchUserNotification}}),t._v(" "),a("NotificationPanel",{attrs:{notifications:t.notifications,panel_style:t.panel_style,loading:t.loading,handleScroll:t.handleScroll,finalResult:t.finalResult,goToFunc:t.goToUserNotifications,markAllFunc:t.markUserNotificationsRead,toggleFunc:t.toggleUserNotification}})],1):t._e()])},staticRenderFns:[]},ou={components:{Avatar:Do,UserNotifications:a("VU/8")(au,nu,!1,null,null,null).exports},data:function(){return{i18n:{lang:this.$t("lang")},isDev:!0,buildTimestamp:"Sat, 06 Oct 2018 14:23:41 GMT"}},methods:{test:function(){console.log("TEST")},showTestToasted:function(){this.$customMsg.showInfoMessage("Info Message"),this.$customMsg.showErrorMessage("Error Message"),this.$customMsg.showSuccessMessage("Success Message")},logout:function(){this.$store.dispatch("logout")}},computed:{user:function(){return this.$store.getters.user}},watch:{"$i18n.locale":function(){this.i18n.lang=this.$t("lang")}}},su={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("body",{class:{"main-wrapper":!0,debug:t.isDev}},[a("header",[a("b-navbar",{staticClass:"navigation",attrs:{toggleable:"md",id:"top-bar"}},[a("b-navbar-brand",{attrs:{to:"/"}},[a("img",{attrs:{src:"/static/images/logo.png",alt:"Balance share"}})]),t._v(" "),a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[t.user?t._e():a("b-navbar-nav",[a("b-nav-item",{attrs:{to:"/login"}},[t._v("Login")]),t._v(" "),a("b-nav-item",{attrs:{to:"/register"}},[t._v("Register")])],1),t._v(" "),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item-dropdown",{attrs:{text:"DEV PAGES",right:""}},[a("b-dropdown-item",{attrs:{to:"/prototype/nomenclatures",exact:""}},[t._v("Nomenclatures")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/matching-tool",exact:""}},[t._v("Matching Tool")])],1),t._v(" "),a("b-nav-item-dropdown",{attrs:{text:t.i18n.lang,right:""}},[a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="en"}}},[t._v("English")]),t._v(" "),a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="bg"}}},[t._v("Български")])],1),t._v(" "),t.user?[a("b-nav-item",{attrs:{to:"/received-invitations"}},[t._v(t._s(t.$t("Invitations")))]),t._v(" "),a("b-nav-item-dropdown",{attrs:{text:t.i18n.lang,right:""}},[a("template",{slot:"button-content"},[a("Avatar",{attrs:{username:t.user.fullName?t.user.fullName:"",src:t.user.profileImageUrl?t.user.profileImageUrl:"",size:25,customStyle:{display:"inline-flex",border:"1px solid lightgray",marginRight:"10px"}}}),t._v(" "),a("div",{staticClass:"d-inline-block"},[t._v(t._s(t.user.fullName))])],1),t._v(" "),a("b-dropdown-item",{attrs:{to:"/user#profile"}},[t._v(t._s(t.$t("Profile")))]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/user#settings"}},[t._v(t._s(t.$t("Settings")))]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/user#password"}},[t._v(t._s(t.$t("Change Password")))]),t._v(" "),a("b-dropdown-divider"),t._v(" "),a("b-dropdown-item",{on:{click:t.logout}},[t._v(t._s(t.$t("Logout")))])],2),t._v(" "),a("UserNotifications")]:t._e()],2)],1)],1)],1),t._v(" "),a("router-view"),t._v(" "),t.isDev?a("div",{attrs:{id:"dev-toolbox"}},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseDevToolbox",modifiers:{collapseDevToolbox:!0}}],attrs:{variant:"outline-danger"}},[t._v("* Dev Toolbox")]),t._v(" "),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapseDevToolbox"}},[a("b-card",[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.test}},[t._v("Test Action")]),t._v(" "),a("button",{staticClass:"btn btn-warning btn-sm",attrs:{type:"button"},on:{click:t.showTestToasted}},[t._v("Test Toast Notification")]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[t._v("\n          "+t._s(t.buildTimestamp)+"\n        ")])])],1)],1):t._e()],1)},staticRenderFns:[]},ru=a("VU/8")(ou,su,!1,null,null,null).exports;a("pQP2");o.a.config.productionTip=!1,o.a.use(r.a),o.a.use(i.a),o.a.use(Jl.a),o.a.use(eu),o.a.component("loading",Kl),o.a.component("c-form-select",Wl),Ll.dispatch("loadUserCash"),new o.a({el:"#app",router:Yr,store:Ll,i18n:D,render:function(t){return t(ru)}})},UpdR:function(t,e){t.exports={" for ":" for ","Acc. Type":"Acc. Type",Actions:"Actions",Admin:"Admin","Add Company":"Add Company","Add FX Rate":"Add FX Rate","Add related party":"Add related party","Add your first company :":"Add your first company :",Add:"Add",Address:"Address","Are you really sure you want to delete this company ?":"Are you really sure you want to delete this company ?",Aliases:"Aliases","Invitation successfully send.":"Invitation successfully send.","Invite from my companies":"Invite from my companies","Amount in doc. currency":"Amount in doc. currency","Amount in":"Amount in",Amount:"Amount","Company Invitation":"Company Invitation","Add from my companies":"Add from my companies","no aliases":"no aliases","Add Average FX Rate":"Add Average FX Rate","Add Daily FX Rate":"Add Daily FX Rate","No manual Rate":"No manual Rate","Auto Units":"Auto Units","Auto Rate":"Auto Rate","Daily Rates":"Daily Rates","Average Rates":"Average Rates","Inherited from parent":"Inherited from parent",Notifications:"Notifications","Mark all as read":"Mark all as read","See all":"See all","Go to my companies":"Go to my companies","Currently there are no invitations.":"Currently there are no invitations.","Are you sure ?":"Are you sure ?","Are you sure you want to STOP auto Fx Rate ?":"Are you sure you want to STOP auto Fx Rate ?","Are you sure you want to STOP auto for selected Fx Rates ?":"Are you sure you want to STOP auto for selected Fx Rates ?",Assignee:"Assignee",Audit:"Audit","Company:":"Company:",Back:"Back",With:"With","For period":"For period",Cancel:"Cancel","Change Password":"Change Password","Close/Open":"Close/Open",Code:"Code","Collaborator's Email:":"Collaborator's Email:",Collaborators:"Collaborators",Companies:"Companies","Company Name":"Company Name",Company:"Company",Confirm:"Confirm","Contact Person Email":"Contact Person Email",Contact:"Contact","Contacts page.":"Contacts page.",Contacts:"Contacts","Corporate Tax ID":"Corporate Tax ID","Corporate Tax":"Corporate Tax",Country:"Country","Create Reconciliation":"Create Reconciliation",Create:"Create",Creator:"Creator",Currency:"Currency",DDL:"DDL",Date:"Date",Dates:"Dates",Deadline:"Deadline",Delete:"Delete","Delete Company":"Delete Company",Description:"Description","Direct Parent":"Direct Parent",Disclose:"Disclose","Doc. Currency":"Doc. Currency","Successfully deleted reconciliation.":"Successfully deleted reconciliation.","Doc. Date":"Doc. Date","Due Date":"Due Date",Edit:"Edit",Email:"Email","End date is before start date":"End date is before start date","Error in creating FxRate :":"Error in creating FxRate :",Error:"Error",Errors:"Errors","Excel file":"Excel file","FX Rate":"FX Rate","Filing Deadline":"Filing Deadline",Filter:"Filter",Finished:"Finished","First Name":"First Name","Forgot password?":"Forgot password?","From date":"From date",From:"From","Fx Rates":"Fx Rates","FxRecord Type":"FxRecord Type",Invalid:"Invalid",Invitations:"Invitations","Invite Company":"Invite Company","It is currently a related party":"It is currently a related party","Items per page":"Items per page",Label:"Label",Language:"Language","Last Name":"Last Name","Last SuperUser cannot be edited!":"Last SuperUser cannot be edited!",Line:"Line","Login successful":"Login successful",Login:"Login",Logout:"Logout",Matched:"Matched",Message:"Message",Misc:"Misc",Month:"Month",Name:"Name","New picture":"New picture",Next:"Next","No companies found":"No companies found","No company found":"No company found","No more results.":"No more results.","No parent":"No parent",Now:"Now",Number:"Number",OK:"OK","Old Password":"Old Password",Open:"Open",Opposite:"Opposite","Out of Period":"Out of Period","Own currency":"Own currency",Own:"Own",Password:"Password",Payer:"Payer","Parent company":"Parent company","Pending valid transactions with recognized companies":"Pending valid transactions with recognized companies",Personnel:"Personnel",Phone:"Phone","Please enter the complete legal name as per registration":"Please enter the complete legal name as per registration","Please fill all info!":"Please fill all info!","Please, check your email and confirm the registration by clicking on the link in it.":"Please, check your email and confirm the registration by clicking on the link in it.","Please, check your email, click on the link and reset your password.":"Please, check your email, click on the link and reset your password.","Please, enter a valid email":"Please, enter a valid email","Please, enter a valid name":"Please, enter a valid name","Please, enter company's registration number":"Please, enter company's registration number","Please, enter description":"Please, enter description","Please, enter the password":"Please, enter the password","Please, enter your first name.":"Please, enter your first name.","Please, enter your last name.":"Please, enter your last name.","Please, enter your old password":"Please, enter your old password","Please, enter your phone number.":"Please, enter your phone number.","Please, fill the required fields.":"Please, fill the required fields.","Please, repeat the password":"Please, repeat the password","Please, select a company":"Please, select a company","Please, select a contact":"Please, select a contact","Please, select a country":"Please, select a country","Please, select a date":"Please, select a date","Please, select a role":"Please, select a role","Please, select a starting date":"Please, select a starting date","Please, select a statement type":"Please, select a statement type","Please, select an Excel file":"Please, select an Excel file","Please, select at least one statement":"Please, select at least one statement","Posting Date":"Posting Date",Profile:"Profile",Rate:"Rate",Rates:"Rates","Receiver Email":"Receiver Email",Receiver:"Receiver",Recognize:"Recognize",Reconciliations:"Reconciliations",Records:"Records","Ref #":"Ref #","Reg Number":"Reg Number",Register:"Register","Registration ID":"Registration ID","Registration number":"Registration number",Rejected:"Rejected",Remove:"Remove",Removed:"Removed","Repeat Password":"Repeat Password","Repeated password is not the same":"Repeated password is not the same","Reporting Currency":"Reporting Currency","Reporting Regularity":"Reporting Regularity",Reset:"Reset",Responsibility:"Responsibility","Results per page":"Results per page",Role:"Role","Sales Tax ID":"Sales Tax ID",Save:"Save","Saved records successfully":"Saved records successfully","Select ":"Select ","Select Logo":"Select Logo","Select country: ":"Select country: ","Select currency ...":"Select currency ...",Sender:"Sender",Settings:"Settings","Show All":"Show All",Software:"Software",Source:"Source","Start Reconciliation":"Start Reconciliation","Statement Type":"Statement Type","Statement type":"Statement type","Statement types":"Statement types",Status:"Status","Stop Notification":"Stop Notification",Submit:"Submit",Success:"Success","Successfully changed company logo":"Successfully changed company logo","Successfully changed user avatar":"Successfully changed user avatar","Successfully created ":"Successfully created ","Successfully deleted company logo":"Successfully deleted company logo","Successfully deleted user avatar":"Successfully deleted user avatar",Summary:"Summary",TOTAL:"TOTAL",Taxes:"Taxes","There aren't any contacts added yet.":"There aren't any contacts added yet.","There aren't any invitations.":"There aren't any invitations.","This user cannot be deleted!":"This user cannot be deleted!","To date":"To date",To:"To","Top Parent":"Top Parent","Transactions Type":"Transactions Type","Turn selected OFF":"Turn selected OFF",Type:"Type",Units:"Units",Unmatched:"Unmatched","Updated account info for":"Updated account info for",Upload:"Upload","VAT / Sales Tax ID":"VAT / Sales Tax ID","VAT ID":"VAT ID","Valid transactions with unrecognized companies":"Valid transactions with unrecognized companies","Valid with recognized companies":"Valid with recognized companies","Valid with unrecognized companies":"Valid with unrecognized companies","View Details":"View Details","View details":"View details","We have received your registration and have sent a mail to your email address.":"We have received your registration and have sent a mail to your email address.","We have received your request for recovery and have sent a mail to your email address.":"We have received your request for recovery and have sent a mail to your email address.","You are going to change auto Fx Rate for ":"You are going to change auto Fx Rate for ","You are going to start auto Fx Rate for ":"You are going to start auto Fx Rate for ","You can save these transactions.":"You can save these transactions.","You do not have enough permissions to change to this role!":"You do not have enough permissions to change to this role!","You need to have contact companies in order to mark some of them as related parties.":"You need to have contact companies in order to mark some of them as related parties.","You need to have contact companies in order to reconcile with them. You can invite companies in ":"You need to have contact companies in order to reconcile with them. You can invite companies in ","[x] Remove Filters":"[x] Remove Filters","click on avatar to change it":"click on avatar to change it","click on logo to change it":"click on logo to change it",forgotPageTitle:"Forgotten Password",forgotPasswordText:"Enter your email, so we can send a message with instruction, on how to reset your password.",lang:"EN",loginFormSubmit:"Login",loginPageTitle:"Login","on/off":"on/off",reconciliation:"reconciliation",reconciliations:"reconciliations",regFormSubmit:"Register",registerPageTitle:"Register account","require FX rate":"require FX rate",resetFormSubmit:"Reset",uploadPageValidUnrecognizedText:"You can link unrecognized name to a company from your contacts and this name will ba saved as a company alias. Then the company will appear in the table with pending valid transactions from recognized companies."}},YFeG:function(t,e){t.exports={lang:"БГ",Name:"Име",Email:"Имейл",Phone:"Телефон",Language:"Език"}},a93R:function(t,e,a){var n=a("o31/");t.exports=function(t){return{computed:{pageItems:function(){return t.getters.pageItems(this.itemsPerPage)},totalRows:function(){return t.getters.totalRows},pages:function(){return t.getters.totalPages(this.itemsPerPage)},page:{get:function(){return t.getters.page},set:function(e){t.commit("setPage",e)}}},methods:{setItemsPerPage:n.debounce(function(e){var a=+e.target.value;t.commit("setPage",1),!isNaN(a)&&a>0?this.itemsPerPage=a:this.itemsPerPage=10},300)}}}},mwaQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"TreeNode",components:{TreeLeaf:function(){return a.e(0).then(a.bind(null,"FkDT"))}},props:["nodes","state","preselectedCompany"],computed:{items:function(){return this.nodes}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",t._l(t.items,function(e){return a("TreeLeaf",{key:e[t.state.idProp],attrs:{node:e,state:t.state,preselectedCompany:t.preselectedCompany}})}))},staticRenderFns:[]},s=a("VU/8")(n,o,!1,null,null,null);e.default=s.exports},"o31/":function(t,e,a){"use strict";function n(t,e,a){var n;return function(){var o=this,s=arguments,r=a&&!n;clearTimeout(n),n=setTimeout(function(){n=null,a||t.apply(o,s)},e),r&&t.apply(o,s)}}function o(t,e,a){return a[e]||(a[e]=Function("obj","return obj."+e)),a[e](t)}Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"debounce",function(){return n}),a.d(e,"memoizedLookupFunction",function(){return o})},pGLP:function(t,e,a){"use strict";var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.company.logo?a("div",{class:["logo","logo-"+t.size],style:t.logoStyle},[t.company.logo.URL?t._e():a("div",{staticClass:"logo-initials"},[t._v(t._s(t.company.logo.initials))]),t._v(" "),a("div",{style:t.flagStyle})]):t._e()},staticRenderFns:[]},o=a("VU/8")({props:{company:{required:!0},size:{required:!0}},computed:{logoStyle:function(){return this.company.logo.URL?{"background-image":"url("+this.company.logo.URL+")"}:{}},flagStyle:function(){return{"background-image":"url(/static/flags/"+this.company.country.code+".svg)"}}}},n,!1,null,null,null);e.a=o.exports},pQP2:function(t,e){},sb1D:function(module,__webpack_exports__,__webpack_require__){"use strict";function compareDays(t,e){return compareMonths(t,e)&&t.getDate()===e.getDate()}function compareMonths(t,e){return compareYears(t,e)&&t.getMonth()===e.getMonth()}function compareYears(t,e){return t.getFullYear()===e.getFullYear()}function searchStringInString(t,e){return t.toLowerCase().indexOf(e.toLowerCase())>-1}function matchExactString(t,e){return t===e}__webpack_exports__.a={number:function(t,e){return+t==+e},modifNumber:function modifNumber(numA,numB,mod){return eval("+numA"+mod+"+numB")},rangeNumber:function(t,e,a){return e<=t&&t<=a},string:function(t,e){return t&&searchStringInString(t,e)},exactString:function(t,e){return t&&matchExactString(t,e)},numAsString:function(t,e){return null!==t&&searchStringInString(""+t,e)},day:function(t,e){return compareDays(t,e)},month:function(t,e){return compareMonths(t,e)},year:function(t,e){return compareYears(t,e)}}},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.be131e47e9435550c618.js.map