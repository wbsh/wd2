webpackJsonp([1],{"1/oy":function(t,e){},"1IYV":function(t,e){},Id91:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};a.d(n,"apiToCountry",function(){return le}),a.d(n,"apiToCurrency",function(){return ce});var s=a("/5sW"),r=(a("1IYV"),a("sUu7")),o=a("ESwS"),i=a.n(o),l=a("e6fC"),c=a("//Fk"),d=a.n(c),u=a("mtWM"),m=a.n(u),p=a("NYxO"),v=a("mvHQ"),f=a.n(v);function _(t){return{email:t.email,firstName:t.firstName,lastName:t.lastName,phone:t.phone}}var h=function(t){var e={email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName,phone:t.phone};return m.a.post("/Account/",e).then(_)},g=function(t){var e=t.email,a=t.password,n={headers:{Authorization:"Basic "+btoa(e+":"+a)}};return m.a.post("/Account/Login",null,n)},y=function(){return m.a.get("/Account/Logout")},C=function(t){return m.a.post("/Account/Recover",{email:t})},b=function(t,e){return m.a.post("/Account/Recover/"+t,{password:e})},x=a("Gu7T"),$=a.n(x),w=a("/ocq");function D(t,e,a){ta.getters.token?a({path:"/"}):a()}function P(t,e,a){ta.getters.token?"/login"===e.path&&e.query.redirect&&e.query.redirect!==t.path?a({path:e.query.redirect}):a():a({path:"/login",query:{redirect:t.fullPath}})}var M=a("+cKO"),F={validations:{formData:{firstName:{required:M.required},lastName:{required:M.required},phone:{required:M.required},password:{required:M.required},email:{required:M.required,email:M.email}}},data:function(){return{formData:{firstName:null,lastName:null,phone:null,password:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("register",this.formData).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.error)}).finally(function(){t.loading=!1}))}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"register-form",on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("FirstName"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.firstName,expression:"formData.firstName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.firstName.required&&t.$v.formData.firstName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.firstName},on:{blur:function(e){t.$v.formData.firstName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"firstName",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter your first name.")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("LastName"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.lastName,expression:"formData.lastName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.lastName.required&&t.$v.formData.lastName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.lastName},on:{blur:function(e){t.$v.formData.lastName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"lastName",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter your last name.")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.phone.required&&t.$v.formData.phone.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.phone},on:{blur:function(e){t.$v.formData.phone.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter your phone number.")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.required&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter a password.")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("regFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},N={components:{RegisterForm:a("VU/8")(F,S,!1,null,null,null).exports},data:function(){return{isActionSuccessful:!1}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("registerPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("register-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v("Forgot password?")])],1)]),t._v(" "),t.isActionSuccessful?a("div",[a("p",[t._v("We have received your registration and have sent a mail to your email address.")]),t._v(" "),a("p",[t._v("Please, check your email and confirm the registration by clicking on the link in it.")])]):t._e()])])])},staticRenderFns:[]},A=a("VU/8")(N,k,!1,null,null,null).exports,E={validations:{formData:{password:{required:M.required},email:{required:M.required,email:M.email}}},data:function(){return{formData:{password:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("login",this.formData).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1}))}}},T={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"login-form",on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.required&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter password.")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("loginFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},R={components:{LoginForm:a("VU/8")(E,T,!1,null,null,null).exports},methods:{onLogin:function(){this.$router.push("/")}}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("loginPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("login-form",{on:{success:t.onLogin}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v("Forgot password?")])],1)])])])])},staticRenderFns:[]},I=a("VU/8")(R,q,!1,null,null,null).exports,V={validations:{formData:{email:{required:M.required,email:M.email}}},data:function(){return{formData:{email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,C(this.formData.email).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1}))}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"forgot-pass-form",on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("loginFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},L={components:{ForgotPassForm:a("VU/8")(V,U,!1,null,null,null).exports},data:function(){return{isActionSuccessful:!1}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("forgotPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("forgot-pass-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))])],1)]),t._v(" "),t.isActionSuccessful?a("div",[a("p",[t._v("We have received your request for recovery and have sent a mail to your email address.")]),t._v(" "),a("p",[t._v("Please, check your email, click on the link and reset your password.")])]):t._e()])])])},staticRenderFns:[]},z=a("VU/8")(L,O,!1,null,null,null).exports,K={props:["token"],validations:{formData:{password:{required:M.required},repPassword:{required:M.required,sameAsPass:Object(M.sameAs)("password")}}},data:function(){return{formData:{password:null,repPassword:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,b(this.token,this.formData.password).then(function(e){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1}))}}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"reset-pass-form",on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.required&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter the password")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.repPassword.sameAsPass&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.sameAsPass?t.$t("Repeated password is not the same"):t.$t("Please, repeat the password"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("resetFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},B={components:{ResetPassForm:a("VU/8")(K,j,!1,null,null,null).exports},props:["token"],data:function(){return{isActionSuccessful:!1}}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("resetPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("reset-pass-form",{attrs:{token:t.token},on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v("Forgot password?")])],1)]),t._v(" "),t.isActionSuccessful?a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Password reset was successfull"))+".")]),t._v(" "),a("b-button",{attrs:{size:"lg",variant:"success",to:"/login"}},[t._v(t._s(t.$t("Login")))])],1):t._e()])])])},staticRenderFns:[]},G=[{path:"/register",name:"Register",component:A,meta:{pageId:"register-page",pageClass:""},beforeEnter:D},{path:"/login",name:"Login",component:I,meta:{pageId:"login-page",pageClass:""},beforeEnter:D},{path:"/forgot",name:"Forgot",component:z,meta:{pageId:"forgot-page",pageClass:""},beforeEnter:D},{path:"/reset/:token",name:"Reset",component:a("VU/8")(B,X,!1,null,null,null).exports,props:!0,meta:{pageId:"reset-page",pageClass:""},beforeEnter:D}],H={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("Contacts")])])}]},W=a("VU/8")({data:function(){return{loading:!1}}},H,!1,null,null,null).exports,Y=a("fZjL"),Q=a.n(Y),J=a("woOf"),Z=a.n(J);var tt={removeNulls:function t(e){var a=Z()({},e);return Q()(a).forEach(function(e){if(a[e]){if(a[e].constructor===Object){var n=t(a[e]);Q()(n).length?a[e]=n:delete a[e]}}else delete a[e]}),Q()(a).length?a:null},hasAnyData:function(t){return!!Q()(t).find(function(e){return t[e]})}},et=a("mB6w"),at=a.n(et),nt={props:{save:{required:!0,type:Function},remove:{required:!0,type:Function},cancel:{required:!0,type:Function},validate:{required:!0,type:Function},editMode:{default:!1}},data:function(){return{isEditMode:this.editMode,errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.loading=!0,this.errMsg=null,this.validate().then(function(e){return e?t.save():d.a.reject(new Error("Please, fill the required fields."))}).then(function(){t.cancelEdit()}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1})},cancelEdit:function(){this.cancel(),this.isEditMode=!1,this.errMsg=null},edit:function(){this.isEditMode=!0},del:function(){var t=this;this.loading=!0,this.remove().catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1})}},watch:{isEditMode:function(t){this.$emit("edit",t)}}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"company-property-row",on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"cp-col"},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v("\n      "+t._s(t.errMsg)+"\n    ")]):t._e(),t._v(" "),t._t("default")],2),t._v(" "),t.isEditMode?t._e():a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:t.edit}},[t._v("Edit")]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.del}},[t._v("Delete")])]),t._v(" "),t.isEditMode?a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit"}},[t._v("Save")]),t._v(" "),a("button",{staticClass:"btn btn-light btn-sm",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v("Cancel")])]):t._e(),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},rt={components:{CpForm:a("VU/8")(nt,st,!1,null,null,null).exports},props:{cProp:{required:!0,default:{}}},methods:{onEdit:function(t){this.editMode=t},validate:function(){return this.$validator.validateAll()},cancel:function(){this.cpModel=Z()({},this.cProp),this.$emit("cancel")}}},ot={data:function(){return{cpModel:Z()({},this.cProp),editMode:!this.cProp.aname}},methods:{save:function(){var t=this;return(this.cProp.aname?this.$store.dispatch("updateSCAlias",{alias:this.cProp,updatedAname:this.cpModel.aname}):this.$store.dispatch("createSCAlias",this.cpModel.aname)).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCAlias",this.cProp).then(function(){t.$emit("remove")})}}},it=at()({},rt,ot),lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.aname},on:{edit:t.onEdit}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.cpModel.aname,expression:"cpModel.aname"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("aname")}],attrs:{type:"text",name:"aname",disabled:!t.editMode},domProps:{value:t.cpModel.aname},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"aname",e.target.value)}}})])},staticRenderFns:[]},ct=a("VU/8")(it,lt,!1,null,null,null).exports,dt=function(t){var e={data:function(){return{cpModel:Z()({},this.cProp),editMode:!1}},computed:{hasAnyData:function(){var t=!!this.cProp&&tt.hasAnyData(this.cProp);return this.editMode=!t,t}},methods:{validate:function(){return tt.hasAnyData(this.cpModel)?d.a.resolve(!0):d.a.reject(new Error("Please, enter some data."))},save:function(){var e=this,a={};return a[t]=this.cpModel,this.$store.dispatch("updateSelCompany",a).then(function(){e.$emit("success")})},remove:function(){var e=this,a={};return a[t]=Q()(this.cProp).reduce(function(t,e){return t[e]=null,t},{}),this.$store.dispatch("updateSelCompany",a).then(function(){e.$emit("remove")})}}};return at()({},rt,e)},ut={mixins:[dt("corpTax")]},mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.hasAnyData},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxId"}},[t._v("Corporate Tax ID:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.num,expression:"cpModel.num"}],staticClass:"form-control",attrs:{id:"corpTaxId",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.num},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"num",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxFillingDate"}},[t._v("Filing Deadline:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.fillingDate,expression:"cpModel.fillingDate"}],staticClass:"form-control",attrs:{id:"corpTaxFillingDate",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.fillingDate},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"fillingDate",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxDueDate"}},[t._v("Due Date:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.dueDate,expression:"cpModel.dueDate"}],staticClass:"form-control",attrs:{id:"corpTaxDueDate",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.dueDate},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"dueDate",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxAdvancedPayments"}},[t._v("Advanced Payments: to do ...:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.advancedPayments,expression:"cpModel.advancedPayments"}],staticClass:"form-control",attrs:{id:"corpTaxAdvancedPayments",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.advancedPayments},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"advancedPayments",e.target.value)}}})])])},staticRenderFns:[]},pt=a("VU/8")(ut,mt,!1,null,null,null).exports,vt={mixins:[dt("audit")]},ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.hasAnyData},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorName"}},[t._v("Name:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"}],staticClass:"form-control",attrs:{id:"auditorName",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorEmail"}},[t._v("Email:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",attrs:{id:"auditorEmail",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorPhone"}},[t._v("Phone:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"}],staticClass:"form-control",attrs:{id:"auditorPhone",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorDdl"}},[t._v("Deadline:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.ddl,expression:"cpModel.ddl"}],staticClass:"form-control",attrs:{id:"auditorDdl",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.ddl},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"ddl",e.target.value)}}})])])},staticRenderFns:[]},_t=a("VU/8")(vt,ft,!1,null,null,null).exports,ht={created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadCountries").finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{country:{}}}}},data:function(){return{cpModel:Z()({},this.cProp),editMode:!this.cProp.num}},computed:{countries:function(){return this.$store.getters.countries}},methods:{save:function(){var t=this,e=this.cProp.num?"updateSCVat":"createSCVat";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCVat",this.cProp).then(function(){t.$emit("remove")})}}},gt=at()({},rt,ht),yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.num},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",[t._v("Country:")]),t._v(" "),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("country")}],attrs:{name:"country",disabled:!t.editMode,plain:!0},model:{value:t.cpModel.country.id,callback:function(e){t.$set(t.cpModel.country,"id",e)},expression:"cpModel.country.id"}},t._l(t.countries,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(1===t.cpModel.countryId?"VAT ID":"Sales Tax ID")+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.num,expression:"cpModel.num"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("num")}],attrs:{type:"text",name:"num",disabled:!t.editMode},domProps:{value:t.cpModel.num},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"num",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v("Reporting Regularity:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.reportingRegularity,expression:"cpModel.reportingRegularity"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("repReg")}],attrs:{type:"text",name:"repReg",disabled:!t.editMode},domProps:{value:t.cpModel.reportingRegularity},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"reportingRegularity",e.target.value)}}})])])},staticRenderFns:[]},Ct=a("VU/8")(gt,yt,!1,null,null,null).exports,bt={created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadResponsibilityKeys").finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{responsibility:{}}}}},data:function(){return{cpModel:Z()({},this.cProp),editMode:!this.cProp.name}},computed:{responsibilityKeys:function(){return this.$store.getters.responsibilityKeys}},methods:{save:function(){var t=this,e=this.cProp.num?"updateSCPersonnel":"createSCPersonnel";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCPersonnel",this.cProp).then(function(){t.$emit("remove")})}}},xt=at()({},rt,bt),$t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.name},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",[t._v("Responsibility:")]),t._v(" "),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("responsibility")}],attrs:{name:"responsibility",disabled:!t.editMode,plain:!0},model:{value:t.cpModel.responsibility.id,callback:function(e){t.$set(t.cpModel.responsibility,"id",e)},expression:"cpModel.responsibility.id"}},t._l(t.responsibilityKeys,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v("Name:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",name:"name",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v("Email:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",name:"email",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v("Phone:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("phone")}],attrs:{type:"text",name:"phone",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})])])},staticRenderFns:[]},wt=a("VU/8")(xt,$t,!1,null,null,null).exports;var Dt={getFirstLetter:function(t){return t.slice(0,1)},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},Pt={misc:0,tax:1,software:2,responsibility:3},Mt={created:function(){var t=this;this.cProp.category||(this.cpModel.category={id:Pt[this.cat]}),this.loading=!0;var e="load"+Dt.capitalizeFirstLetter(this.storeKeysName);this.$store.dispatch(e).finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{key:{}}}},cat:{required:!0}},data:function(){return{cpModel:Z()({},this.cProp),storeKeysName:this.cat+"Keys",editMode:!this.cProp.value}},computed:{keys:function(){return this.$store.getters[this.storeKeysName]}},methods:{save:function(){var t=this,e=this.cProp.value?"updateSCCPPair":"createSCCPPair";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCCPPair",this.cProp).then(function(){t.$emit("remove")})}}},Ft=at()({},rt,Mt),St={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.value},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row cp-pair"},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("key")}],attrs:{name:"key",disabled:!t.editMode,plain:!0},model:{value:t.cpModel.key.id,callback:function(e){t.$set(t.cpModel.key,"id",e)},expression:"cpModel.key.id"}},t._l(t.keys,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.label))])})),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.value,expression:"cpModel.value"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("value")}],attrs:{name:"value",disabled:!t.editMode,rows:"3"},domProps:{value:t.cpModel.value},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"value",e.target.value)}}})],1)])},staticRenderFns:[]},Nt={components:{Alias:ct,CorpTax:pt,Audit:_t,Vat:Ct,Personnel:wt,CpPair:a("VU/8")(Ft,St,!1,null,null,null).exports},data:function(){return{showAliasForm:!1,showCorpTax:!1,showAudit:!1,showVatForm:!1,showPersonnelForm:!1,showTaxForm:!1,showSoftwareForm:!1,showMiscForm:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}},hasAnyCorpTaxData:function(){return!!this.company.corpTax&&tt.hasAnyData(this.company.corpTax)},hasAnyAuditData:function(){return!!this.company.audit&&tt.hasAnyData(this.company.audit)}}},kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"company-profile"},[a("h1",[t._v("Profile")]),t._v(" "),a("h2",[t._v("Registration ID")]),t._v(" "),a("h2",[t._v("Aliases")]),t._v(" "),t._l(t.company.aliases,function(t){return a("alias",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showAliasForm?a("alias",{attrs:{"c-prop":{companyId:t.company.id,refCompanyId:t.company.id}},on:{cancel:function(e){t.showAliasForm=!1}}}):t._e(),t._v(" "),t.showAliasForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAliasForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Corporate Tax")]),t._v(" "),t.hasAnyCorpTaxData||!t.hasAnyCorpTaxData&&t.showCorpTax?a("corp-tax",{attrs:{"c-prop":t.company.corpTax},on:{cancel:function(e){t.showCorpTax=!1}}}):t._e(),t._v(" "),t.hasAnyCorpTaxData||t.showCorpTax?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showCorpTax=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Audit")]),t._v(" "),t.hasAnyAuditData||!t.hasAnyAuditData&&t.showAudit?a("audit",{attrs:{"c-prop":t.company.audit},on:{cancel:function(e){t.showAudit=!1}}}):t._e(),t._v(" "),t.hasAnyAuditData||t.showAudit?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAudit=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("VAT / Sales Tax")]),t._v(" "),t._l(t.company.vats,function(t){return a("vat",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showVatForm?a("vat",{on:{cancel:function(e){t.showVatForm=!1}}}):t._e(),t._v(" "),t.showVatForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showVatForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Personnel")]),t._v(" "),t._l(t.company.personnel,function(t){return a("personnel",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showPersonnelForm?a("personnel",{on:{cancel:function(e){t.showPersonnelForm=!1}}}):t._e(),t._v(" "),t.showPersonnelForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showPersonnelForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Taxes")]),t._v(" "),t._l(t.company.taxes,function(t){return a("cp-pair",{key:t.id,attrs:{"c-prop":t,cat:"tax"}})}),t._v(" "),t.showTaxForm?a("cp-pair",{attrs:{cat:"tax"},on:{cancel:function(e){t.showTaxForm=!1}}}):t._e(),t._v(" "),t.showTaxForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showTaxForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Software")]),t._v(" "),t._l(t.company.software,function(t){return a("cp-pair",{key:t.id,attrs:{"c-prop":t,cat:"software"}})}),t._v(" "),t.showSoftwareForm?a("cp-pair",{attrs:{cat:"software"},on:{cancel:function(e){t.showSoftwareForm=!1}}}):t._e(),t._v(" "),t.showSoftwareForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showSoftwareForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Misc")]),t._v(" "),t._l(t.company.misc,function(t){return a("cp-pair",{key:t.id,attrs:{"c-prop":t,cat:"misc"}})}),t._v(" "),t.showMiscForm?a("cp-pair",{attrs:{cat:"misc"},on:{cancel:function(e){t.showMiscForm=!1}}}):t._e(),t._v(" "),t.showMiscForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showMiscForm=!0}}},[t._v("+ Add")])],2)},staticRenderFns:[]},At={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("Collaborators")])])}]},Et=[{path:"contacts",name:"Contacts",component:W,meta:{pageId:"contacts-page",pageClass:""},beforeEnter:P},{path:"profile",name:"CompanyProfile",component:a("VU/8")(Nt,kt,!1,null,null,null).exports,meta:{pageId:"profile-page",pageClass:""},beforeEnter:P},{path:"collaborators",name:"Collaborators",component:a("VU/8")({data:function(){return{loading:!1}}},At,!1,null,null,null).exports,meta:{pageId:"collaborators-page",pageClass:""},beforeEnter:P}],Tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["logo","logo-"+t.size]},[t.logo.src?a("img",{attrs:{src:t.logo.src}}):a("div",[t._v(t._s(t.logo.initials))]),t._v(" "),a("img",{staticClass:"flag",attrs:{src:"/static/flags/"+t.countryCode+".svg",target:"_blank"}})])},staticRenderFns:[]},Rt={components:{LogoFlag:a("VU/8")({props:{logo:{},size:{},countryCode:{default:"us"}},methods:{style:function(t){return{background:"url(/static/flags/"+t+".svg)"}}}},Tt,!1,null,null,null).exports},props:["company","size"]},qt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["company-card","company-card-"+t.size]},[a("logo-flag",{attrs:{logo:t.company.logo,size:t.size,countryCode:t.company.country.code}}),t._v(" "),a("div",{staticClass:"company-card-name"},[t._v(t._s(t.company.name))])],1)},staticRenderFns:[]},It={components:{CompanyCard:a("VU/8")(Rt,qt,!1,null,null,null).exports},props:["companies"]},Vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),a("tbody",t._l(t.companies,function(e){return a("tr",[a("th",[a("router-link",{attrs:{to:"/companies/"+e.id}},[a("company-card",{attrs:{company:e,size:"m"}})],1)],1),t._v(" "),a("td",[t._v(t._s(e.aliases.map(function(t){return t.aname}).join(", ")))]),t._v(" "),a("td",[t._v(t._s(e.regNum))]),t._v(" "),a("td",[t._v(t._s(e.currency.code))]),t._v(" "),a("td",[t._v(t._s(e.parent.name))]),t._v(" "),a("td",[t._v(t._s(e.topParent))]),t._v(" "),t._m(1,!0)])}))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Aliases")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Reg Number")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Reporting Currency")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Direct Parent")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Top Parent")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Actions")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("...")]),this._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-right"},[e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Upload")]),this._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Start Reconciliation")])])])])}]},Ut={components:{CompaniesTable:a("VU/8")(It,Vt,!1,null,null,null).exports},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadMyCompanies").finally(function(){t.loading=!1})},data:function(){return{loading:!1}},computed:{myCompanies:function(){return this.$store.getters.myCompanies}}},Lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col mx-auto pt-5"},[a("h1",[t._v("Companies")]),t._v(" "),t.myCompanies.length?a("div",[a("router-link",{staticClass:"btn btn-success btn-sm",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))]),t._v(" "),a("companies-table",{attrs:{companies:t.myCompanies}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1):t._e(),t._v(" "),t.myCompanies.length?t._e():a("div",{staticClass:"text-center"},[a("p",[t._v("Add your first company : )")]),t._v(" "),a("router-link",{staticClass:"btn btn-success btn-lg",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))])],1)])])])},staticRenderFns:[]},Ot=a("VU/8")(Ut,Lt,!1,null,null,null).exports,zt=a("Dd8w"),Kt=a.n(zt),jt={name:null,regNum:null,country:null,currency:null,address:null,parent:null,logo:null},Bt={created:function(){var t=this;this.loading=!0;var e=this.$store.dispatch("loadCountries"),a=this.$store.dispatch("loadCurrencies"),n=this.$store.dispatch("loadMyCompanies");d.a.all([e,a,n]).finally(function(){t.loading=!1})},data:function(){return{formData:Kt()({},jt),errMsg:null,loading:!1}},computed:{countries:function(){return this.$store.getters.countries},currencies:function(){return this.$store.getters.currencies},myCompanies:function(){return this.$store.getters.myCompanies}},methods:{validate:function(){return this.$validator.validateAll()},submit:function(){var t=this;this.loading=!0,this.validate().then(function(e){return e?t.$store.dispatch("createCompany",t.formData):d.a.reject(new Error("Please, fill the required fields."))}).then(function(e){t.$emit("success",e)}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1})}}},Xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"add-company-form",on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("h1",[t._v("TODO: Logo")]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("Company Name:")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",id:"name",placeholder:"Company Name",name:"name"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted"},[t._v("The complete registered name.")])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"regId"}},[t._v("Registration ID:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.regNum,expression:"formData.regNum"}],staticClass:"form-control",attrs:{type:"text",id:"regId",placeholder:"Registration ID"},domProps:{value:t.formData.regNum},on:{input:function(e){e.target.composing||t.$set(t.formData,"regNum",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"country"}},[t._v("Country:")]),t._v(" "),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("country")}],attrs:{id:"country",name:"country",plain:!0},model:{value:t.formData.country,callback:function(e){t.$set(t.formData,"country",e)},expression:"formData.country"}},[a("template",{slot:"first"},[a("option",{attrs:{selected:"",disabled:""},domProps:{value:null}},[t._v("Country")])]),t._v(" "),t._l(t.countries,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.name))])})],2)],1),t._v(" "),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"currency"}},[t._v("Reporting Currency:")]),t._v(" "),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("currency")}],attrs:{id:"currency",name:"currency",plain:!0},model:{value:t.formData.currency,callback:function(e){t.$set(t.formData,"currency",e)},expression:"formData.currency"}},[a("template",{slot:"first"},[a("option",{attrs:{selected:"",disabled:""},domProps:{value:null}},[t._v("Currency")])]),t._v(" "),t._l(t.currencies,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.code)+" - "+t._s(e.name))])})],2)],1)]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[t._v("Address:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],staticClass:"form-control",attrs:{type:"text",id:"address",placeholder:"Address"},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}})]),t._v(" "),t.myCompanies.length?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"parent"}},[t._v("Parent company:")]),t._v(" "),a("b-form-select",{attrs:{id:"parent",plain:!0},model:{value:t.formData.parent,callback:function(e){t.$set(t.formData,"parent",e)},expression:"formData.parent"}},[a("template",{slot:"first"},[a("option",{domProps:{value:null}},[t._v("Parent company")])]),t._v(" "),t._l(t.myCompanies,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.name))])})],2)],1):t._e(),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Save")]),t._v(" "),t._t("default")],2),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Gt={name:"AddCompany",components:{AddCompanyForm:a("VU/8")(Bt,Xt,!1,null,null,null).exports},methods:{onAddedCompany:function(t){this.$router.push({name:"CompanyProfile",params:{id:t.id}})},cancel:function(){this.$router.go(-1)}}},Ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 mx-auto pt-5"},[e("div",{staticClass:"card"},[e("h2",{staticClass:"card-header text-center"},[this._v(this._s(this.$t("Add Company")))]),this._v(" "),e("div",{staticClass:"card-body"},[e("add-company-form",{on:{success:this.onAddedCompany}},[e("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:this.cancel}},[this._v("Cancel")])])],1)])])])])},staticRenderFns:[]},Wt=a("VU/8")(Gt,Ht,!1,null,null,null).exports,Yt={data:function(){return{formData:{statement:1}}},methods:{submit:function(){alert("Bai Hui")}}},Qt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h1",[t._v("Matching Tool")]),t._v(" "),a("form",{on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"country"}},[t._v("Statement type:")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.statement,expression:"formData.statement"}],staticClass:"form-control",attrs:{id:"country",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"statement",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1",selected:""}},[t._v("Balance Sheet")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Income Statement")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("Cash Flow Statement")])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"from"}},[t._v("From:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.from,expression:"formData.from"}],staticClass:"form-control",attrs:{type:"text",id:"from",required:""},domProps:{value:t.formData.from},on:{input:function(e){e.target.composing||t.$set(t.formData,"from",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"to"}},[t._v("To:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.to,expression:"formData.to"}],staticClass:"form-control",attrs:{type:"text",id:"to",required:""},domProps:{value:t.formData.to},on:{input:function(e){e.target.composing||t.$set(t.formData,"to",e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"file1"}},[this._v("Own Company File:")]),this._v(" "),e("div",{staticClass:"custom-file"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file1"}}),this._v(" "),e("label",{staticClass:"custom-file-label",attrs:{for:"file1"}},[this._v("Choose file")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"file2"}},[this._v("Opposite Company File:")]),this._v(" "),e("div",{staticClass:"custom-file"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file2"}}),this._v(" "),e("label",{staticClass:"custom-file-label",attrs:{for:"file2"}},[this._v("Choose file")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mt-4"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Submit")])])}]},Jt=a("VU/8")(Yt,Qt,!1,null,null,null).exports,Zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("h1",[t._v(t._s(t.company.name))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("nav",{staticClass:"nav flex-column nav-pills"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/contacts"}},[t._v("Contacts")]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/profile"}},[t._v("Profile")]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/collaborators"}},[t._v("Collaborators")])],1)]),t._v(" "),a("div",{staticClass:"col-10"},[a("router-view")],1)])])},staticRenderFns:[]},te=a("VU/8")({props:["id"],created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSelCompany",this.id).finally(function(){t.loading=!1})},data:function(){return{loading:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}}}},Zt,!1,null,null,null).exports,ee={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},ae=a("VU/8")({name:"Prototype"},ee,!1,null,null,null).exports,ne={props:["isMissing"],data:function(){return{loading:!1,countryCode:"us",mockFx:{id:1,currency:{id:1,code:"USD",country:"us"},rate:1.2345}}},methods:{edit:function(t){var e=window.prompt("FX Rate:",t.rate);e?this.loading=!0:""===e&&window.alert("The name can not be empty!")},remove:function(t){window.confirm("Are you sure you want to delete ...<TODO>...")&&(this.loading=!0)}}},se={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Date")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Type")]),t._v(" "),a("th",{attrs:{colspan:"3"}},[t._v("Currency")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Rate")]),t._v(" "),t.isMissing?t._e():[a("th",{attrs:{scope:"col"}},[t._v("Input Method")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Source")]),t._v(" "),a("th",{attrs:{scope:"col"}})]],2)]),t._v(" "),a("tbody",[a("tr",[a("th",[t._v("31 Jan `15")]),t._v(" "),a("td",[t._v("Daily")]),t._v(" "),a("td",[a("img",{staticClass:"flag",attrs:{src:"/static/flags/"+t.mockFx.currency.country+".svg",target:"_blank"}})]),t._v(" "),a("td",[t._v(t._s(t.mockFx.currency.code))]),t._v(" "),a("td",[t._v("US dollar")]),t._v(" "),t.isMissing?[t._m(0)]:t._e(),t._v(" "),t.isMissing?t._e():[a("td",[t._v(t._s(t.mockFx.rate))]),t._v(" "),a("td",[t._v("Auto/Manual")]),t._v(" "),t._m(1),t._v(" "),a("td",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(e){t.edit(t.mockFx)}}},[t._v("Edit")]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){t.remove(t.mockFx)}}},[t._v("Delete")])])]],2)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("input",{attrs:{type:"text",placeholder:"1.2345"}}),this._v(" "),e("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"}},[this._v("Save")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("a",{attrs:{href:"http://www.ecb.europa.eu/stats/policy_and_exchange_rates/euro_reference_exchange_rates/html/index.en.html"}},[this._v("ECB")])])}]},re={name:"FX-Rates",components:{FxTable:a("VU/8")(ne,se,!1,null,null,null).exports},data:function(){return{isMissing:!0}}},oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("FX Rates")]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"tab-content",attrs:{id:"nav-tabContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"missing-fx-panel"}},[a("fx-table",{attrs:{"is-missing":t.isMissing}})],1),t._v(" "),a("div",{staticClass:"tab-pane fade",attrs:{id:"all-fx-panel"}},[t._m(1),t._v(" "),a("fx-table")],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("nav",[e("div",{staticClass:"nav nav-tabs",attrs:{id:"nav-tab"}},[e("a",{staticClass:"nav-item nav-link active",attrs:{id:"missing-fx-tab","data-toggle":"tab",href:"#missing-fx-panel"}},[this._v("Missing FX Rates")]),this._v(" "),e("a",{staticClass:"nav-item nav-link",attrs:{id:"all-fx-tab","data-toggle":"tab",href:"#all-fx-panel"}},[this._v("All FX Rates")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("br"),this._v(" "),e("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"}},[this._v("Add FX Rate")])])}]},ie=a("VU/8")(re,oe,!1,null,null,null).exports;function le(t){return{id:t.id,name:t.name,code:t.isoCode,order:t.sortOrder}}function ce(t){return{id:t.id,name:t.name,code:t.isoCode,order:t.sortOrder}}var de={};[{name:"countries",converter:"apiToCountry"},{name:"currencies",converter:"apiToCurrency"}].reduce(function(t,e){return t[e.name]=function(){var t=e.endpoint||Dt.capitalizeFirstLetter(e.name),a=m.a.get("/"+t);return e.converter?a.then(function(t){return t.map(n[e.converter])}):a},t},de),Q()(Pt).reduce(function(t,e){return t[e+"Keys"]=function(){return t=Pt[e],m.a.get("/CompanyPropertyTypes/"+t+"/keys");var t},t},de);var ue=de,me={statementTypes:{BS:{id:1,label:"Balance Sheet"},CFS:{id:2,label:"Cash Flow Statement"},IS:{id:3,label:"Income Statement"}}},pe={statementTypes:function(t){return t.statementTypes}},ve={},fe={};Q()(ue).forEach(function(t){var e,a;a=ue[t],me[e=t]=null,pe[e]=function(t){return t[e]},ve[e]=function(t,a){t[e]=a},fe["load"+Dt.capitalizeFirstLetter(e)]=function(t){var n=t.commit,s=t.state;return s[e]?d.a.resolve(s[e]):a().then(function(t){return n(e,t),t})}});var _e={state:me,getters:pe,mutations:ve,actions:fe},he={created:function(){var t=this;this.loading=!0;var e=Q()(_e.state).map(function(e){var a=_e.state[e];a?t.nomenclatures.push({name:e,items:a}):t.$store.dispatch("load"+Dt.capitalizeFirstLetter(e)).then(function(a){t.nomenclatures.push({name:e,items:a})})});d.a.all(e).finally(function(){t.loading=!1})},data:function(){return{nomenclatures:[],loading:!1}}},ge={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[t._l(t.nomenclatures,function(e){return a("div",{key:e.name,staticClass:"m-4"},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.name,expression:"nomenclature.name"}],staticClass:"mb-2"},[t._v(t._s(e.name)+" ("+t._s(e.items.length)+")")]),t._v(" "),a("b-collapse",{attrs:{id:e.name}},[a("b-card",[a("pre",[t._v(t._s(e.items))])])],1)],1)}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],2)},staticRenderFns:[]},ye=a("VU/8")(he,ge,!1,null,null,null).exports;s.a.use(w.a);var Ce=new w.a({routes:[{path:"/",name:"Home",component:Ot,meta:{pageId:"home-page",pageClass:""},beforeEnter:P}].concat($()(G),[{path:"/companies/:id",name:"CompanyPage",component:te,props:!0,redirect:"/companies/:id/profile",meta:{pageId:"company-page",pageClass:""},beforeEnter:P,children:Et},{path:"/add-company",name:"AddCompany",component:Wt,meta:{pageId:"add-company-page",pageClass:""},beforeEnter:P},{path:"/matching-tool",name:"MatchingTool",component:Jt,meta:{pageId:"matching-tool-page",pageClass:""},beforeEnter:P},{path:"/prototype",name:"Prototype",component:ae,redirect:"/prototype/company",meta:{pageId:"",pageClass:"prototype-page"},beforeEnter:P,children:[{path:"company",name:"Company",component:te,meta:{pageId:"company-page",pageClass:""},beforeEnter:P},{path:"fx",name:"FxRates",component:ie,meta:{pageId:"fx-page",pageClass:""},beforeEnter:P},{path:"nomenclatures",name:"Nomenclatures",component:ye,meta:{pageId:"nomenclatures-page",pageClass:""},beforeEnter:P}]},{path:"*",redirect:"/"}]),mode:"history",linkExactActiveClass:"active"}),be={state:{user:null,token:null},mutations:{setToken:function(t,e){t.token=e},setUser:function(t,e){t.user=e},clearout:function(t){t.user=null,t.token=null}},actions:{loadUserCash:function(t){var e=t.commit,a=sessionStorage.getItem("at");a&&e("setToken",a);var n=JSON.parse(sessionStorage.getItem("ud"));n&&e("setUser",n)},register:function(t,e){t.commit;return h(e)},login:function(t,e){var a=t.commit;return g(e).then(function(t){sessionStorage.setItem("ud",f()(t)),a("setUser",t)})},logout:function(t){var e=t.dispatch;return y().finally(function(){e("clearout")})},clearout:function(t){(0,t.commit)("clearout"),Ce.push("/login"),sessionStorage.clear()},setToken:function(t,e){(0,t.commit)("setToken",e),sessionStorage.setItem("at",e)}},getters:{user:function(t){return t.user},token:function(t){return t.token}}};function xe(t){var e={id:t.id,name:t.name,country:{id:t.country.id,code:t.country.code,name:t.country.name},currency:{id:t.currency.id,code:t.currency.code},regNum:t.registrationNumber,address:t.addressText,parent:{id:t.parent.id,name:t.parent.name},logo:{},aliases:t.companyAliases.map(we),userSettings:t.userSettings,userRole:{id:t.userRole.id,label:t.userRole.label}};return t.logoUrl?e.logo.URL=t.logoUrl:e.logo.initials=Dt.getFirstLetter(t.name),e}function $e(t){var e=Kt()({},xe(t),{corpTax:{num:t.taxNumber,fillingDate:t.taxFillingDate,dueDate:t.taxDueDate,advancedPayments:t.taxAdvancedPaymentsRecurringDate},audit:{name:t.auditorName,email:t.auditorEmail,phone:t.auditorRecurringDate},personnel:t.companyPersonnels.map(Pe),vats:t.companyVatNumbers.map(De),taxes:[],software:[],misc:[]});return t.companyPropertyValues.reduce(function(t,e){var a=Me(e);switch(a.category.id){case Pt.tax:t.taxes.push(a);break;case Pt.software:t.software.push(a);break;default:t.misc.push(a)}return t},e),console.log("* api-to-company: ",e),e}function we(t){return{id:t.id,companyId:t.companyId,refCompanyId:t.refCompanyId,aname:t.aliasText}}function De(t){return{id:t.id,num:t.vatNumber,country:{id:t.countryId},reportingRegularity:t.recurringDate}}function Pe(t){return{id:t.id,responsibility:{id:t.typeId,label:"TODO: get ot nomenclatures"},customResponsibility:t.typeText,name:t.name,email:t.email,phone:t.phone}}function Me(t){return{id:t.id,category:{id:t.typeId,name:t.typeName},key:{id:t.keyId,label:t.keyName},customKey:t.customKey,value:t.value}}function Fe(t,e,a,n){void 0!==a[n]&&(t[e]=a[n])}function Se(t){return{id:t.id,companyId:t.companyId,refCompanyId:t.refCompanyId,aliasText:t.aname}}function Ne(t){return{id:t.id,typeId:t.responsibility.id,typeText:t.customResponsibility,name:t.name,email:t.email,phone:t.phone}}function ke(t){var e={vatNumber:t.num,countryId:t.country.id,recurringDate:t.reportingRegularity};return t.id&&(e.id=t.id),e}function Ae(t){var e={typeId:t.category.id,value:t.value};return t.id&&(e.id=t.id),t.customKey?e.customKey=t.customKey:e.keyId=t.key.id,e}var Ee=function(){return m.a.get("/Companies/").then(function(t){return t.map(xe)})},Te=function(t){var e={name:t.name,countryId:t.country.id,currencyId:t.currency.id};return t.regNum&&(e.registrationNumber=t.regNum),t.parent&&(e.parentId=t.parent.id),m.a.post("/Companies/",e).then($e)},Re=function(t){return m.a.get("/Companies/"+t.id).then($e)},qe=function(t,e){var a=function(t){var e={};return Fe(e,"id",t,"id"),Fe(e,"name",t,"name"),Fe(e,"registrationNumber",t,"regNum"),Fe(e,"addressText",t,"address"),t.aliases&&(e.companyAliases=t.aliases.map(Se)),t.personnel&&(e.companyPersonnels=t.personnel.map(Ne)),t.vats&&(e.companyVatNumbers=t.vats.map(ke)),t.taxes&&(e.taxes=t.taxes.map(Ae)),t.software&&(e.software=t.software.map(Ae)),t.misc&&(e.companyPropertyValues=t.misc.map(Ae)),t.country&&(e.countryId=t.country.id),t.currency&&(e.currencyId=t.currency.id),t.parent&&(e.parentId=t.parent.id),t.corpTax&&(e.taxNumber=t.corpTax.num,e.taxFillingDate=t.corpTax.fillingDate,e.taxDueDate=t.corpTax.dueDate,e.taxAdvancedPaymentsRecurringDate=t.corpTax.advancedPayments),t.audit&&(e.auditorName=t.audit.name,e.auditorEmail=t.audit.email,e.auditorRecurringDate=t.audit.phone),e}(e);return m.a.patch("/Companies/"+t.id,a).then($e)},Ie=function(t){return m.a.delete("/Companies/"+t.id)},Ve=function(t,e){var a=new FormData;return a.append("file",e),m.a.post("/Companies/"+t.id+"/Logo",a)},Ue=function(t,e,a){var n={companyId:t.id,refCompanyId:e.id,aliasText:a};return m.a.post("/Aliases/",n).then(we)},Le=function(t,e){var a={aliasText:e};return m.a.patch("/Aliases/"+t.id,a)},Oe=function(t){return m.a.delete("/Aliases/"+t.id)},ze=function(t,e){var a=Ne(e);return a.companyId=t.id,m.a.post("/Personnel/",a).then(Pe)},Ke=function(t){var e=Ne(t);return m.a.patch("/Personnel/"+e.id,e)},je=function(t){return m.a.delete("/Personnel/"+t.id)},Be=function(t,e){var a=ke(e);return a.companyId=t.id,m.a.post("/Vats/",a).then(De)},Xe=function(t){var e=ke(t);return m.a.patch("/Vats/"+e.id,e)},Ge=function(t){return m.a.delete("/Vats/"+t.id)},He=function(t,e){var a=Ae(e);return a.companyId=t.id,m.a.post("/CompanyPropertyValues/",a).then(Me)},We=function(t){var e=Ae(t);return m.a.patch("/CompanyPropertyValues/"+e.id,e)},Ye=function(t){return m.a.delete("/CompanyPropertyValues/"+t.id)};function Qe(t){var e=Q()(Pt).find(function(e){return Pt[e]===t.category.id});return"tax"===e&&(e="taxes"),e}function Je(t,e){return function(a){return t(e,a),a}}var Ze={state:{selectedCompany:null,myCompanies:[]},getters:{selectedCompany:function(t){return t.selectedCompany},myCompanies:function(t){return t.myCompanies}},mutations:{setMyCompanies:function(t,e){t.myCompanies=e},addCompany:function(t,e){t.myCompanies.push(e)},setSelectedCompany:function(t,e){(t.selectedCompany=e,t.myCompanies)&&(t.myCompanies.findIndex(function(t){return t.id===e.id})>-1&&(t.myCompanies=e))},deleteSelCompany:function(t){if(t.myCompanies){var e=t.myCompanies.indexOf(t.selectedCompany);e>-1&&t.myCompanies.splice(e,1)}t.selectedCompany=null},setSCLogo:function(t,e){t.selectedCompany.logo.URL=e},addSCAlias:function(t,e){return t.selectedCompany.aliases.push(e)},updateSCAlias:function(t,e){var a=e.alias,n=e.updatedAname,s=t.selectedCompany.aliases;s[s.indexOf(a)].aname=n},deleteSCAlias:function(t,e){var a=t.selectedCompany.aliases,n=a.indexOf(e);a.splice(n,1)},addSCVat:function(t,e){return t.selectedCompany.vats.push(e)},updateSCVat:function(t,e){var a=t.selectedCompany.vats;a[a.findIndex(function(t){return t.id===e.id})]=e},deleteSCVat:function(t,e){var a=t.selectedCompany.vats,n=a.indexOf(e);a.splice(n,1)},addSCPersonnel:function(t,e){return t.selectedCompany.personnel.push(e)},updateSCPersonnel:function(t,e){var a=t.selectedCompany.personnel;a[a.findIndex(function(t){return t.id===e.id})]=e},deleteSCPersonnel:function(t,e){var a=t.selectedCompany.personnel,n=a.indexOf(e);a.splice(n,1)},addSCCPPair:function(t,e){var a=Qe(e);t.selectedCompany[a].push(e)},updateSCCPPair:function(t,e){var a=Qe(e),n=t.selectedCompany[a];n[n.findIndex(function(t){return t.id===e.id})]=e},deleteSCCPPair:function(t,e){var a=Qe(e),n=t.selectedCompany[a],s=n.indexOf(e);n.splice(s,1)}},actions:{loadMyCompanies:function(t){var e=t.commit;t.state;return Ee().then(Je(e,"setMyCompanies"))},createCompany:function(t,e){var a=t.commit;return Te(e).then(Je(a,"addCompany"))},loadSelCompany:function(t,e){var a=t.commit,n=t.state;return n.selectedCompany&&n.selectedCompany.id===e?d.a.resolve(n.selectedCompany):Re({id:e}).then(Je(a,"setSelectedCompany"))},updateSelCompany:function(t,e){var a=t.commit,n=t.state;return qe(n.selectedCompany,e).then(function(t){return a("setSelectedCompany",t),t})},deleteSelCompany:function(t){var e=t.commit,a=t.state;return Ie(a.selectedCompany).then(function(){e("deleteSelCompany")})},uploadSCLogo:function(t,e){var a=t.commit,n=t.state;return Ve(n.selectedCompany,e).then(Je(a,"setSCLogo"))},createSCAlias:function(t,e){var a=t.commit,n=t.state;return Ue(n.selectedCompany,n.selectedCompany,e).then(Je(a,"addSCAlias"))},updateSCAlias:function(t,e){var a=t.commit,n=e.alias,s=e.updatedAname;return Le(n,s).then(function(){return a("updateSCAlias",{alias:n,updatedAname:s}),!0})},deleteSCAlias:function(t,e){var a=t.commit;return Oe(e).then(function(){a("deleteSCAlias",e)})},createSCVat:function(t,e){var a=t.commit,n=t.state;return Be(n.selectedCompany,e).then(Je(a,"addSCVat"))},updateSCVat:function(t,e){var a=t.commit;return Xe(e).then(function(){return a("updateSCVat",e),!0})},deleteSCVat:function(t,e){var a=t.commit;return Ge(e).then(function(){a("deleteSCVat",e)})},createSCPersonnel:function(t,e){var a=t.commit,n=t.state;return ze(n.selectedCompany,e).then(Je(a,"addSCPersonnel"))},updateSCPersonnel:function(t,e){var a=t.commit;return Ke(e).then(function(){return a("updateSCPersonnel",e),!0})},deleteSCPersonnel:function(t,e){var a=t.commit;return je(e).then(function(){a("deleteSCPersonnel",e)})},createSCCPPair:function(t,e){var a=t.commit,n=t.state;return He(n.selectedCompany,e).then(Je(a,"addSCCPPair"))},updateSCCPPair:function(t,e){var a=t.commit;return We(e).then(function(){return a("updateSCCPPair",e),!0})},deleteSCCPPair:function(t,e){var a=t.commit;return Ye(e).then(function(){a("deleteSCCPPair",e)})}}};s.a.use(p.a);var ta=new p.a.Store({modules:{userStore:be,companyStore:Ze,nomenclatureStore:_e}});m.a.defaults.baseURL="http://dev2.api.balanceshare.com",m.a.interceptors.request.use(function(t){t.headers=t.headers||{};var e=ta.getters.token;return e&&(t.headers.Token=e),t}),m.a.interceptors.response.use(function(t){var e=t.headers;return e.token&&ta.dispatch("setToken",e.token),t.data.data},function(t){var e=t.response;return 401===e.status?(ta.dispatch("clearout"),d.a.reject(new Error(e.statusText))):d.a.reject(t)});var ea=a("TXmL"),aa=a("UpdR"),na=a.n(aa),sa=a("YFeG"),ra=a.n(sa),oa={en:na.a,bg:ra.a};s.a.use(ea.a);var ia=new ea.a({locale:"en",messages:oa,fallbackLocale:"en"}),la={data:function(){return{i18n:{lang:this.$t("lang")},isDev:!0,buildTimestamp:"Wed, 21 Mar 2018 04:34:08 GMT"}},methods:{test:function(){console.log("TEST")},logout:function(){this.$store.dispatch("logout")}},computed:{user:function(){return this.$store.getters.user}},watch:{"$i18n.locale":function(){this.i18n.lang=this.$t("lang")}}},ca={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("body",{class:{debug:t.isDev}},[a("header",[a("b-navbar",{attrs:{toggleable:"md",type:"light",variant:"light",id:"top-bar"}},[a("b-navbar-brand",{attrs:{to:"/"}},[t._v("Balance Share")]),t._v(" "),a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[t.user?t._e():a("b-navbar-nav",[a("b-nav-item",{attrs:{to:"/login"}},[t._v("Login")]),t._v(" "),a("b-nav-item",{attrs:{to:"/register"}},[t._v("Register")])],1),t._v(" "),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item-dropdown",{attrs:{text:"DEV PAGES",right:""}},[a("b-dropdown-item",{attrs:{to:"/prototype/company",exact:""}},[t._v("Company Profile")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/prototype/fx",exact:""}},[t._v("FX Rates")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/prototype/nomenclatures",exact:""}},[t._v("Nomenclatures")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/matching-tool",exact:""}},[t._v("Matching Tool")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/forgot"}},[t._v("Forgot pass")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/reset"}},[t._v("Reset pass")])],1),t._v(" "),a("b-nav-item-dropdown",{attrs:{text:t.i18n.lang,right:""}},[a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="en"}}},[t._v("English")]),t._v(" "),a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="bg"}}},[t._v("Български")])],1),t._v(" "),t.user?[a("b-nav-item-dropdown",{attrs:{text:t.user.name,right:""}},[a("b-dropdown-item",{attrs:{to:"/change"}},[t._v(t._s(t.$t("Change Password")))])],1),t._v(" "),a("b-nav-item",{on:{click:t.logout}},[t._v(t._s(t.$t("Logout")))])]:t._e()],2)],1)],1)],1),t._v(" "),a("router-view"),t._v(" "),a("footer"),t._v(" "),t.isDev?a("div",{attrs:{id:"dev-toolbox"}},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseDevToolbox",modifiers:{collapseDevToolbox:!0}}],attrs:{variant:"outline-danger"}},[t._v("* Dev Toolbox")]),t._v(" "),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapseDevToolbox"}},[a("b-card",[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.test}},[t._v("Test Action")]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[t._v("\n          "+t._s(t.buildTimestamp)+"\n        ")])])],1)],1):t._e()],1)},staticRenderFns:[]},da=a("VU/8")(la,ca,!1,null,null,null).exports,ua={render:function(){var t=this.$createElement,e=this._self._c||t;return this.loading?e("div",{staticClass:"loading"},[e("img",{attrs:{src:"/static/images/loading.gif"}})]):this._e()},staticRenderFns:[]},ma=a("VU/8")({props:["loading"]},ua,!1,null,null,null).exports;a("pQP2");s.a.config.productionTip=!1,s.a.use(r.a),s.a.use(i.a),s.a.use(l.a),s.a.component("loading",ma),ta.dispatch("loadUserCash"),new s.a({el:"#app",router:Ce,store:ta,i18n:ia,render:function(t){return t(da)}})},UpdR:function(t,e){t.exports={lang:"EN",Name:"Name",Email:"Email",Phone:"Phone"}},YFeG:function(t,e){t.exports={lang:"БГ",Name:"Име",Email:"Имейл",Phone:"Телефон"}},pQP2:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.270f18f2a1c7537c9dbe.js.map