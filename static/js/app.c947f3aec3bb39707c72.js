webpackJsonp([1],{"1/oy":function(t,e){},"1IYV":function(t,e){},Id91:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};a.d(n,"apiToCountry",function(){return Me}),a.d(n,"apiToCurrency",function(){return De});var r=a("/5sW"),o=(a("1IYV"),a("sUu7")),s=a("ESwS"),i=a.n(s),l=a("e6fC"),c=a("NYxO"),d=a("mvHQ"),u=a.n(d),m=a("mtWM"),p=a.n(m);function v(t){return{email:t.email,firstName:t.firstName,lastName:t.lastName,phone:t.phone}}var f=function(t){var e={email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName,phone:t.phone};return p.a.post("/Account/",e).then(v)},h=function(t){var e=t.email,a=t.password,n={headers:{Authorization:"Basic "+btoa(e+":"+a)}};return p.a.post("/Account/Login",null,n)},g=function(){return p.a.get("/Account/Logout")},_=function(t){return p.a.post("/Account/Recover",{email:t})},b=function(t,e){return p.a.post("/Account/Recover/"+t,{password:e})},y=a("Gu7T"),C=a.n(y),$=a("/ocq");function x(t,e,a){en.getters.token?a({path:"/"}):a()}function w(t,e,a){en.getters.token?"/login"===e.path&&e.query.redirect&&e.query.redirect!==t.path?a({path:e.query.redirect}):a():a({path:"/login",query:{redirect:t.fullPath}})}var M=a("+cKO"),D={validations:{formData:{firstName:{required:M.required},lastName:{required:M.required},phone:{required:M.required},password:{required:M.required},email:{required:M.required,email:M.email}}},data:function(){return{formData:{firstName:null,lastName:null,phone:null,password:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("register",this.formData).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.error)}).finally(function(){t.loading=!1}))}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"register-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("FirstName"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.firstName,expression:"formData.firstName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.firstName.required&&t.$v.formData.firstName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.firstName},on:{blur:function(e){t.$v.formData.firstName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"firstName",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter your first name.")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("LastName"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.lastName,expression:"formData.lastName"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.lastName.required&&t.$v.formData.lastName.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.lastName},on:{blur:function(e){t.$v.formData.lastName.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"lastName",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter your last name.")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Phone"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.phone.required&&t.$v.formData.phone.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.phone},on:{blur:function(e){t.$v.formData.phone.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter your phone number.")])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.required&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter a password.")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("regFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},S={components:{RegisterForm:a("VU/8")(D,P,!1,null,null,null).exports},data:function(){return{isActionSuccessful:!1}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("registerPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("register-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v("Forgot password?")])],1)]),t._v(" "),t.isActionSuccessful?a("div",[a("p",[t._v("We have received your registration and have sent a mail to your email address.")]),t._v(" "),a("p",[t._v("Please, check your email and confirm the registration by clicking on the link in it.")])]):t._e()])])])},staticRenderFns:[]},F=a("VU/8")(S,N,!1,null,null,null).exports,k={validations:{formData:{password:{required:M.required},email:{required:M.required,email:M.email}}},data:function(){return{formData:{password:null,email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,this.$store.dispatch("login",this.formData).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1}))}}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"login-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.required&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("Please, enter password.")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("loginFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},I={components:{LoginForm:a("VU/8")(k,A,!1,null,null,null).exports},methods:{onLogin:function(){this.$router.push("/")}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("loginPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("login-form",{on:{success:t.onLogin}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v("Forgot password?")])],1)])])])])},staticRenderFns:[]},T=a("VU/8")(I,E,!1,null,null,null).exports,q={validations:{formData:{email:{required:M.required,email:M.email}}},data:function(){return{formData:{email:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,_(this.formData.email).then(function(){t.$emit("success")}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1}))}}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"forgot-pass-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Email"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],staticClass:"form-control",class:[{"is-invalid":(!t.$v.formData.email.required||!t.$v.formData.email.email)&&t.$v.formData.email.$dirty}],attrs:{type:"text"},domProps:{value:t.formData.email},on:{blur:function(e){t.$v.formData.email.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$v.formData.email.required?"Please, enter valid email":"Please, enter email"))])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("loginFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},V={components:{ForgotPassForm:a("VU/8")(q,R,!1,null,null,null).exports},data:function(){return{isActionSuccessful:!1}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("forgotPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("forgot-pass-form",{on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/register"}},[t._v(t._s(t.$t("Register")))])],1)]),t._v(" "),t.isActionSuccessful?a("div",[a("p",[t._v("We have received your request for recovery and have sent a mail to your email address.")]),t._v(" "),a("p",[t._v("Please, check your email, click on the link and reset your password.")])]):t._e()])])])},staticRenderFns:[]},L=a("VU/8")(V,U,!1,null,null,null).exports,O={props:["token"],validations:{formData:{password:{required:M.required},repPassword:{required:M.required,sameAsPass:Object(M.sameAs)("password")}}},data:function(){return{formData:{password:null,repPassword:null},loading:!1,errMsg:null}},methods:{submit:function(){var t=this;this.$v.formData.$invalid||(this.loading=!0,b(this.token,this.formData.password).then(function(e){t.$emit("success")}).catch(function(e){console.log(e),t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1}))}}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"reset-pass-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.password,expression:"formData.password"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.password.required&&t.$v.formData.password.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.password},on:{blur:function(e){t.$v.formData.password.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"password",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter the password")))])])]),t._v(" "),a("div",{staticClass:"form-group inline-form-group"},[a("label",{staticClass:"col-form-label"},[t._v(t._s(t.$t("Repeat Password"))+":")]),t._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.repPassword,expression:"formData.repPassword"}],staticClass:"form-control",class:[{"is-invalid":!t.$v.formData.repPassword.sameAsPass&&t.$v.formData.repPassword.$dirty}],attrs:{type:"password"},domProps:{value:t.formData.repPassword},on:{blur:function(e){t.$v.formData.repPassword.$touch()},input:function(e){e.target.composing||t.$set(t.formData,"repPassword",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v("\n        "+t._s(t.$v.formData.repPassword.sameAsPass?t.$t("Repeated password is not the same"):t.$t("Please, repeat the password"))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.$v.formData.$invalid}},[t._v(t._s(t.$t("resetFormSubmit")))])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},z={components:{ResetPassForm:a("VU/8")(O,K,!1,null,null,null).exports},props:["token"],data:function(){return{isActionSuccessful:!1}}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 mx-auto pt-5"},[t.isActionSuccessful?t._e():a("div",{staticClass:"card"},[a("h2",{staticClass:"card-header text-center"},[t._v(t._s(t.$t("resetPageTitle")))]),t._v(" "),a("div",{staticClass:"card-body"},[a("reset-pass-form",{attrs:{token:t.token},on:{success:function(e){t.isActionSuccessful=!0}}})],1),t._v(" "),a("div",{staticClass:"card-footer text-center"},[a("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.$t("Login")))]),t._v("   |   "),a("router-link",{attrs:{to:"/forgot"}},[t._v("Forgot password?")])],1)]),t._v(" "),t.isActionSuccessful?a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.$t("Password reset was successfull"))+".")]),t._v(" "),a("b-button",{attrs:{size:"lg",variant:"success",to:"/login"}},[t._v(t._s(t.$t("Login")))])],1):t._e()])])])},staticRenderFns:[]},B=[{path:"/register",name:"Register",component:F,meta:{pageId:"register-page",pageClass:""},beforeEnter:x},{path:"/login",name:"Login",component:T,meta:{pageId:"login-page",pageClass:""},beforeEnter:x},{path:"/forgot",name:"Forgot",component:L,meta:{pageId:"forgot-page",pageClass:""},beforeEnter:x},{path:"/reset/:token",name:"Reset",component:a("VU/8")(z,j,!1,null,null,null).exports,props:!0,meta:{pageId:"reset-page",pageClass:""},beforeEnter:x}],G=a("//Fk"),H=a.n(G),Y={data:function(){return{formData:{},errMsg:null,loading:!1}},computed:{statementTypes:function(){return this.$store.getters.statementTypes}},methods:{submit:function(){var t=this;this.loading=!0,this.$validator.validateAll().then(function(e){return e?t.$store.dispatch("TODO",t.formData):H.a.reject(new Error("Please, fill the required fields."))}).then(function(e){t.$emit("success",e)}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1})},cancel:function(){this.$emit("cancel"),this.errMsg=null}}},W={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"upload-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"statementType"}},[t._v("Statement type:")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("statementType")}],attrs:{id:"statementType",name:"statementType",plain:!0,options:t.statementTypes},model:{value:t.formData.statementType,callback:function(e){t.$set(t.formData,"statementType",e)},expression:"formData.statementType"}})],1),t._v(" "),a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Upload")]),t._v(" "),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.cancel}},[t._v("Cancel")])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Q={name:"UploadPage",components:{UploadForm:a("VU/8")(Y,W,!1,null,null,null).exports},data:function(){return{}}},J={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"upload-page"},[e("h2",[this._v("Upload")]),this._v(" "),e("upload-form")],1)},staticRenderFns:[]},X=a("VU/8")(Q,J,!1,null,null,null).exports,Z={methods:{runAfterSCisSet:function(t){this.$store.getters.selectedCompany?t():this.$store.watch(function(t,e){return e.selectedCompany},function(e){e&&t()})}}},tt=a("woOf"),et=a.n(tt),at=a("fZjL"),nt=a.n(at);r.a.use(c.a);var rt="__selected__",ot={items:[],filteredItems:[],sorter:{id:null,comparator:null,onKeyChangeCallback:function(){}},filters:{},page:1};function st(t){var e=nt()(t.filters).reduce(function(e,a){return e.filter(function(e){return t.filters[a](e)})},t.items.slice(0));t.page=1,t.filteredItems=t.sorter.comparator?e.sort(t.sorter.comparator):e}function it(t){return t[rt]||!1}var lt=et()({},ot),ct={pageItems:function(t){return function(e){if(e){var a=(t.page-1)*e,n=t.page*e;return t.filteredItems.slice(a,n)}return t.filteredItems}},totalPages:function(t){return function(e){return Math.ceil(t.filteredItems.length/e)}},selectedItems:function(t){return t.items.filter(it)},isItemSelected:function(t){return it},page:function(t){return t.page}},dt={setItems:function(t,e){t.items!==e&&(t.items=e,t.filteredItems=t.items,t.sorter=ot.sorter,t.filters=ot.filters,t.page=ot.page)},addFilter:function(t,e){t.filters[e.key]=e.comparator,st(t)},removeFilter:function(t,e){t.filters[e]&&(delete t.filters[e],st(t))},removeAllFilters:function(t){nt()(t.filters).length>0&&(t.filters={},st(t))},setSorter:function(t,e){var a=t.sorter;a.id!==e.sortId&&(a.onKeyChangeCallback(e.sortId),a.id=e.sortId,a.comparator=e.comparator,a.onKeyChangeCallback=e.onKeyChangeCallback,t.filteredItems.sort(a.comparator))},toggleItemSelection:function(t,e){r.a.set(e,rt,!e[rt])},setItemsSelection:function(t,e){e.items.forEach(function(t){r.a.set(t,rt,e.areSelected)})},setPage:function(t,e){t.page=e}};function ut(t,e,a){return a[e]||(a[e]=Function("obj","return obj."+e)),a[e](t)}var mt={strings:function(t,e,a){var n=t.toUpperCase().trim(),r=e.toUpperCase().trim();return n<r?-1*a:n>r?1*a:0},numbers:function(t,e,a){return a*(t-e)},dates:function(t,e,a){return a*((t?t.getTime():0)-(e?e.getTime():0))},bool:function(t,e,a){return a*((t?1:0)-(e?1:0))}},pt=function(t,e,a){var n={};return function(r,o){return mt[t](ut(r,e,n),ut(o,e,n),a)}},vt="sort-asc",ft="sort-desc",ht={tableStore:new c.a.Store({state:lt,getters:ct,mutations:dt}),SortDirective:function(t){return{bind:function(e,a,n){var r=a.value,o=r.sortKey,s=r.compare,i=r.initOrder,l=null;function c(){null===l||-1===l?(l=1,e.classList.add(vt),e.classList.remove(ft)):(l=-1,e.classList.add(ft),e.classList.remove(vt));var a={sortId:o+l,comparator:pt(s,o,l),onKeyChangeCallback:d};t.commit("setSorter",a)}function d(t){t.startsWith(o)||(e.classList.remove(ft),e.classList.remove(vt),l=null)}e.classList.add("sort"),e.addEventListener("click",c),i&&(l="DESC"===i?1:-1,c())}}}},gt={name:"ContactsTable",directives:{Sort:ht.SortDirective(ht.tableStore)},data:function(){return{loading:!1}},computed:{pageItems:function(){return ht.tableStore.commit("setItems",this.$store.getters.contacts),ht.tableStore.getters.pageItems()}}},_t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"name",compare:"strings",initOrder:"ASC"},expression:"{sortKey: 'name', compare: 'strings', initOrder: 'ASC'}"}]},[t._v("Name")]),t._v(" "),a("th",[t._v("Aliases")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"regNum",compare:"strings"},expression:"{sortKey: 'regNum', compare: 'strings'}"}]},[t._v("Reg Number")]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("th",[a("company-card",{attrs:{company:e,size:"m"}})],1),t._v(" "),a("td",[t._v(t._s(e.aliases.map(function(t){return t.aname}).join(", ")))]),t._v(" "),a("td",[t._v(t._s(e.regNum))]),t._v(" "),t._m(0,!0)])}))]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("...")]),this._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-right"},[e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Upload")]),this._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Start Reconciliation")])])])])}]},bt=a("VU/8")(gt,_t,!1,null,null,null).exports,yt={directives:{Sort:ht.SortDirective(ht.tableStore)},data:function(){return{loading:!1}},computed:{pageItems:function(){return ht.tableStore.commit("setItems",this.$store.getters.companySentInvitations),ht.tableStore.getters.pageItems()}}},Ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"contact.name",compare:"strings",initOrder:"ASC"},expression:"{sortKey: 'contact.name', compare: 'strings', initOrder: 'ASC'}"}]},[t._v("Name")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"contact.regNum",compare:"strings"},expression:"{sortKey: 'contact.regNum', compare: 'strings'}"}]},[t._v("Reg Number")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"contact.email",compare:"strings"},expression:"{sortKey: 'contact.email', compare: 'strings'}"}]},[t._v("Email")]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.pageItems,function(e){return a("tr",{key:e.id},[a("th",[a("company-card",{attrs:{company:e.contact,size:"m"}})],1),t._v(" "),a("td",[t._v(t._s(e.contact.regNum))]),t._v(" "),a("td",[t._v(t._s(e.contact.email))]),t._v(" "),t._m(0,!0)])}))]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("...")]),this._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-right"},[e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Upload")]),this._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Start Reconciliation")])])])])}]},$t=a("VU/8")(yt,Ct,!1,null,null,null).exports,xt=a("mB6w"),wt=a.n(xt),Mt={props:{save:{required:!0,type:Function},remove:{type:Function},cancel:{required:!0,type:Function},validate:{required:!0,type:Function},editMode:{default:!1}},data:function(){return{isEditMode:this.editMode,errMsg:null,loading:!1}},methods:{submit:function(){var t=this;this.loading=!0,this.errMsg=null,this.validate().then(function(e){return e?t.save():H.a.reject(new Error("Please, fill the required fields."))}).then(function(){t.cancelEdit()}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1})},cancelEdit:function(){this.cancel(),this.isEditMode=!1,this.errMsg=null},edit:function(){this.isEditMode=!0},del:function(){var t=this;this.loading=!0,this.remove().catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1})}},watch:{isEditMode:function(t){this.$emit("edit",t)}}},Dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"company-property-row",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"cp-col"},[t.errMsg?a("div",{staticClass:"alert alert-danger"},[t._v("\n      "+t._s(t.errMsg)+"\n    ")]):t._e(),t._v(" "),t._t("default")],2),t._v(" "),t.isEditMode?t._e():a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:t.edit}},[t._v("Edit")]),t._v(" "),t.remove?a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.del}},[t._v("Delete")]):t._e()]),t._v(" "),t.isEditMode?a("div",{staticClass:"cp-actions-col"},[a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"submit"}},[t._v("Save")]),t._v(" "),a("button",{staticClass:"btn btn-light btn-sm",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v("Cancel")])]):t._e(),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Pt={components:{CpForm:a("VU/8")(Mt,Dt,!1,null,null,null).exports},props:{cProp:{required:!0,default:function(){return{}}}},methods:{onEdit:function(t){this.editMode=t},validate:function(){return this.$validator.validateAll()},cancel:function(){this.cpModel=et()({},this.cProp),this.$emit("cancel")}}},St={mixins:[{methods:{runAfterNomenclatureIsSet:function(t,e){if(this.$store.getters[t])e();else var a=this.$store.watch(function(e,a){return a[t]},function(t){t&&(e(),a())})}}}],created:function(){this.$store.dispatch("loadCountries")},mounted:function(){var t=this;this.$refs.form.loading=!0,this.runAfterNomenclatureIsSet("countries",function(){t.$refs.form.loading=!1})},props:{cProp:{required:!1}},data:function(){return{cpModel:et()({},this.cProp),editMode:!0}},computed:{countries:function(){return this.$store.getters.countries}},methods:{save:function(){var t=this;return this.$store.dispatch("inviteContact",this.cpModel).then(function(){t.$emit("cancel")})}}},Nt=wt()({},Pt,St),Ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{ref:"form",staticClass:"contact-form",attrs:{save:t.save,cancel:t.cancel,validate:t.validate,"edit-mode":t.editMode},on:{edit:t.onEdit}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"cf-name"}},[t._v("Company Name:")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",id:"cf-name",name:"name"},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid name"))+".")]),t._v(" "),a("small",{staticClass:"form-text text-muted"},[t._v("The complete registered name.")])]),t._v(" "),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"cf-country"}},[t._v("Country:")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("country")}],attrs:{id:"cf-country",name:"country",plain:!0,options:t.countries,"text-field":"name"},model:{value:t.cpModel.country,callback:function(e){t.$set(t.cpModel,"country",e)},expression:"cpModel.country"}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, select a country"))+".")])],1),t._v(" "),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"cf-regNum"}},[t._v("Registration number:")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.cpModel.regNum,expression:"cpModel.regNum"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("regNum")}],attrs:{type:"text",id:"cf-regNum",name:"regNum"},domProps:{value:t.cpModel.regNum},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"regNum",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter company's registration number"))+".")])]),t._v(" "),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"cf-email"}},[t._v("Contact Person Email:")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",id:"cf-email",name:"email"},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid email"))+".")])])])])},staticRenderFns:[]},kt={name:"ContactsPage",components:{ContactsTable:bt,InvitationsTable:$t,ContactForm:a("VU/8")(Nt,Ft,!1,null,null,null).exports},mixins:[Z],created:function(){this.runAfterSCisSet(this.loadContacts)},data:function(){return{showForm:!1,loading:!1}},computed:{hasContacts:function(){return!!this.$store.getters.contacts.length},hasInvitations:function(){return!!this.$store.getters.companySentInvitations.length}},methods:{loadContacts:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCContacts").finally(function(){t.loading=!1})},loadInvitations:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCSentInvitations").finally(function(){t.loading=!1})},onTabChange:function(t){1===t&&this.loadInvitations()}}},At={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contact-page"},[a("h2",[t._v("Contacts")]),t._v(" "),t.showForm?t._e():a("button",{staticClass:"btn btn-success btn-sm mb-3",attrs:{type:"button"},on:{click:function(e){t.showForm=!0}}},[t._v("+ Add")]),t._v(" "),t.showForm?a("contact-form",{on:{cancel:function(e){t.showForm=!1}}}):t._e(),t._v(" "),a("b-tabs",{on:{input:t.onTabChange}},[a("b-tab",{attrs:{title:"Contacts",active:""}},[t.hasContacts?a("contacts-table"):t._e(),t._v(" "),t.hasContacts||t.loading?t._e():a("div",[t._v("There aren't any contacts added yet.")])],1),t._v(" "),a("b-tab",{attrs:{title:"Invitations"}},[t.hasInvitations?a("invitations-table"):t._e(),t._v(" "),t.hasContacts||t.loading?t._e():a("div",[t._v("There aren't any invitations.")])],1)],1),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},It=a("VU/8")(kt,At,!1,null,null,null).exports,Et={props:{cProp:{required:!1}},data:function(){return{cpModel:et()({},this.cProp),editMode:!0}},computed:{roles:function(){return this.$store.getters.roles}},methods:{save:function(){var t=this;return this.$store.dispatch("addSCCollaborator",this.cpModel).then(function(){t.$emit("cancel")})}}},Tt=wt()({},Pt,Et),qt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{staticClass:"collaborator-form",attrs:{save:t.save,cancel:t.cancel,validate:t.validate,"edit-mode":t.editMode},on:{edit:t.onEdit}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",[t._v("Collaborator's Email:")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",name:"email"},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, enter a valid email"))+".")])]),t._v(" "),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"role"}},[t._v("Role:")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("role")}],attrs:{name:"role",plain:!0,options:t.roles},model:{value:t.cpModel.role,callback:function(e){t.$set(t.cpModel,"role",e)},expression:"cpModel.role"}}),t._v(" "),a("div",{staticClass:"invalid-feedback"},[t._v(t._s(t.$t("Please, select a role"))+".")])],1)])])},staticRenderFns:[]},Rt=a("VU/8")(Tt,qt,!1,null,null,null).exports,Vt={name:"CollaboratorsTableRow",props:{collaborator:{required:!0}},data:function(){return{model:et()({},this.collaborator),editMode:!1,loading:!1}},computed:{roles:function(){return this.$store.getters.roles}},methods:{save:function(){return this.$store.dispatch("updateCollaborator",this.model).then(function(){})},edit:function(){this.editMode=!0},cancel:function(){this.editMode=!1},remove:function(){}}},Ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[t.loading?t._e():[a("td",[t._v(t._s(t.model.name))]),t._v(" "),a("td",[t._v(t._s(t.model.email))]),t._v(" "),a("td",[a("c-form-select",{staticClass:"form-control",attrs:{plain:!0,options:t.roles,disabled:!t.editMode},model:{value:t.model.role,callback:function(e){t.$set(t.model,"role",e)},expression:"model.role"}})],1),t._v(" "),a("td",[t._v(t._s(t.model.isPending?"pending":""))]),t._v(" "),a("td",{staticClass:"actions-col"},[t.editMode?t._e():a("div",[a("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:t.edit}},[t._v("Edit")]),t._v(" "),a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.remove}},[t._v("Remove")])]),t._v(" "),t.editMode?a("div",[a("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:t.save}},[t._v("Save")]),t._v(" "),a("button",{staticClass:"btn btn-default btn-sm",attrs:{type:"button"},on:{click:t.cancel}},[t._v("Cancel")])]):t._e()])],t._v(" "),t.loading?a("td",{attrs:{colspan:"4"}},[a("loading",{attrs:{loading:t.loading}})],1):t._e()],2)},staticRenderFns:[]},Lt={name:"CollaboratorsTable",components:{Row:a("VU/8")(Vt,Ut,!1,null,null,null).exports},directives:{Sort:ht.SortDirective(ht.tableStore)},data:function(){return{loading:!1}},computed:{pageItems:function(){return ht.tableStore.commit("setItems",this.$store.getters.collaborators),ht.tableStore.getters.pageItems()}}},Ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive collaborators-table"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"name",compare:"strings"},expression:"{sortKey: 'name', compare: 'strings'}"}]},[t._v("Name")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"email",compare:"strings"},expression:"{sortKey: 'email', compare: 'strings'}"}]},[t._v("Email")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"role.id",compare:"numbers",initOrder:"ASC"},expression:"{sortKey: 'role.id', compare: 'numbers', initOrder: 'ASC'}"}]},[t._v("Role")]),t._v(" "),a("th",{directives:[{name:"sort",rawName:"v-sort",value:{sortKey:"isPending",compare:"bool"},expression:"{sortKey: 'isPending', compare: 'bool'}"}]},[t._v("Status")]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.pageItems,function(t){return a("row",{key:t.email,attrs:{collaborator:t}})}))]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Kt={components:{CollaboratorForm:Rt,CollaboratorsTable:a("VU/8")(Lt,Ot,!1,null,null,null).exports},mixins:[Z],created:function(){this.runAfterSCisSet(this.loadCollaborators)},data:function(){return{showForm:!1,loading:!1}},methods:{loadCollaborators:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSCCollaborators").finally(function(){t.loading=!1})}}},zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v("Collaborators")]),t._v(" "),t.showForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showForm=!0}}},[t._v("+ Add")]),t._v(" "),t.showForm?a("collaborator-form",{on:{cancel:function(e){t.showForm=!1}}}):t._e(),t._v(" "),a("collaborators-table",{staticClass:"mt-3"}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},jt=a("VU/8")(Kt,zt,!1,null,null,null).exports;var Bt={removeNulls:function t(e){var a=et()({},e);return nt()(a).forEach(function(e){if(a[e]){if(a[e].constructor===Object){var n=t(a[e]);nt()(n).length?a[e]=n:delete a[e]}}else delete a[e]}),nt()(a).length?a:null},hasAnyData:function(t){return!!nt()(t).find(function(e){return t[e]})},isObject:function(t){return!!t&&t.constructor===Object},isArray:function(t){return!!t&&t.constructor===Array}},Gt={name:null,regNum:null,country:null,currency:null,address:null,parent:null,logo:null},Ht={created:function(){var t=this;this.loading=!0;var e=this.$store.dispatch("loadCountries"),a=this.$store.dispatch("loadCurrencies"),n=this.$store.dispatch("loadMyCompanies");H.a.all([e,a,n]).finally(function(){t.loading=!1})},props:{company:{default:function(){return Gt}}},data:function(){return{formData:et()({},this.company),editMode:!this.company.name,errMsg:null,loading:!1}},computed:{countries:function(){return this.$store.getters.countries},currencies:function(){return this.$store.getters.currencies},myCompanies:function(){return this.$store.getters.myCompanies}},methods:{validate:function(){return this.$validator.validateAll()},submit:function(){var t=this;this.loading=!0,this.validate().then(function(e){if(e){var a=t.company.name?"updateSelCompany":"createCompany";return t.$store.dispatch(a,t.formData)}return H.a.reject(new Error("Please, fill the required fields."))}).then(function(e){t.$emit("success",e)}).catch(function(e){t.errMsg=t.$t(e.message)}).finally(function(){t.loading=!1})},cancelEdit:function(){this.$emit("cancel"),this.editMode=!1,this.errMsg=null},edit:function(){this.editMode=!0}},watch:{company:function(t){this.editMode=!t.name,this.formData=et()({},t),this.errMsg=null}}},Yt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"my-company-form",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.errMsg?a("div",{staticClass:"alert alert-danger text-center"},[t._v("\n    "+t._s(t.errMsg)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("Company Name:")]),t._v(" "),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.formData.name,expression:"formData.name"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",id:"name",name:"name",disabled:!t.editMode},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value)}}}),t._v(" "),a("small",{staticClass:"form-text text-muted"},[t._v("The complete registered name.")])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"regId"}},[t._v("Registration ID:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.regNum,expression:"formData.regNum"}],staticClass:"form-control",attrs:{type:"text",id:"regId",disabled:!t.editMode},domProps:{value:t.formData.regNum},on:{input:function(e){e.target.composing||t.$set(t.formData,"regNum",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"country"}},[t._v("Country:")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("country")}],attrs:{id:"country",name:"country",plain:!0,disabled:!t.editMode,options:t.countries,"text-field":"name"},model:{value:t.formData.country,callback:function(e){t.$set(t.formData,"country",e)},expression:"formData.country"}})],1),t._v(" "),a("div",{staticClass:"form-group col"},[a("label",{attrs:{for:"currency"}},[t._v("Reporting Currency:")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:[{"is-invalid":t.errors.has("currency")}],attrs:{id:"currency",name:"currency",plain:!0,disabled:!t.editMode,"slot-options":t.currencies},model:{value:t.formData.currency,callback:function(e){t.$set(t.formData,"currency",e)},expression:"formData.currency"}},t._l(t.currencies,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.code)+" - "+t._s(e.name))])}))],1)]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[t._v("Address:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.address,expression:"formData.address"}],staticClass:"form-control",attrs:{type:"text",id:"address",disabled:!t.editMode},domProps:{value:t.formData.address},on:{input:function(e){e.target.composing||t.$set(t.formData,"address",e.target.value)}}})]),t._v(" "),t.myCompanies.length?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"parent"}},[t._v("Parent company:")]),t._v(" "),a("c-form-select",{attrs:{id:"parent",plain:!0,disabled:!t.editMode,options:t.myCompanies,"text-field":"name"},model:{value:t.formData.parent,callback:function(e){t.$set(t.formData,"parent",e)},expression:"formData.parent"}})],1):t._e(),t._v(" "),t.editMode?a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Save")]),t._v(" "),a("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:t.cancelEdit}},[t._v("Cancel")])]):t._e(),t._v(" "),t.editMode?t._e():a("div",{staticClass:"text-center py-3"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.edit}},[t._v("Edit")])]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Wt=a("VU/8")(Ht,Yt,!1,null,null,null).exports,Qt={data:function(){return{cpModel:et()({},this.cProp),editMode:!this.cProp.aname}},methods:{save:function(){var t=this;return(this.cProp.aname?this.$store.dispatch("updateSCAlias",{alias:this.cProp,updatedAname:this.cpModel.aname}):this.$store.dispatch("createSCAlias",this.cpModel.aname)).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCAlias",this.cProp).then(function(){t.$emit("remove")})}}},Jt=wt()({},Pt,Qt),Xt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.aname},on:{edit:t.onEdit}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.cpModel.aname,expression:"cpModel.aname"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("aname")}],attrs:{type:"text",name:"aname",disabled:!t.editMode},domProps:{value:t.cpModel.aname},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"aname",e.target.value)}}})])},staticRenderFns:[]},Zt=a("VU/8")(Jt,Xt,!1,null,null,null).exports,te=function(t){var e={data:function(){return{cpModel:et()({},this.cProp),editMode:!1}},computed:{hasAnyData:function(){var t=!!this.cProp&&Bt.hasAnyData(this.cProp);return this.editMode=!t,t}},methods:{validate:function(){return Bt.hasAnyData(this.cpModel)?H.a.resolve(!0):H.a.reject(new Error("Please, enter some data."))},save:function(){var e=this,a={};return a[t]=this.cpModel,this.$store.dispatch("updateSelCompany",a).then(function(){e.$emit("success")})},remove:function(){var e=this,a={};return a[t]=nt()(this.cProp).reduce(function(t,e){return t[e]=null,t},{}),this.$store.dispatch("updateSelCompany",a).then(function(){e.$emit("remove")})}}};return wt()({},Pt,e)},ee={mixins:[te("corpTax")]},ae={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.hasAnyData},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxId"}},[t._v("Corporate Tax ID:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.num,expression:"cpModel.num"}],staticClass:"form-control",attrs:{id:"corpTaxId",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.num},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"num",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxFillingDate"}},[t._v("Filing Deadline:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.fillingDate,expression:"cpModel.fillingDate"}],staticClass:"form-control",attrs:{id:"corpTaxFillingDate",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.fillingDate},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"fillingDate",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxDueDate"}},[t._v("Due Date:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.dueDate,expression:"cpModel.dueDate"}],staticClass:"form-control",attrs:{id:"corpTaxDueDate",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.dueDate},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"dueDate",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"corpTaxAdvancedPayments"}},[t._v("Advanced Payments: to do ...:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.advancedPayments,expression:"cpModel.advancedPayments"}],staticClass:"form-control",attrs:{id:"corpTaxAdvancedPayments",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.advancedPayments},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"advancedPayments",e.target.value)}}})])])},staticRenderFns:[]},ne=a("VU/8")(ee,ae,!1,null,null,null).exports,re={mixins:[te("audit")]},oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.hasAnyData},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorName"}},[t._v("Name:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"}],staticClass:"form-control",attrs:{id:"auditorName",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorEmail"}},[t._v("Email:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"}],staticClass:"form-control",attrs:{id:"auditorEmail",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorPhone"}},[t._v("Phone:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"}],staticClass:"form-control",attrs:{id:"auditorPhone",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",{attrs:{for:"auditorDdl"}},[t._v("Deadline:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.ddl,expression:"cpModel.ddl"}],staticClass:"form-control",attrs:{id:"auditorDdl",type:"text",disabled:!t.editMode},domProps:{value:t.cpModel.ddl},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"ddl",e.target.value)}}})])])},staticRenderFns:[]},se=a("VU/8")(re,oe,!1,null,null,null).exports,ie={created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadCountries").finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{}}}},data:function(){return{cpModel:et()({},this.cProp),editMode:!this.cProp.num}},computed:{countries:function(){return this.$store.getters.countries}},methods:{save:function(){var t=this,e=this.cProp.num?"updateSCVat":"createSCVat";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCVat",this.cProp).then(function(){t.$emit("remove")})}}},le=wt()({},Pt,ie),ce={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.num},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",[t._v("Country:")]),t._v(" "),a("c-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("country")}],attrs:{name:"country",plain:!0,disabled:!t.editMode,options:t.countries,"text-field":"name"},model:{value:t.cpModel.country,callback:function(e){t.$set(t.cpModel,"country",e)},expression:"cpModel.country"}})],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v(t._s(1===t.cpModel.countryId?"VAT ID":"Sales Tax ID")+":")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.num,expression:"cpModel.num"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("num")}],attrs:{type:"text",name:"num",disabled:!t.editMode},domProps:{value:t.cpModel.num},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"num",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v("Reporting Regularity:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.reportingRegularity,expression:"cpModel.reportingRegularity"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("repReg")}],attrs:{type:"text",name:"repReg",disabled:!t.editMode},domProps:{value:t.cpModel.reportingRegularity},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"reportingRegularity",e.target.value)}}})])])},staticRenderFns:[]},de=a("VU/8")(le,ce,!1,null,null,null).exports,ue={created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadResponsibilityKeys").finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{responsibility:{}}}}},data:function(){return{cpModel:et()({},this.cProp),editMode:!this.cProp.name}},computed:{responsibilityKeys:function(){return this.$store.getters.responsibilityKeys}},methods:{save:function(){var t=this,e=this.cProp.num?"updateSCPersonnel":"createSCPersonnel";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCPersonnel",this.cProp).then(function(){t.$emit("remove")})}}},me=wt()({},Pt,ue),pe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.name},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row"},[a("label",[t._v("Responsibility:")]),t._v(" "),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("responsibility")}],attrs:{name:"responsibility",disabled:!t.editMode,plain:!0},model:{value:t.cpModel.responsibility.id,callback:function(e){t.$set(t.cpModel.responsibility,"id",e)},expression:"cpModel.responsibility.id"}},t._l(t.responsibilityKeys,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v("Name:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.name,expression:"cpModel.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("name")}],attrs:{type:"text",name:"name",disabled:!t.editMode},domProps:{value:t.cpModel.name},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v("Email:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.email,expression:"cpModel.email"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("email")}],attrs:{type:"text",name:"email",disabled:!t.editMode},domProps:{value:t.cpModel.email},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"cp-row"},[a("label",[t._v("Phone:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.phone,expression:"cpModel.phone"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("phone")}],attrs:{type:"text",name:"phone",disabled:!t.editMode},domProps:{value:t.cpModel.phone},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"phone",e.target.value)}}})])])},staticRenderFns:[]},ve=a("VU/8")(me,pe,!1,null,null,null).exports;var fe={getFirstLetter:function(t){return t.slice(0,1)},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},he={BS:{id:1,label:"Balance Sheet"},CFS:{id:2,label:"Cash Flow Statement"},IS:{id:3,label:"Income Statement"}},ge={misc:0,tax:1,software:2,responsibility:3},_e={created:function(){var t=this;this.cProp.category||(this.cpModel.category={id:ge[this.cat]}),this.loading=!0;var e="load"+fe.capitalizeFirstLetter(this.storeKeysName);this.$store.dispatch(e).finally(function(){t.loading=!1})},props:{cProp:{required:!1,default:function(){return{key:{}}}},cat:{required:!0}},data:function(){return{cpModel:et()({},this.cProp),storeKeysName:this.cat+"Keys",editMode:!this.cProp.value}},computed:{keys:function(){return this.$store.getters[this.storeKeysName]}},methods:{save:function(){var t=this,e=this.cProp.value?"updateSCCPPair":"createSCCPPair";return this.$store.dispatch(e,this.cpModel).then(function(){t.$emit("success")})},remove:function(){var t=this;return this.$store.dispatch("deleteSCCPPair",this.cProp).then(function(){t.$emit("remove")})}}},be=wt()({},Pt,_e),ye={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("cp-form",{attrs:{save:t.save,remove:t.remove,cancel:t.cancel,validate:t.validate,"edit-mode":!t.cProp.value},on:{edit:t.onEdit}},[a("div",{staticClass:"cp-row cp-pair"},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("key")}],attrs:{name:"key",disabled:!t.editMode,plain:!0},model:{value:t.cpModel.key.id,callback:function(e){t.$set(t.cpModel.key,"id",e)},expression:"cpModel.key.id"}},t._l(t.keys,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.label))])})),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cpModel.value,expression:"cpModel.value"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:[{"is-invalid":t.errors.has("value")}],attrs:{name:"value",disabled:!t.editMode,rows:"3"},domProps:{value:t.cpModel.value},on:{input:function(e){e.target.composing||t.$set(t.cpModel,"value",e.target.value)}}})],1)])},staticRenderFns:[]},Ce={components:{MyCompanyForm:Wt,Alias:Zt,CorpTax:ne,Audit:se,Vat:de,Personnel:ve,CpPair:a("VU/8")(be,ye,!1,null,null,null).exports},data:function(){return{showAliasForm:!1,showCorpTax:!1,showAudit:!1,showVatForm:!1,showPersonnelForm:!1,showTaxForm:!1,showSoftwareForm:!1,showMiscForm:!1,loading:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}},hasAnyCorpTaxData:function(){return!!this.company.corpTax&&Bt.hasAnyData(this.company.corpTax)},hasAnyAuditData:function(){return!!this.company.audit&&Bt.hasAnyData(this.company.audit)}}},$e={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"company-profile"},[a("my-company-form",{attrs:{company:t.company}}),t._v(" "),a("h2",[t._v("Aliases")]),t._v(" "),t._l(t.company.aliases,function(t){return a("alias",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showAliasForm?a("alias",{attrs:{"c-prop":{companyId:t.company.id,refCompanyId:t.company.id}},on:{cancel:function(e){t.showAliasForm=!1}}}):t._e(),t._v(" "),t.showAliasForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAliasForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Corporate Tax")]),t._v(" "),t.hasAnyCorpTaxData||!t.hasAnyCorpTaxData&&t.showCorpTax?a("corp-tax",{attrs:{"c-prop":t.company.corpTax},on:{cancel:function(e){t.showCorpTax=!1}}}):t._e(),t._v(" "),t.hasAnyCorpTaxData||t.showCorpTax?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showCorpTax=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Audit")]),t._v(" "),t.hasAnyAuditData||!t.hasAnyAuditData&&t.showAudit?a("audit",{attrs:{"c-prop":t.company.audit},on:{cancel:function(e){t.showAudit=!1}}}):t._e(),t._v(" "),t.hasAnyAuditData||t.showAudit?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showAudit=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("VAT / Sales Tax")]),t._v(" "),t._l(t.company.vats,function(t){return a("vat",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showVatForm?a("vat",{on:{cancel:function(e){t.showVatForm=!1}}}):t._e(),t._v(" "),t.showVatForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showVatForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Personnel")]),t._v(" "),t._l(t.company.personnel,function(t){return a("personnel",{key:t.id,attrs:{"c-prop":t}})}),t._v(" "),t.showPersonnelForm?a("personnel",{on:{cancel:function(e){t.showPersonnelForm=!1}}}):t._e(),t._v(" "),t.showPersonnelForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showPersonnelForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Taxes")]),t._v(" "),t._l(t.company.taxes,function(t){return a("cp-pair",{key:t.id,attrs:{"c-prop":t,cat:"tax"}})}),t._v(" "),t.showTaxForm?a("cp-pair",{attrs:{cat:"tax"},on:{cancel:function(e){t.showTaxForm=!1}}}):t._e(),t._v(" "),t.showTaxForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showTaxForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Software")]),t._v(" "),t._l(t.company.software,function(t){return a("cp-pair",{key:t.id,attrs:{"c-prop":t,cat:"software"}})}),t._v(" "),t.showSoftwareForm?a("cp-pair",{attrs:{cat:"software"},on:{cancel:function(e){t.showSoftwareForm=!1}}}):t._e(),t._v(" "),t.showSoftwareForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showSoftwareForm=!0}}},[t._v("+ Add")]),t._v(" "),a("h2",[t._v("Misc")]),t._v(" "),t._l(t.company.misc,function(t){return a("cp-pair",{key:t.id,attrs:{"c-prop":t,cat:"misc"}})}),t._v(" "),t.showMiscForm?a("cp-pair",{attrs:{cat:"misc"},on:{cancel:function(e){t.showMiscForm=!1}}}):t._e(),t._v(" "),t.showMiscForm?t._e():a("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button"},on:{click:function(e){t.showMiscForm=!0}}},[t._v("+ Add")])],2)},staticRenderFns:[]},xe=[{path:"upload",name:"Upload",component:X,meta:{pageId:"upload-page",pageClass:""},beforeEnter:w},{path:"contacts",name:"Contacts",component:It,meta:{pageId:"contacts-page",pageClass:""},beforeEnter:w},{path:"profile",name:"CompanyProfile",component:a("VU/8")(Ce,$e,!1,null,null,null).exports,meta:{pageId:"profile-page",pageClass:""},beforeEnter:w},{path:"collaborators",name:"Collaborators",component:jt,meta:{pageId:"collaborators-page",pageClass:""},beforeEnter:w}];function we(t){return{id:t.id,name:t.name,code:t.isoCode,order:t.sortOrder}}function Me(t){return we(t)}function De(t){return we(t)}var Pe={};[{name:"countries",converter:"apiToCountry"},{name:"currencies",converter:"apiToCurrency"}].reduce(function(t,e){return t[e.name]=function(){var t=e.endpoint||fe.capitalizeFirstLetter(e.name),a=p.a.get("/"+t);return e.converter?a.then(function(t){return t.map(n[e.converter])}):a},t},Pe),nt()(ge).reduce(function(t,e){return t[e+"Keys"]=function(){return t=ge[e],p.a.get("/CompanyPropertyTypes/"+t+"/keys");var t},t},Pe);var Se=Pe,Ne={statementTypes:nt()(he).map(function(t){return he[t]}),roles:[{id:1,label:"SuperUser"},{id:2,label:"Master"},{id:3,label:"User"},{id:4,label:"Guest"}]},Fe={},ke={},Ae={};Fe=nt()(Ne).reduce(function(t,e){return t[e]=function(t){return t[e]},t},{}),nt()(Se).forEach(function(t){var e,a;a=Se[t],Ne[e=t]=null,Fe[e]=function(t){return t[e]},ke[e]=function(t,a){t[e]=a},Ae["load"+fe.capitalizeFirstLetter(e)]=function(t){var n=t.commit,r=t.state;return r[e]?H.a.resolve(r[e]):a().then(function(t){return n(e,t),t})}});var Ie={state:Ne,getters:Fe,mutations:ke,actions:Ae},Ee={created:function(){var t=this;this.loading=!0;var e=nt()(Ie.state).map(function(e){var a=Ie.state[e];a?t.nomenclatures.push({name:e,items:a}):t.$store.dispatch("load"+fe.capitalizeFirstLetter(e)).then(function(a){t.nomenclatures.push({name:e,items:a})})});H.a.all(e).finally(function(){t.loading=!1})},data:function(){return{nomenclatures:[],loading:!1}},methods:{count:function(t){return Bt.isObject(t)?nt()(t).length:t.length}}},Te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[t._l(t.nomenclatures,function(e){return a("div",{key:e.name,staticClass:"m-4"},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:e.name,expression:"nomenclature.name"}],staticClass:"mb-2"},[t._v(t._s(e.name)+" ("+t._s(t.count(e.items))+")")]),t._v(" "),a("b-collapse",{attrs:{id:e.name}},[a("b-card",[a("pre",[t._v(t._s(e.items))])])],1)],1)}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],2)},staticRenderFns:[]},qe=[{path:"nomenclatures",name:"Nomenclatures",component:a("VU/8")(Ee,Te,!1,null,null,null).exports,meta:{pageId:"nomenclatures-page",pageClass:""},beforeEnter:w}],Re={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["logo","logo-"+t.size]},[t.logo.src?a("img",{attrs:{src:t.logo.src}}):a("div",[t._v(t._s(t.logo.initials))]),t._v(" "),a("img",{staticClass:"flag",attrs:{src:"/static/flags/"+t.countryCode+".svg",target:"_blank"}})])},staticRenderFns:[]},Ve={components:{LogoFlag:a("VU/8")({props:{logo:{},size:{},countryCode:{default:"us"}},methods:{style:function(t){return{background:"url(/static/flags/"+t+".svg)"}}}},Re,!1,null,null,null).exports},props:["company","size"]},Ue={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["company-card","company-card-"+t.size]},[a("logo-flag",{attrs:{logo:t.company.logo,size:t.size,countryCode:t.company.country.code}}),t._v(" "),a("div",{staticClass:"company-card-name"},[t._v(t._s(t.company.name))])],1)},staticRenderFns:[]},Le={components:{CompanyCard:a("VU/8")(Ve,Ue,!1,null,null,null).exports},props:["companies"]},Oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),a("tbody",t._l(t.companies,function(e){return a("tr",[a("th",[a("router-link",{attrs:{to:"/companies/"+e.id}},[a("company-card",{attrs:{company:e,size:"m"}})],1)],1),t._v(" "),a("td",[t._v(t._s(e.aliases.map(function(t){return t.aname}).join(", ")))]),t._v(" "),a("td",[t._v(t._s(e.regNum))]),t._v(" "),a("td",[t._v(t._s(e.currency.code))]),t._v(" "),a("td",[t._v(t._s(e.parent.name))]),t._v(" "),a("td",[t._v(t._s(e.topParent))]),t._v(" "),t._m(1,!0)])}))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Name")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Aliases")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Reg Number")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Reporting Currency")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Direct Parent")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Top Parent")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Actions")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("...")]),this._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-right"},[e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Upload")]),this._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[this._v("Start Reconciliation")])])])])}]},Ke={components:{CompaniesTable:a("VU/8")(Le,Oe,!1,null,null,null).exports},created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadMyCompanies").finally(function(){t.loading=!1})},data:function(){return{loading:!1}},computed:{myCompanies:function(){return this.$store.getters.myCompanies}}},ze={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col mx-auto pt-5"},[a("h1",[t._v("Companies")]),t._v(" "),t.myCompanies.length?a("div",[a("router-link",{staticClass:"btn btn-success btn-sm",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))]),t._v(" "),a("companies-table",{attrs:{companies:t.myCompanies}}),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1):t._e(),t._v(" "),t.myCompanies.length?t._e():a("div",{staticClass:"text-center"},[a("p",[t._v("Add your first company : )")]),t._v(" "),a("router-link",{staticClass:"btn btn-success btn-lg",attrs:{to:"/add-company"}},[t._v(t._s(t.$t("Add Company")))])],1)])])])},staticRenderFns:[]},je=a("VU/8")(Ke,ze,!1,null,null,null).exports,Be={name:"AddCompany",components:{MyCompanyForm:Wt},methods:{onAddedCompany:function(t){this.$router.push({name:"CompanyProfile",params:{id:t.id}})},cancel:function(){this.$router.go(-1)}}},Ge={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 mx-auto pt-5"},[e("div",{staticClass:"card"},[e("h2",{staticClass:"card-header text-center"},[this._v(this._s(this.$t("Add Company")))]),this._v(" "),e("div",{staticClass:"card-body"},[e("my-company-form",{on:{success:this.onAddedCompany,cancel:this.cancel}})],1)])])])])},staticRenderFns:[]},He=a("VU/8")(Be,Ge,!1,null,null,null).exports,Ye={data:function(){return{formData:{statement:1}}},methods:{submit:function(){alert("Bai Hui")}}},We={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h1",[t._v("Matching Tool")]),t._v(" "),a("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"country"}},[t._v("Statement type:")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.statement,expression:"formData.statement"}],staticClass:"form-control",attrs:{id:"country",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"statement",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"1",selected:""}},[t._v("Balance Sheet")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("Income Statement")]),t._v(" "),a("option",{attrs:{value:"3"}},[t._v("Cash Flow Statement")])])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"from"}},[t._v("From:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.from,expression:"formData.from"}],staticClass:"form-control",attrs:{type:"text",id:"from",required:""},domProps:{value:t.formData.from},on:{input:function(e){e.target.composing||t.$set(t.formData,"from",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"to"}},[t._v("To:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.to,expression:"formData.to"}],staticClass:"form-control",attrs:{type:"text",id:"to",required:""},domProps:{value:t.formData.to},on:{input:function(e){e.target.composing||t.$set(t.formData,"to",e.target.value)}}})]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"file1"}},[this._v("Own Company File:")]),this._v(" "),e("div",{staticClass:"custom-file"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file1"}}),this._v(" "),e("label",{staticClass:"custom-file-label",attrs:{for:"file1"}},[this._v("Choose file")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"file2"}},[this._v("Opposite Company File:")]),this._v(" "),e("div",{staticClass:"custom-file"},[e("input",{staticClass:"custom-file-input",attrs:{type:"file",id:"file2"}}),this._v(" "),e("label",{staticClass:"custom-file-label",attrs:{for:"file2"}},[this._v("Choose file")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mt-4"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Submit")])])}]},Qe=a("VU/8")(Ye,We,!1,null,null,null).exports,Je={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-2"},[a("nav",{staticClass:"nav flex-column nav-pills"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/upload"}},[t._v("Upload")]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/contacts"}},[t._v("Contacts")]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/profile"}},[t._v("Profile")]),t._v(" "),a("router-link",{staticClass:"nav-link",attrs:{to:"/companies/"+t.id+"/collaborators"}},[t._v("Collaborators")])],1)]),t._v(" "),a("div",{staticClass:"col-10"},[a("h1",[t._v(t._s(t.company.name))]),t._v(" "),a("router-view")],1)]),t._v(" "),a("loading",{attrs:{loading:t.loading}})],1)},staticRenderFns:[]},Xe=a("VU/8")({props:["id"],created:function(){var t=this;this.loading=!0,this.$store.dispatch("loadSelCompany",this.id).finally(function(){t.loading=!1})},data:function(){return{loading:!1}},computed:{company:function(){return this.$store.getters.selectedCompany||{}}}},Je,!1,null,null,null).exports,Ze={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]},ta=a("VU/8")({name:"Prototype"},Ze,!1,null,null,null).exports;r.a.use($.a);var ea=new $.a({routes:[{path:"/",name:"Home",component:je,meta:{pageId:"home-page",pageClass:""},beforeEnter:w}].concat(C()(B),[{path:"/companies/:id",name:"CompanyPage",component:Xe,props:!0,redirect:"/companies/:id/profile",meta:{pageId:"company-page",pageClass:""},beforeEnter:w,children:xe},{path:"/add-company",name:"AddCompany",component:He,meta:{pageId:"add-company-page",pageClass:""},beforeEnter:w},{path:"/matching-tool",name:"MatchingTool",component:Qe,meta:{pageId:"matching-tool-page",pageClass:""},beforeEnter:w},{path:"/prototype",name:"Prototype",component:ta,redirect:"/prototype/company",meta:{pageId:"",pageClass:"prototype-page"},beforeEnter:w,children:qe},{path:"*",redirect:"/"}]),mode:"history",linkExactActiveClass:"active"}),aa={state:{user:null,token:null},mutations:{setToken:function(t,e){t.token=e},setUser:function(t,e){t.user=e},clearout:function(t){t.user=null,t.token=null}},actions:{loadUserCash:function(t){var e=t.commit,a=sessionStorage.getItem("at");a&&e("setToken",a);var n=JSON.parse(sessionStorage.getItem("ud"));n&&e("setUser",n)},register:function(t,e){t.commit;return f(e)},login:function(t,e){var a=t.commit;return h(e).then(function(t){sessionStorage.setItem("ud",u()(t)),a("setUser",t)})},logout:function(t){var e=t.dispatch;return g().finally(function(){e("clearout")})},clearout:function(t){(0,t.commit)("clearout"),ea.push("/login"),sessionStorage.clear()},setToken:function(t,e){(0,t.commit)("setToken",e),sessionStorage.setItem("at",e)}},getters:{user:function(t){return t.user},token:function(t){return t.token}}},na=a("Dd8w"),ra=a.n(na);function oa(t){var e={id:t.id,name:t.name,country:{id:t.country.id,code:t.country.code,name:t.country.name},regNum:t.registrationNumber,logo:{}};return t.logoUrl?e.logo.URL=t.logoUrl:e.logo.initials=fe.getFirstLetter(t.name),e}function sa(t){return ra()({},oa(t),{aliases:t.companyAliases.map(ca)})}function ia(t){return ra()({},oa(t),{currency:{id:t.currency.id,code:t.currency.code},address:t.addressText,parent:{id:t.parent.id,name:t.parent.name},aliases:t.companyAliases.map(ca),userSettings:t.userSettings,userRole:{id:t.userRole.id,label:t.userRole.label}})}function la(t){var e=ra()({},ia(t),{corpTax:{num:t.taxNumber,fillingDate:t.taxFillingDate,dueDate:t.taxDueDate,advancedPayments:t.taxAdvancedPaymentsRecurringDate},audit:{name:t.auditorName,email:t.auditorEmail,phone:t.auditorRecurringDate},personnel:t.companyPersonnels.map(ua),vats:t.companyVatNumbers.map(da),taxes:[],software:[],misc:[]});return t.companyPropertyValues.reduce(function(t,e){var a=ma(e);switch(a.category.id){case ge.tax:t.taxes.push(a);break;case ge.software:t.software.push(a);break;default:t.misc.push(a)}return t},e),console.log("* api-to-company: ",e),e}function ca(t){return{id:t.id,companyId:t.companyId,refCompanyId:t.refCompanyId,aname:t.aliasText}}function da(t){return{id:t.id,num:t.vatNumber,country:{id:t.countryId},reportingRegularity:t.recurringDate}}function ua(t){return{id:t.id,responsibility:{id:t.typeId,label:"TODO: get ot nomenclatures"},customResponsibility:t.typeText,name:t.name,email:t.email,phone:t.phone}}function ma(t){return{id:t.id,category:{id:t.typeId,name:t.typeName},key:{id:t.keyId,label:t.keyName},customKey:t.customKey,value:t.value}}function pa(t,e,a,n){void 0!==a[n]&&(t[e]=a[n])}function va(t){return{id:t.id,companyId:t.companyId,refCompanyId:t.refCompanyId,aliasText:t.aname}}function fa(t){return{id:t.id,typeId:t.responsibility.id,typeText:t.customResponsibility,name:t.name,email:t.email,phone:t.phone}}function ha(t){var e={vatNumber:t.num,countryId:t.country.id,recurringDate:t.reportingRegularity};return t.id&&(e.id=t.id),e}function ga(t){var e={typeId:t.category.id,value:t.value};return t.id&&(e.id=t.id),t.customKey?e.customKey=t.customKey:e.keyId=t.key.id,e}function _a(t){return{id:t.id,isActive:t.isActive,ddl:new Date(t.expirationDate),contact:ra()({},oa(t),{name:t.invitedCompanyName,email:t.invitedUserEmail}),company:{id:t.companyId}}}var ba=function(){return p.a.get("/Companies/").then(function(t){return t.map(ia)})},ya=function(t){var e={name:t.name,countryId:t.country.id,currencyId:t.currency.id};return t.regNum&&(e.registrationNumber=t.regNum),t.parent&&(e.parentId=t.parent.id),p.a.post("/Companies/",e).then(la)},Ca=function(t){return p.a.get("/Companies/"+t.id).then(la)},$a=function(t,e){var a=function(t){var e={};return pa(e,"id",t,"id"),pa(e,"name",t,"name"),pa(e,"registrationNumber",t,"regNum"),pa(e,"addressText",t,"address"),t.aliases&&(e.companyAliases=t.aliases.map(va)),t.personnel&&(e.companyPersonnels=t.personnel.map(fa)),t.vats&&(e.companyVatNumbers=t.vats.map(ha)),t.taxes&&(e.taxes=t.taxes.map(ga)),t.software&&(e.software=t.software.map(ga)),t.misc&&(e.companyPropertyValues=t.misc.map(ga)),t.country&&(e.countryId=t.country.id),t.currency&&(e.currencyId=t.currency.id),t.parent&&(e.parentId=t.parent.id),t.corpTax&&(e.taxNumber=t.corpTax.num,e.taxFillingDate=t.corpTax.fillingDate,e.taxDueDate=t.corpTax.dueDate,e.taxAdvancedPaymentsRecurringDate=t.corpTax.advancedPayments),t.audit&&(e.auditorName=t.audit.name,e.auditorEmail=t.audit.email,e.auditorRecurringDate=t.audit.phone),e}(e);return p.a.patch("/Companies/"+t.id,a).then(la)},xa=function(t){return p.a.delete("/Companies/"+t.id)},wa=function(t,e){var a=new FormData;return a.append("file",e),p.a.post("/Companies/"+t.id+"/Logo",a)},Ma=function(t,e,a){var n={companyId:t.id,refCompanyId:e.id,aliasText:a};return p.a.post("/Aliases/",n).then(ca)},Da=function(t,e){var a={aliasText:e};return p.a.patch("/Aliases/"+t.id,a)},Pa=function(t){return p.a.delete("/Aliases/"+t.id)},Sa={create:function(t,e){e.company=t;var a=fa(e);return p.a.post("/Personnel/",a).then(ua)},update:function(t){var e=fa(t);return p.a.patch("/Personnel/"+e.id,e)},delete:function(t){return p.a.delete("/Personnel/"+t.id)}},Na={create:function(t,e){e.company=t;var a=ha(e);return p.a.post("/Vats/",a).then(da)},update:function(t){var e=ha(t);return p.a.patch("/Vats/"+e.id,e)},delete:function(t){return p.a.delete("/Vats/"+t.id)}},Fa={create:function(t,e){e.company=t;var a=ga(e);return p.a.post("/CompanyPropertyValues/",a).then(ma)},update:function(t){var e=ga(t);return p.a.patch("/CompanyPropertyValues/"+e.id,e)},delete:function(t){return p.a.delete("/CompanyPropertyValues/"+t.id)}},ka={myCompanies:[],selectedCompany:null},Aa={};nt()(ka).reduce(function(t,e){return t[e]=function(t){return t[e]},t},Aa);var Ia={setMyCompanies:function(t,e){t.myCompanies=e},addCompany:function(t,e){t.myCompanies.push(e)},setSelectedCompany:function(t,e){if(t.selectedCompany=e,t.myCompanies){var a=t.myCompanies.findIndex(function(t){return t.id===e.id});a>-1&&(t.myCompanies[a]=e)}},deleteSelCompany:function(t){if(t.myCompanies){var e=t.myCompanies.indexOf(t.selectedCompany);e>-1&&t.myCompanies.splice(e,1)}t.selectedCompany=null},setSCLogo:function(t,e){t.selectedCompany.logo.URL=e},addSCAlias:function(t,e){t.selectedCompany.aliases.push(e)},updateSCAlias:function(t,e){var a=e.alias,n=e.updatedAname,r=t.selectedCompany.aliases;r[r.indexOf(a)].aname=n},deleteSCAlias:function(t,e){var a=t.selectedCompany.aliases,n=a.indexOf(e);a.splice(n,1)},addSCVat:function(t,e){t.selectedCompany.vats.push(e)},updateSCVat:function(t,e){var a=t.selectedCompany.vats;a[a.findIndex(function(t){return t.id===e.id})]=e},deleteSCVat:function(t,e){var a=t.selectedCompany.vats,n=a.indexOf(e);a.splice(n,1)},addSCPersonnel:function(t,e){t.selectedCompany.personnel.push(e)},updateSCPersonnel:function(t,e){var a=t.selectedCompany.personnel;a[a.findIndex(function(t){return t.id===e.id})]=e},deleteSCPersonnel:function(t,e){var a=t.selectedCompany.personnel,n=a.indexOf(e);a.splice(n,1)},addSCCPPair:function(t,e){var a=Ea(e);t.selectedCompany[a].push(e)},updateSCCPPair:function(t,e){var a=Ea(e),n=t.selectedCompany[a];n[n.findIndex(function(t){return t.id===e.id})]=e},deleteSCCPPair:function(t,e){var a=Ea(e),n=t.selectedCompany[a],r=n.indexOf(e);n.splice(r,1)}};function Ea(t){var e=nt()(ge).find(function(e){return ge[e]===t.category.id});return"tax"===e&&(e="taxes"),e}function Ta(t,e){return function(a){return t(e,a),a}}var qa={loadMyCompanies:function(t){var e=t.commit;t.state;return ba().then(Ta(e,"setMyCompanies"))},createCompany:function(t,e){var a=t.commit;return ya(e).then(Ta(a,"addCompany"))},loadSelCompany:function(t,e){var a=t.commit,n=t.state;return n.selectedCompany&&n.selectedCompany.id===e?H.a.resolve(n.selectedCompany):Ca({id:e}).then(Ta(a,"setSelectedCompany"))},updateSelCompany:function(t,e){var a=t.commit,n=t.state;return $a(n.selectedCompany,e).then(function(t){return a("setSelectedCompany",t),t})},deleteSelCompany:function(t){var e=t.commit,a=t.state;return xa(a.selectedCompany).then(function(){e("deleteSelCompany")})},uploadSCLogo:function(t,e){var a=t.commit,n=t.state;return wa(n.selectedCompany,e).then(Ta(a,"setSCLogo"))},createSCAlias:function(t,e){var a=t.commit,n=t.state;return Ma(n.selectedCompany,n.selectedCompany,e).then(Ta(a,"addSCAlias"))},updateSCAlias:function(t,e){var a=t.commit,n=e.alias,r=e.updatedAname;return Da(n,r).then(function(){return a("updateSCAlias",{alias:n,updatedAname:r}),!0})},deleteSCAlias:function(t,e){var a=t.commit;return Pa(e).then(function(){a("deleteSCAlias",e)})}};[{name:"Vat",service:Na},{name:"Personnel",service:Sa},{name:"CPPair",service:Fa}].reduce(function(t,e){t["createSC"+e.name]=function(t,a){var n=t.commit,r=t.state;return e.service.create(r.selectedCompany,a).then(Ta(n,"addSC"+e.name))};var a="updateSC"+e.name;t[a]=function(t,e){var n=t.commit;return Fa.update(e).then(function(){return n(a,e),!0})};var n="deleteSC"+e.name;return t[n]=function(t,a){var r=t.commit;return e.service.delete(a).then(function(){r(n,a)})},t},qa);var Ra={state:ka,getters:Aa,mutations:Ia,actions:qa};function Va(t){return{name:t.fullName||"",role:{id:t.roleId,label:t.roleLabel},company:{id:t.companyId},email:t.userEmail,isPending:t.isPending}}function Ua(t){var e={roleId:t.role.id,userEmail:t.email};return t.name&&(e.fullName=t.name),t.company&&(e.companyId=t.company.id),e}var La={getCompanyCollaborators:function(t){return p.a.get("/Collaborators/Companies/"+t.id).then(function(t){return t.map(Va)})},create:function(t,e){e.company=t;var a=Ua(e);return p.a.post("/Collaborators/",a).then(Va)},update:function(t){var e=Ua(t);return p.a.put("/Collaborators/",e)},remove:function(t){return p.a.delete("/Collaborators/Companies/"+t.company.id+"/Users/"+t.email)}};function Oa(t,e){return function(a){return t(e,a),a}}var Ka={state:{collaborators:[]},mutations:{setCollaborators:function(t,e){t.collaborators=e},addCollaborator:function(t,e){t.collaborators.push(e)},updateCollaborator:function(t,e){var a=t.collaborators.findIndex(function(t){return t.id===e.id});t.collaborators[a]=e},removeCollaborator:function(t,e){var a=t.collaborators.indexOf(e);t.collaborators.splice(a,1)}},actions:{loadSCCollaborators:function(t){var e=t.commit,a=t.getters;return La.getCompanyCollaborators(a.selectedCompany).then(Oa(e,"setCollaborators"))},addSCCollaborator:function(t,e){var a=t.commit,n=t.getters;return La.create(n.selectedCompany,e).then(Oa(a,"addCollaborator"))},updateCollaborator:function(t,e){var a=t.commit;return La.update(e).then(function(){return a("updateCollaborator",e),!0})},removeCollaborator:function(t,e){var a=t.commit;return La.delete(e).then(function(){a("removeCollaborator",e)})}},getters:{collaborators:function(t){return t.collaborators}}},za="/Contacts/";function ja(t,e,a){return p.a.post(za+"Invitations/"+e.id+"/Companies/"+t.id+"/"+a)}var Ba=function(t){return p.a.get(za+"Companies/"+t.id).then(function(t){return t.map(sa)})},Ga=function(t){return p.a.get(za+"Companies/"+t.id+"/PendingSentInvitations").then(function(t){return t.map(_a)})},Ha=function(){return p.a.get(za+"PendingReceivedInvitations").then(function(t){return t.map(_a)})},Ya=function(t,e){var a,n={invitedCompanyName:(a=e).name,countryId:a.country.id,registrationNumber:a.regNum,collaboratorEmail:a.email};return p.a.post(za+"Companies/"+t.id,n).then(_a)},Wa=function(t,e){return ja(t,e,"Acceptance")},Qa=function(t,e){return ja(t,e,"Rejection")},Ja={contacts:[],companySentInvitations:[],userReceivedInvitatios:[]},Xa={},Za={addInvitation:function(t,e){t.companySentInvitations.push(e)},acceptInvitation:function(t,e){var a=t.collaborators.findIndex(function(t){return t.id===e.id});t.collaborators[a]=e},removeCollaborator:function(t,e){var a=t.collaborators.indexOf(e);t.collaborators.splice(a,1)}};nt()(Ja).forEach(function(t){Xa[t]=function(e){return e[t]},Za["set"+fe.capitalizeFirstLetter(t)]=function(e,a){e[t]=a}});var tn={state:Ja,mutations:Za,actions:{loadSCContacts:function(t){var e=t.commit,a=t.getters;return Ba(a.selectedCompany).then(Oa(e,"setContacts"))},loadSCSentInvitations:function(t){var e=t.commit,a=t.getters;return Ga(a.selectedCompany).then(Oa(e,"setCompanySentInvitations"))},loadUserReceivedInvitatios:function(t){var e=t.commit;return Ha().then(Oa(e,"setUserReceivedInvitatios"))},inviteContact:function(t,e){var a=t.commit,n=t.getters;return Ya(n.selectedCompany,e).then(Oa(a,"addInvitation"))},acceptContactInvitation:function(t,e){var a=t.commit,n=e.company,r=e.invitation;return Wa(n,r).then(Oa(a,"acceptInvitation"))},rejectContactInvitation:function(t,e){var a=t.commit,n=e.company,r=e.invitation;return Qa(n,r).then(Oa(a,"rejectInvitation"))}},getters:Xa};r.a.use(c.a);var en=new c.a.Store({modules:{userStore:aa,companyStore:Ra,collaboratorStore:Ka,contactStore:tn,nomenclatureStore:Ie}});p.a.defaults.baseURL="http://dev2.api.balanceshare.com",p.a.interceptors.request.use(function(t){t.headers=t.headers||{};var e=en.getters.token;return e&&(t.headers.Token=e),t}),p.a.interceptors.response.use(function(t){var e=t.headers;return e.token&&en.dispatch("setToken",e.token),t.data.data},function(t){var e=t.response;return 401===e.status?(en.dispatch("clearout"),H.a.reject(new Error(e.statusText))):H.a.reject(t)});var an=a("TXmL"),nn=a("UpdR"),rn=a.n(nn),on=a("YFeG"),sn=a.n(on),ln={en:rn.a,bg:sn.a};r.a.use(an.a);var cn=new an.a({locale:"en",messages:ln,fallbackLocale:"en"}),dn={data:function(){return{i18n:{lang:this.$t("lang")},isDev:!0,buildTimestamp:"Sat, 31 Mar 2018 22:19:43 GMT"}},methods:{test:function(){console.log("TEST")},logout:function(){this.$store.dispatch("logout")}},computed:{user:function(){return this.$store.getters.user}},watch:{"$i18n.locale":function(){this.i18n.lang=this.$t("lang")}}},un={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("body",{class:{debug:t.isDev}},[a("header",[a("b-navbar",{attrs:{toggleable:"md",type:"light",variant:"light",id:"top-bar"}},[a("b-navbar-brand",{attrs:{to:"/"}},[t._v("Balance Share")]),t._v(" "),a("b-navbar-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),a("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[t.user?t._e():a("b-navbar-nav",[a("b-nav-item",{attrs:{to:"/login"}},[t._v("Login")]),t._v(" "),a("b-nav-item",{attrs:{to:"/register"}},[t._v("Register")])],1),t._v(" "),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item-dropdown",{attrs:{text:"DEV PAGES",right:""}},[a("b-dropdown-item",{attrs:{to:"/prototype/nomenclatures",exact:""}},[t._v("Nomenclatures")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/matching-tool",exact:""}},[t._v("Matching Tool")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/forgot"}},[t._v("Forgot pass")]),t._v(" "),a("b-dropdown-item",{attrs:{to:"/reset"}},[t._v("Reset pass")])],1),t._v(" "),a("b-nav-item-dropdown",{attrs:{text:t.i18n.lang,right:""}},[a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="en"}}},[t._v("English")]),t._v(" "),a("b-dropdown-item",{on:{click:function(e){t.$i18n.locale="bg"}}},[t._v("Български")])],1),t._v(" "),t.user?[a("b-nav-item-dropdown",{attrs:{text:t.user.name,right:""}},[a("b-dropdown-item",{attrs:{to:"/change"}},[t._v(t._s(t.$t("Change Password")))])],1),t._v(" "),a("b-nav-item",{on:{click:t.logout}},[t._v(t._s(t.$t("Logout")))])]:t._e()],2)],1)],1)],1),t._v(" "),a("router-view"),t._v(" "),a("footer"),t._v(" "),t.isDev?a("div",{attrs:{id:"dev-toolbox"}},[a("b-btn",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapseDevToolbox",modifiers:{collapseDevToolbox:!0}}],attrs:{variant:"outline-danger"}},[t._v("* Dev Toolbox")]),t._v(" "),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapseDevToolbox"}},[a("b-card",[a("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.test}},[t._v("Test Action")]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[t._v("\n          "+t._s(t.buildTimestamp)+"\n        ")])])],1)],1):t._e()],1)},staticRenderFns:[]},mn=a("VU/8")(dn,un,!1,null,null,null).exports,pn={render:function(){var t=this.$createElement,e=this._self._c||t;return this.loading?e("div",{staticClass:"loading"},[e("img",{attrs:{src:"/static/images/loading.gif"}})]):this._e()},staticRenderFns:[]},vn=a("VU/8")({props:["loading"]},pn,!1,null,null,null).exports,fn=a("OfYj"),hn={props:{options:{type:[Array],default:function(){return[]}},valueField:{type:String,default:"id"},textField:{type:String,default:"label"},disabledField:{type:String,default:"disabled"}},computed:{formOptions:function(){var t=this.options||[],e=this.valueField,a=this.textField,n=this.disabledField;return t.map(function(t){return Bt.isObject(t)?{value:t[e],text:String(t[a]),disabled:t[n]||!1}:{text:String(t),value:t,disabled:!1}})}}},gn=a("/gqF"),_n=a("60E9"),bn=a("TMTb"),yn=a("dfnb"),Cn=a("GnGf"),$n={mixins:[fn.a,gn.a,_n.a,bn.a,yn.a,hn],render:function(t){var e=this,a=e.$slots,n=e.formOptions.map(function(e,a){return t("option",{key:"option_"+a+"_opt",attrs:{disabled:Boolean(e.disabled)},domProps:{innerHTML:e.text,value:e.value}})});return t("select",{ref:"input",class:e.inputClass,directives:[{name:"model",rawName:"v-model",value:e.localValue?e.localValue[this.valueField]:e.localValue,expression:"localValue"}],attrs:{id:e.safeId(),name:e.name,multiple:e.multiple||null,size:e.isMultiple?e.selectSize:null,disabled:e.disabled,required:e.required,"aria-required":e.required?"true":null,"aria-invalid":e.computedAriaInvalid},on:{change:function(t){var a=t.target,n=Object(Cn.c)(a.options).reduce(function(t,e,a){return e.selected&&t.push(a),t},[]);e.localValue=a.multiple?n:e.allOptions[n[0]],e.$emit("change",e.localValue)}}},[a.first,n,a.default])},data:function(){return{localValue:this.value}},watch:{value:function(t,e){this.localValue=t},localValue:function(t,e){this.$emit("input",this.localValue)}},props:{value:{},multiple:{type:Boolean,default:!1},selectSize:{type:Number,default:0},ariaInvalid:{type:[Boolean,String],default:!1},slotOptions:{type:[Array],default:function(){return[]}}},computed:{inputClass:function(){return["form-control",this.stateClass,this.sizeFormClass,this.isPlain?null:"custom-select",this.isPlain||!this.size?null:"custom-select-"+this.size]},isPlain:function(){return this.plain||this.isMultiple},isMultiple:function(){return Boolean(this.multiple&&this.selectSize>1)},computedAriaInvalid:function(){return!0===this.ariaInvalid||"true"===this.ariaInvalid?"true":"is-invalid"===this.stateClass?"true":null},allOptions:function(){return this.options.concat(this.slotOptions)}}};a("pQP2");r.a.config.productionTip=!1,r.a.use(o.a),r.a.use(i.a),r.a.use(l.a),r.a.component("loading",vn),r.a.component("c-form-select",$n),en.dispatch("loadUserCash"),new r.a({el:"#app",router:ea,store:en,i18n:cn,render:function(t){return t(mn)}})},UpdR:function(t,e){t.exports={lang:"EN",Name:"Name",Email:"Email",Phone:"Phone"}},YFeG:function(t,e){t.exports={lang:"БГ",Name:"Име",Email:"Имейл",Phone:"Телефон"}},pQP2:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c947f3aec3bb39707c72.js.map